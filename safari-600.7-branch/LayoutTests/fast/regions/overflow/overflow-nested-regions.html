<html>
<head>
    <script type="text/javascript">
        function onBodyLoad() {
            if (window.testRunner) {
                

                // Test selection on the overflow below the last region.
                var region = document.getElementById("regionRed");
                var startPositionX = region.offsetLeft + 70;
                var startPositionY = region.offsetTop + 15;
                var endPositionX = startPositionX + 100;
                var endPositionY = startPositionY + 150;

                eventSender.mouseMoveTo(startPositionX, startPositionY);
                eventSender.mouseDown();
                eventSender.mouseMoveTo(endPositionX, endPositionY);
                eventSender.mouseUp();

                var elemResult = document.getElementById("result");
                var result = "FAIL";
                var selection = window.getSelection();
                if (selection.toString() == "or ligula. Cras tempor sem sed tellus convallis tincidunt eget eget dolor. In facilisis ante at turpis semper semper. Curabitur vulputate aliquet tincidunt. Quisque sit amet massa justo, in bibendum leo. Aliquam lacinia pharetra justo. Suspendisse rhoncus justo nec diam cursus ullamcorper. Nam porttitor porttitor libero, convallis sollicitudin nunc euismod at. Proin tempus")
                    result = "PASS";

                elemResult.className = result;
                elemResult.innerHTML = "Automated selection test: " + result;

                // Clear selection.
                eventSender.mouseMoveTo(startPositionX, startPositionY);
                eventSender.mouseDown();
                eventSender.mouseUp();
            }
        }
    </script>

    <style>
        #contentBlue {
            -webkit-flow-into: flowBlue;
            color: blue;
        }

        #contentRed {
            -webkit-flow-into: flowRed;
            color: red;
        }

        #regionBlue {
            border: thick solid blue;
            -webkit-flow-from: flowBlue;
            width: 400px;
            height: 213px;
        }

        #regionRed {
            width: 300px;
            border: thick solid red;
            -webkit-flow-from: flowRed;
            max-height: 50px;
            padding: 5px;
        }

        .region_container {
            border: thin solid black;
            overflow: visible;
            padding: 10px;
            height: 260px;
        }

        .PASS {
            color: green;
            font-weight: bold;
        }

        .FAIL {
            color: red;
            font-weight: bold;
        }

        .notrun {
            color: red;
            font-weight: bold;
        }

        #result {
            margin-top: 70px;
        }
    </style>
</head>
<body onload="onBodyLoad();">
    <p>Test that overflow content is correctly computed in nested regions.</p>
    <div class="content" id="contentBlue">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean urna orci, consequat sed lobortis in, convallis et velit. Ut elementum lacus ac dui vestibulum eu condimentum mi luctus. Fusce pharetra turpis id erat congue nec aliquam leo venenatis. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.
        <div class="regionRed" id="regionRed"></div>
    </div>
    <div class="content" id="contentRed">Ut at tortor ligula. Cras tempor sem sed tellus convallis tincidunt eget eget dolor. In facilisis ante at turpis semper semper. Curabitur vulputate aliquet tincidunt. Quisque sit amet massa justo, in bibendum leo. Aliquam lacinia pharetra justo. Suspendisse rhoncus justo nec diam cursus ullamcorper. Nam porttitor porttitor libero, convallis sollicitudin nunc euismod at. Proin tempus auctor turpis ut congue. Nullam ornare interdum eros sed suscipit.</div>
    <div class="region_container">
        <div class="regionBlue" id="regionBlue"></div>
    </div>

    <div id="result" class="notrun">Automated selection test: NOT RUN</div>
</body>
</html>
