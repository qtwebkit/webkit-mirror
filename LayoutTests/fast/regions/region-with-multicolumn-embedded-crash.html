<!DOCTYPE html>
<html>
<head>
<title>This test that region context cleanup with embedded flow content is done properly.</title>
<style>
	#article1 { 
        -webkit-flow-into: flow1;
	}
	
	#region1 {
        -webkit-flow-from: flow1;
	}
	
	#p1 {
        column-count: 2;
	}

	@-webkit-region #region1 {
        #p1 {
            color: red; 
        }
    }
</style>
<script>
	if (window.testRunner)
        testRunner.dumpAsText();
</script>
</head>
<body>
<p>PASS if no crash or assert in debug.</p>
<div id="article1">
	<p id="p1">X</p>
</div>
<div id="region1"></div>
<script>
	var iframe = document.createElement("iframe");
	document.head.parentNode.insertBefore(iframe, document.head.nextSibling);
	document.execCommand("SelectAll");
	document.designMode = "on";
	document.execCommand("JustifyCenter", false, null);
	var elem = document.getElementById("article1"); 
	elem.parentNode.removeChild(elem);
</script>
</body>
</html>
