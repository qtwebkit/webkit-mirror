2018-01-23  Jason Marcell  <jmarcell@apple.com>

        Cherry-pick r227425. rdar://problem/36791667

    2018-01-23  Brady Eidson  <beidson@apple.com>

            Allow passing MessagePorts across processes (e.g. ServiceWorkers).
            https://bugs.webkit.org/show_bug.cgi?id=181178

            Reviewed by Andy Estes.

            Re-baseline for many new passes and a few new failure modes.

            * web-platform-tests/service-workers/service-worker/ServiceWorkerGlobalScope/extendable-message-event.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/ServiceWorkerGlobalScope/postmessage.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/ServiceWorkerGlobalScope/registration-attribute.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/ServiceWorkerGlobalScope/unregister.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/claim-affect-other-registration.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/claim-fetch.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/claim-not-using-registration.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/claim-using-registration.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/claim-worker-fetch.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/client-id.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/clients-get-cross-origin.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/clients-get.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/clients-matchall-client-types.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/clients-matchall-exact-controller.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/clients-matchall-order.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/clients-matchall.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/extendable-event-async-waituntil.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/fetch-event-async-respond-with.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/fetch-event-respond-with-stops-propagation.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/fetch-event-throws-after-respond-with.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/fetch-request-css-base-url.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/fetch-request-css-images.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/fetch-request-fallback.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/fetch-request-no-freshness-headers.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/fetch-request-resources.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/immutable-prototype-serviceworker.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/registration-end-to-end.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/registration-events.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/skip-waiting-installed.https-expected.txt:

2018-01-22  Jason Marcell  <jmarcell@apple.com>

        Cherry-pick r227270. rdar://problem/36722650

    2018-01-20  Youenn Fablet  <youenn@apple.com>

            fetch redirect is incompatible with "no-cors" mode
            https://bugs.webkit.org/show_bug.cgi?id=181866
            <rdar://problem/35827140>

            Reviewed by Chris Dumez.

            * web-platform-tests/fetch/api/redirect/redirect-mode-expected.txt:
            * web-platform-tests/fetch/api/redirect/redirect-mode-worker-expected.txt:
            * web-platform-tests/fetch/api/redirect/redirect-mode.js:
            (redirectMode):
            * web-platform-tests/service-workers/service-worker/fetch-event-redirect.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/fetch-event-redirect.https.html:
            * web-platform-tests/service-workers/service-worker/fetch-request-redirect.https-expected.txt:

2018-01-22  Jason Marcell  <jmarcell@apple.com>

        Cherry-pick r227225. rdar://problem/36722527

    2018-01-19  Joseph Pecoraro  <pecoraro@apple.com>

            AppCache: Log a Deprecation warning to the Console when AppCache is used
            https://bugs.webkit.org/show_bug.cgi?id=181778

            Reviewed by Alex Christensen.

            * web-platform-tests/html/browsers/offline/appcache/workers/appcache-worker-expected.txt:
            * web-platform-tests/html/browsers/offline/introduction-4/event_cached-expected.txt:
            * web-platform-tests/html/browsers/offline/introduction-4/event_checking-expected.txt:
            * web-platform-tests/html/browsers/offline/introduction-4/event_noupdate-expected.txt:
            * web-platform-tests/html/browsers/offline/introduction-4/event_progress-expected.txt:
            * web-platform-tests/html/browsers/offline/manifest_url_check-expected.txt:
            * web-platform-tests/service-workers/service-worker/appcache-ordering-main.https-expected.txt:

2018-01-12  Jason Marcell  <jmarcell@apple.com>

        Cherry-pick r226745. rdar://problem/36392368

    2018-01-10  Youenn Fablet  <youenn@apple.com>

            Use no-cache fetch mode when loading main documents with location.reload()
            https://bugs.webkit.org/show_bug.cgi?id=181285

            Reviewed by Alex Christensen.

            * web-platform-tests/service-workers/service-worker/fetch-event.https-expected.txt:

2018-01-12  Jason Marcell  <jmarcell@apple.com>

        Cherry-pick r226792. rdar://problem/36450742

    2018-01-11  Youenn Fablet  <youenn@apple.com>

            Redirected iframe loading with Request.redirect=follow should fail
            https://bugs.webkit.org/show_bug.cgi?id=181491

            Reviewed by Alex Christensen.

            Updated tests to output a more deterministic output, more debuggable.
            Made use of media.js to allow loading either oga or mp3 when oga is not supported.

            * web-platform-tests/service-workers/service-worker/fetch-request-redirect.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/fetch-request-redirect.https.html:

2018-01-11  Jason Marcell  <jmarcell@apple.com>

        Cherry-pick r226646. rdar://problem/36429142

    2018-01-09  Youenn Fablet  <youenn@apple.com>

            [iOS Debug WK2] Layout Test imported/w3c/web-platform-tests/service-workers/service-worker/register-closed-window.https.html is flaky
            https://bugs.webkit.org/show_bug.cgi?id=181087
            <rdar://problem/36188109>

            Reviewed by Chris Dumez.

            Updated test to get a more deterministic output.

            * web-platform-tests/service-workers/service-worker/register-closed-window.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/resources/register-closed-window-iframe.html:

2018-01-09  Jason Marcell  <jmarcell@apple.com>

        Cherry-pick r226628. rdar://problem/36392341

    2018-01-09  Youenn Fablet  <youenn@apple.com>

            Add CSP support to service workers
            https://bugs.webkit.org/show_bug.cgi?id=181385

            Reviewed by Chris Dumez.

            * web-platform-tests/service-workers/service-worker/service-worker-csp-connect.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/service-worker-csp-default.https-expected.txt:
            * web-platform-tests/service-workers/service-worker/service-worker-csp-script.https-expected.txt:

2018-01-08  Ms2ger  <Ms2ger@igalia.com>

        Update imagebitmap tests.
        https://bugs.webkit.org/show_bug.cgi?id=181379

        Unreviewed test gardening.

        * web-platform-tests/2dcontext/imagebitmap/common.js:
        * web-platform-tests/2dcontext/imagebitmap/createImageBitmap-drawImage-expected.txt:
        * web-platform-tests/2dcontext/imagebitmap/createImageBitmap-drawImage.html:
        * web-platform-tests/2dcontext/imagebitmap/createImageBitmap-invalid-args-expected.txt:
        * web-platform-tests/2dcontext/imagebitmap/createImageBitmap-invalid-args.html:

2018-01-07  Ms2ger  <Ms2ger@igalia.com>

        Implement createImageBitmap(ImageBitmap)
        https://bugs.webkit.org/show_bug.cgi?id=181287

        Reviewed by Darin Adler.

        * web-platform-tests/2dcontext/imagebitmap/createImageBitmap-drawImage-expected.txt: rebaseline.

2018-01-05  Alex Christensen  <achristensen@webkit.org>

        Forbid < and > in URL hosts
        https://bugs.webkit.org/show_bug.cgi?id=181308
        <rdar://problem/36012757>

        Reviewed by Tim Horton.

        * web-platform-tests/url/a-element-expected.txt:
        * web-platform-tests/url/a-element-origin-expected.txt:
        * web-platform-tests/url/a-element-origin-xhtml-expected.txt:
        * web-platform-tests/url/a-element-xhtml-expected.txt:
        * web-platform-tests/url/url-constructor-expected.txt:
        * web-platform-tests/url/url-origin-expected.txt:

2018-01-05  Youenn Fablet  <youenn@apple.com>

        Skip LayoutTests/imported/w3c/web-platform-tests/service-workers/service-worker/claim-shared-worker-fetch.https.html
        https://bugs.webkit.org/show_bug.cgi?id=181329

        Unreviewed.

        * web-platform-tests/service-workers/service-worker/claim-shared-worker-fetch.https-expected.txt: Removed.

2018-01-05  Youenn Fablet  <youenn@apple.com>

        LayoutTests/imported/w3c/web-platform-tests/service-workers/service-worker/fetch-event.https.html should not expect Upgrade-Insecure Requests header
        https://bugs.webkit.org/show_bug.cgi?id=181286

        Reviewed by Alex Christensen.

        Test previously expected upgrade-insecure-requests header to be inserted in a HTTP request.
        Given the request URL is HTTPS, there is no need for that header.

        * web-platform-tests/service-workers/service-worker/fetch-event.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/fetch-event.https.html:

2018-01-04  Youenn Fablet  <youenn@apple.com>

        FetchResponse should set its internal response text encoding name
        https://bugs.webkit.org/show_bug.cgi?id=181284

        Reviewed by Alex Christensen.

        * web-platform-tests/service-workers/service-worker/fetch-event.https-expected.txt:

2018-01-04  Youenn Fablet  <youenn@apple.com>

        Service Worker should expose redirect mode for navigation loads as manual
        https://bugs.webkit.org/show_bug.cgi?id=181067

        Reviewed by Alex Christensen.

        Updating test to match the latest fetch spec.

        * web-platform-tests/service-workers/service-worker/navigation-redirect-to-http.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/request-end-to-end.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/request-end-to-end.https.html:

2018-01-04  Youenn Fablet  <youenn@apple.com>

        Implement  https://fetch.spec.whatwg.org/#main-fetch default referrer policy setting
        https://bugs.webkit.org/show_bug.cgi?id=181239

        Reviewed by Alex Christensen.

        Updated test to output more tests for better error reporting.
        Also updated to relax the settings so that HTTP loads are done even though the page is HTTPS.
        Updated referrer computation since it should be done based on the fetch context and not its parent context.

        * web-platform-tests/service-workers/service-worker/fetch-event-referrer-policy.https-expected.txt:
        * web-platform-tests/service-workers/service-worker/fetch-event-referrer-policy.https.html:

2018-01-02  Youenn Fablet  <youenn@apple.com>

        Memory cache should not reuse resources with different credential fetch option
        https://bugs.webkit.org/show_bug.cgi?id=181212

        Reviewed by Alex Christensen.

        * web-platform-tests/service-workers/service-worker/fetch-cors-xhr.https-expected.txt:

2018-01-02  Jiewen Tan  <jiewen_tan@apple.com>

        Update Credential Management API for WebAuthentication
        https://bugs.webkit.org/show_bug.cgi?id=181082
        <rdar://problem/36055239>

        Reviewed by Brent Fulgham.

        * web-platform-tests/credential-management/credentialscontainer-create-basics.https-expected.txt:
        * web-platform-tests/credential-management/idl.https-expected.txt:

2018-01-02  Ms2ger  <Ms2ger@igalia.com>

        Update imported/w3c/web-platform-tests/html/browsers/windows/browsing-context.html from upstream wpt.
        https://bugs.webkit.org/show_bug.cgi?id=172255

        Unreviewed test gardening.

        * web-platform-tests/html/browsers/windows/browsing-context-expected.txt: rebaseline.
        * web-platform-tests/html/browsers/windows/browsing-context.html: update.

== Rolled over to ChangeLog-2018-01-01 ==
