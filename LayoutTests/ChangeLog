2019-04-25  Philippe Normand  <pnormand@igalia.com>

        [GStreamer] gst_element_get_state: assertion 'GST_IS_ELEMENT (element)' failed in WebCore::MediaPlayerPrivateGStreamer::paused
        https://bugs.webkit.org/show_bug.cgi?id=196691

        Reviewed by Eric Carlson.

        Unflag test no longer crashing.

        * platform/gtk/TestExpectations:
        * platform/gtk/fast/replaced/border-radius-clip-expected.txt:

2019-04-10  Philippe Normand  <pnormand@igalia.com>

        there is no vp8 support in youtube.com/html5 page with libwebkit2gtk 2.24 (MSE enabled)
        https://bugs.webkit.org/show_bug.cgi?id=196615

        Reviewed by Xabier Rodriguez-Calvar.

        Update WPE baselines and add/unskip the
        imported/w3c/web-platform-tests/html/semantics/embedded-content/media-elements/mime-types/canPlayType.html test in GTK.

        * platform/gtk/TestExpectations:
        * platform/gtk/imported/w3c/web-platform-tests/html/semantics/embedded-content/media-elements/mime-types/canPlayType-expected.txt: Copied from LayoutTests/platform/wpe/imported/w3c/web-platform-tests/html/semantics/embedded-content/media-elements/mime-types/canPlayType-expected.txt.
        * platform/wpe/imported/w3c/web-platform-tests/html/semantics/embedded-content/media-elements/mime-types/canPlayType-expected.txt:

2019-04-22  Carlos Garcia Campos  <cgarcia@igalia.com>

        REGRESSION(r241289): [GTK] accessibility/removed-continuation-element-causes-crash.html and accessibility/removed-anonymous-block-child-causes-crash.html crashes
        https://bugs.webkit.org/show_bug.cgi?id=194630

        Reviewed by Michael Catanzaro.

        Remove expectations for tests that are passing now.

        * platform/gtk/TestExpectations:

2019-04-11  Carlos Garcia Campos  <cgarcia@igalia.com>

        [GTK] Layout test accessibility/aria-hidden-false-works-in-subtrees.html fails after r184890
        https://bugs.webkit.org/show_bug.cgi?id=146718
        <rdar://problem/21722487>

        Reviewed by Joanmarie Diggs.

        Update test to ATK behavior, rebaseline it and remove the expectations.

        * accessibility/aria-hidden-false-works-in-subtrees.html:
        * platform/gtk/TestExpectations:
        * platform/gtk/accessibility/aria-hidden-false-works-in-subtrees-expected.txt:

2019-04-10  Carlos Garcia Campos  <cgarcia@igalia.com>

        [ATK] Defer the emision of AtkObject::children-changed signal after layout is done
        https://bugs.webkit.org/show_bug.cgi?id=187948

        Reviewed by Michael Catanzaro.

        Remove expectations of accessibility/children-changed-sends-notification.html that passes now.

        * platform/gtk/TestExpectations:

2019-04-10  Carlos Garcia Campos  <cgarcia@igalia.com>

        [ATK] Test accessibility/insert-children-assert.html is crashing since added in r216980
        https://bugs.webkit.org/show_bug.cgi?id=172281
        <rdar://problem/37030990>

        Reviewed by Joanmarie Diggs.

        Update the test to expect the whole content text on atk and remove the test expectations.

        * accessibility/insert-children-assert.html:
        * platform/gtk/TestExpectations:

2019-04-03  Myles C. Maxfield  <mmaxfield@apple.com>

        Documents can be destroyed before their CSSFontFaceSet is destroyed
        https://bugs.webkit.org/show_bug.cgi?id=195830

        Reviewed by Darin Adler.

        * fast/text/font-face-set-destroy-document-expected.html: Added.
        * fast/text/font-face-set-destroy-document.html: Added.

2019-03-26  Dean Jackson  <dino@apple.com>

        vertexAttribPointer must restrict offset parameter
        https://bugs.webkit.org/show_bug.cgi?id=196261
        <rdar://problem/48458086>

        Reviewed by Antoine Quint.

        Add a test where the offset parameter is out of bounds.

        * fast/canvas/webgl/vertexAttribPointer-with-bad-offset-expected.txt: Added.
        * fast/canvas/webgl/vertexAttribPointer-with-bad-offset.html: Added.

2019-03-21  Zalan Bujtas  <zalan@apple.com>

        Do not insert the first-letter anonymous container until after we've constructed the first-letter renderer.
        https://bugs.webkit.org/show_bug.cgi?id=195919
        <rdar://problem/48573434>

        Reviewed by Brent Fulgham.

        * fast/css/first-letter-and-float-crash-expected.txt: Added.
        * fast/css/first-letter-and-float-crash.html: Added.
        * platform/mac/TestExpectations:

2019-03-19  Ryosuke Niwa  <rniwa@webkit.org>

        appendChild should throw when inserting an ancestor of a template into its content adopted to another document
        https://bugs.webkit.org/show_bug.cgi?id=195984

        Reviewed by Darin Adler.

        Added a regression test.

        * fast/dom/insert-template-parent-into-adopted-content-expected.txt: Added.
        * fast/dom/insert-template-parent-into-adopted-content.html: Added.

2019-03-19  Ryosuke Niwa  <rniwa@webkit.org>

        Rebaseline the test after r243175. It got somehow landed with failing expectations.

        * fast/dom/replace-child-with-mutation-event-removal-and-circular-template-insertion-expected.txt:

2019-03-19  Ryosuke Niwa  <rniwa@webkit.org>

        Reparenting during a mutation event inside appendChild could result in a circular DOM tree
        https://bugs.webkit.org/show_bug.cgi?id=192825

        Reviewed by Zalan Bujtas.

        Added regression tests.

        * fast/dom/append-child-with-mutation-event-removal-and-circular-insertion-expected.txt: Added.
        * fast/dom/append-child-with-mutation-event-removal-and-circular-insertion.html: Added.
        * fast/dom/append-child-with-mutation-event-removal-and-circular-shadow-insertion-expected.txt: Added.
        * fast/dom/append-child-with-mutation-event-removal-and-circular-shadow-insertion.html: Added.
        * fast/dom/append-child-with-mutation-event-removal-and-circular-template-insertion-expected.txt: Added.
        * fast/dom/append-child-with-mutation-event-removal-and-circular-template-insertion.html: Added.
        * fast/dom/insert-child-with-mutation-event-removal-and-circular-insertion-expected.txt: Added.
        * fast/dom/insert-child-with-mutation-event-removal-and-circular-insertion.html: Added.
        * fast/dom/insert-child-with-mutation-event-removal-and-circular-shadow-insertion-expected.txt: Added.
        * fast/dom/insert-child-with-mutation-event-removal-and-circular-shadow-insertion.html: Added.
        * fast/dom/insert-child-with-mutation-event-removal-and-circular-template-insertion-expected.txt: Added.
        * fast/dom/insert-child-with-mutation-event-removal-and-circular-template-insertion.html: Added.
        * fast/dom/replace-child-with-mutation-event-removal-and-circular-insertion-expected.txt: Added.
        * fast/dom/replace-child-with-mutation-event-removal-and-circular-insertion.html: Added.
        * fast/dom/replace-child-with-mutation-event-removal-and-circular-shadow-insertion-expected.txt: Added.
        * fast/dom/replace-child-with-mutation-event-removal-and-circular-shadow-insertion.html: Added.
        * fast/dom/replace-child-with-mutation-event-removal-and-circular-template-insertion-expected.txt: Added.
        * fast/dom/replace-child-with-mutation-event-removal-and-circular-template-insertion.html: Added.

2019-03-14  Zalan Bujtas  <zalan@apple.com>

        Cleanup inline boxes when list marker gets blockified
        https://bugs.webkit.org/show_bug.cgi?id=195746
        <rdar://problem/48049175>

        Reviewed by Antti Koivisto.

        * fast/block/float/list-marker-is-float-crash-expected.txt: Added.
        * fast/block/float/list-marker-is-float-crash.html: Added.

2019-03-13  Zalan Bujtas  <zalan@apple.com>

        Use RenderBox::previousSiblingBox/nextSiblingBox in RenderMultiColumnFlow
        https://bugs.webkit.org/show_bug.cgi?id=195701
        <rdar://problem/48448658>

        Reviewed by Simon Fraser.

        * fast/ruby/crash-when-paginated-ruby-expected.txt: Added.
        * fast/ruby/crash-when-paginated-ruby.html: Added.

2019-03-13  Wenson Hsieh  <wenson_hsieh@apple.com>

        Fix an edge case where HTMLFormElement::removeFormElement is invoked twice with the same element
        https://bugs.webkit.org/show_bug.cgi?id=195663
        <rdar://problem/48576391>

        Reviewed by Ryosuke Niwa.

        Add a layout test to exercise the scenario described in the WebCore ChangeLog.

        * fast/forms/remove-associated-element-after-gc-expected.txt: Added.
        * fast/forms/remove-associated-element-after-gc.html: Added.

2019-04-03  Michael Catanzaro  <mcatanzaro@igalia.com>

        Get rid of HTMLInputElement::setEditingValue
        https://bugs.webkit.org/show_bug.cgi?id=196402

        Reviewed by Darin Adler.

        * fast/forms/editing-value-expected.txt: Removed.
        * fast/forms/editing-value-null-renderer-expected.txt: Removed.
        * fast/forms/editing-value-null-renderer.html: Removed.
        * fast/forms/editing-value.html: Removed.

2019-03-28  Carlos Garcia Campos  <cgarcia@igalia.com>

        [FreeType] Incorrect application of glyph positioning in the Y direction
        https://bugs.webkit.org/show_bug.cgi?id=161493

        Reviewed by Michael Catanzaro.

        Rebaseline fast/text/international/hebrew-vowels.html.

        * platform/gtk/fast/text/international/hebrew-vowels-expected.png:
        * platform/gtk/fast/text/international/hebrew-vowels-expected.txt:

2019-03-18  Philippe Normand  <pnormand@igalia.com>

        [GStreamer] Rewrite HTTP source element using pushsrc base class
        https://bugs.webkit.org/show_bug.cgi?id=195631

        Reviewed by Xabier Rodriguez-Calvar.

        * platform/gtk/TestExpectations:
        * platform/gtk/http/tests/media/hls/video-controls-live-stream-expected.txt:
        Update expectations, though it's not really related with this
        patch.

2019-03-26  Philippe Normand  <pnormand@igalia.com>

        [GStreamer] Sound loop with Google Hangouts and WhatsApp notifications
        https://bugs.webkit.org/show_bug.cgi?id=189471

        Reviewed by Xabier Rodriguez-Calvar.

        * platform/gtk/TestExpectations:
        * platform/gtk/media/video-playing-and-pause-expected.txt:

2019-03-22  Alicia Boya García  <aboya@igalia.com>

        [MSE][GStreamer] Don't construct segments on PlaybackPipeline::flush
        https://bugs.webkit.org/show_bug.cgi?id=195867

        Reviewed by Xabier Rodriguez-Calvar.

        Drawing an MSE video in a canvas seems to be failing in Mac. That
        functionality is necessary for the tests introduced with this patch,
        therefore they fail there. Marking them as Skip.

        * platform/mac/TestExpectations:

2019-03-20  Alicia Boya García  <aboya@igalia.com>

        [MSE][GStreamer] Fix handling of resolution changes in AppendPipeline
        https://bugs.webkit.org/show_bug.cgi?id=195855

        Reviewed by Xabier Rodriguez-Calvar.

        * media/media-source/content/test-green-6s-320x240.mp4: Added.
        * media/media-source/content/test-red-3s-480x360.mp4: Added.
        * media/media-source/media-source-samples-resolution-change-expected.txt: Added.
        * media/media-source/media-source-samples-resolution-change.html: Added.

2019-03-19  Alicia Boya García  <aboya@igalia.com>

        [MSE] Use tolerance in eraseBeginTime
        https://bugs.webkit.org/show_bug.cgi?id=195911

        Reviewed by Jer Noble.

        * media/media-source/media-source-append-twice-overlapping-sync-frame-expected.txt: Added.
        * media/media-source/media-source-append-twice-overlapping-sync-frame.html: Added.

2019-03-12  Dean Jackson  <dino@apple.com>

        [WebGL] WebGLBuffer can be too large
        https://bugs.webkit.org/show_bug.cgi?id=195068
        <rdar://problem/48414289>

        Reviewed by Antoine Quint.

        * fast/canvas/webgl/largeBuffer-expected.txt: Added.
        * fast/canvas/webgl/largeBuffer.html: Added.

2019-03-05  Said Abou-Hallawa  <sabouhallawa@apple.com>

        SVGPathSegList.insertItemBefore() should fail if the newItem belongs to an animating animPathSegList
        https://bugs.webkit.org/show_bug.cgi?id=195333
        <rdar://problem/48475802>

        Reviewed by Simon Fraser.

        * svg/dom/SVGPathSegList-insert-from-animating-animPathSegList-expected.txt: Added.
        * svg/dom/SVGPathSegList-insert-from-animating-animPathSegList.svg: Added.

2019-03-06  Wenson Hsieh  <wenson_hsieh@apple.com>

        Crash when attempting to change input type while dismissing datalist suggestions
        https://bugs.webkit.org/show_bug.cgi?id=195384
        <rdar://problem/48563718>

        Reviewed by Brent Fulgham.

        Add a new layout test to exercise this scenario.

        * fast/forms/datalist/change-input-type-after-closing-datalist-suggestions-expected.txt: Added.
        * fast/forms/datalist/change-input-type-after-closing-datalist-suggestions.html: Added.

2019-03-02  Darin Adler  <darin@apple.com>

        Retire legacy dtoa function and DecimalNumber class
        https://bugs.webkit.org/show_bug.cgi?id=195253

        Reviewed by Daniel Bates.

        * fast/css/large-value-csstext-expected.txt:
        * media/modern-media-controls/macos-inline-media-controls/macos-inline-media-controls-volume-styles-expected.txt:
        * media/modern-media-controls/macos-inline-media-controls/macos-inline-media-controls-volume-styles.html:
        Updated expected value to expect exponential syntax for super-small numbers that are formatted
        differently by the new code.

        * platform/ios/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-expected.txt:
        * platform/ios/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-expected.txt:
        * platform/ios/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-expected.txt:
        Rebaseline still-failing parts of these tests that dump super-small numbers that are formatted
        differently by the new code. Still probably needs to be done for 4 other platforms.

2019-03-01  Wenson Hsieh  <wenson_hsieh@apple.com>

        [Datalist] fast/forms/datalist/datalist-child-validation.html crashes with a debug assertion in isValidFormControlElement()
        https://bugs.webkit.org/show_bug.cgi?id=190620
        <rdar://problem/19226679>

        Reviewed by Ryosuke Niwa.

        Re-enables a crashing layout test. See WebCore ChangeLog for more details.

        * platform/ios/TestExpectations:
        * platform/mac/TestExpectations:

2019-02-28  Myles C. Maxfield  <mmaxfield@apple.com>

        Use-after-move in RenderCombineText::combineTextIfNeeded()
        https://bugs.webkit.org/show_bug.cgi?id=195188

        Reviewed by Zalan Bujtas.

        * fast/text/text-combine-crash-2-expected.html: Added.
        * fast/text/text-combine-crash-2.html: Added.

2019-02-27  Ulrich Pflueger  <up@nanocosmos.de>

        [MSE] SourceBuffer sample time increment vs. last frame duration check is broken
        https://bugs.webkit.org/show_bug.cgi?id=194747
        <rdar://problem/48148469>

        Reviewed by Jer Noble.

        * media/media-source/media-source-append-variable-frame-lengths-with-matching-durations-expected.txt: Added.
        * media/media-source/media-source-append-variable-frame-lengths-with-matching-durations.html: Added.

2019-02-26  Wenson Hsieh  <wenson_hsieh@apple.com>

        Remove conditional compile guard for InsertIntoTextNodeCommand::doReapply
        https://bugs.webkit.org/show_bug.cgi?id=195067
        <rdar://problem/44812080>

        Reviewed by Tim Horton.

        Add a new layout test to verify that redoing text insertion in a non-editable element (which was previously
        editable) does not mutate the text nodes affected by editing. This test case currently fails on iOS, since we
        take a separate codepath when redoing that does not contain this additional check.

        * editing/undo/redo-text-insertion-in-non-editable-node-expected.txt: Added.
        * editing/undo/redo-text-insertion-in-non-editable-node.html: Added.

2019-02-25  Sihui Liu  <sihui_liu@apple.com>

        IndexedDB: IDBDatabase and IDBTransaction are leaked in layout tests
        https://bugs.webkit.org/show_bug.cgi?id=194709

        Reviewed by Geoffrey Garen.

        * TestExpectations:
        * platform/wk2/TestExpectations:
        * storage/indexeddb/IDBObject-leak-expected.txt: Added.
        * storage/indexeddb/IDBObject-leak.html: Added.

2019-02-22  Rob Buis  <rbuis@igalia.com>

        Fix unitless usage of mathsize
        https://bugs.webkit.org/show_bug.cgi?id=194940

        Reviewed by Frédéric Wang.

        Tests lengths-1.html and length-3.html now pass.

        * TestExpectations:

2019-02-21  Darin Adler  <darin@apple.com>

        Some refinements for Node and Document
        https://bugs.webkit.org/show_bug.cgi?id=194764

        Reviewed by Ryosuke Niwa.

        fast/forms/access-key-shadow-and-ordering-expected.txt: Added.
        fast/forms/access-key-shadow-and-ordering.html: Added.

2019-02-20  Said Abou-Hallawa  <sabouhallawa@apple.com>

        drawImage() clears the canvas if it's the source of the image and globalCompositeOperation is "copy"
        https://bugs.webkit.org/show_bug.cgi?id=194746

        Reviewed by Dean Jackson.

        * fast/canvas/canvas-drawImage-composite-copy-expected.html: Added.
        * fast/canvas/canvas-drawImage-composite-copy.html: Added.

2019-02-20  Loïc Yhuel  <loic.yhuel@softathome.com>

        Fix crash when opening Web Inspector after a WebSocket was blocked by content extensions
        https://bugs.webkit.org/show_bug.cgi?id=194819

        Reviewed by Joseph Pecoraro.

        * TestExpectations: Skip the test by default, like http/tests/contentextensions
        * http/tests/inspector/network/contentextensions/blocked-websocket-crash-expected.txt: Added.
        * http/tests/inspector/network/contentextensions/blocked-websocket-crash.html: Added.
        * http/tests/inspector/network/contentextensions/blocked-websocket-crash.html.json: Added.
        * platform/gtk/TestExpectations: Unskip the test
        * platform/mac-wk2/TestExpectations: Ditto
        * platform/wpe/TestExpectations: Ditto

2019-02-19  Simon Fraser  <simon.fraser@apple.com>

        REGRESSION (r238090): Toggling visibility on the <html> element can result in a blank web view
        https://bugs.webkit.org/show_bug.cgi?id=194827
        rdar://problem/47620594

        Reviewed by Antti Koivisto.

        Test dumps layer tree with RenderLayerBacking::shouldDumpPropertyForLayer to show that the root has (drawsContent 1)

        * compositing/visibility/root-visibility-toggle-expected.txt: Added.
        * compositing/visibility/root-visibility-toggle.html: Added.
        * platform/mac-wk1/compositing/visibility/root-visibility-toggle-expected.txt: Added.

2019-02-19  Ryosuke Niwa  <rniwa@webkit.org>

        REGRESSION(r240909): Release assertion in FrameLoader::loadPostRequest when opening new window
        https://bugs.webkit.org/show_bug.cgi?id=194820

        Reviewed by Geoffrey Garen.

        Added a regression test.

        * fast/loader/navigate-with-post-to-new-target-after-back-forward-navigation-expected.txt: Added.
        * fast/loader/navigate-with-post-to-new-target-after-back-forward-navigation.html: Added.

2019-02-18  John Wilander  <wilander@apple.com>

        Check the existence of the frame in Document::hasFrameSpecificStorageAccess() and Document::setHasFrameSpecificStorageAccess()
        https://bugs.webkit.org/show_bug.cgi?id=194777
        <rdar://problem/47731945>

        Reviewed by Geoffrey Garen and Chris Dumez.

        * http/tests/storageAccess/remove-requesting-iframe-expected.txt: Added.
        * http/tests/storageAccess/remove-requesting-iframe.html: Added.
        * http/tests/storageAccess/resources/request-storage-access-and-immediately-postmessage-iframe.html: Added.

2019-02-17  Matt Baker  <mattbaker@apple.com>

        Web Inspector: Frontend performance is very slow reloading theverge.com - 50% of time in TreeOutline _indexOfTreeElement
        https://bugs.webkit.org/show_bug.cgi?id=193605
        <rdar://problem/47403986>

        Reviewed by Devin Rousso.

        * inspector/table/resources/table-utilities.js:
        (TestPage.registerInitializer.InspectorTest.TableDataSource.prototype.tableIndexForRepresentedObject):
        (TestPage.registerInitializer.InspectorTest.TableDataSource.prototype.tableRepresentedObjectForIndex):
        (TestPage.registerInitializer.InspectorTest.TableDataSource):
        New Table data source methods.

        * inspector/unit-tests/index-set-expected.txt: Removed.
        * inspector/unit-tests/index-set.html: Removed.
        * inspector/unit-tests/set-utilities-expected.txt:
        * inspector/unit-tests/set-utilities.html:
        Remove IndexSet tests and update tests for Set utilities to include new
        helper methods `equals` and `difference`, and `firstValue`.

2019-02-16  Zalan Bujtas  <zalan@apple.com>

        [LFC] Apply min/max width constraints to preferred width computation
        https://bugs.webkit.org/show_bug.cgi?id=194739

        Reviewed by Simon Fraser.

        * fast/block/block-only/min-max-and-preferred-width-simple-expected.html: Added.
        * fast/block/block-only/min-max-and-preferred-width-simple.html: Added.

2019-02-15  Ryosuke Niwa  <rniwa@webkit.org>

        Crash in the hit testing code via HTMLPlugInElement::isReplacementObscured()
        https://bugs.webkit.org/show_bug.cgi?id=194691

        Reviewed by Simon Fraser.

        Added a regression test. It hits the newly added debug assertion without the fix.

        * platform/mac-wk1/TestExpectations: Skip the test since DumpRenderTree doesn't support
        testRunner.setPluginSupportedMode.
        * plugins/unsupported-plugin-with-replacement-in-iframe-crash-expected.txt: Added.
        * plugins/unsupported-plugin-with-replacement-in-iframe-crash.html: Added.

2019-02-15  Nikita Vasilyev  <nvasilyev@apple.com>

        Web Inspector: Styles: valid values in style attributes are reported as unsupported property values
        https://bugs.webkit.org/show_bug.cgi?id=194619
        <rdar://problem/47917373>

        Reviewed by Devin Rousso and Joseph Pecoraro.

        * inspector/css/modify-inline-style-expected.txt: Added.
        * inspector/css/modify-inline-style.html: Added.

2019-02-15  Per Arne Vollan  <pvollan@apple.com>

        [WebVTT] Inline WebVTT styles should start with '::cue'
        https://bugs.webkit.org/show_bug.cgi?id=194227

        Reviewed by Eric Carlson.

        Add invalid 'STYLE' blocks which the WebVTT parser should reject.

        * media/track/captions-webvtt/css-styling.vtt:

2019-02-15  Zalan Bujtas  <zalan@apple.com>

        [LFC] Out-of-flow box is never a float box
        https://bugs.webkit.org/show_bug.cgi?id=194704

        Reviewed by Antti Koivisto.

        * fast/block/block-only/out-of-flow-is-never-float-box-expected.html: Added.
        * fast/block/block-only/out-of-flow-is-never-float-box.html: Added.

2019-02-14  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r241497.
        https://bugs.webkit.org/show_bug.cgi?id=194676

        New test times out (Requested by NVI on #webkit).

        Reverted changeset:

        "Web Inspector: Styles: valid values in style attributes are
        reported as unsupported property values"
        https://bugs.webkit.org/show_bug.cgi?id=194619
        https://trac.webkit.org/changeset/241497

2019-02-14  Zalan Bujtas  <zalan@apple.com>

        [LFC][BFC][MarginCollapse] Replaced boxes don't collapse through their margins
        https://bugs.webkit.org/show_bug.cgi?id=194622

        Reviewed by Antti Koivisto.

        * fast/block/block-only/block-replaced-with-vertical-margins-expected.html: Added.
        * fast/block/block-only/block-replaced-with-vertical-margins.html: Added.

2019-02-13  Ryosuke Niwa  <rniwa@webkit.org>

        Crash in DOMTimer::fired
        https://bugs.webkit.org/show_bug.cgi?id=194638

        Reviewed by Brent Fulgham.

        Added a regression test. It needs debug assertions without the fix.

        * fast/dom/timer-destruction-during-firing-expected.txt: Added.
        * fast/dom/timer-destruction-during-firing.html: Added.

2019-02-13  Nikita Vasilyev  <nvasilyev@apple.com>

        Web Inspector: Styles: valid values in style attributes are reported as unsupported property values
        https://bugs.webkit.org/show_bug.cgi?id=194619
        <rdar://problem/47917373>

        Reviewed by Devin Rousso.

        * inspector/css/modify-inline-style-expected.txt: Added.
        * inspector/css/modify-inline-style.html: Added.

2019-02-13  Alicia Boya García  <aboya@igalia.com>

        Unreviewed GTK test gardening
        https://bugs.webkit.org/show_bug.cgi?id=194631

        * platform/gtk/TestExpectations:
        * platform/gtk/editing/pasteboard/smart-paste-007-expected.txt:
        * platform/gtk/editing/pasteboard/smart-paste-008-expected.txt:

2019-02-13  Jer Noble  <jer.noble@apple.com>

        Entering fullscreen inside a shadow root will not set fullscreen pseudoclasses outside of root
        https://bugs.webkit.org/show_bug.cgi?id=194516
        <rdar://problem/44678353>

        Reviewed by Antoine Quint.

        * fast/shadow-dom/fullscreen-in-shadow-full-screen-ancestor-expected.txt: Added.
        * fast/shadow-dom/fullscreen-in-shadow-full-screen-ancestor.html: Added.
        * platform/ios-wk2/TestExpectations:

2019-02-12  Jiewen Tan  <jiewen_tan@apple.com>

        Further restricting webarchive loads
        https://bugs.webkit.org/show_bug.cgi?id=194567
        <rdar://problem/47610130>

        Reviewed by Youenn Fablet.

        * platform/mac/fast/loader/webarchive-encoding-respected.html:
        * webarchive/loading/cache-expired-subresource.html:
        * webarchive/loading/javascript-url-iframe-crash.html:
        * webarchive/loading/mainresource-null-mimetype-crash.html:
        * webarchive/loading/missing-data.html:
        * webarchive/loading/object.html:
        * webarchive/loading/test-loading-archive-subresource-null-mimetype.html:
        * webarchive/loading/test-loading-archive-subresource.html:
        * webarchive/loading/test-loading-archive.html:
        * webarchive/loading/test-loading-top-archive.html:
        * webarchive/loading/video-in-webarchive.html:

2019-02-13  Sihui Liu  <sihui_liu@apple.com>

        Add two regression tests for reference cycle in IndexedDB
        https://bugs.webkit.org/show_bug.cgi?id=194527

        Reviewed by Geoffrey Garen.

        * fast/dom/reference-cycle-leaks.html:
        * platform/win/TestExpectations:
        The added tests are failing on win bots for unknown reasons, propably related to webkit.org/b/193540. Skip them 
        on win.

        * storage/indexeddb/resources/result-request-cycle.js: Added.
        (prepareDatabase):
        * storage/indexeddb/resources/value-cursor-cycle.js: Added.
        (prepareDatabase):
        (onOpen.cursorRequest.onsuccess):
        * storage/indexeddb/result-request-cycle-expected.txt: Added.
        * storage/indexeddb/result-request-cycle.html: Added.
        * storage/indexeddb/value-cursor-cycle-expected.txt: Added.
        * storage/indexeddb/value-cursor-cycle.html: Added.

2019-02-13  Fujii Hironori  <Hironori.Fujii@sony.com>

        [GTK][WPE] Don't use DumpJSConsoleLogInStdErr expectation in platform TestExpectations
        https://bugs.webkit.org/show_bug.cgi?id=194587

        Unreviewed gardening.

        * platform/gtk/TestExpectations: Removed DumpJSConsoleLogInStdErr markers which are marked in top TestExpectations.
        * platform/wpe/TestExpectations: Ditto.

2019-02-12  Dean Jackson  <dino@apple.com>

        BitmapRenderer should handle existing ImageBuffers
        https://bugs.webkit.org/show_bug.cgi?id=194555
        <rdar://problem/47857150>

        Reviewed by Tim Horton.

        Test that creates a canvas, triggers an ImageBuffer to be created, then
        creates the bitmaprenderer context.

        * fast/canvas/bitmaprenderer-created-after-toBlob-expected.txt: Added.
        * fast/canvas/bitmaprenderer-created-after-toBlob.html: Added.

2019-02-12  Alex Christensen  <achristensen@webkit.org>

        Remove setDefersLoading infrastructure from WebKit2
        https://bugs.webkit.org/show_bug.cgi?id=194506

        Reviewed by Brady Eidson.

        * platform/wk2/TestExpectations:

2019-02-12  Chris Fleizach  <cfleizach@apple.com>

        AX: Fix flaky accessibility/loading-iframe-sends-notification.html
        https://bugs.webkit.org/show_bug.cgi?id=194546

        Reviewed by Zalan Bujtas.

        This test was relying on timing between load events being sent and accessibility events being sent.
        We don't need to do that, we can more directly test this interplay.

        * accessibility/loading-iframe-sends-notification-expected.txt:
        * accessibility/loading-iframe-sends-notification.html:

2019-02-12  Adrian Perez de Castro  <aperez@igalia.com>

        Unreviewed WPE gardening. Unskip content extensions tests after r241283

        * platform/wpe/TestExpectations: Unskip content extensions tests, and list
        as failing those known to not pass due to missing expectaions or timeouts.

2019-02-08  Chris Fleizach  <cfleizach@apple.com>

        AXObjectCache::childrenChanged shouldn't update layout or style during another style recalc
        https://bugs.webkit.org/show_bug.cgi?id=182280
        <rdar://problem/37018386>

        Reviewed by Alan Bujtas.

        * accessibility/aria-hidden-update.html:
        * accessibility/aria-hidden-updates-alldescendants.html:
        * accessibility/image-load-on-delay.html:
        * accessibility/mac/aria-hidden-changes-for-non-ignored-elements.html:
        * accessibility/removed-anonymous-block-child-causes-crash.html:

2019-02-11  Myles C. Maxfield  <mmaxfield@apple.com>

        [Cocoa] Ask platform for generic font family mappings
        https://bugs.webkit.org/show_bug.cgi?id=187723
        <rdar://problem/41892438>

        Reviewed by Brent Fulgham.

        Update the tests to work with this new model.

        * fast/text/international/font-fallback-to-common-script-expected.html: Removed.
        * fast/text/international/font-fallback-to-common-script.html: Removed.
        * fast/text/international/lang-sensitive-fonts-expected.html:
        * fast/text/international/lang-sensitive-fonts-xml-expected.html:
        * fast/text/international/lang-sensitive-fonts-xml.xhtml:
        * fast/text/international/lang-sensitive-fonts.html:
        * fast/text/international/locale-sensitive-fonts-expected.html:
        * fast/text/international/locale-sensitive-fonts.html:
        * fast/text/ja-sans-serif-expected-mismatch.html: Added.
        * fast/text/ja-sans-serif.html: Added.
        * platform/ios/fast/block/float/016-expected.txt:

2019-02-11  Shawn Roberts  <sroberts@apple.com>

        Updating for all of Mac WK2 for flaky test
        https://bugs.webkit.org/show_bug.cgi?id=185994

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2019-02-11  Daniel Bates  <dabates@apple.com>

        [iOS] Adopt SPI to support Emacs bindings: transpose and delete to end of paragraph
        https://bugs.webkit.org/show_bug.cgi?id=194505
        <rdar://problem/47743533>

        Reviewed by Tim Horton.

        Add tests to ensure that Control + t and Control + k perform a transpose and delete to the
        end of the line/paragraph. Skip the tests for now until we have the UIKit fix <rdar://problem/44928156>.

        * fast/events/ios/key-command-delete-to-end-of-paragraph-expected.txt: Added.
        * fast/events/ios/key-command-delete-to-end-of-paragraph.html: Added.
        * fast/events/ios/key-command-transpose-expected.txt: Added.
        * fast/events/ios/key-command-transpose.html: Added.
        * platform/ios/TestExpectations: Skip tests for now.

2019-02-11  Adrian Perez de Castro  <aperez@igalia.com>

        [GTK][WPE] Add content extensions support in WKTR and unskip layout tests
        https://bugs.webkit.org/show_bug.cgi?id=193622

        Reviewed by Michael Catanzaro.

        * platform/gtk/TestExpectations: Un-skip tests for content extensions and add expectations.

2019-02-11  Daniel Bates  <dabates@apple.com>

        [iOS] Mouse/Touch/Pointer events are missing modifier keys
        https://bugs.webkit.org/show_bug.cgi?id=191446
        <rdar://problem/45929460>

        Reviewed by Tim Horton.

        Refactor existing iOS key events tests to share code. Add new tests to ensure touch and mouse events
        have accurate modifier key details.

        * fast/events/ios/key-events-meta-alt-combinations.html:
        * fast/events/ios/resources/key-tester.js:
        (computeSubsets.compareByModifierOrder): Deleted.
        * fast/events/resources/compute-subsets.js: Added.
        (computeSubsets.compareByOriginalArrayOrder):
        (computeSubsets):
        * fast/events/touch/ios/mouse-events-with-modifiers-expected.txt: Added.
        * fast/events/touch/ios/mouse-events-with-modifiers.html: Added.
        * fast/events/touch/ios/pointer-events-with-modifiers-expected.txt: Added.
        * fast/events/touch/ios/pointer-events-with-modifiers.html: Added.
        * fast/events/touch/ios/touch-events-with-modifiers-expected.txt: Added.
        * fast/events/touch/ios/touch-events-with-modifiers.html: Added.
        * http/tests/adClickAttribution/anchor-tag-attributes-validation-expected.txt: Update expected result
        due to changes to ui-helper.js.
        * http/tests/security/anchor-download-block-crossorigin-expected.txt: Ditto.
        * platform/ios/TestExpectations:
        * resources/ui-helper.js:
        (window.UIHelper.tapAt.return.new.Promise):
        (window.UIHelper.tapAt):
        (window.UIHelper.stylusTapAt.return.new.Promise):
        (window.UIHelper.stylusTapAt):

2019-02-11  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r241272 and r241276.
        https://bugs.webkit.org/show_bug.cgi?id=194514

        Broke the Apple Internal build and the fix requires human
        intervention :( (Requested by dydz on #webkit).

        Reverted changesets:

        "[iOS] Mouse/Touch/Pointer events are missing modifier keys"
        https://bugs.webkit.org/show_bug.cgi?id=191446
        https://trac.webkit.org/changeset/241272

        "Fix internal iOS build after r241272"
        https://bugs.webkit.org/show_bug.cgi?id=191446
        https://trac.webkit.org/changeset/241276

2019-02-11  Wenson Hsieh  <wenson_hsieh@apple.com>

        fast/forms/ios/force-gregorian-calendar-for-credit-card-expiry.html does not work on iPad
        https://bugs.webkit.org/show_bug.cgi?id=194313

        Reviewed by Tim Horton.

        Adjusts an existing layout test to work on both iPhone and iPad simulators.

        * fast/forms/ios/force-gregorian-calendar-for-credit-card-expiry-expected.txt:
        * fast/forms/ios/force-gregorian-calendar-for-credit-card-expiry.html:

        Make this test wait after blurring the currently focused element, such that tapping to focus the next form
        control doesn't fail. Notably on iPad, not waiting for the popover to dismiss meant that subsequent taps would
        be dispatched too soon, and hit-test to the popover view being dismissed rather than WKWebView.

        * platform/ipad/TestExpectations:

        Unskip the test on iPad.

        * resources/ui-helper.js:

        Add helpers to query whether or not the keyboard is shown, and whether or not a view controller is being modally
        presented over the current root view controller (this is the case when interacting with date pickers on iPad).

        (window.UIHelper.isShowingKeyboard):
        (window.UIHelper.isPresentingModally):
        (window.UIHelper.deactivateFormControl):

        Add a new helper method to blur the given form control element and wait for web view chrome to finish dismissing
        (on iOS, this is either the date picker input view in the keyboard on iPhone, or the date picker popover view
        controller on iPad).

        (window.UIHelper.isShowingDataListSuggestions):

        Drive-by fix: remove an extraneous ternary conditional statement.

2019-02-11  Daniel Bates  <dabates@apple.com>

        [iOS] Mouse/Touch/Pointer events are missing modifier keys
        https://bugs.webkit.org/show_bug.cgi?id=191446
        <rdar://problem/45929460>

        Reviewed by Tim Horton.

        Refactor existing iOS key events tests to share code. Add new tests to ensure touch and mouse events
        have accurate modifier key details.

        * fast/events/ios/key-events-meta-alt-combinations.html:
        * fast/events/ios/resources/key-tester.js:
        (computeSubsets.compareByModifierOrder): Deleted.
        * fast/events/resources/compute-subsets.js: Added.
        (computeSubsets.compareByOriginalArrayOrder):
        (computeSubsets):
        * fast/events/touch/ios/mouse-events-with-modifiers-expected.txt: Added.
        * fast/events/touch/ios/mouse-events-with-modifiers.html: Added.
        * fast/events/touch/ios/pointer-events-with-modifiers-expected.txt: Added.
        * fast/events/touch/ios/pointer-events-with-modifiers.html: Added.
        * fast/events/touch/ios/touch-events-with-modifiers-expected.txt: Added.
        * fast/events/touch/ios/touch-events-with-modifiers.html: Added.
        * http/tests/adClickAttribution/anchor-tag-attributes-validation-expected.txt: Update expected result
        due to changes to ui-helper.js.
        * http/tests/security/anchor-download-block-crossorigin-expected.txt: Ditto.
        * platform/ios/TestExpectations:
        * resources/ui-helper.js:
        (window.UIHelper.tapAt.return.new.Promise):
        (window.UIHelper.tapAt):
        (window.UIHelper.stylusTapAt.return.new.Promise):
        (window.UIHelper.stylusTapAt):

2019-02-11  Youenn Fablet  <youenn@apple.com>

        Filter out Overconstrainederror.constraint when getUserMedia is not granted
        https://bugs.webkit.org/show_bug.cgi?id=194240

        Reviewed by Eric Carlson.

        * fast/mediastream/overconstrainederror-constraint-expected.txt: Added.
        * fast/mediastream/overconstrainederror-constraint.html: Added.

2019-02-11  Truitt Savell  <tsavell@apple.com>

        Unreviewed, rolling out r241229.

        Revision broke internal builds for watchOS.

        Reverted changeset:

        "[Cocoa] Ask platform for generic font family mappings"
        https://bugs.webkit.org/show_bug.cgi?id=187723
        https://trac.webkit.org/changeset/241229

2019-02-11  Youenn Fablet  <youenn@apple.com>

        Make Request constructor throw if FetchRequestInit.signal is not undefined, null or an AbortSignal object
        https://bugs.webkit.org/show_bug.cgi?id=194404
        <rdar://problem/47891915>

        Reviewed by Geoffrey Garen.

        * http/wpt/fetch/request-abort-expected.txt:

2019-02-11  Zan Dobersek  <zdobersek@igalia.com>

        Unreviewed WPE gardening. Adding additional baselines after font variations
        enablement. Additionally rebaselining a couple other WPT and WebGL tests.

        * platform/wpe/TestExpectations:
        * platform/wpe/fast/css/getComputedStyle: Added.
        * platform/wpe/fast/css/getComputedStyle/computed-style-expected.txt: Added.
        * platform/wpe/fast/css/getComputedStyle/computed-style-font-family-expected.txt: Added.
        * platform/wpe/fast/css/getComputedStyle/computed-style-without-renderer-expected.txt: Added.
        * platform/wpe/fast/dom/52776-expected.txt:
        * platform/wpe/imported/w3c/web-platform-tests/fetch/api/redirect/redirect-method.any-expected.txt:
        * platform/wpe/imported/w3c/web-platform-tests/fetch/api/redirect/redirect-method.any.worker-expected.txt:
        * platform/wpe/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-expected.txt:
        * platform/wpe/svg/css/getComputedStyle-basic-expected.txt: Added.
        * platform/wpe/webgl/2.0.0/conformance/canvas/buffer-offscreen-test-expected.txt:
        * platform/wpe/webgl/2.0.0/conformance/canvas/buffer-preserve-test-expected.txt:
        * platform/wpe/webgl/2.0.0/conformance/context/context-attribute-preserve-drawing-buffer-expected.txt:

2019-02-10  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r241167.
        https://bugs.webkit.org/show_bug.cgi?id=194482

        Broke the GTK mediastream tests (Requested by philn on
        #webkit).

        Reverted changeset:

        "Filter out Overconstrainederror.constraint when getUserMedia
        is not granted"
        https://bugs.webkit.org/show_bug.cgi?id=194240
        https://trac.webkit.org/changeset/241167

2019-02-09  Nikita Vasilyev  <nvasilyev@apple.com>

        Web Inspector: fix typos in tests

        Unreviewed test gardening.

        * inspector/css/force-page-appearance.html:

2019-02-08  Myles C. Maxfield  <mmaxfield@apple.com>

        [Cocoa] Ask platform for generic font family mappings
        https://bugs.webkit.org/show_bug.cgi?id=187723
        <rdar://problem/41892438>

        Reviewed by Brent Fulgham.

        Update the tests to work with this new model.

        * fast/text/international/font-fallback-to-common-script-expected.html: Removed.
        * fast/text/international/font-fallback-to-common-script.html: Removed. This test is no longer testing
        anything relevant.
        * fast/text/international/lang-sensitive-fonts-expected.html:
        * fast/text/international/lang-sensitive-fonts-xml-expected.html:
        * fast/text/international/lang-sensitive-fonts-xml.xhtml:
        * fast/text/international/lang-sensitive-fonts.html:
        * fast/text/international/locale-sensitive-fonts-expected.html:
        * fast/text/international/locale-sensitive-fonts.html:
        * fast/text/ja-sans-serif-expected-mismatch.html: Added.
        * fast/text/ja-sans-serif.html: Added.

2019-02-08  Joseph Pecoraro  <pecoraro@apple.com>

        Web Inspector: Import / Export Heap Snapshots
        https://bugs.webkit.org/show_bug.cgi?id=194448
        <rdar://problem/47928093>

        Reviewed by Devin Rousso.

        * inspector/heap/imported-snapshot-expected.txt: Added.
        * inspector/heap/imported-snapshot.html: Added.
        * platform/mac/TestExpectations:

2019-02-08  Nikita Vasilyev  <nvasilyev@apple.com>

        Web Inspector: Styles: close unbalanced quotes and parenthesis when editing values
        https://bugs.webkit.org/show_bug.cgi?id=182523
        <rdar://problem/37260209>

        Reviewed by Devin Rousso.

        Test common cases of unmatched quotes, parenthesis, comments, and trailing backslashes.

        * inspector/unit-tests/css-completions-expected.txt: Added.
        * inspector/unit-tests/css-completions.html: Added.

2019-02-08  Per Arne Vollan  <pvollan@apple.com>

        Layout Test accessibility/set-value-not-work-for-disabled-sliders.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=194451

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2019-02-08  Ryan Haddad  <ryanhaddad@apple.com>

        Layout Test media/audio-concurrent-supported.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=188017

        Unreviewed test gardening.

        * platform/ios-simulator-wk2/TestExpectations: The test is not flaky anymore. Remove expectation.

2019-02-08  Per Arne Vollan  <pvollan@apple.com>

        [WebVTT] Inline WebVTT styles should start with '::cue'
        https://bugs.webkit.org/show_bug.cgi?id=194227
        <rdar://problem/47791087>

        Reviewed by Eric Carlson.

        * media/track/captions-webvtt/css-styling.vtt:

2019-02-08  Youenn Fablet  <youenn@apple.com>

        Running RTCRtpSender.getCapabilities("video") before initial offer breaks VP8
        https://bugs.webkit.org/show_bug.cgi?id=194380
        <rdar://problem/47916514>

        Reviewed by Eric Carlson.

        * webrtc/video-mute-vp8-expected.txt:
        * webrtc/video-mute-vp8.html:

2019-02-08  Andy Estes  <aestes@apple.com>

        [WebIDL] Support serializing sequences and FrozenArrays of non-interfaces
        https://bugs.webkit.org/show_bug.cgi?id=190997
        <rdar://problem/35983035>

        Reviewed by Brent Fulgham.

        * http/tests/paymentrequest/payment-address-attributes-and-toJSON-method.https.html:

2019-02-08  Eric Liang  <ericliang@apple.com>

        Check if receive AXPressDidFail notification when performing AXPress action on disabled MenuList.
        https://bugs.webkit.org/show_bug.cgi?id=193878

        Reviewed by Chris Fleizach.

        * accessibility/mac/press-not-work-for-disabled-menu-list.html: Added.

2019-02-07  Devin Rousso  <drousso@apple.com>

        PseudoElement created for any ::before/::after selector regardless of whether a content property exists
        https://bugs.webkit.org/show_bug.cgi?id=194423
        <rdar://problem/46787260>

        Reviewed by Antti Koivisto.

        * inspector/css/pseudo-creation.html: Added.
        * inspector/css/pseudo-creation-expected.txt: Added.

2019-02-07  Justin Fan  <justin_fan@apple.com>

        [Web GPU] GPUDevice::createTexture implementation prototype
        https://bugs.webkit.org/show_bug.cgi?id=194409
        <rdar://problem/47894312>

        Reviewed by Myles C. Maxfield.

        Update textures-textureviews.html to WPT format and to test creation of textures via the GPUDevice.

        * webgpu/textures-textureviews-expected.txt:
        * webgpu/textures-textureviews.html:

2019-02-07  Shawn Roberts  <sroberts@apple.com>

        fast/hidpi/hidpi-long-page-with-inset-element.html is a flaky image failure
        https://bugs.webkit.org/show_bug.cgi?id=172384

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:

2019-02-07  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] Clicking links in Safari using Apple Pencil is much more difficult after r238475
        https://bugs.webkit.org/show_bug.cgi?id=194415
        <rdar://problem/47550281>

        Reviewed by Tim Horton.

        Add a layout test to verify that a stylus tap dispatches clicks.

        * fast/events/touch/ios/pencil-tap-dispatches-click-expected.txt: Added.
        * fast/events/touch/ios/pencil-tap-dispatches-click.html: Added.

2019-02-07  Youenn Fablet  <youenn@apple.com>

        Filter out Overconstrainederror.constraint when getUserMedia is not granted
        https://bugs.webkit.org/show_bug.cgi?id=194240

        Reviewed by Eric Carlson.

        * fast/mediastream/overconstrainederror-constraint-expected.txt: Added.
        * fast/mediastream/overconstrainederror-constraint.html: Added.

2019-02-07  Timothy Hatcher  <timothy@apple.com>

        Overflow element scrollbar is light for dark mode content.
        https://bugs.webkit.org/show_bug.cgi?id=194407
        rdar://problem/45991585

        Reviewed by Beth Dakin.

        Updated tests to look at overflow elements and if dark apearance
        is used by the scrollbar directly.

        * css-dark-mode/supported-color-schemes-scrollbar-expected.txt:
        * css-dark-mode/supported-color-schemes-scrollbar.html:

2019-02-07  Nikita Vasilyev  <nvasilyev@apple.com>

        Web Inspector: Fix modify-css-property-race.html flakiness
        https://bugs.webkit.org/show_bug.cgi?id=194408

        Reviewed by Devin Rousso.

        Event listener wasn't removed property, sometimes causing it to fire one more time.

        * inspector/css/modify-css-property-race.html:

2019-02-07  Youenn Fablet  <youenn@apple.com>

        Unable to sign in leetcode.
        https://bugs.webkit.org/show_bug.cgi?id=194366
        rdar://problem/47259025.

        Reviewed by Chris Dumez.

        * http/wpt/fetch/request-abort-expected.txt: Added.
        * http/wpt/fetch/request-abort.html: Added.

2019-02-07  Alex Christensen  <achristensen@webkit.org>

        Deprecate WKBundlePageSetDefersLoading
        https://bugs.webkit.org/show_bug.cgi?id=191394

        Reviewed by Dean Jackson.

        * platform/wk2/TestExpectations:

2019-02-07  Zalan Bujtas  <zalan@apple.com>

        [LFC][Out-of-flow] Use the containing block's padding width when computing min/max width.
        https://bugs.webkit.org/show_bug.cgi?id=194391

        Reviewed by Antti Koivisto.

        * fast/block/block-only/absolute-positioned-min-max-percentage-with-parent-padding-expected.html: Added.
        * fast/block/block-only/absolute-positioned-min-max-percentage-with-parent-padding.html: Added.

2019-02-07  Miguel Gomez  <magomez@igalia.com>

        Unreviewed GTK+ gardening after r241117.

        * platform/gtk/TestExpectations:
        * platform/gtk/compositing/iframes/invisible-nested-iframe-show-expected.txt:
        * platform/gtk/compositing/iframes/resizer-expected.txt:
        * platform/gtk/compositing/rtl/rtl-iframe-absolute-expected.txt:
        * platform/gtk/compositing/rtl/rtl-iframe-relative-expected.txt:

2019-02-06  Devin Rousso  <drousso@apple.com>

        Web Inspector: DOM: don't send the entire function string with each event listener
        https://bugs.webkit.org/show_bug.cgi?id=194293
        <rdar://problem/47822809>

        Reviewed by Joseph Pecoraro.

        * inspector/dom/getEventListenersForNode.html:
        * inspector/dom/getEventListenersForNode-expected.txt:

2019-02-06  Andy Estes  <aestes@apple.com>

        [Payment Request] It should be possible to require a phonetic name for shipping contacts
        https://bugs.webkit.org/show_bug.cgi?id=194311
        <rdar://46733045>

        Reviewed by Alex Christensen.

        * http/tests/ssl/applepay/ApplePayRequestShippingContact.https-expected.txt:
        * http/tests/ssl/applepay/ApplePayRequestShippingContact.https.html:
        * http/tests/ssl/applepay/ApplePayRequestShippingContactV3.https-expected.txt:
        * http/tests/ssl/applepay/ApplePayRequestShippingContactV3.https.html:
        * http/tests/ssl/applepay/PaymentRequest.https-expected.txt:
        * http/tests/ssl/applepay/PaymentRequest.https.html:

2019-02-06  Yusuke Suzuki  <ysuzuki@apple.com>

        [JSC] PrivateName to PublicName hash table is wasteful
        https://bugs.webkit.org/show_bug.cgi?id=194277

        Reviewed by Michael Saboff.

        * streams/readable-byte-stream-controller-expected.txt:

2019-02-06  Justin Fan  <justin_fan@apple.com>

        [Web GPU] Implement supporting dictionaries for GPUTexture
        https://bugs.webkit.org/show_bug.cgi?id=194354

        Reviewed by Dean Jackson.

        Update test files to use hyphen-case for GPUTextureFormat.

        * webgpu/js/basic-webgpu-functions.js:
        (async.setUpContexts):
        * webgpu/js/webgpu-functions.js:
        (createBasicContext):

2019-02-06  David Kilzer  <ddkilzer@apple.com>

        Revert part of r241015 that skipped all WebGL tests

        * TestExpectations: Revert unintended change to skip all WebGL
        tests.

2019-02-06  Jonathan Bedard  <jbedard@apple.com>

        [iPad] Initial test gardening (Part 2)
        https://bugs.webkit.org/show_bug.cgi?id=193767
        <rdar://problem/47515175>

        Unreviewed test gardening.

        * fast/forms/ios/validation-bubble-dismiss-on-tap.html: Change tap location so test is compatible with iPads.
        * platform/ipad/TestExpectations: Associate iPad specific failures with bugs.

2019-02-06  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed test gardening, rebaseline some tests for iOS after r240713.

        * fast/events/touch/ios/block-without-overflow-scroll-and-passive-observer-on-block-scrolling-state-expected.txt:
        * fast/events/touch/ios/block-without-overflow-scroll-and-passive-observer-on-document-scrolling-state-expected.txt:
        * fast/events/touch/ios/block-without-overflow-scroll-scrolling-state-expected.txt:
        * fast/events/touch/ios/tap-with-active-touch-end-listener-expected.txt:

2019-02-06  Antti Koivisto  <antti@apple.com>

        RELEASE_ASSERT(!m_document.isResolvingTreeStyle()) in com.apple.WebKit.WebContent at WebCore: WebCore::StyleResolver::~StyleResolver
        https://bugs.webkit.org/show_bug.cgi?id=194333
        <rdar://problem/47822929>

        Reviewed by Zalan Bujtas.

        * http/tests/contentextensions/css-display-none-keyframe-expected.txt: Added.
        * http/tests/contentextensions/css-display-none-keyframe.html: Added.
        * http/tests/contentextensions/css-display-none-keyframe.html.json: Added.

2019-02-05  Ryosuke Niwa  <rniwa@webkit.org>

        REGRESSION (r240909): Release assert in FrameLoader::loadURL when navigating with a non-existent target name
        https://bugs.webkit.org/show_bug.cgi?id=194329

        Reviewed by Geoffrey Garen.

        Added a regression test.

        * fast/loader/navigate-with-new-target-after-back-forward-navigation-expected.txt: Added.
        * fast/loader/navigate-with-new-target-after-back-forward-navigation.html: Added.

2019-02-05  Nikita Vasilyev  <nvasilyev@apple.com>

        Web Inspector: Styles: PropertiesChanged shouldn't fire when old and new text are both empty
        https://bugs.webkit.org/show_bug.cgi?id=194318

        Reviewed by Devin Rousso.

        Fix the flaky test on Debug.

        * inspector/css/modify-css-property-race-expected.txt:
        * inspector/css/modify-css-property-race.html:

2019-02-05  Megan Gardner  <megan_gardner@apple.com>

        [iOS] Layout tests editing/pasteboard/smart-paste-007.html and editing/pasteboard/smart-paste-008.html are failing
        https://bugs.webkit.org/show_bug.cgi?id=194275

        Reviewed by Ryosuke Niwa.

        Smart paste tests 7 and 8 were outputting more information that was needed
        to verify correct functionality. Also cleaned up test 8 to be more similar to
        the other smart copy paste tests. 

        * editing/pasteboard/smart-paste-007.html:
        * editing/pasteboard/smart-paste-008.html:
        * platform/ios-wk1/editing/pasteboard/smart-paste-007-expected.txt: Removed.
        * platform/ios-wk1/editing/pasteboard/smart-paste-008-expected.txt: Removed.
        * platform/ios-wk2/editing/pasteboard/smart-paste-008-expected.txt: Removed.
        * platform/ios/editing/pasteboard/smart-paste-007-expected.txt: Renamed from LayoutTests/platform/ios-wk2/editing/pasteboard/smart-paste-007-expected.txt.
        * platform/ios/editing/pasteboard/smart-paste-008-expected.txt: Added.
        * platform/mac/editing/pasteboard/smart-paste-007-expected.txt:
        * platform/mac/editing/pasteboard/smart-paste-008-expected.txt:

2019-02-05  Wenson Hsieh  <wenson_hsieh@apple.com>

        Rename TestOptions.ignoreSynchronousMessagingTimeoutsForTesting
        https://bugs.webkit.org/show_bug.cgi?id=194324

        Reviewed by Andy Estes.

        * fast/events/touch/ios/show-modal-alert-during-touch-start.html:

2019-02-05  Nikita Vasilyev  <nvasilyev@apple.com>

        Web Inspector: Fix modify-css-property-race.html test failures
        https://bugs.webkit.org/show_bug.cgi?id=194282

        Reviewed by Matt Baker.

        Fix test failures introduced by r240946 by providing a message for expectGreaterThan assert,
        so it doesn't log the actual values.

        * inspector/css/modify-css-property-race-expected.txt:
        * inspector/css/modify-css-property-race.html:

2019-02-05  Andy VanWagoner  <andy@vanwagoner.family>

        REGRESSION(r238848): ICU upgrade broke jsc-layout-tests.yaml/js/script-tests/intl-numberformat.js.layout
        https://bugs.webkit.org/show_bug.cgi?id=193620

        Reviewed by Michael Catanzaro.

        Update NumberFormat tests to be more tolerant of ICU version differences.

        * js/intl-numberformat-expected.txt:
        * js/script-tests/intl-numberformat.js:
        * platform/gtk/TestExpectations:

2019-02-05  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r240742.

        Causes crashes on iOS simulator.

        Reverted changeset:

        "[iOS] Keyups for non-modifier keys identified as "Dead" when
        not focused in a content-editable element"
        https://bugs.webkit.org/show_bug.cgi?id=192824
        https://trac.webkit.org/changeset/240742

2019-02-04  Jonathan Bedard  <jbedard@apple.com>

        [iPad] Initial test gardening (Part 1)
        https://bugs.webkit.org/show_bug.cgi?id=193767
        <rdar://problem/47515175>

        Unreviewed test gardening.

        A number of tests need to be re-baselined when run on iPad because of the larger screen.

        * fast/canvas/canvas-too-large-to-draw.html: iOS userAgent regex should match iPhones and iPads.
        * fast/events/touch/ios/target-taller-than-view.html: Move event listener since tabpPointY is the value we should compare against.
        * fast/visual-viewport/ios/min-scale-greater-than-one.html: expectedTop depends on the screen size of the device.
        * platform/ipad/fast/events: Added.
        * platform/ipad/fast/events/ios: Added.
        * platform/ipad/fast/events/ios/keyboard-should-not-trigger-resize-expected.txt: Added.
        * platform/ipad/fast/events/ios/rotation: Added.
        * platform/ipad/fast/events/ios/rotation/zz-no-rotation-expected.txt: Added.
        * platform/ipad/fast/events/touch: Added.
        * platform/ipad/fast/events/touch/ios: Added.
        * platform/ipad/fast/events/touch/ios/target-taller-than-view-expected.txt: Added.
        * platform/ipad/fast/scrolling: Added.
        * platform/ipad/fast/scrolling/ios: Added.
        * platform/ipad/fast/scrolling/ios/clipping-ancestor-with-accelerated-scrolling-ancestor-expected.txt: Added.
        * platform/ipad/fast/scrolling/ios/overflow-scrolling-ancestor-clip-expected.txt: Added.
        * platform/ipad/fast/scrolling/ios/overflow-scrolling-ancestor-clip-size-expected.txt: Added.
        * platform/ipad/fast/scrolling/ios/scrolling-content-clip-to-viewport-expected.txt: Added.
        * platform/ipad/fast/scrolling/ios/subpixel-overflow-scrolling-with-ancestor-expected.txt: Added.
        * platform/ipad/fast/scrolling/ios/touch-stacking-expected.txt: Added.
        * platform/ipad/fast/viewport/ios: Added.
        * platform/ipad/fast/viewport/ios/device-width-viewport-after-changing-view-scale-expected.txt: Added.
        * platform/ipad/fast/viewport/ios/initial-scale-after-changing-view-scale-expected.txt: Added.
        * platform/ipad/fast/viewport/ios/use-minimum-device-width-for-page-without-viewport-meta-expected.txt: Added.
        * platform/ipad/fast/viewport/ios/width-is-device-width-expected.txt: Added.
        * platform/ipad/fast/viewport/ios/width-is-device-width-overflowing-body-overflow-hidden-expected.txt: Added.
        * platform/ipad/fast/viewport/ios/width-is-device-width-overflowing-body-overflow-hidden-tall-expected.txt: Added.
        * platform/ipad/fast/viewport/ios/width-is-device-width-overflowing-expected.txt: Added.
        * platform/ipad/fast/viewport/ios/width-is-device-width-overflowing-no-shrink-to-fit-expected.txt: Added.
        * platform/ipad/platform: Added.
        * platform/ipad/platform/ios: Added.
        * platform/ipad/platform/ios/ios: Added.
        * platform/ipad/platform/ios/ios/fast: Added.
        * platform/ipad/platform/ios/ios/fast/text: Added.
        * platform/ipad/platform/ios/ios/fast/text/opticalFontWithTextStyle-expected.txt: Added.
        * platform/ipad/scrollingcoordinator: Added.
        * platform/ipad/scrollingcoordinator/ios: Added.
        * platform/ipad/scrollingcoordinator/ios/sync-layer-positions-after-scroll-expected.txt: Added.
        * platform/ipad/scrollingcoordinator/ios/ui-scrolling-tree-expected.txt: Added.

2019-02-04  Ms2ger  <Ms2ger@igalia.com>

        [GTK][WPE] Need a function to convert internal URI to display ("pretty") URI
        https://bugs.webkit.org/show_bug.cgi?id=174816

        Reviewed by Michael Catanzaro.

        * TestExpectations: Enable fast/url/user-visible/.

2019-02-04  Shawn Roberts  <sroberts@apple.com>

        [iOS Simulator] pageoverlay/overlay tests are flaky failures
        https://bugs.webkit.org/show_bug.cgi?id=153337

        Unreviewed test gardening.

        * platform/ios/TestExpectations:

2019-02-04  Nikita Vasilyev  <nvasilyev@apple.com>

        Web Inspector: Styles: fix race conditions when editing
        https://bugs.webkit.org/show_bug.cgi?id=192739
        <rdar://problem/46752925>

        Reviewed by Devin Rousso.

        * inspector/css/modify-css-property-expected.txt:
        * inspector/css/modify-css-property-race-expected.txt: Added.
        * inspector/css/modify-css-property-race.html: Added.
        * inspector/css/modify-css-property.html:

2019-02-04  Simon Fraser  <simon.fraser@apple.com>

        Async overflow scroll with border-radius renders incorrectly
        https://bugs.webkit.org/show_bug.cgi?id=194205
        <rdar://problem/47771668>

        Reviewed by Zalan Bujtas.

        New baselines, mostly correcting offsetFromRenderer.

        * compositing/clipping/border-radius-async-overflow-clipping-layer-expected.txt: Added.
        * compositing/clipping/border-radius-async-overflow-clipping-layer.html: Added.
        * compositing/clipping/border-radius-async-overflow-non-stacking-expected.html: Added.
        * compositing/clipping/border-radius-async-overflow-non-stacking.html: Added.
        * compositing/clipping/border-radius-async-overflow-stacking-expected.html: Added.
        * compositing/clipping/border-radius-async-overflow-stacking.html: Added.
        * compositing/scrolling/overflow-scrolling-layers-are-self-painting-expected.txt:
        * platform/ios/compositing/overflow/scrolling-without-painting-expected.txt:
        * platform/ios/compositing/overflow/textarea-scroll-touch-expected.txt: html.css specifies a border-radius on <textarea> for iOS, so we make additional
        clipping layers.
        * platform/ios/compositing/rtl/rtl-scrolling-with-transformed-descendants-expected.txt:
        * platform/ios/compositing/scrolling/overflow-scrolling-layers-are-self-painting-expected.txt:

2019-02-04  Simon Fraser  <simon.fraser@apple.com>

        PageOverlayController's layers should be created lazily
        https://bugs.webkit.org/show_bug.cgi?id=194199
        rdar://problem/46571593

        Reviewed by Tim Horton.

        * pageoverlay/overlay-remove-reinsert-view-expected.txt: We no longer unparent the overlays
        on view removal, so new results.
        * platform/ios-wk2/TestExpectations: Unskip some iOS tests.
        * platform/ios-wk2/pageoverlay/overlay-installation-expected.txt: Added.
        * platform/ios-wk2/pageoverlay/overlay-large-document-expected.txt: Added.
        * platform/ios-wk2/pageoverlay/overlay-large-document-scrolled-expected.txt: Added.
        * platform/ios/TestExpectations: Unskip some iOS tests.

2019-02-04  Eric Liang  <ericliang@apple.com>

        Check if slider value changed after calling AX Increment or Decrement on disabled sliders.
        https://bugs.webkit.org/show_bug.cgi?id=193497

        Reviewed by Chris Fleizach.

        * accessibility/set-value-not-work-for-disabled-sliders.html: Added.

2019-02-04  Frederic Wang  <fwang@igalia.com>

        [css-scroll-snap] scroll-snap-align not honored on child with non-visible overflow
        https://bugs.webkit.org/show_bug.cgi?id=191816

        Reviewed by Wenson Hsieh.

        Add a test to verify that children with non-visible overflow create snap offsets.

        * css3/scroll-snap/scroll-snap-children-with-overflow-expected.txt: Added.
        * css3/scroll-snap/scroll-snap-children-with-overflow.html: Added.

2019-02-03  Antti Koivisto  <antti@apple.com>

        [iOS] Tiles not created in large scrollable iframes
        https://bugs.webkit.org/show_bug.cgi?id=193665

        Reviewed by Simon Fraser.

        Test by Frédéric Wang.

        * fast/scrolling/ios/scroll-iframe-expected.html:
        * fast/scrolling/ios/scroll-iframe.html:
        * platform/ios-wk2/compositing/iframes/scrolling-iframe-expected.txt:
        * platform/ios-wk2/compositing/tiling/tiled-drawing-async-frame-scrolling-expected.txt:
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/fixed-inside-frame-expected.txt:

2019-02-03  John Wilander  <wilander@apple.com>

        Parse and handle Ad Click Attribution attributes in HTMLAnchorElement::handleClick()
        https://bugs.webkit.org/show_bug.cgi?id=194104
        <rdar://problem/47649991>

        Reviewed by Chris Dumez, Daniel Bates, and Darin Adler.

        This test case makes sure invalid data triggers console warnings.

        * http/tests/adClickAttribution/anchor-tag-attributes-validation-expected.txt: Added.
        * http/tests/adClickAttribution/anchor-tag-attributes-validation.html: Added.
        * platform/ios-wk2/http/tests/adClickAttribution/anchor-tag-attributes-validation-expected.txt: Added.
            Console line numbers are not emitted when running iOS tests so this -expected.txt file doesn't have them.

2019-02-03  Wenson Hsieh  <wenson_hsieh@apple.com>

        Unable to move selection into editable roots with 0 height
        https://bugs.webkit.org/show_bug.cgi?id=194143
        <rdar://problem/47767284>

        Reviewed by Ryosuke Niwa.

        Add a new layout test that executes editing commands in a contenteditable element of height 0, and adjust an
        existing layout test that copies and pastes an image element to wait until the image has loaded.

        * editing/pasteboard/styled-element-markup.html:
        * editing/selection/insert-text-in-empty-content-editable-expected.txt: Added.
        * editing/selection/insert-text-in-empty-content-editable.html: Added.

2019-02-03  Megan Gardner  <megan_gardner@apple.com>

        Turn on Smart Paste
        https://bugs.webkit.org/show_bug.cgi?id=193786

        Reviewed by Ryosuke Niwa.

        Rebaselined many tests and/or added iOS specific expectations to 
        correctly reflect smart copy paste behavior.

        * editing/editing.js:
        (runEditingTestWithCallbackLogging):
        (runDumpAsTextEditingTest):
        Added ability to handle async functions.
        * editing/pasteboard/smart-paste-001.html:
        * editing/pasteboard/smart-paste-002.html:
        * editing/pasteboard/smart-paste-003.html:
        * editing/pasteboard/smart-paste-004.html:
        * editing/pasteboard/smart-paste-005.html:
        * editing/pasteboard/smart-paste-006.html:
        * editing/pasteboard/smart-paste-007.html:
        * editing/pasteboard/smart-paste-008.html:
        * platform/ios-wk2/editing/pasteboard/smart-paste-007-expected.txt:
        * platform/ios-wk2/editing/pasteboard/smart-paste-008-expected.txt:
        * platform/ios/TestExpectations:
        * platform/ios/editing/pasteboard/smart-paste-001-expected.txt: Added.
        * platform/ios/editing/pasteboard/smart-paste-002-expected.txt: Added.
        * platform/ios/editing/pasteboard/smart-paste-003-expected.txt: Added.
        * platform/ios/editing/pasteboard/smart-paste-004-expected.txt: Added.
        * platform/ios/editing/pasteboard/smart-paste-005-expected.txt: Added.
        * platform/ios/editing/pasteboard/smart-paste-006-expected.txt: Added.
        * resources/ui-helper.js:
        (window.UIHelper.doubleClickAt):
        (window.UIHelper.async.selectWordByDoubleTapOrClick):
        Added helper functions to allow for selecting a word by double tap or click.

2019-02-02  Justin Fan  <justin_fan@apple.com>

        [WebGPU] Fix GPURenderPassEncoder::setVertexBuffers and allow overlapping indices with GPUBindGroups
        https://bugs.webkit.org/show_bug.cgi?id=194125

        Reviewed by Myles C. Maxfield.

        Updated buffer-resource-triangles to assign bind groups and vertex buffers to the same index.

        * webgpu/buffer-resource-triangles.html:

2019-02-02  Zalan Bujtas  <zalan@apple.com>

        [LFC] Add missing case to out-of-flow non-replaced horizontal used margin value computation
        https://bugs.webkit.org/show_bug.cgi?id=194185

        Reviewed by Antti Koivisto.

        * fast/block/block-only/absolute-position-left-right-margin-expected.html: Added.
        * fast/block/block-only/absolute-position-left-right-margin.html: Added.

2019-02-01  Megan Gardner  <megan_gardner@apple.com>

        Rewrite and rebaseline smart copy paste tests to work on iOS and MacOS
        https://bugs.webkit.org/show_bug.cgi?id=194175

        Reviewed by Megan Gardner.
        Patch by Ryosuke Niwa.

        Using the functions committed in 194070 Ryosuke wrote, make the
        smart copy paste tests run on both iOS and MacOS. 
        These tests will be turned on in 193786.

        * editing/editing.js:
        (runEditingTestWithCallbackLogging):
        (runDumpAsTextEditingTest):
        * editing/pasteboard/smart-paste-001.html:
        * editing/pasteboard/smart-paste-002-expected.txt:
        * editing/pasteboard/smart-paste-002.html:
        * editing/pasteboard/smart-paste-003.html:
        * editing/pasteboard/smart-paste-004.html:
        * editing/pasteboard/smart-paste-005-expected.txt:
        * editing/pasteboard/smart-paste-005.html:
        * editing/pasteboard/smart-paste-006-expected.txt:
        * editing/pasteboard/smart-paste-006.html:
        * editing/pasteboard/smart-paste-007.html:
        * editing/pasteboard/smart-paste-008.html:
        * platform/mac/editing/pasteboard/smart-paste-008-expected.txt:

2019-02-01  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] Consistent 1 sec hang when triggering modal alerts while handling synchronous touch events
        https://bugs.webkit.org/show_bug.cgi?id=194140
        <rdar://problem/47728098>

        Reviewed by Tim Horton.

        Add a test that induces sync IPC deadlock by presenting a modal alert while handling touch start. This test
        forces sync IPC timeouts to be disabled, and passes if we do not time out while handling a touch.

        * fast/events/touch/ios/show-modal-alert-during-touch-start-expected.txt: Added.
        * fast/events/touch/ios/show-modal-alert-during-touch-start.html: Added.

2019-02-01  Antoine Quint  <graouts@apple.com>

        Dispatch pointercancel events when content is panned or zoomed on iOS
        https://bugs.webkit.org/show_bug.cgi?id=193962
        <rdar://problem/47629134>

        Reviewed by Dean Jackson.

        Adding a few tests for "pointercancel" and adding "touch-action: none" on tests that would now be affected by canceling pointers. We also unflake a few tests.

        * pointerevents/ios/pointer-events-implicit-capture.html:
        * pointerevents/ios/pointer-events-is-primary.html:
        * pointerevents/ios/touch-action-pan-x-pan-y.html:
        * pointerevents/ios/touch-action-pan-x.html:
        * pointerevents/ios/touch-action-pan-y-expected.txt:
        * pointerevents/ios/touch-action-pan-y.html:
        * pointerevents/ios/touch-action-pinch-zoom-allows-zooming.html:
        * pointerevents/ios/touch-action-pointercancel-pan-x-expected.txt: Added.
        * pointerevents/ios/touch-action-pointercancel-pan-x.html: Added.
        * pointerevents/ios/touch-action-pointercancel-pan-y-expected.txt: Added.
        * pointerevents/ios/touch-action-pointercancel-pan-y.html: Added.
        * pointerevents/ios/touch-action-pointercancel-pinch-zoom-expected.txt: Added.
        * pointerevents/ios/touch-action-pointercancel-pinch-zoom.html: Added.

2019-02-01  Carlos Garcia Campos  <cgarcia@igalia.com>

        REGRESSION(r239915): css3/font-feature-font-face-local.html failing on WPE
        https://bugs.webkit.org/show_bug.cgi?id=194008

        Reviewed by Žan Doberšek.

        Remove test expectation.

        * platform/wpe/TestExpectations:

2019-02-01  Carlos Garcia Campos  <cgarcia@igalia.com>

        [WPE] Enable font variations
        https://bugs.webkit.org/show_bug.cgi?id=194148

        Reviewed by Žan Doberšek.

        * platform/wpe/TestExpectations:

2019-02-01  Carlos Garcia Campos  <cgarcia@igalia.com>

        ComplexText: Test fast/text/word-space-nbsp.html fails when using complex text path
        https://bugs.webkit.org/show_bug.cgi?id=193279

        Reviewed by Michael Catanzaro.

        Remove test expectation.

        * platform/gtk/TestExpectations:

2019-02-01  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed WPE gardening. Remove duplicated expectations.

        Remove the platform specific expectations that match the generic ones.

        * platform/wpe/animations/lineheight-animation-expected.txt: Removed.
        * platform/wpe/animations/simultaneous-start-transform-expected.txt: Removed.
        * platform/wpe/animations/width-using-ems-expected.txt: Removed.
        * platform/wpe/fast/events/mouseover-mouseout-expected.txt: Removed.
        * platform/wpe/fast/events/nested-window-event-expected.txt: Removed.
        * platform/wpe/fast/events/window-events-bubble-expected.txt: Removed.
        * platform/wpe/fast/events/window-events-bubble2-expected.txt: Removed.
        * platform/wpe/fast/replaced/008-expected.txt: Removed.
        * platform/wpe/fast/tokenizer/script_extra_close-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-check-initdata-type.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-events-session-closed-event.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-events.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-generate-request-disallowed-input.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-invalid-license.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-keystatuses-multiple-sessions.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-keystatuses.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-destroy-persistent-license.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-persistent-license.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-retrieve-destroy-persistent-license.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-retrieve-persistent-license.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-encrypted-clear-sources.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-multikey.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-multisession.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-setMediaKeys-after-update.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-setMediaKeys-immediately.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-setMediaKeys-onencrypted.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-two-videos.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-waitingforkey.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-setmediakeys-again-after-playback.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-setmediakeys-again-after-resetting-src.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-setmediakeys-at-same-time.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-setmediakeys-multiple-times-with-different-mediakeys.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-setmediakeys-multiple-times-with-the-same-mediakeys.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-setmediakeys-to-multiple-video-elements.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-setmediakeys.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-syntax-mediakeysession.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-syntax-mediakeysystemaccess.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-not-callable-after-createsession.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-update-non-ascii-input.https-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/fetch/api/basic/scheme-about.any-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/fetch/api/basic/scheme-about.any.worker-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/fetch/api/redirect/redirect-location-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/fetch/security/dangling-markup-mitigation-data-url.tentative.sub-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/pointerevents/extension/pointerevent_touch-action-verification-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/pointerevents/pointerevent_touch-action-illegal-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/pointerevents/pointerevent_touch-action-verification-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/touch-events/historical-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/xhr/formdata-blob-expected.txt: Removed.
        * platform/wpe/imported/w3c/web-platform-tests/xhr/formdata-expected.txt: Removed.
        * platform/wpe/legacy-animation-engine/animations/lineheight-animation-expected.txt: Removed.
        * platform/wpe/legacy-animation-engine/animations/simultaneous-start-transform-expected.txt: Removed.
        * platform/wpe/legacy-animation-engine/animations/width-using-ems-expected.txt: Removed.
        * platform/wpe/svg/W3C-SVG-1.1/shapes-rect-02-t-expected.txt: Removed.
        * platform/wpe/svg/custom/pan-direction-expected.txt: Removed.
        * platform/wpe/tables/mozilla/bugs/bug149275-2-expected.txt: Removed.
        * platform/wpe/webgl/2.0.0/conformance/context/context-attributes-alpha-depth-stencil-antialias-expected.txt: Removed.
        * platform/wpe/webgl/2.0.0/conformance/context/context-hidden-alpha-expected.txt: Removed.

2019-02-01  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed WPE gardening. Rebaseline and update expectations after r240774.

        * platform/wpe/TestExpectations:
        * platform/wpe/fast/css/font-weight-1-expected.txt:

2019-01-31  Megan Gardner  <megan_gardner@apple.com>

        Don't insert spaces at the beginning of a newline when using smart-copy-paste
        https://bugs.webkit.org/show_bug.cgi?id=194070

        Add test for smart copy paste around newlines.
        Rebaseline a test that is dependant on a console log that changes lines.
        Add additional helper functions to ui-helper.js.

        Reviewed by Tim Horton.

        * editing/pasteboard/mac/copy-smartpaste-first-line-in-textarea-expected.txt: Added.
        * editing/pasteboard/mac/copy-smartpaste-first-line-in-textarea.html: Added.
        * http/tests/security/anchor-download-block-crossorigin-expected.txt:
        * platform/mac/TestExpectations:
        * resources/ui-helper.js:
        (window.UIHelper.doubleClickAt):
        (window.UIHelper.doubleClickAtThenDragTo):
        (window.UIHelper.async.selectWordByDoubleTapOrClick):

2019-01-31  Joseph Pecoraro  <pecoraro@apple.com>

        Web Inspector: Timeline time range selection sometimes shows 0.000, should be just 0
        https://bugs.webkit.org/show_bug.cgi?id=194108
        <rdar://problem/47714273>

        Reviewed by Devin Rousso.

        * inspector/unit-tests/number-utilities-expected.txt:
        * inspector/unit-tests/number-utilities.html:

2019-01-31  Chris Dumez  <cdumez@apple.com>

        [ MacOS ] Layout Test performance-api/performance-observer-callback-after-gc.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=191041
        <rdar://problem/45649982>

        Reviewed by Joseph Pecoraro.

        Make the test print the same output no matter if the performance observer is notified once or
        twice. What matters is that it is notified about 3 marks.

        * performance-api/performance-observer-callback-after-gc-expected.txt:
        * performance-api/performance-observer-callback-after-gc.html:

2019-01-31  Justin Fan  <justin_fan@apple.com>

        [WebGPU] WebGPUAdapterDescriptor -> GPURequestAdapterOptions and take powerPreference into account
        https://bugs.webkit.org/show_bug.cgi?id=194068
        <rdar://problem/47680215>

        Reviewed by Dean Jackson.

        Add simple test to create device with all options. Update helper functions for other Web GPU
        tests to request different adapters. (No change in test behavior expected.)

        * webgpu/adapter-options-expected.txt: Added.
        * webgpu/adapter-options.html: Added.
        * webgpu/js/basic-webgpu-functions.js:
        (async.setUpContexts): Update to use no adapter request argument at all. 
        * webgpu/js/webgpu-functions.js:
        (async.getBasicDevice): Update to request the low-power adapter.

2019-01-31  Zalan Bujtas  <zalan@apple.com>

        [LFC] Use the used margin values in outOfFlowReplacedHorizontalGeometry consistently
        https://bugs.webkit.org/show_bug.cgi?id=194074

        Reviewed by Antti Koivisto.

        * fast/block/block-only/absolute-position-with-margin-auto-simple2-expected.html: Added.
        * fast/block/block-only/absolute-position-with-margin-auto-simple2.html: Added.

2019-01-31  Chris Fleizach  <cfleizach@apple.com>

        ASSERTION FAILED: cache under WebCore::AXObjectCache::postTextStateChangePlatformNotification
        https://bugs.webkit.org/show_bug.cgi?id=189094
        <rdar://problem/43853526>

        Reviewed by Zalan Bujtas.

        Unskip flaky test with crash resolved.

        * platform/mac-wk2/TestExpectations:

2019-01-30  Ryosuke Niwa  <rniwa@webkit.org>

        Enable swipe tests on iOS
        https://bugs.webkit.org/show_bug.cgi?id=194076

        Reviewed by Geoffrey Garen.

        Enabled tests in LayoutTests/swipe and added iOS specific results for the failing tests.

        * platform/ios/TestExpectations:
        * platform/ios/swipe/basic-cached-back-swipe-expected.txt: Added.
        * platform/ios/swipe/main-frame-pinning-requirement-expected.txt: Added.
        * platform/ios/swipe/pushState-cached-back-swipe-expected.txt: Added.

2019-01-30  Chris Dumez  <cdumez@apple.com>

        Regression(PSON) History navigations to twitter.com lead to a 403 HTTP error
        https://bugs.webkit.org/show_bug.cgi?id=194023
        <rdar://problem/47417981>

        Reviewed by Geoffrey Garen.

        Add layout test coverage.

        * http/tests/cookies/same-site/lax-samesite-cookie-after-cross-site-history-load-expected.txt: Added.
        * http/tests/cookies/same-site/lax-samesite-cookie-after-cross-site-history-load.php: Added.
        * http/tests/cookies/same-site/resources/navigate-back.html: Added.

2019-01-30  Daniel Bates  <dabates@apple.com>

        [iOS] Keyups for non-modifier keys identified as "Dead" when not focused in a content-editable element
        https://bugs.webkit.org/show_bug.cgi?id=192824
        <rdar://problem/47100332>

        Reviewed by Wenson Hsieh.

        Update tests and expected results. As it turns out fixing the bug in WebKitTestRunner/ios/HIDEventGenerator.mm
        so that we now dispatch key events for F17 thru F24 exposed a bug in UIKit. See <rdar://problem/47128940>.
        This same bug is also responsible for a lack of key events when the Insert key is pressed.

        Added sub-test for Tab key to keypress-keys-in-non-editable-element.html. Changed expected result in test
        keypress-keys-in-non-editable-element.html for the forward delete key to expect failure. We expect that pressing
        the forward delete key will not dispatch a keypress to match the behavior on Mac. This will be addressed by a
        UIKit fix.

        * fast/events/ios/keydown-keyup-special-keys-in-non-editable-element-expected.txt:
        * fast/events/ios/keydown-keyup-special-keys-in-non-editable-element.html:
        * fast/events/ios/keypress-keys-in-non-editable-element-expected.txt:
        * fast/events/ios/keypress-keys-in-non-editable-element.html:

2019-01-30  Dean Jackson  <dino@apple.com>

        PointerEvents - tiltX and tiltY are reversed
        https://bugs.webkit.org/show_bug.cgi?id=194032
        <rdar://problem/47674184>

        Reviewed by Jon Lee.

        * pointerevents/ios/pointer-events-dispatch-on-stylus.html:

2019-01-30  Simon Fraser  <simon.fraser@apple.com>

        Add some basic geometry information to the scrolling tree
        https://bugs.webkit.org/show_bug.cgi?id=194002
        rdar://problem/47656294

        Reviewed by Antti Koivisto.
        
        New test results with "parent relative scrollable rect" output and 0,0 anchorPoints.

        * compositing/scrolling/overflow-scrolling-layers-are-self-painting-expected.txt:
        * fast/scrolling/ios/change-scrollability-on-content-resize-expected.txt:
        * fast/scrolling/ios/change-scrollability-on-content-resize-nested-expected.txt:
        * fast/scrolling/ios/overflow-scroll-touch-expected.txt:
        * fast/scrolling/ios/reconcile-layer-position-recursive-expected.txt:
        * fast/scrolling/ios/subpixel-overflow-scrolling-with-ancestor-expected.txt:
        * fast/visual-viewport/tiled-drawing/zoomed-fixed-scrolled-down-expected.txt:
        * fast/visual-viewport/tiled-drawing/zoomed-fixed-scrolled-down-then-up-expected.txt:
        * fast/visual-viewport/tiled-drawing/zoomed-fixed-scrolling-layers-state-expected.txt:
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/coordinated-frame-expected.txt:
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/coordinated-frame-gain-scrolling-ancestor-expected.txt:
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/coordinated-frame-in-fixed-expected.txt:
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/coordinated-frame-lose-scrolling-ancestor-expected.txt:
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/fixed-inside-frame-expected.txt:
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/gain-scrolling-node-parent-expected.txt:
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/lose-scrolling-node-parent-expected.txt:
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/overflow-in-fixed-expected.txt:
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/remove-coordinated-frame-expected.txt:
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/remove-scrolling-role-expected.txt:
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/reparent-across-compositing-layers-expected.txt:
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/reparent-with-layer-removal-expected.txt:
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/scrolling-tree-includes-frame-expected.txt:
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/scrolling-tree-is-z-order-expected.txt:
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/toggle-coordinated-frame-scrolling-expected.txt:
        * platform/ios/compositing/overflow/overflow-auto-with-touch-expected.txt:
        * platform/ios/compositing/overflow/overflow-auto-with-touch-toggle-expected.txt:
        * platform/ios/compositing/overflow/overflow-overlay-with-touch-expected.txt:
        * platform/ios/compositing/overflow/scrolling-content-clip-to-viewport-expected.txt:
        * platform/ios/compositing/overflow/scrolling-without-painting-expected.txt:
        * platform/ios/compositing/overflow/textarea-scroll-touch-expected.txt:
        * platform/ios/compositing/overflow/updating-scrolling-content-expected.txt:
        * platform/ios/compositing/rtl/rtl-scrolling-with-transformed-descendants-expected.txt:
        * platform/ios/compositing/scrolling/overflow-scrolling-layers-are-self-painting-expected.txt:
        * platform/ios/fast/scrolling/ios/overflow-scrolling-ancestor-clip-expected.txt:
        * platform/ios/fast/scrolling/ios/overflow-scrolling-ancestor-clip-size-expected.txt:
        * platform/ios/fast/scrolling/ios/scrolling-content-clip-to-viewport-expected.txt:
        * platform/ios/fast/scrolling/ios/textarea-scroll-touch-expected.txt:
        * platform/ios/media/video-play-glyph-composited-outside-overflow-scrolling-touch-container-expected.txt:
        * scrollingcoordinator/scrolling-tree/coordinated-frame-expected.txt:
        * scrollingcoordinator/scrolling-tree/coordinated-frame-gain-scrolling-ancestor-expected.txt:
        * scrollingcoordinator/scrolling-tree/coordinated-frame-in-fixed-expected.txt:
        * scrollingcoordinator/scrolling-tree/coordinated-frame-lose-scrolling-ancestor-expected.txt:
        * scrollingcoordinator/scrolling-tree/fixed-inside-frame-expected.txt:
        * scrollingcoordinator/scrolling-tree/gain-scrolling-node-parent-expected.txt:
        * scrollingcoordinator/scrolling-tree/lose-scrolling-node-parent-expected.txt:
        * scrollingcoordinator/scrolling-tree/overflow-in-fixed-expected.txt:
        * scrollingcoordinator/scrolling-tree/remove-coordinated-frame-expected.txt:
        * scrollingcoordinator/scrolling-tree/remove-scrolling-role-expected.txt:
        * scrollingcoordinator/scrolling-tree/reparent-across-compositing-layers-expected.txt:
        * scrollingcoordinator/scrolling-tree/reparent-with-layer-removal-expected.txt:
        * scrollingcoordinator/scrolling-tree/scrolling-tree-includes-frame-expected.txt:
        * scrollingcoordinator/scrolling-tree/scrolling-tree-is-z-order-expected.txt:
        * scrollingcoordinator/scrolling-tree/toggle-coordinated-frame-scrolling-expected.txt:
        * tiled-drawing/scrolling/clamp-out-of-bounds-scrolls-expected.txt:
        * tiled-drawing/scrolling/fixed/absolute-inside-fixed-expected.txt:
        * tiled-drawing/scrolling/fixed/absolute-inside-out-of-view-fixed-expected.txt:
        * tiled-drawing/scrolling/fixed/fixed-in-overflow-expected.txt:
        * tiled-drawing/scrolling/fixed/fixed-position-out-of-view-expected.txt:
        * tiled-drawing/scrolling/fixed/fixed-position-out-of-view-negative-zindex-expected.txt:
        * tiled-drawing/scrolling/fixed/four-bars-expected.txt:
        * tiled-drawing/scrolling/fixed/four-bars-with-header-and-footer-expected.txt:
        * tiled-drawing/scrolling/fixed/negative-scroll-offset-expected.txt:
        * tiled-drawing/scrolling/fixed/negative-scroll-offset-in-view-expected.txt:
        * tiled-drawing/scrolling/fixed/nested-fixed-expected.txt:
        * tiled-drawing/scrolling/fixed/percentage-inside-fixed-expected.txt:
        * tiled-drawing/scrolling/frames/scroll-region-after-frame-layout-expected.txt:
        * tiled-drawing/scrolling/scrolling-tree-after-scroll-expected.txt:
        * tiled-drawing/scrolling/scrolling-tree-slow-scrolling-expected.txt:
        * tiled-drawing/scrolling/sticky/negative-scroll-offset-expected.txt:
        * tiled-drawing/scrolling/sticky/sticky-horizontal-expected.txt:
        * tiled-drawing/scrolling/sticky/sticky-vertical-expected.txt:

2019-01-30  Zalan Bujtas  <zalan@apple.com>

        [LFC] Use the used margin values in outOfFlowReplacedVerticalGeometry consistently
        https://bugs.webkit.org/show_bug.cgi?id=194020

        Reviewed by Antti Koivisto.

        * fast/block/block-only/absolute-position-with-margin-auto-simple-expected.html: Added.
        * fast/block/block-only/absolute-position-with-margin-auto-simple.html: Added.

2019-01-30  Chris Fleizach  <cfleizach@apple.com>

        AX: Support color well on iOS
        https://bugs.webkit.org/show_bug.cgi?id=194010

        Reviewed by Joanmarie Diggs.

        * accessibility/ios-simulator/color-well-expected.txt: Added.
        * accessibility/ios-simulator/color-well.html: Added.

2019-01-30  Chris Fleizach  <cfleizach@apple.com>

        AX: Role=switch not returning correct accessibilityValue
        https://bugs.webkit.org/show_bug.cgi?id=194006

        Reviewed by Joanmarie Diggs.

        * accessibility/ios-simulator/role-switch-expected.txt: Added.
        * accessibility/ios-simulator/role-switch.html: Added.

2019-01-30  Zan Dobersek  <zdobersek@igalia.com>

        Unreviewed WPE gardening. Manage failures in the imported WPT tests,
        adding a few failure expectations but mostly rebaselining the tests
        to match their current status.

        * platform/wpe/TestExpectations:
        * platform/wpe/imported/w3c/web-platform-tests/2dcontext/imagebitmap/createImageBitmap-invalid-args-expected.txt:
        * platform/wpe/imported/w3c/web-platform-tests/css/css-text/white-space/seg-break-transformation-001-expected.txt:
        * platform/wpe/imported/w3c/web-platform-tests/css/css-text/white-space/seg-break-transformation-004-expected.txt:
        * platform/wpe/imported/w3c/web-platform-tests/fetch/api/basic/header-value-combining.any-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/fetch/api/basic/header-value-combining.any.worker-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/fetch/api/basic/request-headers-case.any-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/fetch/api/basic/request-headers-case.any.worker-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/fetch/api/basic/scheme-about.any-expected.txt:
        * platform/wpe/imported/w3c/web-platform-tests/fetch/api/basic/scheme-about.any.worker-expected.txt:
        * platform/wpe/imported/w3c/web-platform-tests/fetch/api/redirect/redirect-method.any-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/fetch/api/redirect/redirect-method.any.worker-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/fetch/api/redirect/redirect-mode.any-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/fetch/api/redirect/redirect-mode.any.worker-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/fetch/api/request/request-keepalive-quota-expected.txt:
        * platform/wpe/imported/w3c/web-platform-tests/fetch/content-type: Added.
        * platform/wpe/imported/w3c/web-platform-tests/fetch/content-type/script.window-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/fetch/http-cache/cc-request-expected.txt:
        * platform/wpe/imported/w3c/web-platform-tests/fetch/nosniff: Added.
        * platform/wpe/imported/w3c/web-platform-tests/fetch/nosniff/parsing-nosniff.window-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/fetch/security/dangling-markup-mitigation-data-url.tentative.sub-expected.txt:
        * platform/wpe/imported/w3c/web-platform-tests/fetch/security/embedded-credentials.tentative.sub-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/mimesniff/mime-types/charset-parameter.window-expected.txt:
        * platform/wpe/imported/w3c/web-platform-tests/resource-timing: Added.
        * platform/wpe/imported/w3c/web-platform-tests/resource-timing/resource_timing.worker-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/service-workers/service-worker/websocket-in-service-worker.https-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-expected.txt:
        * platform/wpe/imported/w3c/web-platform-tests/xhr/formdata-blob-expected.txt:
        * platform/wpe/imported/w3c/web-platform-tests/xhr/formdata-expected.txt:

2019-01-29  Zan Dobersek  <zdobersek@igalia.com>

        Unreviewed WPE gardening. Adding some test failure expectations and
        rebasing a few baselines.

        * platform/wpe/TestExpectations:
        * platform/wpe/css2.1/t1508-c527-font-06-b-expected.txt:
        * platform/wpe/fast/borders/rtl-border-04-expected.txt:
        * platform/wpe/fast/borders/rtl-border-05-expected.txt:
        * platform/wpe/fast/dom/52776-expected.txt:

2019-01-29  Zan Dobersek  <zdobersek@igalia.com>

        Unreviewed WPE gardening.

        * platform/wpe/TestExpectations: Skip the resourceLoadStatistics tests
        since that feature is still not yet enabled for the port.

2019-01-29  Simon Fraser  <simon.fraser@apple.com>

        Add nodes to the scrolling tree in z-index order.
        https://bugs.webkit.org/show_bug.cgi?id=192529
        <rdar://problem/47402708>

        Reviewed by Dean Jackson.
        
        New testcases for z-order of sibling fixed layers, and the correct nesting of scrolling tree nodes
        for a position:fixed which is also overflow:scroll.

        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/overflow-in-fixed-expected.txt: Added.
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/reparent-across-compositing-layers-expected.txt:
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/scrolling-tree-is-z-order-expected.txt: Added.
        * platform/mac-wk2/TestExpectations:
        * scrollingcoordinator/scrolling-tree/overflow-in-fixed-expected.txt: Added.
        * scrollingcoordinator/scrolling-tree/overflow-in-fixed.html: Added.
        * scrollingcoordinator/scrolling-tree/reparent-across-compositing-layers-expected.txt:
        * scrollingcoordinator/scrolling-tree/scrolling-tree-is-z-order-expected.txt: Added.
        * scrollingcoordinator/scrolling-tree/scrolling-tree-is-z-order.html: Added.

2019-01-29  Truitt Savell  <tsavell@apple.com>

        Updating expectations for two compositing/repaint/iframes/ tests
        https://bugs.webkit.org/show_bug.cgi?id=193907

        Unreviewed test gardening.

        * platform/mac-highsierra-wk1/compositing/repaint/iframes/compositing-iframe-scroll-repaint-expected.txt:
        * platform/mac-highsierra-wk1/compositing/repaint/iframes/compositing-iframe-with-fixed-background-doc-repaint-expected.txt:

2019-01-29  Youenn Fablet  <youenn@apple.com>

        Adopt new SPI to evaluate server certificate trust
        https://bugs.webkit.org/show_bug.cgi?id=193355

        Reviewed by Alex Christensen.

        * http/tests/ssl/certificate-validation-expected.txt: Added.
        * http/tests/ssl/certificate-validation.html: Added.

2019-01-29  Shawn Roberts  <sroberts@apple.com>

        [ Mac WK2 ] Layout Test http/tests/cache-storage/cache-clearing-origin.https.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=193976

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2019-01-29  Simon Fraser  <simon.fraser@apple.com>

        REGRESSION(r240553): [iOS] Crash in ScrollingTree::updateTreeFromStateNode when attempting to log in to icloud.com
        https://bugs.webkit.org/show_bug.cgi?id=193907
        rdar://problem/47604080

        Reviewed by Frédéric Wang.
        
        New ref test for layer positions in composited frames.
        
        New baselines with anchor point on the scroll layer.

        * compositing/geometry/composited-frame-contents-expected.html: Added.
        * compositing/geometry/composited-frame-contents.html: Added.
        * compositing/iframes/become-composited-nested-iframes-expected.txt:
        * compositing/iframes/become-overlapped-iframe-expected.txt:
        * compositing/iframes/composited-parent-iframe-expected.txt:
        * compositing/iframes/connect-compositing-iframe-delayed-expected.txt:
        * compositing/iframes/connect-compositing-iframe-expected.txt:
        * compositing/iframes/connect-compositing-iframe2-expected.txt:
        * compositing/iframes/connect-compositing-iframe3-expected.txt:
        * compositing/iframes/enter-compositing-iframe-expected.txt:
        * compositing/iframes/iframe-resize-expected.txt:
        * compositing/iframes/iframe-size-from-zero-expected.txt:
        * compositing/iframes/overlapped-iframe-expected.txt:
        * compositing/iframes/overlapped-iframe-iframe-expected.txt:
        * compositing/iframes/overlapped-nested-iframes-expected.txt:
        * compositing/iframes/page-cache-layer-tree-expected.txt:
        * compositing/iframes/remove-reinsert-webview-with-iframe-expected.txt:
        * compositing/iframes/resize-from-zero-size-expected.txt:
        * compositing/iframes/scrolling-iframe-expected.txt:
        * compositing/repaint/iframes/compositing-iframe-scroll-repaint-expected.txt:
        * compositing/repaint/iframes/compositing-iframe-with-fixed-background-doc-repaint-expected.txt:
        * compositing/visible-rect/iframe-with-layers-outside-viewport-expected.txt:
        * platform/ios-wk2/compositing/iframes/composited-parent-iframe-expected.txt:
        * platform/ios-wk2/compositing/iframes/connect-compositing-iframe-delayed-expected.txt:
        * platform/ios-wk2/compositing/iframes/connect-compositing-iframe-expected.txt:
        * platform/ios-wk2/compositing/iframes/connect-compositing-iframe2-expected.txt:
        * platform/ios-wk2/compositing/iframes/connect-compositing-iframe3-expected.txt:
        * platform/ios-wk2/compositing/iframes/enter-compositing-iframe-expected.txt:
        * platform/ios-wk2/compositing/iframes/iframe-resize-expected.txt:
        * platform/ios-wk2/compositing/iframes/leave-compositing-iframe-expected.txt:
        * platform/ios-wk2/compositing/iframes/overlapped-iframe-expected.txt:
        * platform/ios-wk2/compositing/iframes/page-cache-layer-tree-expected.txt:
        * platform/ios-wk2/compositing/iframes/scrolling-iframe-expected.txt:
        * platform/ios-wk2/compositing/rtl/rtl-iframe-absolute-expected.txt:
        * platform/ios-wk2/compositing/rtl/rtl-iframe-absolute-overflow-expected.txt:
        * platform/ios-wk2/compositing/rtl/rtl-iframe-fixed-expected.txt:
        * platform/ios-wk2/compositing/rtl/rtl-iframe-relative-expected.txt:
        * platform/ios-wk2/compositing/tiling/tiled-drawing-async-frame-scrolling-expected.txt:
        * platform/ios-wk2/compositing/visible-rect/iframe-and-layers-expected.txt:
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/fixed-inside-frame-expected.txt:
        * platform/ios/compositing/iframes/become-composited-nested-iframes-expected.txt:
        * platform/ios/compositing/iframes/become-overlapped-iframe-expected.txt:
        * platform/ios/compositing/iframes/invisible-nested-iframe-show-expected.txt:
        * platform/ios/compositing/iframes/overlapped-nested-iframes-expected.txt:
        * platform/ios/compositing/iframes/remove-reinsert-webview-with-iframe-expected.txt:
        * platform/ios/compositing/iframes/resizer-expected.txt:
        * platform/ios/compositing/visible-rect/iframe-with-layers-outside-viewport-expected.txt:
        * platform/mac-wk1/compositing/iframes/remove-reinsert-webview-with-iframe-expected.txt:
        * platform/mac-wk1/compositing/repaint/iframes/compositing-iframe-scroll-repaint-expected.txt:
        * platform/mac-wk1/compositing/repaint/iframes/compositing-iframe-with-fixed-background-doc-repaint-expected.txt:
        * platform/mac-wk2/compositing/tiling/tiled-drawing-async-frame-scrolling-expected.txt:
        * platform/mac/compositing/iframes/invisible-nested-iframe-show-expected.txt:
        * platform/mac/compositing/iframes/resizer-expected.txt:
        * platform/mac/compositing/visible-rect/iframe-and-layers-expected.txt:
        * scrollingcoordinator/scrolling-tree/fixed-inside-frame-expected.txt:
        * tiled-drawing/tile-coverage-iframe-to-zero-coverage-expected.txt:

2019-01-29  Justin Fan  <justin_fan@apple.com>

        [WebGPU] Fix and add validation to WebGPURenderPipeline and MTLVertexDescriptor
        https://bugs.webkit.org/show_bug.cgi?id=193926
        <rdar://problem/47327648>

        Reviewed by Myles C. Maxfield.

        Updated test for new vertex input logic. Now provides color as a vertex attribute.

        * webgpu/vertex-buffer-triangle-strip.html:

2019-01-29  Devin Rousso  <drousso@apple.com>

        Web Inspector: provide a way to edit page WebRTC settings on a remote target
        https://bugs.webkit.org/show_bug.cgi?id=193863

        Unreviewed, skip test from r240644 on WK1 since Media Streams aren't supported.

        * platform/mac-wk1/TestExpectations:

2019-01-28  Devin Rousso  <drousso@apple.com>

        Web Inspector: provide a way to edit page WebRTC settings on a remote target
        https://bugs.webkit.org/show_bug.cgi?id=193863
        <rdar://problem/47572764>

        Reviewed by Joseph Pecoraro.

        * inspector/page/overrideSetting-ICECandidateFilteringEnabled.html: Added.
        * inspector/page/overrideSetting-ICECandidateFilteringEnabled-expected.txt: Added.
        * inspector/page/overrideSetting-MockCaptureDevicesEnabled.html: Added.
        * inspector/page/overrideSetting-MockCaptureDevicesEnabled-expected.txt: Added.
        * platform/mac/TestExpectations:

2019-01-28  Ryan Haddad  <ryanhaddad@apple.com>

        REGRESSION (r240553): Crash in WebCore::ScrollingTree::updateTreeFromStateNode
        https://bugs.webkit.org/show_bug.cgi?id=193955

        Unreviewed test gardening.

        * platform/ios/TestExpectations: Skip crashing test to unblock EWS.

2019-01-28  Antoine Quint  <graouts@apple.com>

        Implement capture for Pointer Events on iOS
        https://bugs.webkit.org/show_bug.cgi?id=193917
        <rdar://problem/47605689>

        Reviewed by Dean Jackson.

        New tests for implicit pointer capture and the Element APIs related to pointer capture.

        * pointerevents/ios/pointer-events-implicit-capture-expected.txt: Added.
        * pointerevents/ios/pointer-events-implicit-capture-has-pointer-capture-in-pointer-down-expected.txt: Added.
        * pointerevents/ios/pointer-events-implicit-capture-has-pointer-capture-in-pointer-down.html: Added.
        * pointerevents/ios/pointer-events-implicit-capture-release-exception-expected.txt: Added.
        * pointerevents/ios/pointer-events-implicit-capture-release-exception.html: Added.
        * pointerevents/ios/pointer-events-implicit-capture-release-expected.txt: Added.
        * pointerevents/ios/pointer-events-implicit-capture-release.html: Added.
        * pointerevents/ios/pointer-events-implicit-capture.html: Added.
        * pointerevents/ios/pointer-events-set-pointer-capture-exceptions-expected.txt: Added.
        * pointerevents/ios/pointer-events-set-pointer-capture-exceptions.html: Added.

2019-01-28  Dean Jackson  <dino@apple.com>

        Produce "pen" Pointer Events if using a stylus (e.g. Apple Pencil)
        https://bugs.webkit.org/show_bug.cgi?id=193945
        <rdar://problem/47618922>

        Reviewed by Antoine Quint.

        Test for stylus -> "pen" Pointer Events.

        * pointerevents/ios/pointer-events-dispatch-on-stylus-expected.txt: Added.
        * pointerevents/ios/pointer-events-dispatch-on-stylus.html: Added.
        * pointerevents/ios/pointer-events-dispatch-on-touch.html: Test for "touch" type.
        * pointerevents/utils.js: Add a new helper for stylus event generation.
        (prototype.assertMatchesEvents):
        (const.ui.new.UIController.prototype.beginStylus):

2019-01-28  Daniel Bates  <dabates@apple.com>

        [iOS] Make Window virtual key code computation match Mac
        https://bugs.webkit.org/show_bug.cgi?id=193452

        Reviewed by Ryosuke Niwa.

        Add a test that ensures we do not regress DOM key events dispatches for combinations
        of Option and Command + Option key commands.

        * fast/events/ios/key-events-meta-alt-combinations-expected.txt: Added.
        * fast/events/ios/key-events-meta-alt-combinations.html: Added.
        * fast/events/ios/resources/key-tester.js: Added.
        (computeDifference):
        (areArraysEqual):
        (areKeyCommandsEqual):
        (KeyCommand):
        (KeyCommand.prototype.toString):
        (keyCommandsHasCommand):
        (computeSubsets.compareByModifierOrder):
        (handleKeyUp):
        (handleKeyPress):
        (log):
        (logKeyEvent):
        (displayNameForTest):
        (nextKeyPress):
        (runTest):
        (setUp):

2019-01-28  Antoine Quint  <graouts@apple.com>

        Limit user-agent interactions based on the touch-action property on iOS
        https://bugs.webkit.org/show_bug.cgi?id=193447
        <rdar://problem/47283874>

        Reviewed by Antti Koivisto and Simon Fraser.

        Add a new series of tests that check that the "none", "pan-x", "pan-y" and "pinch-zoom" values have the expected
        impact on page panning on iOS.

        * pointerevents/ios/touch-action-none-expected.txt: Added.
        * pointerevents/ios/touch-action-none-in-overflow-scrolling-touch-expected.txt: Added.
        * pointerevents/ios/touch-action-none-in-overflow-scrolling-touch.html: Added.
        * pointerevents/ios/touch-action-none-on-iframe-expected.txt: Added.
        * pointerevents/ios/touch-action-none-on-iframe.html: Added.
        * pointerevents/ios/touch-action-none-on-parent-expected.txt: Added.
        * pointerevents/ios/touch-action-none-on-parent.html: Added.
        * pointerevents/ios/touch-action-none.html: Added.
        * pointerevents/ios/touch-action-pan-x-expected.txt: Added.
        * pointerevents/ios/touch-action-pan-x-pan-y-expected.txt: Added.
        * pointerevents/ios/touch-action-pan-x-pan-y.html: Added.
        * pointerevents/ios/touch-action-pan-x.html: Added.
        * pointerevents/ios/touch-action-pan-y-expected.txt: Added.
        * pointerevents/ios/touch-action-pan-y.html: Added.
        * pointerevents/ios/touch-action-pinch-zoom-allows-zooming-expected.txt: Added.
        * pointerevents/ios/touch-action-pinch-zoom-allows-zooming.html: Added.
        * pointerevents/ios/touch-action-pinch-zoom-prevents-scrolling-expected.txt: Added.
        * pointerevents/ios/touch-action-pinch-zoom-prevents-scrolling.html: Added.

2019-01-28  Nikita Vasilyev  <nvasilyev@apple.com>

        Web Inspector: Add Changes panel to Elements tab
        https://bugs.webkit.org/show_bug.cgi?id=193803

        Reviewed by Devin Rousso.

        Test newly added Array.diffArrays.

        * inspector/unit-tests/array-utilities-expected.txt:
        * inspector/unit-tests/array-utilities.html:
        Use the old `InspectorTest.log` method since it shows diffs for actual and expected text.

2019-01-26  Simon Fraser  <simon.fraser@apple.com>

        Have composited RenderIFrame layers make FrameHosting scrolling tree nodes to parent the iframe's scrolling node
        https://bugs.webkit.org/show_bug.cgi?id=193879

        Reviewed by Antti Koivisto.

        New test results with FrameHosting nodes.

        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/coordinated-frame-expected.txt:
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/coordinated-frame-gain-scrolling-ancestor-expected.txt:
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/coordinated-frame-in-fixed-expected.txt:
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/coordinated-frame-lose-scrolling-ancestor-expected.txt:
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/fixed-inside-frame-expected.txt:
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/scrolling-tree-includes-frame-expected.txt:
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/toggle-coordinated-frame-scrolling-expected.txt:
        * scrollingcoordinator/scrolling-tree/coordinated-frame-expected.txt:
        * scrollingcoordinator/scrolling-tree/coordinated-frame-gain-scrolling-ancestor-expected.txt:
        * scrollingcoordinator/scrolling-tree/coordinated-frame-in-fixed-expected.txt:
        * scrollingcoordinator/scrolling-tree/coordinated-frame-lose-scrolling-ancestor-expected.txt:
        * scrollingcoordinator/scrolling-tree/fixed-inside-frame-expected.txt:
        * scrollingcoordinator/scrolling-tree/scrolling-tree-includes-frame-expected.txt:
        * scrollingcoordinator/scrolling-tree/toggle-coordinated-frame-scrolling-expected.txt:

2019-01-26  Devin Rousso  <drousso@apple.com>

        Web Inspector: handle CSS Color 4 color syntaxes
        https://bugs.webkit.org/show_bug.cgi?id=193166
        <rdar://problem/47062403>

        Reviewed by Simon Fraser.

        * inspector/model/color.html:
        * inspector/model/color-expected.txt:

2019-01-26  Devin Rousso  <drousso@apple.com>

        Web Inspector: provide a way to edit the user agent of a remote target
        https://bugs.webkit.org/show_bug.cgi?id=193862
        <rdar://problem/47359292>

        Reviewed by Joseph Pecoraro.

        * inspector/page/overrideUserAgent.html: Added.
        * inspector/page/overrideUserAgent-expected.txt: Added.

2019-01-26  Simon Fraser  <simon.fraser@apple.com>

        Move scrolling-tree/fixed-inside-frame.html into scrolling tree tests
        https://bugs.webkit.org/show_bug.cgi?id=193871

        Reviewed by Zalan Bujtas.

        Move another test into scrollingcoordinator/scrolling-tree, and now that it runs on iOS,
        add iOS results.

        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/fixed-inside-frame-expected.txt: Copied from LayoutTests/tiled-drawing/scrolling/frames/fixed-inside-frame-expected.txt.
        * scrollingcoordinator/scrolling-tree/fixed-inside-frame-expected.txt: Renamed from LayoutTests/tiled-drawing/scrolling/frames/fixed-inside-frame-expected.txt.
        * scrollingcoordinator/scrolling-tree/fixed-inside-frame.html: Renamed from LayoutTests/tiled-drawing/scrolling/frames/fixed-inside-frame.html.
        * scrollingcoordinator/scrolling-tree/resources/autoscrolling-frame-with-fixed.html: Renamed from LayoutTests/tiled-drawing/scrolling/frames/resources/autoscrolling-frame-with-fixed.html.

2019-01-26  Zalan Bujtas  <zalan@apple.com>

        [LFC] The default values for top/bottom in contentHeightForFormattingContextRoot should not be 0.
        https://bugs.webkit.org/show_bug.cgi?id=193867

        Reviewed by Antti Koivisto.

        * fast/block/block-only/abs-pos-with-border-padding-and-float-child-expected.html: Added.
        * fast/block/block-only/abs-pos-with-border-padding-and-float-child.html: Added.

2019-01-26  Zalan Bujtas  <zalan@apple.com>

        [LFC][BFC] Ignore last inflow child's collapsed through margin after when computing containing block's height.
        https://bugs.webkit.org/show_bug.cgi?id=193865

        Reviewed by Antti Koivisto.

        * fast/block/margin-collapse/collapsed-through-child-simple-expected.html: Added.
        * fast/block/margin-collapse/collapsed-through-child-simple.html: Added.

2019-01-25  Devin Rousso  <drousso@apple.com>

        Web Inspector: provide a way to edit page settings on a remote target
        https://bugs.webkit.org/show_bug.cgi?id=193813
        <rdar://problem/47359510>

        Reviewed by Joseph Pecoraro.

        * inspector/page/overrideSetting.html: Added.
        * inspector/page/overrideSetting-expected.txt: Added.

2019-01-25  Jer Noble  <jer.noble@apple.com>

        <video> elements not in the DOM should be allowed to AirPlay
        https://bugs.webkit.org/show_bug.cgi?id=193837

        Reviewed by Eric Carlson.

        * media/airplay-allows-buffering-expected.txt: Added.
        * media/airplay-allows-buffering.html: Added.
        * platform/ios/TestExpectations:

2019-01-25  Simon Fraser  <simon.fraser@apple.com>

        Fix failing scrollingcoordinator/scrolling-tree/remove-scrolling-role.html

        Test needed different macOS and iOS results. Added window.internals.settings.setAsyncOverflowScrollingEnabled(true)
        so the test uses async overflow scrolling in the macOS result.

        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/remove-scrolling-role-expected.txt: Copied from LayoutTests/scrollingcoordinator/scrolling-tree/remove-scrolling-role-expected.txt.
        * scrollingcoordinator/scrolling-tree/remove-scrolling-role-expected.txt:
        * scrollingcoordinator/scrolling-tree/remove-scrolling-role.html:

2019-01-25  Simon Fraser  <simon.fraser@apple.com>

        Add a scrolling tree test that toggles scrollability on an intermediate iframe
        https://bugs.webkit.org/show_bug.cgi?id=193849

        Reviewed by Dean Jackson.

        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/toggle-coordinated-frame-scrolling-expected.txt: Added.
        * scrollingcoordinator/scrolling-tree/resources/scroll-toggling-frame.html: Added.
        * scrollingcoordinator/scrolling-tree/toggle-coordinated-frame-scrolling-expected.txt: Added.
        * scrollingcoordinator/scrolling-tree/toggle-coordinated-frame-scrolling.html: Added.

2019-01-25  Truitt Savell  <tsavell@apple.com>

        Remove expectation for inspector/css/createStyleSheet.html as test appears to be passing. 
        https://bugs.webkit.org/show_bug.cgi?id=148636

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2019-01-25  Chris Dumez  <cdumez@apple.com>

        [iOS] Add support for the download attribute
        https://bugs.webkit.org/show_bug.cgi?id=167341
        <rdar://problem/30296281>

        Reviewed by Geoffrey Garen.

        Make download attribute layout tests iOS-friendly and unskip them now that they pass.

        * fast/dom/HTMLAnchorElement/anchor-download-unset.html:
        * fast/dom/HTMLAnchorElement/anchor-download-user-triggered-synthetic-click.html:
        * fast/dom/HTMLAnchorElement/anchor-file-blob-convert-to-download-async-delegate.html:
        * fast/dom/HTMLAnchorElement/anchor-file-blob-convert-to-download.html:
        * fast/dom/HTMLAnchorElement/anchor-file-blob-download-blank-base-target-popup-not-allowed.html:
        * fast/dom/HTMLAnchorElement/anchor-file-blob-download-blank-target-popup-not-allowed.html:
        * fast/dom/HTMLAnchorElement/anchor-file-blob-download-blank-target.html:
        * fast/dom/HTMLAnchorElement/anchor-file-blob-download-includes-backslash.html:
        * fast/dom/HTMLAnchorElement/anchor-file-blob-download-includes-doublequote.html:
        * fast/dom/HTMLAnchorElement/anchor-file-blob-download-includes-slashes.html:
        * fast/dom/HTMLAnchorElement/anchor-file-blob-download-includes-unicode.html:
        * fast/dom/HTMLAnchorElement/anchor-file-blob-download-no-extension.html:
        * fast/dom/HTMLAnchorElement/anchor-file-blob-download.html:
        * fast/dom/HTMLAnchorElement/anchor-nodownload-set.html:
        * fast/dom/HTMLAnchorElement/anchor-nodownload.html:
        * http/tests/download/anchor-download-attribute-content-disposition.html:
        * http/tests/download/anchor-download-no-extension.html:
        * http/tests/download/anchor-download-no-value.html:
        * http/tests/download/anchor-download-redirect.html:
        * http/tests/download/area-download.html:
        * http/tests/download/convert-cached-load-to-download.html:
        * http/tests/security/anchor-download-allow-blob.html:
        * http/tests/security/anchor-download-allow-data.html:
        * http/tests/security/anchor-download-allow-sameorigin.html:
        * http/tests/security/anchor-download-block-crossorigin-expected.txt:
        * http/tests/security/anchor-download-block-crossorigin.html:
        * platform/ios-wk2/TestExpectations:
        * platform/ios-wk2/http/tests/security/anchor-download-block-crossorigin-expected.txt: Copied from LayoutTests/http/tests/security/anchor-download-block-crossorigin-expected.txt.

2019-01-25  Shawn Roberts  <sroberts@apple.com>

        [ iOS Simulator Release ] Layout Test fast/animation/request-animation-frame.html is a flaky failure.
        https://bugs.webkit.org/show_bug.cgi?id=190888

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations:

2019-01-25  Daniel Bates  <dabates@apple.com>

        [iOS] uiController.keyDown() does not translate Control modified key
        https://bugs.webkit.org/show_bug.cgi?id=192898

        Reviewed by Wenson Hsieh.

        Make tests more robusts.

        * fast/events/ios/key-command-italic-dispatches-keydown.html: Remove the need to special-case the test runner and
        expect a single key event that represents Command + I. Now that uiController.keyDown() makes use of HIDEventGenerator
        we emit separate key events for each key pressed in the sequence: keydown Command, keydown i, keyup i, keyup Command.
        This matches how a human being would execute such a key sequence.
        * fast/forms/auto-fill-button/caps-lock-indicator-should-not-be-visible-when-auto-fill-strong-password-button-is-visible-expected.html:
        Make the test less flaky by hiding the tap highlight. Depending on timing, the tap highlight may be snapshotted and thus
        cause the reference test to mismatch the test. Mitigate this by hiding the tap highlight.
        * fast/text/scroll-text-overflow-ellipsis.html: Wait for a keyup event for the down arrow before declaring the
        test complete.

2019-01-25  Simon Fraser  <simon.fraser@apple.com>

        Move more scrolling tree tests into scrollingcoordinator/scrolling-tree
        https://bugs.webkit.org/show_bug.cgi?id=193845

        Reviewed by Tim Horton.

        Gather more tests of the scrolling tree into scrollingcoordinator/scrolling-tree.

        * platform/gtk/TestExpectations:
        * platform/ios-wk1/fast/scrolling/scrolling-tree-includes-frame-expected.txt: Removed.
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/coordinated-frame-expected.txt: Added.
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/coordinated-frame-gain-scrolling-ancestor-expected.txt: Copied from LayoutTests/tiled-drawing/scrolling/frames/coordinated-frame-gain-scrolling-ancestor-expected.txt.
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/coordinated-frame-in-fixed-expected.txt: Added.
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/coordinated-frame-lose-scrolling-ancestor-expected.txt: Added.
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/remove-coordinated-frame-expected.txt: Renamed from LayoutTests/platform/ios/fast/scrolling/scrolling-tree-includes-frame-expected.txt.
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/scrolling-tree-includes-frame-expected.txt: Renamed from LayoutTests/platform/ios-wk2/fast/scrolling/scrolling-tree-includes-frame-expected.txt.
        * platform/mac-wk1/fast/scrolling/scrolling-tree-includes-frame-expected.txt: Removed.
        * platform/win/TestExpectations:
        * scrollingcoordinator/scrolling-tree/coordinated-frame-expected.txt: Renamed from LayoutTests/tiled-drawing/scrolling/frames/coordinated-frame-expected.txt.
        * scrollingcoordinator/scrolling-tree/coordinated-frame-gain-scrolling-ancestor-expected.txt: Renamed from LayoutTests/tiled-drawing/scrolling/frames/coordinated-frame-gain-scrolling-ancestor-expected.txt.
        * scrollingcoordinator/scrolling-tree/coordinated-frame-gain-scrolling-ancestor.html: Renamed from LayoutTests/tiled-drawing/scrolling/frames/coordinated-frame-gain-scrolling-ancestor.html.
        * scrollingcoordinator/scrolling-tree/coordinated-frame-in-fixed-expected.txt: Renamed from LayoutTests/tiled-drawing/scrolling/frames/coordinated-frame-in-fixed-expected.txt.
        * scrollingcoordinator/scrolling-tree/coordinated-frame-in-fixed.html: Renamed from LayoutTests/tiled-drawing/scrolling/frames/coordinated-frame-in-fixed.html.
        * scrollingcoordinator/scrolling-tree/coordinated-frame-lose-scrolling-ancestor-expected.txt: Renamed from LayoutTests/tiled-drawing/scrolling/frames/coordinated-frame-lose-scrolling-ancestor-expected.txt.
        * scrollingcoordinator/scrolling-tree/coordinated-frame-lose-scrolling-ancestor.html: Renamed from LayoutTests/tiled-drawing/scrolling/frames/coordinated-frame-lose-scrolling-ancestor.html.
        * scrollingcoordinator/scrolling-tree/coordinated-frame.html: Renamed from LayoutTests/tiled-drawing/scrolling/frames/coordinated-frame.html.
        * scrollingcoordinator/scrolling-tree/remove-coordinated-frame-expected.txt: Renamed from LayoutTests/tiled-drawing/scrolling/frames/remove-coordinated-frame-expected.txt.
        * scrollingcoordinator/scrolling-tree/remove-coordinated-frame.html: Renamed from LayoutTests/tiled-drawing/scrolling/frames/remove-coordinated-frame.html.
        * scrollingcoordinator/scrolling-tree/remove-scrolling-role-expected.txt: Renamed from LayoutTests/fast/scrolling/ios/remove-scrolling-role-expected.txt.
        * scrollingcoordinator/scrolling-tree/remove-scrolling-role.html: Renamed from LayoutTests/fast/scrolling/ios/remove-scrolling-role.html.
        * scrollingcoordinator/scrolling-tree/resources/doc-with-sticky.html: Renamed from LayoutTests/tiled-drawing/scrolling/frames/resources/doc-with-sticky.html.
        * scrollingcoordinator/scrolling-tree/scrolling-tree-includes-frame-expected.txt: Renamed from LayoutTests/fast/scrolling/scrolling-tree-includes-frame-expected.txt.
        * scrollingcoordinator/scrolling-tree/scrolling-tree-includes-frame.html: Renamed from LayoutTests/fast/scrolling/scrolling-tree-includes-frame.html.

2019-01-25  Simon Fraser  <simon.fraser@apple.com>

        Move tests for scrolling tree mutations into their own directory
        https://bugs.webkit.org/show_bug.cgi?id=193836

        Reviewed by Tim Horton.

        Add a scrollingcoordinator/scrolling-tree directory, which will contain tests for scrolling
        tree mutations.

        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/gain-scrolling-node-parent-expected.txt: Renamed from LayoutTests/platform/ios/scrollingcoordinator/gain-scrolling-node-parent-expected.txt.
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/lose-scrolling-node-parent-expected.txt: Renamed from LayoutTests/platform/ios/scrollingcoordinator/lose-scrolling-node-parent-expected.txt.
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/reparent-across-compositing-layers-expected.txt: Renamed from LayoutTests/platform/ios-wk2/scrollingcoordinator/reparent-across-compositing-layers-expected.txt.
        * platform/ios-wk2/scrollingcoordinator/scrolling-tree/reparent-with-layer-removal-expected.txt: Renamed from LayoutTests/platform/ios-wk2/scrollingcoordinator/reparent-with-layer-removal-expected.txt.
        * scrollingcoordinator/scrolling-tree/gain-scrolling-node-parent-expected.txt: Renamed from LayoutTests/scrollingcoordinator/gain-scrolling-node-parent-expected.txt.
        * scrollingcoordinator/scrolling-tree/gain-scrolling-node-parent.html: Renamed from LayoutTests/scrollingcoordinator/gain-scrolling-node-parent.html.
        * scrollingcoordinator/scrolling-tree/lose-scrolling-node-parent-expected.txt: Renamed from LayoutTests/scrollingcoordinator/lose-scrolling-node-parent-expected.txt.
        * scrollingcoordinator/scrolling-tree/lose-scrolling-node-parent.html: Renamed from LayoutTests/scrollingcoordinator/lose-scrolling-node-parent.html.
        * scrollingcoordinator/scrolling-tree/reparent-across-compositing-layers-expected.txt: Renamed from LayoutTests/scrollingcoordinator/reparent-across-compositing-layers-expected.txt.
        * scrollingcoordinator/scrolling-tree/reparent-across-compositing-layers.html: Renamed from LayoutTests/scrollingcoordinator/reparent-across-compositing-layers.html.
        * scrollingcoordinator/scrolling-tree/reparent-with-layer-removal-expected.txt: Renamed from LayoutTests/scrollingcoordinator/reparent-with-layer-removal-expected.txt.
        * scrollingcoordinator/scrolling-tree/reparent-with-layer-removal.html: Renamed from LayoutTests/scrollingcoordinator/reparent-with-layer-removal.html.

2019-01-25  Ryosuke Niwa  <rniwa@webkit.org>

        iOS: inputmode="none" disables hardware keyboard's globe key
        https://bugs.webkit.org/show_bug.cgi?id=193811
        <rdar://problem/47406553>

        Reviewed by Wenson Hsieh.

        Updated and renamed the test expecting the keyboard to update upon inputmode content attribute changed
        to use inputmode="decimal" instead of inputmode="none", and updated another test to expect inputmode="none"
        has no effect instead of hiding the keyboard.

        * fast/forms/ios/inputmode-change-update-keyboard-expected.txt: Renamed from inputmode-none-removed-expected.txt.
        * fast/forms/ios/inputmode-change-update-keyboard.html: Renamed from inputmode-none-removed.html.
        * fast/forms/ios/inputmode-none-expected.txt:
        * fast/forms/ios/inputmode-none.html:

2019-01-25  Jonathan Bedard  <jbedard@apple.com>

        webkitpy: Implement device type specific expected results (Gardening)
        https://bugs.webkit.org/show_bug.cgi?id=192162
        <rdar://problem/46345449>

        Unreviewed test gardening.

        * platform/ios/TestExpectations: Remove non-existant directories.
        * platform/mac/TestExpectations: Ditto.

2019-01-25  Wenson Hsieh  <wenson_hsieh@apple.com>

        Need a way for JavaScript (or bundle) code to participate in undo
        https://bugs.webkit.org/show_bug.cgi?id=190009
        <rdar://problem/44807048>

        Reviewed by Ryosuke Niwa.

        Add a few new layout tests covering `UndoManager.addItem()`.

        * editing/undo-manager/undo-manager-add-item-exceptions-expected.txt: Added.
        * editing/undo-manager/undo-manager-add-item-exceptions.html: Added.

        Add a test to verify that we throw exceptions when calling addItem() in a couple of circumstances.

        * editing/undo-manager/undo-manager-add-item-expected.txt: Added.
        * editing/undo-manager/undo-manager-add-item.html: Added.

        Add a test that exercises the new API in both the top-level context and a child frame.

        * editing/undo-manager/undo-manager-delete-stale-undo-items-expected.txt: Added.
        * editing/undo-manager/undo-manager-delete-stale-undo-items.html: Added.

        Add a test to verify that after adding undo items, undoing, and then performing other edit actions, garbage
        collection will destroy JS wrappers for the previously added UndoItems, since these undo items' handlers can no
        longer be invoked.

        * editing/undo-manager/undo-manager-item-labels-expected.txt: Added.
        * editing/undo-manager/undo-manager-item-labels.html: Added.

        Add a test verifying that the undo and redo action labels are updated correctly when undoing and redoing.

        * editing/undo-manager/undo-manager-undo-redo-after-garbage-collection-expected.txt: Added.
        * editing/undo-manager/undo-manager-undo-redo-after-garbage-collection.html: Added.

        Add a test to verify that triggering garbage collection after adding an undo item without keeping references to
        the item (or its undo/redo handlers) doesn't break the API.

        * resources/ui-helper.js:
        (window.UIHelper.undoAndRedoLabels):

        Add a helper method to grab the platform's current undo and redo action names.

        (window.UIHelper):

2019-01-25  Devin Rousso  <drousso@apple.com>

        Web Inspector: improve invalid Audit/Recording JSON error messages
        https://bugs.webkit.org/show_bug.cgi?id=193476
        <rdar://problem/47303659>

        Reviewed by Joseph Pecoraro.

        * inspector/model/auditTestCase.html:
        * inspector/model/auditTestCase-expected.txt:
        * inspector/model/auditTestCaseResult-expected.txt:
        * inspector/model/auditTestGroup.html:
        * inspector/model/auditTestGroup-expected.txt:
        * inspector/model/auditTestGroupResult-expected.txt:
        * inspector/model/recording-expected.txt:

2019-01-24  Devin Rousso  <drousso@apple.com>

        Web Inspector: Audit: add supports key to test/group for compatibility
        https://bugs.webkit.org/show_bug.cgi?id=193686
        <rdar://problem/47460872>

        Reviewed by Joseph Pecoraro.

        * inspector/audit/version.html:

2019-01-24  Joseph Pecoraro  <pecoraro@apple.com>

        Web Inspector: CPU Usage Timeline
        https://bugs.webkit.org/show_bug.cgi?id=193730
        <rdar://problem/46797201>

        Reviewed by Devin Rousso.

        * inspector/cpu-profiler/tracking-expected.txt: Added.
        * inspector/cpu-profiler/tracking.html: Added.
        Test the CPUProfiler domain emits events.

        * inspector/heap/tracking-expected.txt:
        * inspector/heap/tracking.html:
        * inspector/memory/tracking-expected.txt:
        * inspector/memory/tracking.html:
        * inspector/script-profiler/tracking-expected.txt:
        * inspector/script-profiler/tracking.html:
        Update test naming.

        * platform/win/TestExpectations:
        Skip on platforms without RESOURCE_USAGE.

2019-01-24  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] Unable to make a selection in jsfiddle.net using arrow keys when requesting desktop site
        https://bugs.webkit.org/show_bug.cgi?id=193758
        <rdar://problem/43614978>

        Reviewed by Tim Horton.

        Mark some existing layout tests as passing on iOS. Additionally, remove failing expectations for another
        existing layout test on iOS.

        * platform/ios/TestExpectations:
        * platform/ios/editing/text-iterator/hidden-textarea-selection-quirk-expected.txt: Removed.

2019-01-24  John Wilander  <wilander@apple.com>

        Add Ad Click Attribution as an internal/experimental feature
        https://bugs.webkit.org/show_bug.cgi?id=193685
        <rdar://problem/47450399>

        Reviewed by Brent Fulgham.

        * http/tests/adClickAttribution/anchor-tag-attributes-reflect-expected.txt: Added.
        * http/tests/adClickAttribution/anchor-tag-attributes-reflect.html: Added.
        * platform/win/TestExpectations:
            Skipped on Windows for now.

2019-01-23  Oriol Brufau  <obrufau@igalia.com>

        Allow failures in flaky tests from bug 193657
        https://bugs.webkit.org/show_bug.cgi?id=193736

        Unreviewed test gardening.

        * TestExpectations:

2019-01-23  Eric Liang  <ericliang@apple.com>

        AX: [GTK] Layout test accessibility/set-selected-editable.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=193623

        Reviewed by Michael Catanzaro.
        
        AXSelected attribute behavior on GTK is different. Skipped.

        * platform/gtk/TestExpectations:

2019-01-22  Simon Fraser  <simon.fraser@apple.com>

        Compositing updates need to reparent scrolling tree nodes with a changed ancestor
        https://bugs.webkit.org/show_bug.cgi?id=193699

        Reviewed by Frédéric Wang.

        * platform/ios-wk2/scrollingcoordinator/reparent-across-compositing-layers-expected.txt: Added.
        * platform/ios-wk2/scrollingcoordinator/reparent-with-layer-removal-expected.txt: Added.
        * scrollingcoordinator/reparent-across-compositing-layers-expected.txt: Added.
        * scrollingcoordinator/reparent-across-compositing-layers.html: Added.
        * scrollingcoordinator/reparent-with-layer-removal-expected.txt: Added.
        * scrollingcoordinator/reparent-with-layer-removal.html: Added.

2019-01-23  Oriol Brufau  <obrufau@igalia.com>

        [css-logical] Implement flow-relative inset properties
        https://bugs.webkit.org/show_bug.cgi?id=189441

        Reviewed by Dean Jackson.

        Check that the new CSS properties are disabled behind runtime flags
        and are not exposed.

        * webexposed/css-properties-behind-flags-expected.txt:
        * webexposed/css-properties-behind-flags.html:

2019-01-23  Rob Buis  <rbuis@igalia.com>

        Update MIME type parser
        https://bugs.webkit.org/show_bug.cgi?id=180526

        Reviewed by Frédéric Wang.

        Adjust test expectation.

        * http/tests/xmlhttprequest/post-blob-content-type-async-expected.txt:
        * http/tests/xmlhttprequest/post-blob-content-type-sync-expected.txt:
        * http/tests/xmlhttprequest/post-blob-content-type-tests.js:

2019-01-22  Simon Fraser  <simon.fraser@apple.com>

        Adding a child to a ScrollingStateNode needs to trigger a tree state commit
        https://bugs.webkit.org/show_bug.cgi?id=193682

        Reviewed by Zalan Bujtas.

        * platform/ios/scrollingcoordinator/gain-scrolling-node-parent-expected.txt: Added.
        * platform/ios/scrollingcoordinator/lose-scrolling-node-parent-expected.txt: Added.
        * scrollingcoordinator/gain-scrolling-node-parent-expected.txt: Added.
        * scrollingcoordinator/gain-scrolling-node-parent.html: Added.
        * scrollingcoordinator/lose-scrolling-node-parent-expected.txt: Added.
        * scrollingcoordinator/lose-scrolling-node-parent.html: Added.

2019-01-22  Simon Fraser  <simon.fraser@apple.com>

        Make scrollingcoordinator tests only run on iOS/macOS WK2
        https://bugs.webkit.org/show_bug.cgi?id=193690

        Reviewed by Zalan Bujtas.
        
        scrollingcoordinator is only active in WK2, and both WPE and WinCairo skip this directory
        already, so skip it at the top level, and re-enable for mac-wk2 and ios-wk2.

        Also do some cleanup after tiled-drawing/ios was removed on 1/18.

        * TestExpectations:
        * platform/ios-device/TestExpectations:
        * platform/ios-wk2/TestExpectations:
        * platform/ios/TestExpectations:
        * platform/mac-wk2/TestExpectations:

2019-01-22  Devin Rousso  <drousso@apple.com>

        Web Inspector: InspectorInstrumentation::willEvaluateScript should include column number
        https://bugs.webkit.org/show_bug.cgi?id=116191
        <rdar://problem/13905910>

        Reviewed by Joseph Pecoraro.

        * inspector/timeline/line-column.html: Added.
        * inspector/timeline/line-column-expected.txt: Added.

2019-01-22  Devin Rousso  <drousso@apple.com>

        Web Inspector: expose Audit and Recording versions to the frontend
        https://bugs.webkit.org/show_bug.cgi?id=193262
        <rdar://problem/47130684>

        Reviewed by Joseph Pecoraro.

        * inspector/audit/version.html: Added.
        * inspector/audit/version-expected.txt: Added.
        * inspector/recording/version.html: Added.
        * inspector/recording/version-expected.txt: Added.

2019-01-22  Nikita Vasilyev  <nvasilyev@apple.com>

        Web Inspector: Styles: refactor properties/allProperties/visibleProperties/allVisibleProperties
        https://bugs.webkit.org/show_bug.cgi?id=193615

        Reviewed by Devin Rousso.

        Rename:
        - properties to enabledProperties;
        - allProperties to properties.

        * inspector/css/css-property-expected.txt:
        * inspector/css/css-property.html:
        * inspector/css/force-page-appearance.html:
        * inspector/css/matched-style-properties.html:
        * inspector/css/modify-css-property.html:
        * inspector/css/shadow-scoped-style.html:

2019-01-22  Sihui Liu  <sihui_liu@apple.com>

        Layout test storage/indexeddb/open-during-transaction-private.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=193600

        Reviewed by Brady Eidson.

        Make sure the second request is finished before the third one so that test ends properly.

        * storage/indexeddb/open-during-transaction-expected.txt:
        * storage/indexeddb/open-during-transaction-private-expected.txt:
        * storage/indexeddb/resources/open-during-transaction.js:
        (tryOpens.openreq3.onsuccess):
        (tryOpens.openreq2.onsuccess):
        (tryOpens):

2019-01-22  Devin Rousso  <drousso@apple.com>

        Web Inspector: Audit: provide a way to get related Accessibility properties for a given node
        https://bugs.webkit.org/show_bug.cgi?id=193227
        <rdar://problem/46787862>

        Reviewed by Joseph Pecoraro.

        * inspector/audit/run-accessibility.html:
        * inspector/audit/run-accessibility-expected.txt:

2019-01-22  Simon Fraser  <simon.fraser@apple.com>

        Remove an iOS quirk where iframe renderers are identified as "RenderPartObject" in layout test results
        https://bugs.webkit.org/show_bug.cgi?id=193692

        Reviewed by Zalan Bujtas.

        Replace all instances of "RenderPartObject" with "RenderIFrame".

        * platform/ios-wk1/editing/pasteboard/4631972-expected.txt:
        * platform/ios-wk1/editing/pasteboard/subframe-dragndrop-1-expected.txt:
        * platform/ios-wk1/editing/selection/iframe-expected.txt:
        * platform/ios-wk1/editing/selection/select-all-iframe-expected.txt:
        * platform/ios-wk1/fast/overflow/scrollRevealButton-expected.txt:
        * platform/ios-wk1/fast/text/selection-hard-linebreak-expected.txt:
        * platform/ios-wk2/compositing/iframes/compositing-for-scrollable-iframe-expected.txt:
        * platform/ios-wk2/editing/pasteboard/4631972-expected.txt:
        * platform/ios-wk2/editing/pasteboard/subframe-dragndrop-1-expected.txt:
        * platform/ios-wk2/editing/selection/select-all-iframe-expected.txt:
        * platform/ios-wk2/fast/forms/basic-textareas-expected.txt:
        * platform/ios-wk2/fast/forms/tabbing-input-iframe-expected.txt:
        * platform/ios-wk2/fast/forms/targeted-frame-submission-expected.txt:
        * platform/ios-wk2/fast/frames/flattening/iframe-flattening-out-of-view-and-scroll-expected.txt:
        * platform/ios-wk2/fast/frames/flattening/iframe-flattening-out-of-view-scroll-and-relayout-expected.txt:
        * platform/ios-wk2/fast/frames/onlyCommentInIFrame-expected.txt:
        * platform/ios-wk2/fast/overflow/scrollRevealButton-expected.txt:
        * platform/ios-wk2/fast/replaced/border-radius-clip-expected.txt:
        * platform/ios/compositing/iframes/composited-iframe-alignment-expected.txt:
        * platform/ios/compositing/iframes/compositing-for-scrollable-iframe-expected.txt:
        * platform/ios/compositing/iframes/iframe-copy-on-scroll-expected.txt:
        * platform/ios/compositing/iframes/iframe-in-composited-layer-expected.txt:
        * platform/ios/css2.1/20110323/absolute-replaced-height-004-expected.txt:
        * platform/ios/css2.1/20110323/absolute-replaced-height-005-expected.txt:
        * platform/ios/css2.1/20110323/absolute-replaced-height-007-expected.txt:
        * platform/ios/css2.1/20110323/absolute-replaced-height-011-expected.txt:
        * platform/ios/css2.1/20110323/absolute-replaced-height-012-expected.txt:
        * platform/ios/css2.1/20110323/absolute-replaced-height-014-expected.txt:
        * platform/ios/css2.1/20110323/absolute-replaced-height-018-expected.txt:
        * platform/ios/css2.1/20110323/absolute-replaced-height-019-expected.txt:
        * platform/ios/css2.1/20110323/absolute-replaced-height-021-expected.txt:
        * platform/ios/css2.1/20110323/absolute-replaced-height-025-expected.txt:
        * platform/ios/css2.1/20110323/absolute-replaced-height-026-expected.txt:
        * platform/ios/css2.1/20110323/absolute-replaced-height-028-expected.txt:
        * platform/ios/css2.1/20110323/absolute-replaced-height-032-expected.txt:
        * platform/ios/css2.1/20110323/absolute-replaced-height-033-expected.txt:
        * platform/ios/css2.1/20110323/absolute-replaced-height-035-expected.txt:
        * platform/ios/css2.1/20110323/block-replaced-height-004-expected.txt:
        * platform/ios/css2.1/20110323/block-replaced-height-005-expected.txt:
        * platform/ios/css2.1/20110323/block-replaced-height-007-expected.txt:
        * platform/ios/css2.1/20110323/float-replaced-height-004-expected.txt:
        * platform/ios/css2.1/20110323/float-replaced-height-005-expected.txt:
        * platform/ios/css2.1/20110323/float-replaced-height-007-expected.txt:
        * platform/ios/css2.1/20110323/inline-block-replaced-height-004-expected.txt:
        * platform/ios/css2.1/20110323/inline-block-replaced-height-005-expected.txt:
        * platform/ios/css2.1/20110323/inline-block-replaced-height-007-expected.txt:
        * platform/ios/css2.1/20110323/inline-replaced-height-004-expected.txt:
        * platform/ios/css2.1/20110323/inline-replaced-height-005-expected.txt:
        * platform/ios/css2.1/20110323/inline-replaced-height-007-expected.txt:
        * platform/ios/editing/execCommand/find-after-replace-expected.txt:
        * platform/ios/editing/execCommand/paste-1-expected.txt:
        * platform/ios/editing/pasteboard/drag-image-to-contenteditable-in-iframe-expected.txt:
        * platform/ios/editing/pasteboard/image-in-iframe-expected.txt:
        * platform/ios/editing/pasteboard/paste-2-expected.txt:
        * platform/ios/editing/selection/4776665-expected.txt:
        * platform/ios/editing/selection/4960137-expected.txt:
        * platform/ios/editing/selection/4975120-expected.txt:
        * platform/ios/editing/selection/drag-in-iframe-expected.txt:
        * platform/ios/editing/selection/drag-to-contenteditable-iframe-expected.txt:
        * platform/ios/editing/selection/iframe-expected.txt:
        * platform/ios/fast/block/basic/013-expected.txt:
        * platform/ios/fast/block/positioning/window-height-change-expected.txt:
        * platform/ios/fast/css/line-height-overflow-expected.txt:
        * platform/ios/fast/css/resize-corner-tracking-transformed-iframe-expected.txt:
        * platform/ios/fast/css3-text/css3-text-decoration/text-decoration-line-scaled-expected.txt:
        * platform/ios/fast/dom/Window/open-existing-pop-up-blocking-expected.txt:
        * platform/ios/fast/flexbox/016-expected.txt:
        * platform/ios/fast/forms/basic-textareas-expected.txt:
        * platform/ios/fast/forms/tabbing-input-iframe-expected.txt:
        * platform/ios/fast/forms/targeted-frame-submission-expected.txt:
        * platform/ios/fast/frames/001-expected.txt:
        * platform/ios/fast/frames/flattening/iframe-flattening-fixed-height-expected.txt:
        * platform/ios/fast/frames/flattening/iframe-flattening-fixed-width-and-height-expected.txt:
        * platform/ios/fast/frames/flattening/iframe-flattening-fixed-width-and-height-no-scrolling-expected.txt:
        * platform/ios/fast/frames/flattening/iframe-flattening-fixed-width-expected.txt:
        * platform/ios/fast/frames/flattening/iframe-flattening-nested-expected.txt:
        * platform/ios/fast/frames/flattening/iframe-flattening-offscreen-expected.txt:
        * platform/ios/fast/frames/flattening/iframe-flattening-out-of-view-and-scroll-expected.txt:
        * platform/ios/fast/frames/flattening/iframe-flattening-out-of-view-expected.txt:
        * platform/ios/fast/frames/flattening/iframe-flattening-out-of-view-scroll-and-relayout-expected.txt:
        * platform/ios/fast/frames/flattening/iframe-flattening-simple-expected.txt:
        * platform/ios/fast/frames/frameElement-iframe-expected.txt:
        * platform/ios/fast/frames/iframe-option-crash-expected.txt:
        * platform/ios/fast/frames/iframe-scrolling-attribute-expected.txt:
        * platform/ios/fast/frames/iframe-with-frameborder-expected.txt:
        * platform/ios/fast/frames/onlyCommentInIFrame-expected.txt:
        * platform/ios/fast/frames/take-focus-from-iframe-expected.txt:
        * platform/ios/fast/images/favicon-as-image-expected.txt:
        * platform/ios/fast/overflow/scrollRevealButton-expected.txt:
        * platform/ios/fast/regions/repaint/line-flow-with-floats-in-regions-expected.txt:
        * platform/ios/fast/replaced/007-expected.txt:
        * platform/ios/fast/replaced/border-radius-clip-expected.txt:
        * platform/ios/fast/replaced/percent-height-in-anonymous-block-in-table-expected.txt:
        * platform/ios/fast/replaced/replaced-breaking-expected.txt:
        * platform/ios/fast/table/quote-text-around-iframe-expected.txt:
        * platform/ios/fast/text-autosizing/ios/contenteditable-expected.txt:
        * platform/ios/http/tests/loading/simple-subframe-expected.txt:
        * platform/ios/http/tests/local/file-url-sent-as-referer-expected.txt:
        * platform/ios/http/tests/misc/favicon-as-image-expected.txt:
        * platform/ios/http/tests/misc/frame-access-during-load-expected.txt:
        * platform/ios/http/tests/misc/iframe404-expected.txt:
        * platform/ios/http/tests/multipart/invalid-image-data-standalone-expected.txt:
        * platform/ios/http/tests/security/contentSecurityPolicy/sandbox-empty-in-http-header-inherited-by-subframe-expected.txt:
        * platform/ios/imported/w3c/web-platform-tests/html/dom/dynamic-markup-insertion/document-write/nested-document-write-2-expected.txt:
        * platform/ios/ios/fast/fixed/frame-with-fixed-expected.txt:
        * platform/ios/svg/custom/embedding-external-svgs-expected.txt:
        * platform/ios/svg/hixie/rendering-model/003-expected.txt:
        * platform/ios/tables/mozilla/bugs/bug131020-expected.txt:
        * platform/ios/tables/mozilla/bugs/bug137388-1-expected.txt:
        * platform/ios/tables/mozilla/bugs/bug137388-2-expected.txt:
        * platform/ios/tables/mozilla/bugs/bug137388-3-expected.txt:
        * platform/ios/tables/mozilla/bugs/bug38916-expected.txt:
        * platform/ios/tables/mozilla/bugs/bug4527-expected.txt:
        * platform/ios/tables/mozilla/bugs/bug50695-2-expected.txt:
        * platform/ios/webarchive/loading/cache-expired-subresource-expected.txt:

2019-01-22  Said Abou-Hallawa  <sabouhallawa@apple.com>

        Dynamic changes in the style attributes of an SVGElement do no affect the <use> instances
        https://bugs.webkit.org/show_bug.cgi?id=193647

        Reviewed by Simon Fraser.

        * svg/custom/svg-use-style-dynamic-change-invalidate-expected.svg: Added.
        * svg/custom/svg-use-style-dynamic-change-invalidate.svg: Added.

2019-01-22  Michael Catanzaro  <mcatanzaro@igalia.com>

        Unreviewed, skip all resource load statistics tests on GTK

        We don't have this feature enabled yet, so shouldn't be running the tests. Yet.

        * platform/gtk/TestExpectations:

2019-01-22  Devin Rousso  <drousso@apple.com>

        Web Inspector: Audit: provide a way to get related Accessibility nodes for a given node
        https://bugs.webkit.org/show_bug.cgi?id=193225
        <rdar://problem/46799956>

        Reviewed by Joseph Pecoraro.

        * inspector/audit/run-accessibility.html:
        * inspector/audit/run-accessibility-expected.txt:

2019-01-22  Simon Fraser  <simon.fraser@apple.com>

        Fix the position of layers nested inside of composited overflow-scroll
        https://bugs.webkit.org/show_bug.cgi?id=193642

        Reviewed by Antti Koivisto and Sam Weinig.
        
        Ref test. Black bar obscures the area that's different because of overlay/non-overlay
        scrollbar differences between macOS and iOS.

        * compositing/geometry/fixed-inside-overflow-scroll-expected.html: Added.
        * compositing/geometry/fixed-inside-overflow-scroll.html: Added.

2019-01-22  Oriol Brufau  <obrufau@igalia.com>

        [css-logical] Implement flow-relative margin, padding and border shorthands
        https://bugs.webkit.org/show_bug.cgi?id=188697

        Reviewed by Simon Fraser and Antti Koivisto.

        Add tests checking that CSS properties disabled behind runtime flags
        are not exposed.

        * webexposed/css-properties-behind-flags-expected.txt: Added.
        * webexposed/css-properties-behind-flags.html: Added.

2019-01-21  Antti Koivisto  <antti@apple.com>

        [iOS] Handle hit testing for subframes
        https://bugs.webkit.org/show_bug.cgi?id=192303

        Reviewed by Frédéric Wang.

        Test by Frederic Wang.

        * fast/scrolling/ios/hit-testing-iframe-expected.html: Added.
        * fast/scrolling/ios/hit-testing-iframe.html: Added.

2019-01-21  Zalan Bujtas  <zalan@apple.com>

        [LFC][Floats] Take float top position into account when computing containing block height.
        https://bugs.webkit.org/show_bug.cgi?id=193655

        Reviewed by Antti Koivisto.

        * fast/block/float/float-first-child-and-clear-sibling-expected.html: Added.
        * fast/block/float/float-first-child-and-clear-sibling.html: Added.

2019-01-21  Frederic Wang  <fwang@igalia.com>

        Add a basic test for scrollable iframe on iOS
        https://bugs.webkit.org/show_bug.cgi?id=193650

        Reviewed by Antti Koivisto.

        * fast/scrolling/ios/scroll-iframe-expected.html: Added.
        * fast/scrolling/ios/scroll-iframe.html: Added.

2019-01-20  Michael Catanzaro  <mcatanzaro@igalia.com>

        Unreviewed GTK test gardening

        * accessibility/gtk/xml-roles-exposed-expected.txt:
        * platform/gtk/TestExpectations:
        * platform/gtk/imported/w3c/web-platform-tests/fetch/security/dangling-markup-mitigation-data-url.tentative.sub-expected.txt: Removed.
        * platform/gtk/inspector/css/shadow-scoped-style-expected.txt: Added.
        * platform/gtk/svg/text/font-size-below-point-five-expected.txt:

2019-01-20  chris fleizach  <cfleizach@apple.com>

        AX: Support returning relative frames for accessibility
        https://bugs.webkit.org/show_bug.cgi?id=193414
        <rdar://problem/47268501>

        Reviewed by Zalan Bujtas.

        * accessibility/mac/relative-frame-expected.txt: Added.
        * accessibility/mac/relative-frame.html: Added.
        * platform/mac-wk1/TestExpectations:

2019-01-20  Michael Catanzaro  <mcatanzaro@igalia.com>

        Unreviewed gardening, add failure expectation for js/intl-numberformat.html

        This test requires an old version of ICU to pass.

        * platform/gtk/TestExpectations:

2019-01-20  Michael Catanzaro  <mcatanzaro@igalia.com>

        Unreviewed, rolling out r240209.

        Broke GTK/WPE injected bundle

        Reverted changeset:

        "AX: Support returning relative frames for accessibility"
        https://bugs.webkit.org/show_bug.cgi?id=193414
        https://trac.webkit.org/changeset/240209

2019-01-20  chris fleizach  <cfleizach@apple.com>

        AX: Support returning relative frames for accessibility
        https://bugs.webkit.org/show_bug.cgi?id=193414
        <rdar://problem/47268501>

        Reviewed by Zalan Bujtas.

        * accessibility/mac/relative-frame-expected.txt: Added.
        * accessibility/mac/relative-frame.html: Added.
        * platform/mac-wk1/TestExpectations:

2019-01-19  Zalan Bujtas  <zalan@apple.com>

        [LFC][Floats] Ensure that floats in FloatingContext::m_floats are always horizontally ordered.
        https://bugs.webkit.org/show_bug.cgi?id=193613

        Reviewed by Antti Koivisto.

        * fast/block/float/floats-with-negative-horizontal-margin-expected.html: Added.
        * fast/block/float/floats-with-negative-horizontal-margin.html: Added.

2019-01-19  Eric Liang  <ericliang@apple.com>

        AXSelected attribute on RadioButton should not be settable.
        https://bugs.webkit.org/show_bug.cgi?id=193371

        Reviewed by Chris Fleizach.

        This change make RadioButton AXSelected attribute no-settable. If this attribute is not writable, then the trackpad should work correctly.

        * accessibility/set-selected-editable-expected.txt: Added.
        * accessibility/set-selected-editable.html: Added.

2019-01-18  Ryosuke Niwa  <rniwa@webkit.org>

        iOS: Updating input mode should update the software keyboard
        https://bugs.webkit.org/show_bug.cgi?id=193565
        <rdar://problem/47376334>

        Reviewed by Wenson Hsieh.

        Added a regression test for removing inputmode content attribute with the value of "none".

        The test methodology is different between testRunner and in-browser since we don't force
        software keyboard while running layout tests inside simulator which can elimiate
        the visual viewport difference inside the test runner, and in-browser testing obviously
        doesn't have access to the internal keyboard metrics.

        * fast/forms/ios/inputmode-none-removed-expected.txt: Added.
        * fast/forms/ios/inputmode-none-removed.html: Added.

2019-01-18  Justin Fan  <justin_fan@apple.com>

        (WIP) [WebGPU] WebGPUProgrammablePassEncoder::setBindGroup prototype
        https://bugs.webkit.org/show_bug.cgi?id=193457
        <rdar://problem/47296678>

        Reviewed by Dean Jackson.

        Draw 3 triangles via WebGPU to create a green square canvas, with reference.
        Each vertex is stored in its own WebGPUBuffer and they are mix/matched per bind group.
        This tests multiple resource bindings in one bind group as well as setting multiple 
        bind groups per draw call and per command encoder. 

        * webgpu/buffer-resource-triangles-expected.html: Added. Reference generated using 2D canvas.
        * webgpu/buffer-resource-triangles.html: Added. 
                1) Draw top two triangles using two bind groups in one draw call.
                2) Swap first bind group and issue second draw call to draw middle triangle.
        * webgpu/js/webgpu-functions.js:
        (createBasicPipeline): Now handles new primitive topologies.

2019-01-18  Antti Koivisto  <antti@apple.com>

        Implement asynchronous frame scrolling for iOS
        https://bugs.webkit.org/show_bug.cgi?id=193539
        <rdar://problem/47379873>

        Reviewed by Simon Fraser.

        * platform/ios-wk2/compositing/tiling/tiled-drawing-async-frame-scrolling-expected.txt:

2019-01-18  Ali Juma  <ajuma@chromium.org>

        FetchResponse::url should return the empty string for tainted responses
        https://bugs.webkit.org/show_bug.cgi?id=193553

        Reviewed by Youenn Fablet.

        * http/wpt/fetch/response-opaque-clone.html:

2019-01-18  Jonathan Bedard  <jbedard@apple.com>

        webkitpy: Implement device type specific expected results (Follow-up fix)
        https://bugs.webkit.org/show_bug.cgi?id=192162
        <rdar://problem/46345449>

        Unreviewed test gardening.

        * tiled-drawing/ios/iphone7: Removed.

2019-01-18  Youenn Fablet  <youenn@apple.com>

        Add a new SPI to request for cache storage quota increase
        https://bugs.webkit.org/show_bug.cgi?id=193323

        Reviewed by Alex Christensen.

        Use new testRunner method to bump the cache quota and verify adding a
        cache entry works when bumping the cache quota.

        * http/wpt/cache-storage/cache-quota.any.js:
        (promise_test):

2019-01-18  Youenn Fablet  <youenn@apple.com>

        A track source should be unmuted whenever reenabled after setDirection changes
        https://bugs.webkit.org/show_bug.cgi?id=193554
        <rdar://problem/47366196>

        Reviewed by Eric Carlson.

        * webrtc/video-setDirection-expected.txt: Added.
        * webrtc/video-setDirection.html: Added.

2019-01-18  Jonathan Bedard  <jbedard@apple.com>

        webkitpy: Implement device type specific expected results (Part 2)
        https://bugs.webkit.org/show_bug.cgi?id=192162
        <rdar://problem/46345449>

        Rubber-stamped by Aakash Jain.

        Move iPad and iPhone 7 tests to their respective platform specific directories.

        * TestExpectations:
        * fast/events/touch/ios/iphone7: Removed.
        * fast/forms/ios/ipad: Removed.
        * fast/text-autosizing/ios/ipad: Removed.
        * fast/viewport/ios/ipad: Removed.
        * media/controls/ipad: Removed.
        * media/modern-media-controls/media-documents/ipad: Removed.
        * media/modern-media-controls/pip-support/ipad: Removed.
        * platform/ios-wk1/TestExpectations:
        * platform/ios/TestExpectations:
        * platform/ipad: Added.
        * platform/ipad/fast: Added.
        * platform/ipad/fast/forms: Added.
        * platform/ipad/fast/forms/choose-select-option-expected.txt: Added.
        * platform/ipad/fast/forms/choose-select-option.html: Added.
        * platform/ipad/fast/forms/focus-input-via-button-expected.txt: Added.
        * platform/ipad/fast/forms/focus-input-via-button.html: Added.
        * platform/ipad/fast/forms/multiple-select-updates-renderer-expected.txt: Added.
        * platform/ipad/fast/forms/multiple-select-updates-renderer.html: Added.
        * platform/ipad/fast/forms/select-form-run-twice-expected.txt: Added.
        * platform/ipad/fast/forms/select-form-run-twice.html: Added.
        * platform/ipad/fast/forms/select-with-title-expected.txt: Added.
        * platform/ipad/fast/forms/select-with-title.html: Added.
        * platform/ipad/fast/forms/unfocus-inside-fixed-hittest-expected.txt: Added.
        * platform/ipad/fast/forms/unfocus-inside-fixed-hittest.html: Added.
        * platform/ipad/fast/text-autosizing: Added.
        * platform/ipad/fast/text-autosizing/programmatic-text-size-adjust-expected.txt: Added.
        * platform/ipad/fast/text-autosizing/programmatic-text-size-adjust.html: Added.
        * platform/ipad/fast/text-autosizing/text-size-adjust-inline-style-expected.html: Added.
        * platform/ipad/fast/text-autosizing/text-size-adjust-inline-style.html: Added.
        * platform/ipad/fast/viewport: Added.
        * platform/ipad/fast/viewport/empty-meta-expected.txt: Added.
        * platform/ipad/fast/viewport/empty-meta.html: Added.
        * platform/ipad/fast/viewport/meta-viewport-ignored-expected.txt: Added.
        * platform/ipad/fast/viewport/meta-viewport-ignored.html: Added.
        * platform/ipad/fast/viewport/viewport-overriden-by-minimum-effective-width-if-ignore-meta-viewport-expected.txt: Added.
        * platform/ipad/fast/viewport/viewport-overriden-by-minimum-effective-width-if-ignore-meta-viewport.html: Added.
        * platform/ipad/fast/viewport/viewport-unchanged-by-minimum-effective-width-if-not-ignore-meta-viewport-expected.txt: Added.
        * platform/ipad/fast/viewport/viewport-unchanged-by-minimum-effective-width-if-not-ignore-meta-viewport.html: Added.
        * platform/ipad/fast/viewport/width-is-device-width-expected.txt: Added.
        * platform/ipad/fast/viewport/width-is-device-width.html: Added.
        * platform/ipad/media: Added.
        * platform/ipad/media/controls: Added.
        * platform/ipad/media/controls/close-page-with-picture-in-picture-video-assertion-failure-expected.txt: Added.
        * platform/ipad/media/controls/close-page-with-picture-in-picture-video-assertion-failure.html: Added.
        * platform/ipad/media/controls/resources: Added.
        * platform/ipad/media/controls/resources/picture-in-picture.html: Added.
        * platform/ipad/media/modern-media-controls: Added.
        * platform/ipad/media/modern-media-controls/media-documents: Added.
        * platform/ipad/media/modern-media-controls/media-documents/media-document-audio-ios-sizing-expected.txt: Added.
        * platform/ipad/media/modern-media-controls/media-documents/media-document-audio-ios-sizing.html: Added.
        * platform/ipad/media/modern-media-controls/media-documents/media-document-video-ios-sizing-expected.txt: Added.
        * platform/ipad/media/modern-media-controls/media-documents/media-document-video-ios-sizing.html: Added.
        * platform/ipad/media/modern-media-controls/pip-support: Added.
        * platform/ipad/media/modern-media-controls/pip-support/pip-support-enabled-expected.txt: Added.
        * platform/ipad/media/modern-media-controls/pip-support/pip-support-enabled.html: Added.
        * platform/ipad/media/modern-media-controls/pip-support/pip-support-tap-expected.txt: Added.
        * platform/ipad/media/modern-media-controls/pip-support/pip-support-tap.html: Added.
        * platform/iphone-7: Added.
        * platform/iphone-7/fast: Added.
        * platform/iphone-7/fast/events: Added.
        * platform/iphone-7/fast/events/touch: Added.
        * platform/iphone-7/fast/events/touch/force-press-event-expected.txt: Added.
        * platform/iphone-7/fast/events/touch/force-press-event.html: Added.
        * platform/iphone-7/fast/events/touch/force-press-on-link-expected.txt: Added.
        * platform/iphone-7/fast/events/touch/force-press-on-link.html: Added.
        * platform/iphone-7/fast/events/touch/prevent-default-touchmove-prevents-scrolling-expected.txt: Added.
        * platform/iphone-7/fast/events/touch/prevent-default-touchmove-prevents-scrolling.html: Added.
        * platform/iphone-7/tiled-drawing: Added.
        * platform/iphone-7/tiled-drawing/compositing-layers-deep-color-expected.txt: Added.
        * platform/iphone-7/tiled-drawing/compositing-layers-deep-color.html: Added.
        * platform/mac-wk2/TestExpectations:
        * platform/mac/TestExpectations:
        * tiled-drawing/ios: Removed.

2019-01-18  Zalan Bujtas  <zalan@apple.com>

        [LFC][BFC][MarginCollapsing] Collapsing through should not ignore floats.
        https://bugs.webkit.org/show_bug.cgi?id=193564

        Reviewed by Antti Koivisto.

        * fast/block/float/float-in-descendant-formatting-context-expected.txt: Added.
        * fast/block/float/float-in-descendant-formatting-context.html: Added.

2019-01-17  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] Content offset jumps erratically when autoscrolling near scroll view content inset areas
        https://bugs.webkit.org/show_bug.cgi?id=193494
        <rdar://problem/46859627>

        Reviewed by Simon Fraser and Tim Horton.

        * editing/selection/ios/autoscroll-with-top-content-inset-expected.txt: Added.
        * editing/selection/ios/autoscroll-with-top-content-inset.html: Added.

        Add a new test to verify that moving the selection by autoscrolling near the top content inset area does not
        cause the scroll view's content offset to jump.

        * fast/scrolling/ios/scroll-into-view-with-top-content-inset-expected.txt: Added.
        * fast/scrolling/ios/scroll-into-view-with-top-content-inset.html: Added.

        Add a new test to verify that programmatically scrolling an element that's already visible into view does not
        scroll away the scroll view's content inset.

        * resources/ui-helper.js:
        (window.UIHelper.contentOffset):
        (window.UIHelper):

2019-01-17  John Wilander  <wilander@apple.com>

        Add infrastructure to enable/disable ITP Debug Mode through Preferences
        https://bugs.webkit.org/show_bug.cgi?id=193510
        <rdar://problem/47330969>

        Reviewed by Dean Jackson.

        * http/tests/resourceLoadStatistics/set-custom-prevalent-resource-in-debug-mode.html:
            Changed the order of function calls since testRunner.setStatisticsPrevalentResourceForDebugMode()
            now has to be called before testRunner.setStatisticsDebugMode().

2019-01-16  Dean Jackson  <dino@apple.com>

        (iPad) Link tapping is sluggish on many sites
        https://bugs.webkit.org/show_bug.cgi?id=193522
        <rdar://problem/47102987>

        Reviewed by Wenson Hsieh.

        Add a test that checks a double tap will trigger a click
        event on a page that is at initial scale.

        Extra bonus: for some reason adding this test, or making this code
        change, uncovered a couple of bugs in existing tests. The
        viewport-zooms-from-element-to-initial-scale test was completely wrong
        because it was expecting the incorrect result, which was triggered by
        the zoom callback firing early at a forced scale value. The
        viewport-no-width-value-allows-double-tap test was triggering a JS
        error in its UI script. I modernised both of these to use UIHelper instead.

        * fast/events/ios/fast-click-double-tap-sends-click-when-initial-scale-expected.txt: Added.
        * fast/events/ios/fast-click-double-tap-sends-click-when-initial-scale.html: Added.
        * fast/events/ios/viewport-no-width-value-allows-double-tap.html:
        * fast/events/ios/viewport-zooms-from-element-to-initial-scale-expected.txt:
        * fast/events/ios/viewport-zooms-from-element-to-initial-scale.html:
        * resources/ui-helper.js: Add doubleTapAt and zoomByDoubleTapAt helpers. Remove the
        unnecessary "Done" return value from many of the callbacks. Give zoomToScale a return
        value.
        (window.UIHelper.tapAt.return.new.Promise):
        (window.UIHelper.tapAt):
        (window.UIHelper.doubleTapAt.return.new.Promise):
        (window.UIHelper.doubleTapAt):
        (window.UIHelper.zoomByDoubleTappingAt):
        (window.UIHelper.activateAt.return.new.Promise):
        (window.UIHelper.activateAt):
        (window.UIHelper.toggleCapsLock):
        (window.UIHelper.ensurePresentationUpdate.return.new.Promise):
        (window.UIHelper.ensurePresentationUpdate):
        (window.UIHelper.activateAndWaitForInputSessionAt.return.new.Promise.):
        (window.UIHelper.activateFormControl.return.new.Promise.):
        (window.UIHelper.replaceTextAtRange):
        (window.UIHelper.zoomToScale):
        (window.UIHelper.stylusTapAt.return.new.Promise):
        (window.UIHelper.stylusTapAt):

2019-01-17  Per Arne Vollan  <pvollan@apple.com>

        Layout Test js/dfg-int-overflow-in-loop.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=193540

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2019-01-17  Ross Kirsling  <ross.kirsling@sony.com>

        Get rid of Sputnik tests.
        https://bugs.webkit.org/show_bug.cgi?id=193464

        Rubber stamped by Saam Barati.

        * sputnik/: Removed.
        * platform/gtk/sputnik/: Removed.
        * platform/ios/sputnik/: Removed.
        * platform/mac/sputnik/: Removed.
        * platform/wpe/sputnik/: Removed.

        * TestExpectations:
        * platform/gtk/TestExpectations:
        * platform/ios-wk2/TestExpectations:
        * platform/ios/TestExpectations:
        * platform/mac/TestExpectations:
        * platform/win/TestExpectations:
        * platform/wincairo/TestExpectations:
        * platform/wpe/TestExpectations:
        Remove all sputnik/ lines.

2019-01-16  Alicia Boya García  <aboya@igalia.com>

        Unreviewed GTK and WPE test gardening.
        https://bugs.webkit.org/show_bug.cgi?id=193521

        * platform/gtk/TestExpectations:
        * platform/gtk/imported/w3c/web-platform-tests/fetch/security/dangling-markup-mitigation-data-url.tentative.sub-expected.txt: Added.
        * platform/gtk/inspector/canvas/recording-bitmaprenderer-expected.txt:
        * platform/wpe/TestExpectations:
        * platform/wpe/imported/w3c/web-platform-tests/fetch/security/dangling-markup-mitigation-data-url.tentative.sub-expected.txt: Added.

2019-01-16  Justin Fan  <justin_fan@apple.com>

        [WebGPU] Update vertex-buffer-triangle-strip.html to actually use vertex buffer
        https://bugs.webkit.org/show_bug.cgi?id=193473

        Reviewed by Dean Jackson and Myles Maxfield.

        Refactor the vertex shader to use the vertex stage input, rather than buffer resources. 

        * webgpu/vertex-buffer-triangle-strip.html:

2019-01-16  Chris Dumez  <cdumez@apple.com>

        Regression(PSON) View becomes blank after click a cross-site download link
        https://bugs.webkit.org/show_bug.cgi?id=193361
        <rdar://problem/47099573>

        Reviewed by Geoffrey Garen.

        Skip test testing the cross-process DOMWindow API as I broke it with this patch.
        The feature is far from ready and off by default anyway. I will add support back
        in a follow-up.

        * platform/wk2/TestExpectations:

2019-01-16  Zalan Bujtas  <zalan@apple.com>

        [LFC][Out-of-flow] Set used vertical margin values when top/height/bottom are non-auto.
        https://bugs.webkit.org/show_bug.cgi?id=193470

        Reviewed by Antti Koivisto.

        * fast/block/block-only/non-auto-top-bottom-height-with-margins-expected.txt: Added.
        * fast/block/block-only/non-auto-top-bottom-height-with-margins.html: Added.

2019-01-16  Zalan Bujtas  <zalan@apple.com>

        [LFC] Adjust margin box verification.
        https://bugs.webkit.org/show_bug.cgi?id=193482

        Reviewed by Antti Koivisto.

        * fast/block/block-only/non-auto-top-bottom-height-with-auto-margins-expected.txt: Added.
        * fast/block/block-only/non-auto-top-bottom-height-with-auto-margins.html: Added.

2019-01-15  Ryosuke Niwa  <rniwa@webkit.org>

        VisualViewport API should be updated upon opening of keyboard
        https://bugs.webkit.org/show_bug.cgi?id=193475

        Reviewed by Simon Fraser.

        Added a regression test.

        * fast/visual-viewport/ios/resize-event-for-keyboard-expected.txt: Added.
        * fast/visual-viewport/ios/resize-event-for-keyboard.html: Added.

2019-01-15  Chris Dumez  <cdumez@apple.com>

        Unreviewed, rolling out r239993, r239995, r239997, and
        r239999.

        Caused assertions under
        ViewGestureController::disconnectFromProcess()

        Reverted changesets:

        "Regression(PSON) View becomes blank after click a cross-site
        download link"
        https://bugs.webkit.org/show_bug.cgi?id=193361
        https://trac.webkit.org/changeset/239993

        "Unreviewed iOS build fix after r239993."
        https://trac.webkit.org/changeset/239995

        "Fix iOS build after r239993"
        https://bugs.webkit.org/show_bug.cgi?id=193361
        https://trac.webkit.org/changeset/239997

        "Unreviewed, revert part of r239997 as it is not needed to fix
        the build."
        https://trac.webkit.org/changeset/239999

2019-01-15  Chris Dumez  <cdumez@apple.com>

        Regression(PSON) View becomes blank after click a cross-site download link
        https://bugs.webkit.org/show_bug.cgi?id=193361
        <rdar://problem/47099573>

        Reviewed by Geoff Garen.

        Skip test testing the cross-process DOMWindow API as I broke it with this patch.
        The feature is far from ready and off by default anyway. I will add support back
        in a follow-up.

        * platform/wk2/TestExpectations:

2019-01-15  Zalan Bujtas  <zalan@apple.com>

        [LFC][Out-of-flow] Ignore bottom when the vertical values are over-constrained
        https://bugs.webkit.org/show_bug.cgi?id=193448

        Reviewed by Antti Koivisto.

        * fast/block/block-only/non-auto-top-bottom-left-right-widht-height-out-of-flow-expected.txt: Added.
        * fast/block/block-only/non-auto-top-bottom-left-right-widht-height-out-of-flow.html: Added.

2019-01-15  Devin Rousso  <drousso@apple.com>

        Unreviewed, test fix after r239976.

        * inspector/model/remote-object-expected.txt:

2019-01-15  Devin Rousso  <drousso@apple.com>

        Web Inspector: Audit: provide a way to determine whether a give node has event listeners
        https://bugs.webkit.org/show_bug.cgi?id=193226
        <rdar://problem/46800005>

        Reviewed by Joseph Pecoraro.

        * inspector/audit/run-dom.html: Added.
        * inspector/audit/run-dom-expected.txt: Added.

2019-01-15  Devin Rousso  <drousso@apple.com>

        Web Inspector: Audit: provide a way to query for all nodes with a given computed Accessibility role
        https://bugs.webkit.org/show_bug.cgi?id=193228
        <rdar://problem/46787787>

        Reviewed by Joseph Pecoraro.

        * inspector/audit/run-accessibility.html: Added.
        * inspector/audit/run-accessibility-expected.txt: Added.

2019-01-15  Zalan Bujtas  <zalan@apple.com>

        [LFC] Use the containing block's padding box to position out-of-flow elements.
        https://bugs.webkit.org/show_bug.cgi?id=193431

        Reviewed by Antti Koivisto.

        * fast/block/block-only/out-of-flow-with-containing-block-border-padding-expected.txt: Added.
        * fast/block/block-only/out-of-flow-with-containing-block-border-padding.html: Added.

2019-01-15  Guillaume Emont  <guijemont@igalia.com>

        Skip a slow test and a flakey test on arm

        Unreviewed gardening.

        * js/script-tests/stack-overflow-regexp.js: flakey on arm.

2019-01-15  Devin Rousso  <drousso@apple.com>

        Web Inspector: Audit: create new IDL type for exposing special functionality in test context
        https://bugs.webkit.org/show_bug.cgi?id=193149
        <rdar://problem/46801218>

        Reviewed by Joseph Pecoraro.

        * inspector/audit/resources/audit-utilities.js:
        (TestPage.registerInitializer.InspectorTest.Audit.setupAudit): Added.
        (TestPage.registerInitializer.InspectorTest.Audit.teardownAudit): Added.

        * inspector/audit/run.html: Added.
        * inspector/audit/run-expected.txt: Added.
        * inspector/audit/setup.html: Added.
        * inspector/audit/setup-expected.txt: Added.
        * inspector/audit/teardown.html: Added.
        * inspector/audit/teardown-expected.txt: Added.

        * inspector/canvas/create-context-2d-expected.txt:
        * inspector/canvas/create-context-bitmaprenderer-expected.txt:
        * inspector/canvas/create-context-webgl-expected.txt:
        * inspector/canvas/create-context-webgl2-expected.txt:
        * inspector/canvas/create-context-webmetal-expected.txt:
        * inspector/canvas/recording-2d-expected.txt:
        * inspector/canvas/recording-webgl-expected.txt:
        * inspector/canvas/recording-webgl-snapshots-expected.txt:
        * inspector/model/remote-object-expected.txt:
        * inspector/model/stack-trace-expected.txt:

2019-01-14  Alex Christensen  <achristensen@webkit.org>

        Bulgarian TLD should not punycode-encode URLs with Bulgarian Cyrillic characters
        https://bugs.webkit.org/show_bug.cgi?id=193411
        <rdar://problem/47215929>

        Reviewed by Alexey Proskuryakov.

        * fast/url/user-visible/cyrillic-NFD-expected.txt:
        * fast/url/user-visible/cyrillic-NFD.html:

2019-01-14  John Wilander  <wilander@apple.com>

        Restructure http/tests/resourceLoadStatistics/remove-blocking-in-redirect.html to address flakiness
        https://bugs.webkit.org/show_bug.cgi?id=191211
        <rdar://problem/45818606>

        Unreviewed test gardening.

        This test is flaky on the MacOS WK2 bot. The patch avoids a page navigation and
        redirect which may avoid the code that changed in
        https://trac.webkit.org/changeset/237735/webkit and made the test more flaky.

        * http/tests/resourceLoadStatistics/remove-blocking-in-redirect-expected.txt:
        * http/tests/resourceLoadStatistics/remove-blocking-in-redirect.html:

2019-01-14  Simon Fraser  <simon.fraser@apple.com>

        Animation and other code is too aggressive about invalidating layer composition
        https://bugs.webkit.org/show_bug.cgi?id=193343

        Reviewed by Antoine Quint.
        
        This test was clobbering the 'box' class on the animating element and therefore making it disappear.

        * legacy-animation-engine/compositing/animation/animation-compositing.html:

2019-01-14  Charles Vazac  <cvazac@akamai.com>

        Import current Resource-Timing WPTs
        https://bugs.webkit.org/show_bug.cgi?id=193302

        Reviewed by Youenn Fablet.

        * TestExpectations:
        * tests-options.json:

2019-01-14  Jiewen Tan  <jiewen_tan@apple.com>

        Unreviewed, test fixes after r239852.

        * http/wpt/webauthn/public-key-credential-create-success-hid.https.html:
        * http/wpt/webauthn/public-key-credential-create-success-u2f.https.html:
        * http/wpt/webauthn/public-key-credential-get-success-hid.https.html:
        * http/wpt/webauthn/public-key-credential-get-success-u2f.https.html:

2019-01-14  Justin Fan  <justin_fan@apple.com>

        [WebGPU] Map WebGPUBindGroupLayoutBindings from the BindGroupLayoutDescriptor for error checking and later referencing
        https://bugs.webkit.org/show_bug.cgi?id=193405

        Reviewed by Dean Jackson.

        Small fixes that do not alter behavior.

        * webgpu/bind-groups.html:
        * webgpu/pipeline-layouts.html:

2019-01-14  Zalan Bujtas  <zalan@apple.com>

        [LFC][BFC] Add basic box-sizing support.
        https://bugs.webkit.org/show_bug.cgi?id=193392

        Reviewed by Antti Koivisto.

        * fast/block/block-only/box-sizing-inflow-out-of-flow-simple-expected.txt: Added.
        * fast/block/block-only/box-sizing-inflow-out-of-flow-simple.html: Added.

2019-01-14  Zan Dobersek  <zdobersek@igalia.com>

        Unreviewed WPE gardening. Updating baselines for failures that in
        majority of cases can be tracked down to the test fonts bump in r239436.

        * platform/wpe/animations/lineheight-animation-expected.txt:
        * platform/wpe/animations/simultaneous-start-transform-expected.txt:
        * platform/wpe/animations/width-using-ems-expected.txt:
        * platform/wpe/css1/font_properties/font-expected.txt:
        * platform/wpe/css3/unicode-bidi-isolate-basic-expected.txt:
        * platform/wpe/fast/css/line-height-determined-by-primary-font-expected.txt:
        * platform/wpe/fast/css/rtl-ordering-expected.txt:
        * platform/wpe/fast/css/text-overflow-ellipsis-bidi-expected.txt:
        * platform/wpe/fast/css/text-overflow-ellipsis-expected.txt:
        * platform/wpe/fast/css/text-overflow-ellipsis-strict-expected.txt:
        * platform/wpe/fast/css/word-space-extra-expected.txt:
        * platform/wpe/fast/dom/34176-expected.txt:
        * platform/wpe/fast/dom/52776-expected.txt:
        * platform/wpe/fast/inline/inline-box-background-expected.txt:
        * platform/wpe/fast/inline/inline-box-background-long-image-expected.txt:
        * platform/wpe/fast/inline/inline-box-background-repeat-x-expected.txt:
        * platform/wpe/fast/inline/inline-box-background-repeat-y-expected.txt:
        * platform/wpe/fast/inline/inline-content-with-float-and-margin-expected.txt: Added.
        * platform/wpe/fast/inline/simple-inline-inflow-positioned-expected.txt: Added.
        * platform/wpe/fast/inline/simple-inline-with-out-of-flow-descendant-expected.txt: Added.
        * platform/wpe/fast/inline/simple-inline-with-out-of-flow-descendant2-expected.txt: Added.
        * platform/wpe/svg/W3C-I18N/text-anchor-dirLTR-anchorEnd-expected.txt:
        * platform/wpe/svg/W3C-I18N/text-anchor-dirLTR-anchorMiddle-expected.txt:
        * platform/wpe/svg/W3C-I18N/text-anchor-dirLTR-anchorStart-expected.txt:
        * platform/wpe/svg/W3C-I18N/text-anchor-dirNone-anchorEnd-expected.txt:
        * platform/wpe/svg/W3C-I18N/text-anchor-dirNone-anchorMiddle-expected.txt:
        * platform/wpe/svg/W3C-I18N/text-anchor-dirNone-anchorStart-expected.txt:
        * platform/wpe/svg/W3C-I18N/text-anchor-dirRTL-anchorEnd-expected.txt:
        * platform/wpe/svg/W3C-I18N/text-anchor-dirRTL-anchorMiddle-expected.txt:
        * platform/wpe/svg/W3C-I18N/text-anchor-dirRTL-anchorStart-expected.txt:
        * platform/wpe/svg/W3C-I18N/text-anchor-inherited-dirLTR-anchorEnd-expected.txt:
        * platform/wpe/svg/W3C-I18N/text-anchor-inherited-dirLTR-anchorMiddle-expected.txt:
        * platform/wpe/svg/W3C-I18N/text-anchor-inherited-dirLTR-anchorStart-expected.txt:
        * platform/wpe/svg/W3C-I18N/text-anchor-inherited-dirRTL-anchorEnd-expected.txt:
        * platform/wpe/svg/W3C-I18N/text-anchor-inherited-dirRTL-anchorMiddle-expected.txt:
        * platform/wpe/svg/W3C-I18N/text-anchor-inherited-dirRTL-anchorStart-expected.txt:
        * platform/wpe/svg/W3C-I18N/text-anchor-no-markup-expected.txt:
        * platform/wpe/svg/W3C-SVG-1.1-SE/svgdom-over-01-f-expected.txt:
        * platform/wpe/svg/W3C-SVG-1.1-SE/text-intro-02-b-expected.txt:
        * platform/wpe/svg/W3C-SVG-1.1-SE/text-intro-09-b-expected.txt:
        * platform/wpe/svg/W3C-SVG-1.1/text-tselect-02-f-expected.txt:
        * platform/wpe/svg/custom/glyph-selection-bidi-mirror-expected.txt:
        * platform/wpe/svg/custom/svg-fonts-fallback-expected.txt:
        * platform/wpe/svg/hixie/perf/007-expected.txt:
        * platform/wpe/svg/text/bidi-embedded-direction-expected.txt:
        * platform/wpe/svg/text/bidi-reorder-value-lists-expected.txt: Added.
        * platform/wpe/svg/text/bidi-text-anchor-direction-expected.txt:
        * platform/wpe/svg/text/text-tselect-02-f-expected.txt:
        * platform/wpe/tables/mozilla/marvin/backgr_layers-opacity-expected.txt:
        * platform/wpe/tables/mozilla/marvin/backgr_position-table-expected.txt:
        * platform/wpe/tables/mozilla/marvin/backgr_simple-table-cell-expected.txt:
        * platform/wpe/tables/mozilla/marvin/backgr_simple-table-column-expected.txt:
        * platform/wpe/tables/mozilla/marvin/backgr_simple-table-column-group-expected.txt:
        * platform/wpe/tables/mozilla/marvin/backgr_simple-table-expected.txt:
        * platform/wpe/tables/mozilla/marvin/backgr_simple-table-row-expected.txt:
        * platform/wpe/tables/mozilla/marvin/backgr_simple-table-row-group-expected.txt:
        * platform/wpe/tables/mozilla_expected_failures/marvin/backgr_border-table-cell-expected.txt:
        * platform/wpe/tables/mozilla_expected_failures/marvin/backgr_border-table-column-expected.txt:
        * platform/wpe/tables/mozilla_expected_failures/marvin/backgr_border-table-column-group-expected.txt:
        * platform/wpe/tables/mozilla_expected_failures/marvin/backgr_border-table-expected.txt:
        * platform/wpe/tables/mozilla_expected_failures/marvin/backgr_border-table-quirks-expected.txt:
        * platform/wpe/tables/mozilla_expected_failures/marvin/backgr_border-table-row-expected.txt:
        * platform/wpe/tables/mozilla_expected_failures/marvin/backgr_border-table-row-group-expected.txt:
        * platform/wpe/tables/mozilla_expected_failures/marvin/backgr_fixed-bg-expected.txt:
        * platform/wpe/tables/mozilla_expected_failures/marvin/backgr_layers-hide-expected.txt:
        * platform/wpe/tables/mozilla_expected_failures/marvin/backgr_layers-show-expected.txt:
        * platform/wpe/tables/mozilla_expected_failures/marvin/backgr_position-table-cell-expected.txt:
        * platform/wpe/tables/mozilla_expected_failures/marvin/backgr_position-table-column-expected.txt:
        * platform/wpe/tables/mozilla_expected_failures/marvin/backgr_position-table-column-group-expected.txt:
        * platform/wpe/tables/mozilla_expected_failures/marvin/backgr_position-table-row-expected.txt:
        * platform/wpe/tables/mozilla_expected_failures/marvin/backgr_position-table-row-group-expected.txt:

2019-01-14  Karl Leplat  <karl.leplat_ext@softathome.com>

        [GTK][WPE] Graphic issue with invalidations on composited layers with subpixel positions
        https://bugs.webkit.org/show_bug.cgi?id=193239

        Reviewed by Žan Doberšek.

        * compositing/repaint/invalidations-on-composited-layers-with-subpixel-positions.html: Added.
        * platform/gtk/compositing/repaint/invalidations-on-composited-layers-with-subpixel-positions-expected.png: Added.
        * platform/gtk/compositing/repaint/invalidations-on-composited-layers-with-subpixel-positions-expected.txt: Added.
        * platform/ios/compositing/repaint/invalidations-on-composited-layers-with-subpixel-positions-expected.png: Added.
        * platform/ios/compositing/repaint/invalidations-on-composited-layers-with-subpixel-positions-expected.txt: Added.
        * platform/mac/compositing/repaint/invalidations-on-composited-layers-with-subpixel-positions-expected.png: Added.
        * platform/mac/compositing/repaint/invalidations-on-composited-layers-with-subpixel-positions-expected.txt: Added.
        * platform/wpe/compositing/repaint/invalidations-on-composited-layers-with-subpixel-positions-expected.png: Added.
        * platform/wpe/compositing/repaint/invalidations-on-composited-layers-with-subpixel-positions-expected.txt: Added.

2019-01-13  Carlos Garcia Campos  <cgarcia@igalia.com>

        [FreeType] Support emoji modifiers
        https://bugs.webkit.org/show_bug.cgi?id=177040

        Reviewed by Myles C. Maxfield.

        Mark several emoji tests as passing now.

        * platform/gtk/TestExpectations:

2019-01-13  Antti Koivisto  <antti@apple.com>

        Release assert with <img usemap> in shadow tree
        https://bugs.webkit.org/show_bug.cgi?id=193378

        Reviewed by Ryosuke Niwa.

        * fast/shadow-dom/image-map-tree-scope.html:

2019-01-12  Timothy Hatcher  <timothy@apple.com>

        Have prefers-color-scheme: light always match on macOS versions before Mojave.
        https://bugs.webkit.org/show_bug.cgi?id=191655
        rdar://problem/46074680

        Reviewed by Megan Gardner.

        * css-dark-mode/older-systems/prefers-color-scheme-expected.txt: Added.
        * css-dark-mode/older-systems/prefers-color-scheme.html: Added.
        * css-dark-mode/older-systems/supported-color-schemes-css-expected.txt: Added.
        * css-dark-mode/older-systems/supported-color-schemes-css.html: Added.
        * css-dark-mode/older-systems/supported-color-schemes-expected.txt: Added.
        * css-dark-mode/older-systems/supported-color-schemes.html: Added.
        * platform/mac/TestExpectations:

2019-01-11  John Wilander  <wilander@apple.com>

        Compile out Web API Statistics Collection
        https://bugs.webkit.org/show_bug.cgi?id=193370
        <rdar://problem/45388584>

        Reviewed by Brent Fulgham.

        * platform/ios-wk2/TestExpectations:
            http/tests/webAPIStatistics skipped.
        * platform/mac-wk2/TestExpectations:
            http/tests/webAPIStatistics skipped.

2019-01-11  Antti Koivisto  <antti@apple.com>

        Release assert when removing element with a map element in the shadow tree
        https://bugs.webkit.org/show_bug.cgi?id=193351
        <rdar://problem/47208807>

        Reviewed by Ryosuke Niwa.

        * fast/shadow-dom/image-map-tree-scope-expected.txt: Added.
        * fast/shadow-dom/image-map-tree-scope.html: Added.

2019-01-11  Dominik Infuehr  <dinfuehr@igalia.com>

        Enable DFG on ARM/Linux again
        https://bugs.webkit.org/show_bug.cgi?id=192496

        Reviewed by Yusuke Suzuki.

        After changing the bytecode format DFG was disabled on all 32-bit
        architectures. Enable DFG now again on ARM/Linux. Disable tests that
        run out of executable memory with LLInt disabled.

        * js/script-tests/dfg-float32array.js:
        * js/script-tests/dfg-float64array.js:
        * js/script-tests/dfg-int16array.js:
        * js/script-tests/dfg-int32array-overflow-values.js:
        * js/script-tests/dfg-int32array.js:
        * js/script-tests/dfg-int8array.js:
        * js/script-tests/dfg-uint16array.js:
        * js/script-tests/dfg-uint32array.js:
        * js/script-tests/dfg-uint8array.js:

2019-01-11  Wenson Hsieh  <wenson_hsieh@apple.com>

        Introduce IDL files for runtime-enabled UndoManager and UndoItem JavaScript API
        https://bugs.webkit.org/show_bug.cgi?id=193109
        <rdar://problem/44807048>

        Reviewed by Ryosuke Niwa.

        Add UndoManager tests to exercise new bindings, and verify that the JS wrapper for Document's UndoManager
        survives garbage collection.

        * TestExpectations:
        * editing/undo-manager/undo-manager-interfaces-expected.txt: Added.
        * editing/undo-manager/undo-manager-interfaces.html: Added.
        * editing/undo-manager/undo-manager-keeps-wrapper-alive-expected.txt: Added.
        * editing/undo-manager/undo-manager-keeps-wrapper-alive.html: Added.
        * platform/ios-wk2/TestExpectations:
        * platform/mac-wk2/TestExpectations:

2019-01-11  Zalan Bujtas  <zalan@apple.com>

        [LFC][BFC][MarginCollapsing] Adjust vertical position when box margin collapses through.
        https://bugs.webkit.org/show_bug.cgi?id=193346

        Reviewed by Antti Koivisto.

        * fast/block/block-only/collapsed-through-with-parent-expected.txt: Added.
        * fast/block/block-only/collapsed-through-with-parent.html: Added.

2019-01-11  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK gardening. Rebaseline several tests after r239822.

        * platform/gtk/css2.1/t1202-counter-04-b-expected.png:
        * platform/gtk/css2.1/t1202-counter-04-b-expected.txt:
        * platform/gtk/css2.1/t1202-counters-04-b-expected.png:
        * platform/gtk/css2.1/t1202-counters-04-b-expected.txt:
        * platform/gtk/fast/text/combining-enclosing-keycap-expected.txt:
        * platform/gtk/fast/text/fallback-traits-fixup-expected.png:
        * platform/gtk/fast/text/fallback-traits-fixup-expected.txt:

2019-01-10  Devin Rousso  <drousso@apple.com>

        Web Inspector: Audit: allow audits to be enabled/disabled
        https://bugs.webkit.org/show_bug.cgi?id=192210
        <rdar://problem/46423583>

        Reviewed by Joseph Pecoraro.

        * inspector/unit-tests/objectStore/clear.html: Added.
        * inspector/unit-tests/objectStore/clear-expected.txt: Added.

2019-01-10  Justin Fan  <justin_fan@apple.com>

        [WebGPU] WebGPUBindGroup and device::createBindGroup prototype
        https://bugs.webkit.org/show_bug.cgi?id=193341

        Reviewed by Myles C. Maxfield.

        Small test that creates a WebGPUBindGroup.

        * webgpu/bind-groups-expected.txt: Added.
        * webgpu/bind-groups.html: Added.

2019-01-10  Eric Carlson  <eric.carlson@apple.com>

        Define page media state flags for display capture.
        https://bugs.webkit.org/show_bug.cgi?id=193230
        <rdar://problem/47095142>

        Reviewed by Youenn Fablet.

        * fast/mediastream/get-display-media-muted-expected.txt: Added.
        * fast/mediastream/get-display-media-muted.html: Added.

2019-01-10  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r239825.
        https://bugs.webkit.org/show_bug.cgi?id=193330

        Broke tests on armv7/linux bots (Requested by guijemont on
        #webkit).

        Reverted changeset:

        "Enable DFG on ARM/Linux again"
        https://bugs.webkit.org/show_bug.cgi?id=192496
        https://trac.webkit.org/changeset/239825

2019-01-10  Justin Fan  <justin_fan@apple.com>

        [WebGPU] Fix vertex-buffer-triangle-strip test and small update to GPURenderPipeline
        https://bugs.webkit.org/show_bug.cgi?id=193289

        Reviewed by Dean Jackson.

        Fix broken test after pipeline layouts were added.

        * webgpu/js/webgpu-functions.js: 
        (createBasicPipeline): Ensure pipeline layout is actually optional.
        * webgpu/vertex-buffer-triangle-strip.html: 

2019-01-10  John Wilander  <wilander@apple.com>

        Override the session configuration for cookieAcceptPolicy
        https://bugs.webkit.org/show_bug.cgi?id=190925
        <rdar://problem/45497382>

        Reviewed by Alexey Proskuryakov and Alex Christensen.

        * TestExpectations:
            Skipped since this cookie policy is only supported on Cocoa platforms.
        * http/tests/cookies/only-accept-first-party-cookies-expected.txt: Added.
        * http/tests/cookies/only-accept-first-party-cookies.html: Added.
        * http/tests/cookies/resources/reset-cookies.html: Added.
            To support reset of third-party cookies in an iframe.
        * http/tests/cookies/resources/set-cookie-and-redirect-back.php: Added.
            A simple bounce to set a cookie.
        * platform/ios/TestExpectations:
            Skipped for now. Will be fixed in <rdar://problem/47165939>.
        * platform/mac/TestExpectations:
            Skipped for now. Will be fixed in <rdar://problem/47165939>.

2019-01-10  Miguel Gomez  <magomez@igalia.com>

        Unreviewed GTK+ gardening after r239824.

        * platform/gtk/TestExpectations:

2019-01-10  Zalan Bujtas  <zalan@apple.com>

        [LFC][BFC][MarginCollapsing] Take collapsed through siblings into account when computing vertical position
        https://bugs.webkit.org/show_bug.cgi?id=193310

        Reviewed by Antti Koivisto.

        * fast/block/margin-collapse/collapsed-through-siblings-expected.txt: Added.
        * fast/block/margin-collapse/collapsed-through-siblings.html: Added.

2019-01-10  Dominik Infuehr  <dinfuehr@igalia.com>

        Enable DFG on ARM/Linux again
        https://bugs.webkit.org/show_bug.cgi?id=192496

        Reviewed by Yusuke Suzuki.

        After changing the bytecode format DFG was disabled on all 32-bit
        architectures. Enable DFG now again on ARM/Linux. Disable tests that
        run out of executable memory with LLInt disabled.

        * js/script-tests/dfg-float32array.js:
        * js/script-tests/dfg-float64array.js:
        * js/script-tests/dfg-int16array.js:
        * js/script-tests/dfg-int32array-overflow-values.js:
        * js/script-tests/dfg-int32array.js:
        * js/script-tests/dfg-int8array.js:
        * js/script-tests/dfg-uint16array.js:
        * js/script-tests/dfg-uint32array.js:
        * js/script-tests/dfg-uint8array.js:

2019-01-10  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Rebaseline two css tests.

        I think I missed these in previous rebaselines.

        * platform/gtk/css1/font_properties/font-expected.png:
        * platform/gtk/css1/font_properties/font-expected.txt:
        * platform/gtk/css2.1/t1508-c527-font-06-b-expected.png:
        * platform/gtk/css2.1/t1508-c527-font-06-b-expected.txt:

2019-01-10  Carlos Garcia Campos  <cgarcia@igalia.com>

        [FreeType] Color emoji not properly supported
        https://bugs.webkit.org/show_bug.cgi?id=191976

        Reviewed by Michael Catanzaro.

        Add new test to ensure we fallback to noto color emoji for emojis.

        * platform/gtk/fonts/font-emoji-system-fallback-expected.html: Added.
        * platform/gtk/fonts/font-emoji-system-fallback.html: Added.

2019-01-10  cathie chen  <cathiechen@igalia.com>

        Import css-lists testcases from WPT.
        https://bugs.webkit.org/show_bug.cgi?id=193273

        Reviewed by Daniel Bates.

        * TestExpectations:
        * platform/gtk/TestExpectations:
        * platform/ios-simulator/TestExpectations:
        * platform/ios-simulator/imported/w3c/web-platform-tests/css/css-lists/list-and-writing-mode-001-expected.txt: Added.

2019-01-09  Zalan Bujtas  <zalan@apple.com>

        [Datalist] Crash when input with datalist is dynamically added.
        https://bugs.webkit.org/show_bug.cgi?id=193012
        <rdar://problem/45923457>

        Reviewed by Brent Fulgham.

        * fast/forms/datalist/datalist-crash-when-dynamic-expected.txt: Added.
        * fast/forms/datalist/datalist-crash-when-dynamic.html: Added.

2019-01-09  Justin Fan  <justin_fan@apple.com>

        [WebGPU] Fix vertex-buffer-triangle-strip test and small update to GPURenderPipeline
        https://bugs.webkit.org/show_bug.cgi?id=193289

        Reviewed by Dean Jackson.

        Fix broken test after pipeline layouts were added.

        * webgpu/js/webgpu-functions.js: 
        (createBasicPipeline): Ensure pipeline layout is actually optional.
        * webgpu/vertex-buffer-triangle-strip.html: 

2019-01-09  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] editing/selection/ios/show-selection-in-empty-overflow-hidden-document.html often times out in internal automation
        https://bugs.webkit.org/show_bug.cgi?id=193238

        Reviewed by Megan Gardner.

        Fix a flaky layout test that currently attempts to run the main logic of the test twice (once after the child
        frame finishes loading, and another time after the main document finishes loading). This leads to a race
        condition in the test where the incorrect text field is focused, causing the caret rect to deviate from the
        expected value.

        * editing/selection/ios/show-selection-in-empty-overflow-hidden-document.html:

2019-01-09  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed, rolling out r239565.

        Rebaseline was not correct, changes were due to
        webkit.org/b/193276

        Reverted changeset:

        "Unreviewed GTK+ gardening. Rebaseline several tests after
        r239156."
        https://trac.webkit.org/changeset/239565

2019-01-08  Joseph Pecoraro  <pecoraro@apple.com>

        ASSERT when paused in debugger and console evaluation causes exception
        https://bugs.webkit.org/show_bug.cgi?id=193246

        Reviewed by Mark Lam.

        * inspector/debugger/evaluateOnCallFrame-CommandLineAPI.html:
        Correct a typo.

        * inspector/debugger/evaluateOnCallFrame-exception-expected.txt: Added.
        * inspector/debugger/evaluateOnCallFrame-exception.html: Added.
        New test that would have asserted before.

2019-01-08  Jiewen Tan  <jiewen_tan@apple.com>

        [WebAuthN] Support U2F HID Authenticators on macOS
        https://bugs.webkit.org/show_bug.cgi?id=191535
        <rdar://problem/47102027>

        Reviewed by Brent Fulgham.

        Besiding adding tests for U2F authenticators, it also changes payloadBase64 from
        a string to a vector of strings. New tests are skipped for iOS.

        * http/wpt/webauthn/ctap-hid-failure.https.html:
        * http/wpt/webauthn/ctap-hid-success.https.html:
        * http/wpt/webauthn/public-key-credential-create-failure-hid-silent.https.html:
        * http/wpt/webauthn/public-key-credential-create-failure-hid.https.html:
        * http/wpt/webauthn/public-key-credential-create-failure-u2f-silent.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-create-failure-u2f-silent.https.html: Added.
        * http/wpt/webauthn/public-key-credential-create-failure-u2f.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-create-failure-u2f.https.html: Added.
        * http/wpt/webauthn/public-key-credential-create-success-hid.https.html:
        * http/wpt/webauthn/public-key-credential-create-success-u2f.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-create-success-u2f.https.html: Copied from LayoutTests/http/wpt/webauthn/public-key-credential-create-success-hid.https.html.
        * http/wpt/webauthn/public-key-credential-get-failure-hid-silent.https.html:
        * http/wpt/webauthn/public-key-credential-get-failure-hid.https.html:
        * http/wpt/webauthn/public-key-credential-get-failure-u2f-silent.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-get-failure-u2f-silent.https.html: Added.
        * http/wpt/webauthn/public-key-credential-get-failure-u2f.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-get-failure-u2f.https.html: Added.
        * http/wpt/webauthn/public-key-credential-get-success-hid.https.html:
        * http/wpt/webauthn/public-key-credential-get-success-u2f.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-get-success-u2f.https.html: Added.
        * http/wpt/webauthn/resources/util.js:
        * platform/ios-wk2/TestExpectations:

2019-01-08  Youenn Fablet  <youenn@apple.com>

        service worker fetch handler results in bad referrer
        https://bugs.webkit.org/show_bug.cgi?id=188248
        <rdar://problem/47050478>

        Reviewed by Alex Christensen.

        * http/tests/security/referrer-policy-redirect-link-downgrade-expected.txt: Added.
        * http/tests/security/referrer-policy-redirect-link-downgrade.html: Added.
        * http/tests/security/resources/referrer-policy-redirect-link-downgrade.html: Added.
        * http/tests/security/resources/referrer-policy-redirect-link.html:
        * platform/ios-wk2/TestExpectations: Skip referrer-policy-redirect-link-downgrade.html
        as it is very similar to already skipped referrer-policy-redirect-link.html.

2019-01-08  Youenn Fablet  <youenn@apple.com>

        IDB storage of Crypto keys does not work in private browsing mode
        https://bugs.webkit.org/show_bug.cgi?id=193219

        Reviewed by Brady Eidson.

        Activate private browsing mode for these two tests.

        * crypto/subtle/rsa-indexeddb-non-exportable-private.html:
        * crypto/subtle/rsa-indexeddb-private.html:

2019-01-08  Justin Fan  <justin_fan@apple.com>

        [WebGPU] Update createRenderPipeline for WebGPUPipelineLayout
        https://bugs.webkit.org/show_bug.cgi?id=193247

        Reviewed by Dean Jackson.

        Update render-pipelines.html to WPT form and to accomodate WebGPUPipelineLayouts.

        * webgpu/js/webgpu-functions.js:
        (createBasicPipeline): Added option to include a WebGPUPipelineLayout.
        * webgpu/render-pipelines-expected.txt:
        * webgpu/render-pipelines.html:

2019-01-08  Chris Dumez  <cdumez@apple.com>

        Prevent cross-site top-level navigations from third-party iframes
        https://bugs.webkit.org/show_bug.cgi?id=193076
        <rdar://problem/36074736>

        Reviewed by Alex Christensen.

        Add layout test coverage.

        * http/tests/security/allow-top-level-navigations-by-third-party-iframes-to-same-origin-expected.txt: Added.
        * http/tests/security/allow-top-level-navigations-by-third-party-iframes-to-same-origin.html: Added.
        * http/tests/security/allow-top-level-navigations-by-third-party-iframes-with-previous-user-activation-expected.txt: Added.
        * http/tests/security/allow-top-level-navigations-by-third-party-iframes-with-previous-user-activation.html: Added.
        * http/tests/security/allow-top-level-navigations-by-third-party-iframes-with-user-activation-expected.txt: Added.
        * http/tests/security/allow-top-level-navigations-by-third-party-iframes-with-user-activation.html: Added.
        * http/tests/security/block-top-level-navigations-by-third-party-iframes-expected.txt: Added.
        * http/tests/security/block-top-level-navigations-by-third-party-iframes.html: Added.
        * http/tests/security/resources/navigate-top-level-frame-to-failure-page.html: Added.
        * http/tests/security/resources/navigate-top-level-frame-to-success-page-same-origin.html: Added.
        * http/tests/security/resources/navigate-top-level-frame-to-success-page-with-previous-user-gesture.html: Added.
        * http/tests/security/resources/navigate-top-level-frame-to-success-page-with-user-gesture.html: Added.
        * http/tests/security/resources/should-have-loaded.html: Added.
        * http/tests/security/resources/should-not-have-loaded.html: Added.

2019-01-08  Truitt Savell  <tsavell@apple.com>

        Revert expectation changes to pointerevents in iOS after https://trac.webkit.org/changeset/239704/webkit
        https://bugs.webkit.org/show_bug.cgi?id=193214

        Unreviewed Test Gardening

        * platform/ios-wk1/TestExpectations:
        * platform/ios-wk2/TestExpectations:

2019-01-07  Youenn Fablet  <youenn@apple.com>

        LayoutTests/http/wpt/fetch/csp-reports-bypass-csp-checks.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=193178

        Reviewed by Chris Dumez.

        Test was flaky as the ping load CSP report request might be sent after the
        fetch that grabs the report.
        To overcome that issue, fetch the report several times until receiving a report.

        * http/wpt/fetch/csp-reports-bypass-csp-checks.html:
        * http/wpt/fetch/resources/store-csp-report.py:
        (main):

2019-01-07  Dean Jackson  <dino@apple.com>

        Turn on Pointer Events by default for iOS
        https://bugs.webkit.org/show_bug.cgi?id=193214
        <rdar://problem/46974878>

        Reviewed by Wenson Hsieh.

        Skip the pointer events tests everywhere but iOS.

        * TestExpectations:
        * platform/ios-wk1/TestExpectations:
        * platform/ios-wk2/TestExpectations:
        * platform/mac-wk1/TestExpectations:

2019-01-07  Devin Rousso  <drousso@apple.com>

        Web Inspector: extend XHR breakpoints to work with fetch
        https://bugs.webkit.org/show_bug.cgi?id=185843
        <rdar://problem/40431027>

        Reviewed by Matt Baker.

        * inspector/dom-debugger/url-breakpoints.html: Copied from LayoutTests/inspector/dom-debugger/xhr-breakpoints.html.
        * inspector/dom-debugger/url-breakpoints-expected.txt: Copied from LayoutTests/inspector/dom-debugger/xhr-breakpoints-expected.txt.

        * inspector/dom-debugger/xhr-breakpoints.html: Deleted.
        * inspector/dom-debugger/xhr-breakpoints-expected.txt: Deleted.

        * inspector/dom-debugger/resources/dataFetch.json: Added.

2019-01-07  Devin Rousso  <drousso@apple.com>

        Web Inspector: Network: show secure connection details per-request
        https://bugs.webkit.org/show_bug.cgi?id=191539
        <rdar://problem/45979891>

        Reviewed by Joseph Pecoraro.

        * http/tests/inspector/network/resource-security-connection-expected.txt: Added.
        * http/tests/inspector/network/resource-security-connection.html: Added.

        * http/tests/inspector/network/resource-security-certificate-expected.txt: Added.
        * http/tests/inspector/network/resource-security-certificate.html: Added.
        * http/tests/inspector/network/resource-response-security-expected.txt: Deleted.
        * http/tests/inspector/network/resource-response-security.html: Deleted.

        * platform/gtk/TestExpectations:
        * platform/mac/TestExpectations:
        * platform/wincairo/TestExpectations:
        * platform/wpe/TestExpectations:

2019-01-07  Truitt Savell  <tsavell@apple.com>

        Update test expectations for platform/mac/media/audio-session-category-video-paused.html
        https://bugs.webkit.org/show_bug.cgi?id=189680

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:
        * platform/mac/TestExpectations:

2019-01-07  Eric Carlson  <eric.carlson@apple.com>

        Deactivate audio session whenever possible
        https://bugs.webkit.org/show_bug.cgi?id=193188
        <rdar://problem/42678977>

        Reviewed by Jer Noble.

        * TestExpectations: Skip the new test.
        * media/deactivate-audio-session-expected.txt: Added.
        * media/deactivate-audio-session.html: Added.
        * platform/ios/TestExpectations: Run the new test.
        * platform/mac-wk2/TestExpectations: Ditto.

2019-01-07  Youenn Fablet  <youenn@apple.com>

        Resync WPT fetch tests to 834eac4
        https://bugs.webkit.org/show_bug.cgi?id=193125

        Reviewed by Chris Dumez.

        * TestExpectations:
        * platform/gtk/TestExpectations:
        * platform/ios-simulator/imported/w3c/web-platform-tests/fetch/content-type/response.window-expected.txt: Added.
        * platform/ios-wk1/TestExpectations:
        * platform/ios/TestExpectations:
        * platform/mac-wk1/imported/w3c/web-platform-tests/fetch/api/abort/serviceworker-intercepted.https-expected.txt:
        * platform/mac-wk1/imported/w3c/web-platform-tests/fetch/api/request/request-init-stream.any-expected.txt: Added.
        * platform/mac-wk1/imported/w3c/web-platform-tests/fetch/api/request/request-reset-attributes.https-expected.txt: Added.
        * platform/mac-wk1/imported/w3c/web-platform-tests/fetch/content-type/script.window-expected.txt: Added.
        * platform/mac-wk1/imported/w3c/web-platform-tests/fetch/http-cache/304-update-expected.txt:
        * platform/mac-wk1/imported/w3c/web-platform-tests/fetch/http-cache/cc-request-expected.txt:
        * platform/mac-wk1/imported/w3c/web-platform-tests/fetch/http-cache/heuristic-expected.txt:
        * platform/mac-wk1/imported/w3c/web-platform-tests/fetch/http-cache/invalidate-expected.txt:
        * platform/mac-wk1/imported/w3c/web-platform-tests/fetch/http-cache/status-expected.txt:
        * platform/mac-wk1/imported/w3c/web-platform-tests/fetch/sec-metadata/embed.tentative.https.sub-expected.txt: Added.
        * platform/mac-wk1/imported/w3c/web-platform-tests/fetch/sec-metadata/object.tentative.https.sub-expected.txt: Added.
        * platform/mac-wk1/imported/w3c/web-platform-tests/fetch/sec-metadata/serviceworker.tentative.https.sub-expected.txt: Added.
        * platform/mac/TestExpectations:
        * tests-options.json:

2019-01-07  Wenson Hsieh  <wenson_hsieh@apple.com>

        Native caret shows up alongside the page's caret when requesting desktop site on jsfiddle.net
        https://bugs.webkit.org/show_bug.cgi?id=193180
        <rdar://problem/45971041>

        Reviewed by Tim Horton.

        * editing/selection/ios/hide-selection-in-empty-overflow-hidden-container-expected.txt: Added.
        * editing/selection/ios/hide-selection-in-empty-overflow-hidden-container.html: Added.

        Add a layout test to verify that focusing a hidden editable element underneath an empty container with
        `overflow: hidden` doesn't cause platform selection UI to appear.

        * editing/selection/ios/show-selection-in-empty-overflow-hidden-document-expected.txt: Added.
        * editing/selection/ios/show-selection-in-empty-overflow-hidden-document.html: Added.

        Add a layout test to verify that native selection UI shows up when the document element is made empty with
        `overflow: hidden`, but the focused elements are still visible.

2019-01-07  Truitt Savell  <tsavell@apple.com>

        Mark compositing/masks/compositing-clip-path-change-no-repaint.html flakey for Mojave WK1
        https://bugs.webkit.org/show_bug.cgi?id=189753

        Unreviewed Test Gardening

        * platform/mac-wk1/TestExpectations:

2019-01-07  Claudio Saavedra  <csaavedra@igalia.com>

        [WPE][GTK] Skip css-painting-api tests

        Unreviewed gardening. CSS_PAINTING_API is disabled by default.
        Also remove a few tests that were individually marked as failing
        for css-typedom since we already skipped the whole directory.
        * platform/gtk/TestExpectations:
        * platform/wpe/TestExpectations:

2019-01-07  Claudio Saavedra  <csaavedra@igalia.com>

        [WPE][GTK] Skip css-typedom tests

        Unreviewed gardening. CSS_TYPED_OM is disabled by default.
        * platform/gtk/TestExpectations:
        * platform/wpe/TestExpectations:

2019-01-06  Jiewen Tan  <jiewen_tan@apple.com>

        [WebAuthN] Import U2F command/response converters from Chromium
        https://bugs.webkit.org/show_bug.cgi?id=193150
        <rdar://problem/47054028>

        Reviewed by Brent Fulgham.

        Fixes Bug 183534:
        7) Change little endian bytes (ARM and x86 default) to big endian as requested by the spec.

        * http/wpt/webauthn/public-key-credential-create-success-hid.https.html:
        * http/wpt/webauthn/public-key-credential-get-success-hid.https.html:
        * http/wpt/webauthn/resources/util.js:

2019-01-05  Zalan Bujtas  <zalan@apple.com>

        Incorrect clipping across compositing boundary.
        https://bugs.webkit.org/show_bug.cgi?id=193172
        <rdar://problem/44693008>

        Reviewed by Simon Fraser.

        * compositing/clipping/cached-cliprect-with-compositing-boundary-expected.html: Added.
        * compositing/clipping/cached-cliprect-with-compositing-boundary.html: Added.

2019-01-05  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r239607.
        https://bugs.webkit.org/show_bug.cgi?id=193169

        This change makes the test even more flaky (Requested by fredw
        on #webkit).

        Reverted changeset:

        "Flaky Test: http/wpt/css/css-animations/start-
        animation-001.html"
        https://bugs.webkit.org/show_bug.cgi?id=190903
        https://trac.webkit.org/changeset/239607

2019-01-04  Daniel Bates  <dabates@apple.com>

        REGRESSION (r238522): Erratic scrolling on Google flights search result page and vrbo.com
        https://bugs.webkit.org/show_bug.cgi?id=192996
        <rdar://problem/46573552>

        Reviewed by Simon Fraser.

        Add a test to ensure that we do not scroll the page when we lay out an unfocused text field.

        * fast/scrolling/page-should-not-scroll-on-unfocused-text-field-layout-expected.txt: Added.
        * fast/scrolling/page-should-not-scroll-on-unfocused-text-field-layout.html: Added.

2019-01-04  Devin Rousso  <drousso@apple.com>

        Web Inspector: Audit: disable breakpoints when running Audit
        https://bugs.webkit.org/show_bug.cgi?id=193158
        <rdar://problem/47057083>

        Reviewed by Joseph Pecoraro.

        * inspector/audit/basic.html:
        * inspector/audit/basic-expected.txt:

        * inspector/audit/resources/audit-utilities.js:
        (TestPage.registerInitializer.InspectorTest.Audit.addTest):

2019-01-04  Youenn Fablet  <youenn@apple.com>

        [Fetch API] Implement abortable fetch
        https://bugs.webkit.org/show_bug.cgi?id=174980
        <rdar://problem/46861402>

        Reviewed by Chris Dumez.

        * TestExpectations: Enable abort tests.

2019-01-04  Brent Fulgham  <bfulgham@apple.com>

        Parsed protocol of javascript URLs with embedded newlines and carriage returns do not match parsed protocol in Chrome and Firefox
        https://bugs.webkit.org/show_bug.cgi?id=193155
        <rdar://problem/40230982>

        Reviewed by Chris Dumez.

        * fast/loader/comment-only-javascript-url-expected.txt: Added.
        * fast/loader/comment-only-javascript-url.html: Added.

2019-01-04  Jer Noble  <jer.noble@apple.com>

        Web Content process main thread blocked beneath ImageDecoderAVFObjC::readSamples for many seconds on imgur.com
        https://bugs.webkit.org/show_bug.cgi?id=191806
        <rdar://problem/46151477>

        Reviewed by Dean Jackson.

        * http/tests/images/mp4-partial-load-expected.txt: Added.
        * http/tests/images/mp4-partial-load.html: Added.
        * platform/win/http/tests/mp4-partial-load-expected.txt: Added.

2019-01-04  Youenn Fablet  <youenn@apple.com>

        CSP violation reports should bypass CSP checks
        https://bugs.webkit.org/show_bug.cgi?id=192857
        <rdar://problem/46887236>

        Reviewed by Chris Dumez.

        * http/wpt/fetch/csp-reports-bypass-csp-checks-expected.txt: Added.
        * http/wpt/fetch/csp-reports-bypass-csp-checks.html: Added.
        * http/wpt/fetch/csp-reports-bypass-csp-checks.html.headers: Added.
        * http/wpt/fetch/resources/store-csp-report.py: Added.
        (main):

2019-01-04  Chris Fleizach  <cfleizach@apple.com>

        AX: String check: "Rule" does not reflect the meaning of the <hr> html tag
        https://bugs.webkit.org/show_bug.cgi?id=193041
        <rdar://problem/46954090>

        Reviewed by Zalan Bujtas.

        * accessibility/mac/hr-element-expected.txt:
        * platform/mac/accessibility/roles-exposed-expected.txt:
        * platform/mac-wk2/accessibility/roles-exposed-expected.txt:

2019-01-04  Frederic Wang  <fwang@igalia.com>

        Flaky Test: http/wpt/css/css-animations/start-animation-001.html
        https://bugs.webkit.org/show_bug.cgi?id=190903

        This patch modifies start-animation-001.html to rely on the square positions returned by the
        Web Process in order to know when they are supposed to be rendered behind the covering rect.
        This should make it more robust while still testing the original bug 186129.

        Reviewed by Antonio Gomes.

        * http/wpt/css/css-animations/start-animation-001.html:

2019-01-03  Zalan Bujtas  <zalan@apple.com>

        REGRESSION: -webkit-appearance test case crashes
        https://bugs.webkit.org/show_bug.cgi?id=189302
        <rdar://problem/44143049>

        Reviewed by Wenson Hsieh.

        * fast/forms/webkit-appearance-searchfield-cancel-button-crash-expected.txt: Added.
        * fast/forms/webkit-appearance-searchfield-cancel-button-crash.html: Added.

2019-01-03  Chris Dumez  <cdumez@apple.com>

        Potential infinite recursion in isFrameFamiliarWith(Frame&, Frame&)
        https://bugs.webkit.org/show_bug.cgi?id=192997
        <rdar://problem/46217271>

        Reviewed by Antti Koivisto.

        Add layout test coverage.

        * fast/dom/Window/resources/window-open-opener-cycle2.html: Added.
        * fast/dom/Window/resources/window-open-opener-cycle3.html: Added.
        * fast/dom/Window/resources/window-opens-self.html: Added.
        * fast/dom/Window/window-open-opener-cycle-expected.txt: Added.
        * fast/dom/Window/window-open-opener-cycle.html: Added.
        * fast/dom/Window/window-open-self-as-opener-expected.txt: Added.
        * fast/dom/Window/window-open-self-as-opener.html: Added.

2019-01-03  Devin Rousso  <drousso@apple.com>

        Web Inspector: conic-gradient color picker doesn't accurately show color when saturation value is not 100%
        https://bugs.webkit.org/show_bug.cgi?id=192729
        <rdar://problem/46746815>

        Reviewed by Joseph Pecoraro.

        * inspector/model/color.html:
        * inspector/model/color-expected.txt:

2019-01-03  Brent Fulgham  <bfulgham@apple.com>

        Remove logic handling DNT header during redirects
        https://bugs.webkit.org/show_bug.cgi?id=193082
        <rdar://problem/45555965>

        Reviewed by Chris Dumez.

        Revise test case to reflect fact that we no longer include the DNT
        header in redirects.

        * http/wpt/fetch/dnt-header-after-redirection-expected.txt:
        * http/wpt/fetch/dnt-header-after-redirection.html:

2019-01-02  Simon Fraser  <simon.fraser@apple.com>

        REGRESSION (r239306): Don't disable font smoothing in transparent layers on macOS Mojave and later
        https://bugs.webkit.org/show_bug.cgi?id=193095
        <rdar://problem/47014944>

        Reviewed by Zalan Bujtas.
        
        A ref test that compares the rendering of layer and non-layer text with smoothing and antialiasing.

        * compositing/contents-format/subpixel-antialiased-text-expected.html: Added.
        * compositing/contents-format/subpixel-antialiased-text.html: Added.
        * platform/mac/TestExpectations:

2019-01-03  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] REGRESSION (r239441): Tab cycling to offscreen <select> may not scroll it into view
        https://bugs.webkit.org/show_bug.cgi?id=193084
        <rdar://problem/47006882>

        Reviewed by Simon Fraser.

        Add a layout test to verify that focusing a select element by tapping outside of it scrolls to reveal the
        focused select element.

        * fast/forms/ios/scroll-to-reveal-focused-select-expected.txt: Added.
        * fast/forms/ios/scroll-to-reveal-focused-select.html: Added.

2019-01-02  Devin Rousso  <webkit@devinrousso.com>

        Web Inspector: Implement `queryObjects` Command Line API
        https://bugs.webkit.org/show_bug.cgi?id=176766
        <rdar://problem/34890689>

        Reviewed by Joseph Pecoraro.

        * inspector/console/queryObjects-expected.html: Added.
        * inspector/console/queryObjects.html: Added.

        * http/tests/inspector/console/cross-domain-inspected-node-access-expected.txt:

2019-01-02  Charles Vazac  <cvazac@gmail.com>

        Fix resourcetimingbufferfull bubbles attribute
        https://bugs.webkit.org/show_bug.cgi?id=193087

        Reviewed by Chris Dumez.

        * http/wpt/resource-timing/rt-performance-extensions.js:
        (promise_test):

2019-01-02  Simon Fraser  <simon.fraser@apple.com>

        Support css-color-4 rgb functions
        https://bugs.webkit.org/show_bug.cgi?id=192321

        Reviewed by Zalan Bujtas.

        * TestExpectations: Unskip most of the WPT css-color rgb tests. Skip old imported WPT canvas tests.
        * canvas/philip/tests/2d.fillStyle.parse.invalid.rgb-1-expected.txt: Removed.
        * canvas/philip/tests/2d.fillStyle.parse.invalid.rgb-1.html: Removed.
        * canvas/philip/tests/2d.fillStyle.parse.invalid.rgb-2-expected.txt: Removed.
        * canvas/philip/tests/2d.fillStyle.parse.invalid.rgb-2.html: Removed.
        * canvas/philip/tests/2d.fillStyle.parse.invalid.rgb-5-expected.txt: Removed.
        * canvas/philip/tests/2d.fillStyle.parse.invalid.rgb-5.html: Removed.
        * canvas/philip/tests/2d.fillStyle.parse.invalid.rgb-7-expected.txt: Removed.
        * canvas/philip/tests/2d.fillStyle.parse.invalid.rgb-7.html: Removed.
        * canvas/philip/tests/2d.fillStyle.parse.invalid.rgba-1-expected.txt: Removed.
        * canvas/philip/tests/2d.fillStyle.parse.invalid.rgba-1.html: Removed.
        * canvas/philip/tests/2d.fillStyle.parse.invalid.rgba-2-expected.txt: Removed.
        * canvas/philip/tests/2d.fillStyle.parse.invalid.rgba-2.html: Removed.
        * canvas/philip/tests/2d.fillStyle.parse.invalid.rgba-4-expected.txt: Removed.
        * canvas/philip/tests/2d.fillStyle.parse.invalid.rgba-4.html: Removed.
        * css3/calc/color-rgb-expected.txt:
        * fast/canvas/gradient-addColorStop-with-invalid-color-expected.txt:
        * fast/canvas/gradient-addColorStop-with-invalid-color.html: Remove a test that is no longer invalid.
        * fast/css/rgb-float.html: Removed. This test is no longer value, since rgb() accepts floating point values.
        * platform/gtk/css2.1/t040306-syntax-01-f-expected.txt:
        * platform/gtk/fast/css/rgb-float-expected.png: Removed.
        * platform/gtk/fast/css/rgb-float-expected.txt: Removed.
        * platform/gtk/svg/hixie/perf/007-expected.txt:
        * platform/ios/css2.1/t040306-syntax-01-f-expected.txt:
        * platform/ios/fast/css/rgb-float-expected.txt: Removed.
        * platform/mac/css2.1/t040306-syntax-01-f-expected.txt:
        * platform/mac/fast/css/rgb-float-expected.png: Removed.
        * platform/mac/fast/css/rgb-float-expected.txt: Removed.
        * platform/mac/svg/hixie/perf/007-expected.txt:
        * platform/win-future/svg/hixie/perf/007-expected.txt:
        * platform/win/css2.1/t040306-syntax-01-f-expected.txt:
        * platform/win/svg/hixie/perf/007-expected.txt:
        * platform/wincairo/css2.1/t040306-syntax-01-f-expected.txt:
        * platform/wincairo/fast/css/rgb-float-expected.txt: Removed.
        * platform/wpe/css2.1/t040306-syntax-01-f-expected.txt:
        * platform/wpe/fast/css/rgb-float-expected.txt: Removed.
        * platform/wpe/svg/hixie/perf/007-expected.txt:
        * svg/hixie/perf/007-expected.txt:

2019-01-02  Wenson Hsieh  <wenson_hsieh@apple.com>

        REGRESSION (r239441): [iOS] Selection UI sometimes doesn't change after tapping "select all" in the callout bar
        https://bugs.webkit.org/show_bug.cgi?id=193070
        <rdar://problem/46921508>

        Reviewed by Tim Horton.

        Add a test to ensure that selection UI is shown after tapping on a focused element and then changing the
        selection programmatically.

        * editing/selection/ios/change-selection-after-tapping-focused-element-expected.txt: Added.
        * editing/selection/ios/change-selection-after-tapping-focused-element.html: Added.

2019-01-02  Simon Fraser  <simon.fraser@apple.com>

        Handle calc() expressions in gradient color stops
        https://bugs.webkit.org/show_bug.cgi?id=193066
        rdar://problem/46961985

        Reviewed by Sam Weinig.

        * fast/gradients/conic-calc-stop-position-expected.html: Added.
        * fast/gradients/conic-calc-stop-position.html: Added.

2018-12-31  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed. Support PHP 7.3 in Debian.

        * http/conf/debian-httpd-2.4-php7.3.conf: Added.

2018-12-31  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Rebaseline several tests after r239156.

        * platform/gtk/fast/frames/onlyCommentInIFrame-expected.txt:
        * platform/gtk/fast/invalid/junk-data-expected.txt:
        * platform/gtk/fast/invalid/missing-end-tag-expected.txt:
        * platform/gtk/fast/parser/xhtml-alternate-entities-expected.txt:
        * platform/gtk/fast/sub-pixel/selection/selection-rect-in-sub-pixel-table-expected.png:
        * platform/gtk/fast/sub-pixel/selection/selection-rect-in-sub-pixel-table-expected.txt:
        * platform/gtk/fast/xsl/xslt-extra-content-at-end-expected.txt:
        * platform/gtk/fast/xsl/xslt-missing-namespace-in-xslt-expected.txt:
        * platform/gtk/svg/custom/bug45331-expected.txt:
        * platform/gtk/svg/custom/junk-data-expected.txt:
        * platform/gtk/svg/custom/missing-xlink-expected.txt:
        * platform/gtk/svg/custom/path-bad-data-expected.txt:
        * platform/gtk/svg/custom/use-font-face-crash-expected.txt:
        * platform/gtk/svg/hixie/error/012-expected.txt:

2018-12-31  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Rebaseline several tests after r238730.

        innerText works differently when using complex text path.
        See https://bugs.webkit.org/show_bug.cgi?id=192750.

        * platform/gtk/fast/events/nested-window-event-expected.txt: Added.
        * platform/gtk/fast/events/window-events-bubble-expected.txt: Added.
        * platform/gtk/fast/events/window-events-bubble2-expected.txt: Added.
        * platform/gtk/fast/tokenizer/script_extra_close-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/css/css-grid/alignment/grid-row-axis-alignment-positioned-items-015-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/css/css-grid/alignment/grid-row-axis-alignment-positioned-items-016-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-validity-badInput-expected.txt:
        * platform/gtk/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-willValidate-expected.txt:
        * platform/gtk/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/selection-expected.txt:
        * platform/gtk/legacy-animation-engine/animations/lineheight-animation-expected.txt: Added.
        * platform/gtk/legacy-animation-engine/animations/simultaneous-start-transform-expected.txt: Added.
        * platform/gtk/legacy-animation-engine/animations/width-using-ems-expected.txt: Added.

2018-12-30  Ross Kirsling  <ross.kirsling@sony.com>

        [JSC] Identifier validity should be based on ID_Start / ID_Continue properties
        https://bugs.webkit.org/show_bug.cgi?id=193050

        Reviewed by Yusuke Suzuki.

        * sputnik/Unicode/Unicode_218/S7.6_A1.1_T2-expected.txt:
        * sputnik/Unicode/Unicode_218/S7.6_A1.1_T6-expected.txt:
        * sputnik/Unicode/Unicode_218/S7.6_A5.2_T2-expected.txt:
        * sputnik/Unicode/Unicode_218/S7.6_A5.2_T6-expected.txt:
        * sputnik/Unicode/Unicode_218/S7.6_A5.3_T1-expected.txt:
        * sputnik/Unicode/Unicode_218/S7.6_A5.3_T2-expected.txt:
        * sputnik/Unicode/Unicode_320/S7.6_A1.1_T6-expected.txt:
        * sputnik/Unicode/Unicode_320/S7.6_A2.3-expected.txt:
        * sputnik/Unicode/Unicode_320/S7.6_A3.1-expected.txt:
        * sputnik/Unicode/Unicode_320/S7.6_A5.2_T6-expected.txt:
        * sputnik/Unicode/Unicode_320/S7.6_A5.2_T9-expected.txt:
        * sputnik/Unicode/Unicode_320/S7.6_A5.3_T1-expected.txt:
        * sputnik/Unicode/Unicode_320/S7.6_A5.3_T2-expected.txt:
        * sputnik/Unicode/Unicode_410/S7.6_A1.1_T6-expected.txt:
        * sputnik/Unicode/Unicode_410/S7.6_A3.1-expected.txt:
        * sputnik/Unicode/Unicode_410/S7.6_A5.2_T6-expected.txt:
        * sputnik/Unicode/Unicode_410/S7.6_A5.3_T1-expected.txt:
        * sputnik/Unicode/Unicode_410/S7.6_A5.3_T2-expected.txt:
        * sputnik/Unicode/Unicode_500/S7.6_A1.1_T6-expected.txt:
        * sputnik/Unicode/Unicode_500/S7.6_A3.1-expected.txt:
        * sputnik/Unicode/Unicode_500/S7.6_A5.2_T6-expected.txt:
        * sputnik/Unicode/Unicode_500/S7.6_A5.3_T1-expected.txt:
        * sputnik/Unicode/Unicode_500/S7.6_A5.3_T2-expected.txt:
        * sputnik/Unicode/Unicode_510/S7.6_A1.1_T4-expected.txt:
        * sputnik/Unicode/Unicode_510/S7.6_A1.1_T6-expected.txt:
        * sputnik/Unicode/Unicode_510/S7.6_A5.2_T4-expected.txt:
        * sputnik/Unicode/Unicode_510/S7.6_A5.2_T6-expected.txt:
        Update expectations for outdated tests.

2018-12-23  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Rebaseline fast/text/zero-font-size.html after r239539.

        * platform/gtk/fast/text/zero-font-size-expected.txt:

2018-12-13  Yusuke Suzuki  <yusukesuzuki@slowstart.org>

        [BigInt] Support BigInt in JSON.stringify
        https://bugs.webkit.org/show_bug.cgi?id=192624

        Reviewed by Saam Barati.

        The test is wrong according to the spec[1]. valueOf of Boolean object won't be called.

        [1]: https://tc39.github.io/ecma262/#sec-serializejsonproperty

        * js/resources/JSON-stringify.js:
        * js/resources/json2-es5-compat.js:
        (str):

2018-12-22  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] Suppress native selection behaviors when focusing a very small editable element
        https://bugs.webkit.org/show_bug.cgi?id=193005
        <rdar://problem/46583527>

        Reviewed by Tim Horton.

        Add a new layout test to verify that native selection UI is suppressed when focusing a tiny (1px by 1px)
        editable element.

        * editing/selection/ios/hide-selection-in-tiny-contenteditable-expected.txt: Added.
        * editing/selection/ios/hide-selection-in-tiny-contenteditable.html: Added.
        * resources/ui-helper.js:
        (window.UIHelper.zoomToScale):

2018-12-20  Yusuke Suzuki  <yusukesuzuki@slowstart.org>

        [JSC] Implement "well-formed JSON.stringify" proposal
        https://bugs.webkit.org/show_bug.cgi?id=191677

        Reviewed by Darin Adler.

        * css3/escape-dom-api-expected.txt:
        * js/dom/webidl-type-mapping-expected.txt:
        * js/resources/json2-es5-compat.js:
        (isHighSurrogate):
        (isLowSurrogate):
        (isSurrogate):
        (quote):

2018-12-21  Youenn Fablet  <youenn@apple.com>

        RTCRtpSender.setParameters() does set active parameter
        https://bugs.webkit.org/show_bug.cgi?id=192848

        Reviewed by Eric Carlson.

        * webrtc/video.html:
        Add a check for active value.
        Test video freezing through canvas instead of stats.

2018-12-21  Justin Michaud  <justin_michaud@apple.com>

        CSS variables don't work for colors in "border" property
        https://bugs.webkit.org/show_bug.cgi?id=192922

        Reviewed by Simon Fraser.

        * css-custom-properties-api/border-variable-parsing-expected.html: Added.
        * css-custom-properties-api/border-variable-parsing.html: Added.

2018-12-21  Zalan Bujtas  <zalan@apple.com>

        Synchronous media query evaluation could destroy current Frame/FrameView.
        https://bugs.webkit.org/show_bug.cgi?id=192781
        <rdar://problem/34416793>

        Reviewed by Chris Dumez.

        * printing/print-with-media-query-destory-expected.txt: Added.
        * printing/print-with-media-query-destory.html: Added.

2018-12-21  Alex Christensen  <achristensen@webkit.org>

        Revert r239503.
        https://bugs.webkit.org/show_bug.cgi?id=192944

        * fast/url/host-expected.txt:
        * fast/url/host.html:

2018-12-21  Truitt Savell  <tsavell@apple.com>

        Skipping webgpu/ tests after https://trac.webkit.org/changeset/239495/webkit disabled webgpu on 10.12
        https://bugs.webkit.org/show_bug.cgi?id=192956

        Unreviewed Test Gardening.

        * platform/mac/TestExpectations:

2018-12-21  Justin Michaud  <justin_michaud@apple.com>

        Repeated background images with zero size should display the background color
        https://bugs.webkit.org/show_bug.cgi?id=192962

        Reviewed by Antti Koivisto.

        Fix a rendering bug exposed by the CSS Variable wpt tests where repeated backgrounds with zero size
        not draw the background colour underneath.

        * fast/backgrounds/background-repeat-with-zero-size-expected.html: Added.
        * fast/backgrounds/background-repeat-with-zero-size.html: Added.

2018-12-20  Brent Fulgham  <bfulgham@apple.com>

        Show punycode if URL contains Latin small letter dotless i
        https://bugs.webkit.org/show_bug.cgi?id=192944
        <rdar://problem/46103047>

        Reviewed by Andy Estes.

        * fast/url/host-expected.txt:
        * fast/url/host.html:

2018-12-21  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Remove platform specific files that are exactly the same as the generic expectation.

        * platform/gtk/fast/text/selection-in-initial-advance-region-expected.txt: Removed.
        * platform/gtk/imported/w3c/web-platform-tests/2dcontext/imagebitmap/createImageBitmap-invalid-args-expected.txt: Removed.
        * platform/gtk/legacy-animation-engine/animations/lineheight-animation-expected.txt: Removed.
        * platform/gtk/legacy-animation-engine/animations/simultaneous-start-transform-expected.txt: Removed.
        * platform/gtk/legacy-animation-engine/animations/width-using-ems-expected.txt: Removed.
        * platform/gtk/security/block-test-expected.txt: Removed.
        * platform/gtk/webaudio/codec-tests/wav/24bit-22khz-resample-expected.wav: Removed.

2018-12-21  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Rebaseline several tests.

        * platform/gtk/css2.1/t051201-c23-first-line-00-b-expected.png:
        * platform/gtk/css2.1/t051201-c23-first-line-00-b-expected.txt:
        * platform/gtk/css2.1/t1508-c527-font-04-b-expected.png:
        * platform/gtk/css2.1/t1508-c527-font-04-b-expected.txt:
        * platform/gtk/css2.1/t1508-c527-font-05-b-expected.png:
        * platform/gtk/css2.1/t1508-c527-font-05-b-expected.txt:
        * platform/gtk/css2.1/t1508-c527-font-07-b-expected.png:
        * platform/gtk/css2.1/t1508-c527-font-07-b-expected.txt:
        * platform/gtk/fast/css/getComputedStyle/computed-style-expected.txt: Added.
        * platform/gtk/fast/css/getComputedStyle/computed-style-font-family-expected.txt: Added.
        * platform/gtk/fast/css/getComputedStyle/computed-style-without-renderer-expected.txt: Added.
        * platform/gtk/fast/text/font-selection-font-loading-api-parse-expected.txt: Added.
        * platform/gtk/fast/text/font-stretch-parse-expected.txt: Added.
        * platform/gtk/fast/text/font-style-parse-expected.txt: Added.
        * platform/gtk/fast/text/font-weight-parse-expected.txt: Added.
        * platform/gtk/svg/css/getComputedStyle-basic-expected.txt: Added.

2018-12-20  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] Some layout tests are failing after r239441
        https://bugs.webkit.org/show_bug.cgi?id=192957
        <rdar://problem/46781759>

        Reviewed by Simon Fraser.

        Fix several failing layout tests after r239441.

        * fast/events/ios/click-event-while-editing-node.html:

        This test started failing after r239441 because it taps the bottom of the editable element, and then expects
        WebKit to scroll the web view up to reveal the touched location. This was exactly the bug that r239441 fixed, so
        we should just make this test no longer depend on the broken behavior.

        * fast/forms/ios/focus-long-textarea-expected.txt:
        * fast/forms/ios/zoom-after-input-tap-wide-input-expected.txt:

        Rebaseline a couple of test expectations to account for the change in margin around the selection rect, in
        -[WKWebView _zoomToFocusRect:…:].

2018-12-20  Jiewen Tan  <jiewen_tan@apple.com>

        [WebAuthN] Remove hash from Client Data
        https://bugs.webkit.org/show_bug.cgi?id=192727
        <rdar://problem/46746673>

        Reviewed by Brent Fulgham.

        * http/wpt/webauthn/public-key-credential-create-success-hid.https.html:
        * http/wpt/webauthn/public-key-credential-create-success-local.https.html:
        * http/wpt/webauthn/public-key-credential-get-success-hid.https.html:
        * http/wpt/webauthn/public-key-credential-get-success-local.https.html:

2018-12-20  Jiewen Tan  <jiewen_tan@apple.com>

        [WebAuthN] Add a runtime flag for local authenticator
        https://bugs.webkit.org/show_bug.cgi?id=192792
        <rdar://problem/46798738>

        Reviewed by Brent Fulgham.

        * platform/mac-highsierra-wk1/fast/dom/navigator-detached-no-crash-expected.txt:
        * platform/mac-wk1/fast/dom/navigator-detached-no-crash-expected.txt:

2018-12-20  Joseph Pecoraro  <pecoraro@apple.com>

        Web Inspector: Autoformat doesn't work on icloud.com (javascript-packed.js)
        https://bugs.webkit.org/show_bug.cgi?id=192946
        <rdar://problem/42546126>

        Rubber-stamped by Devin Rousso.

        * inspector/formatting/is-text-likely-minified-expected.txt:
        * inspector/formatting/is-text-likely-minified.html:
        Add a test for a long header doc at the start but minified content at the end.

2018-12-20  Ryan Haddad  <ryanhaddad@apple.com>

        [ iOS WK2 ] Layout Test imported/w3c/web-platform-tests/service-workers/service-worker/windowclient-navigate.https.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=191704

        Unreviewed test gardening.

        * platform/ios/TestExpectations: Mark test as flaky.

2018-12-20  Ryan Haddad  <ryanhaddad@apple.com>

        [Mac] Update apache httpd.conf
        https://bugs.webkit.org/show_bug.cgi?id=192942

        Reviewed by Alexey Proskuryakov.

        * http/conf/apache2.4-php7-httpd.conf:

2018-12-20  Ryan Haddad  <ryanhaddad@apple.com>

        [iOS] Layout Test imported/w3c/web-platform-tests/service-workers/service-worker/update-registration-with-type.https.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=192938

        Unreviewed test gardening.

        * platform/ios/TestExpectations: Mark test as flaky.

2018-12-20  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] Focusing an editable element should scroll to reveal the selection
        https://bugs.webkit.org/show_bug.cgi?id=192802
        <rdar://problem/46781759>

        Reviewed by Tim Horton.

        Adds a new layout test to verify that tapping near the bottom of a tall editable element to focus it doesn't
        cause the page to scroll up (and, as a result, leave the selection caret obscured).

        * editing/selection/ios/selection-is-visible-after-focusing-editable-area-expected.txt: Added.
        * editing/selection/ios/selection-is-visible-after-focusing-editable-area.html: Added.

2018-12-19  Ross Kirsling  <ross.kirsling@sony.com>

        [WinCairo] Unreviewed test gardening.

        * platform/wincairo/TestExpectations:

2018-12-19  Alicia Boya García  <aboya@igalia.com>

        [GTK][WPE] Unreviewed test gardening.
        https://bugs.webkit.org/show_bug.cgi?id=192904

        * platform/gtk/TestExpectations:
        * platform/gtk/animations/lineheight-animation-expected.txt: Copied from LayoutTests/platform/wpe/legacy-animation-engine/animations/lineheight-animation-expected.txt.
        * platform/gtk/animations/simultaneous-start-transform-expected.txt: Copied from LayoutTests/platform/wpe/legacy-animation-engine/animations/simultaneous-start-transform-expected.txt.
        * platform/gtk/animations/width-using-ems-expected.txt: Copied from LayoutTests/platform/wpe/legacy-animation-engine/animations/width-using-ems-expected.txt.
        * platform/gtk/css1/font_properties/font-expected.txt:
        * platform/gtk/css1/pseudo/multiple_pseudo_elements-expected.txt:
        * platform/gtk/css2.1/t1508-c527-font-00-b-expected.txt:
        * platform/gtk/css2.1/t1508-c527-font-06-b-expected.txt:
        * platform/gtk/css2.1/t1508-c527-font-10-c-expected.txt:
        * platform/gtk/fast/inline/inline-content-with-image-simple-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/2dcontext/imagebitmap/createImageBitmap-invalid-args-expected.txt:
        * platform/gtk/imported/w3c/web-platform-tests/eventsource/format-mime-bogus-expected.txt: Removed.
        * platform/gtk/legacy-animation-engine/animations/lineheight-animation-expected.txt: Added.
        * platform/gtk/legacy-animation-engine/animations/simultaneous-start-transform-expected.txt: Copied from LayoutTests/platform/wpe/legacy-animation-engine/animations/simultaneous-start-transform-expected.txt.
        * platform/gtk/legacy-animation-engine/animations/width-using-ems-expected.txt: Copied from LayoutTests/platform/wpe/legacy-animation-engine/animations/width-using-ems-expected.txt.
        * platform/wpe/TestExpectations:
        * platform/wpe/css1/font_properties/font-expected.txt:
        * platform/wpe/css1/pseudo/multiple_pseudo_elements-expected.txt:
        * platform/wpe/css2.1/t1508-c527-font-00-b-expected.txt:
        * platform/wpe/css2.1/t1508-c527-font-06-b-expected.txt:
        * platform/wpe/css2.1/t1508-c527-font-10-c-expected.txt:
        * platform/wpe/fast/inline/inline-content-with-image-simple-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/2dcontext/imagebitmap/createImageBitmap-invalid-args-expected.txt:
        * platform/wpe/imported/w3c/web-platform-tests/eventsource/format-mime-bogus-expected.txt: Removed.
        * platform/wpe/legacy-animation-engine/animations/lineheight-animation-expected.txt:
        * platform/wpe/legacy-animation-engine/animations/simultaneous-start-transform-expected.txt:
        * platform/wpe/legacy-animation-engine/animations/width-using-ems-expected.txt:

2018-12-19  Justin Fan  <justin_fan@apple.com>

        [WebGPU] Add stubs for WebGPUPipelineLayout/Descriptor and device::createPipelineLayout
        https://bugs.webkit.org/show_bug.cgi?id=192843
        <rdar://problem/46820395>

        Reviewed by Myles Maxfield.

        Update bind-group-layouts and rename to match new PipelineLayout functionality.

        * webgpu/bind-group-layouts-expected.txt: Removed.
        * webgpu/pipeline-layouts-expected.txt: Added.
        * webgpu/pipeline-layouts.html: Renamed from LayoutTests/webgpu/bind-group-layouts.html.

2018-12-19  Ryan Haddad  <ryanhaddad@apple.com>

        REGRESSION: [ iOS Sim ] Layout Test imported/w3c/web-platform-tests/service-workers/service-worker/update-missing-import-scripts.https.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=192250

        Unreviewed test gardening.

        * platform/ios/TestExpectations: Mark test as flaky.

2018-12-19  Ryan Haddad  <ryanhaddad@apple.com>

        REGRESSION: imported/w3c/web-platform-tests/service-workers/service-worker/register-closed-window.https.html is very flaky on iOS
        https://bugs.webkit.org/show_bug.cgi?id=192279

        Unreviewed test gardening.

        * platform/ios/TestExpectations: Mark test as flaky.

2018-12-19  Tim Horton  <timothy_horton@apple.com>

        UI process crash when focusing an editable image
        https://bugs.webkit.org/show_bug.cgi?id=192839
        <rdar://problem/46786670>

        Reviewed by Wenson Hsieh.

        * editing/images/basic-editable-image-with-gesture.html: Added.
        * editing/images/basic-editable-image-with-gesture-expected.txt: Added.
        * resources/ui-helper.js:
        (window.UIHelper.stylusTapAt.return.new.Promise):
        (window.UIHelper.stylusTapAt):
        Add a test that ensures that adding an editable image from a gesture
        doesn't crash, and can be drawn on.

2018-12-19  Youenn Fablet  <youenn@apple.com>

        [ MacOS iOS ] Layout Test webrtc/no-port-zero-in-upd-candidates.html is flaky timeout
        https://bugs.webkit.org/show_bug.cgi?id=192866

        Reviewed by Alex Christensen.

        * webrtc/no-port-zero-in-upd-candidates.html:
        Add some more logging in the test in case of time out.

2018-12-19  Ryan Haddad  <ryanhaddad@apple.com>

        REGRESSION (r234940): [ MacOS ] Layout Test imported/w3c/web-platform-tests/media-source/mediasource-changetype-play.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=190976

        Unreviewed test gardening.

        * platform/mac/TestExpectations: Mark test as flaky.

2018-12-19  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r239347.

        Caused the leaks bot to hit an exception and the new test
        crashes on certain configurations.

        Reverted changeset:

        "Synchronous media query evaluation could destroy current
        Frame/FrameView."
        https://bugs.webkit.org/show_bug.cgi?id=192781
        https://trac.webkit.org/changeset/239347

2018-12-18  Justin Michaud  <justin_michaud@apple.com>

        Update CSS Properties and Values API to use new cycle fallback behaviour
        https://bugs.webkit.org/show_bug.cgi?id=192800

        Reviewed by Antti Koivisto.

        * css-custom-properties-api/crash.html:
        * css-custom-properties-api/inherits-expected.txt:
        * css-custom-properties-api/inherits.html:
        * css-custom-properties-api/registerProperty-expected.txt:
        * css-custom-properties-api/registerProperty.html:

2018-12-18  Myles C. Maxfield  <mmaxfield@apple.com>

        Thick overlines and line-throughs grow in the wrong direction
        https://bugs.webkit.org/show_bug.cgi?id=192264

        Reviewed by Dean Jackson.

        I can't figure out a way to test the line-through, so this just tests the overline.

        * fast/css3-text/css3-text-decoration/text-decoration-thicknes-overline-grow-direction-expected.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-thicknes-overline-grow-direction.html: Added.

2018-12-18  Justin Fan  <justin_fan@apple.com>

        [WebGPU] BindGroupLayout and Device::createBindGroupLayout
        https://bugs.webkit.org/show_bug.cgi?id=192817

        Reviewed by Dean Jackson.

        Update bind-group-layouts to test new functionality.

        * webgpu/bind-group-layouts-expected.txt:
        * webgpu/bind-group-layouts.html:

2018-12-18  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed test gardening after r239306 and r239338.

        Move test compositing/contents-format baselines for Mojave into platform/mac, add new baselines for High Sierra and earlier.

        * platform/mac-highsierra-wk1/compositing/contents-format/subpixel-antialiased-text-enabled-expected.txt: Copied from LayoutTests/platform/mac-wk1/compositing/contents-format/subpixel-antialiased-text-enabled-expected.txt.
        * platform/mac-highsierra/compositing/contents-format/subpixel-antialiased-nested-layer-expected.txt: Copied from LayoutTests/platform/mac-mojave/compositing/contents-format/subpixel-antialiased-nested-layer-expected.txt.
        * platform/mac-highsierra/compositing/contents-format/subpixel-antialiased-text-configs-antialiasing-style-expected.txt: Copied from LayoutTests/platform/mac/compositing/contents-format/subpixel-antialiased-text-configs-antialiasing-style-expected.txt.
        * platform/mac-highsierra/compositing/contents-format/subpixel-antialiased-text-configs-expected.txt: Copied from LayoutTests/platform/mac/compositing/contents-format/subpixel-antialiased-text-configs-expected.txt.
        * platform/mac-highsierra/compositing/contents-format/subpixel-antialiased-text-enabled-expected.txt: Copied from LayoutTests/platform/mac/compositing/contents-format/subpixel-antialiased-text-enabled-expected.txt.
        * platform/mac-highsierra/compositing/contents-format/subpixel-antialiased-text-images-expected.txt: Copied from LayoutTests/platform/mac/compositing/contents-format/subpixel-antialiased-text-images-expected.txt.
        * platform/mac-highsierra/compositing/contents-format/subpixel-antialiased-text-traversal-expected.txt: Copied from LayoutTests/platform/mac/compositing/contents-format/subpixel-antialiased-text-traversal-expected.txt.
        * platform/mac-highsierra/compositing/contents-format/subpixel-antialiased-text-visibility-expected.txt: Copied from LayoutTests/platform/mac/compositing/contents-format/subpixel-antialiased-text-visibility-expected.txt.
        * platform/mac-mojave-wk1/compositing/contents-format/subpixel-antialiased-text-enabled-expected.txt: Removed.
        * platform/mac-mojave/compositing/contents-format/subpixel-antialiased-text-configs-antialiasing-style-expected.txt: Removed.
        * platform/mac-mojave/compositing/contents-format/subpixel-antialiased-text-configs-expected.txt: Removed.
        * platform/mac-mojave/compositing/contents-format/subpixel-antialiased-text-enabled-expected.txt: Removed.
        * platform/mac-mojave/compositing/contents-format/subpixel-antialiased-text-images-expected.txt: Removed.
        * platform/mac-mojave/compositing/contents-format/subpixel-antialiased-text-traversal-expected.txt: Removed.
        * platform/mac-mojave/compositing/contents-format/subpixel-antialiased-text-visibility-expected.txt: Removed.
        * platform/mac-wk1/compositing/contents-format/subpixel-antialiased-text-enabled-expected.txt:
        * platform/mac/compositing/contents-format/subpixel-antialiased-nested-layer-expected.txt: Renamed from LayoutTests/platform/mac-mojave/compositing/contents-format/subpixel-antialiased-nested-layer-expected.txt.
        * platform/mac/compositing/contents-format/subpixel-antialiased-text-configs-antialiasing-style-expected.txt:
        * platform/mac/compositing/contents-format/subpixel-antialiased-text-configs-expected.txt:
        * platform/mac/compositing/contents-format/subpixel-antialiased-text-enabled-expected.txt:
        * platform/mac/compositing/contents-format/subpixel-antialiased-text-images-expected.txt:
        * platform/mac/compositing/contents-format/subpixel-antialiased-text-traversal-expected.txt:
        * platform/mac/compositing/contents-format/subpixel-antialiased-text-visibility-expected.txt:

2018-12-18  Zalan Bujtas  <zalan@apple.com>

        Synchronous media query evaluation could destroy current Frame/FrameView.
        https://bugs.webkit.org/show_bug.cgi?id=192781
        <rdar://problem/34416793>

        Reviewed by Chris Dumez.

        * printing/print-with-media-query-destory-expected.txt: Added.
        * printing/print-with-media-query-destory.html: Added.

2018-12-18  Joseph Pecoraro  <pecoraro@apple.com>

        Web Inspector: m3u8 content not shown, it should be text
        https://bugs.webkit.org/show_bug.cgi?id=192731
        <rdar://problem/46747728>

        Reviewed by Devin Rousso.

        * inspector/unit-tests/mimetype-utilities-expected.txt:
        * inspector/unit-tests/mimetype-utilities.html:
        Tests for shouldTreatMIMETypeAsText.

2018-12-18  Daniel Bates  <dabates@apple.com>

        Remove <meta http-equiv=set-cookie> support
        https://bugs.webkit.org/show_bug.cgi?id=185077
        <rdar://problem/41791397>

        Reviewed by Brent Fulgham.

        Update test now that we no longer consider the HTTP equiv. pragma Set-Cookie as
        dangerous (since it is ignored).

        * http/tests/security/xssAuditor/cookie-injection-expected.txt:

2018-12-18  Justin Michaud  <justin_michaud@apple.com>

        CSS Typed OM should expose attributeStyleMap
        https://bugs.webkit.org/show_bug.cgi?id=192671

        Reviewed by Ryosuke Niwa.

        * css-typedom/attributeStyleMap-expected.txt: Added.
        * css-typedom/attributeStyleMap.html: Added.
        * css-typedom/sameobject-expected.txt: Added.
        * css-typedom/sameobject.html: Added.
        * fast/css-custom-paint/properties.html:
        * platform/ios-wk1/TestExpectations:
        * platform/ios-wk2/js/dom/dom-static-property-for-in-iteration-expected.txt: Added.
        * platform/mac-wk1/TestExpectations:
        * platform/mac-wk2/js/dom/dom-static-property-for-in-iteration-expected.txt: Added.
        * platform/win/TestExpectations:

2018-12-18  Simon Fraser  <simon.fraser@apple.com>

        Fix test failure after r239306.

        Need Mojave WK1 results for this test.

        * platform/mac-mojave-wk1/compositing/contents-format/subpixel-antialiased-text-enabled-expected.txt: Added.

2018-12-18  Wenson Hsieh  <wenson_hsieh@apple.com>

        Calling setValue() while typing should invoke -textDidChangeInTextField in the injected bundle
        https://bugs.webkit.org/show_bug.cgi?id=192785
        <rdar://problem/45321184>

        Reviewed by Tim Horton.

        Add a test to verify that:
        1. When typing in a focused field, the injected bundle method is invoked.
        2. When changing the value of the focused field under non-typing user interaction, the method isn't invoked.
        3. When changing the value of the focused field programmatically without user gesture, the method isn't invoked.

        * TestExpectations:
        * fast/forms/call-text-did-change-in-text-field-when-typing-expected.txt: Added.
        * fast/forms/call-text-did-change-in-text-field-when-typing.html: Added.
        * platform/wk2/TestExpectations:

2018-12-17  Jiewen Tan  <jiewen_tan@apple.com>

        [Mac] Layout Test http/wpt/webauthn/public-key-credential-create-success-hid.https.html and http/wpt/webauthn/public-key-credential-get-success-hid.https.html are flaky
        https://bugs.webkit.org/show_bug.cgi?id=192061

        Reviewed by Dewei Zhu.

        Add a time out value.

        * http/wpt/webauthn/public-key-credential-create-success-hid.https.html:

2018-12-17  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] A stream's first video frame should be rendered
        https://bugs.webkit.org/show_bug.cgi?id=192629
        <rdar://problem/46664353>

        Reviewed by Youenn Fablet.

        * fast/mediastream/MediaStream-video-element-displays-buffer.html: Updated.
        * fast/mediastream/MediaStream-video-element-video-tracks-disabled-then-enabled-expected.txt: Ditto.
        * fast/mediastream/MediaStream-video-element-video-tracks-disabled-then-enabled.html: Ditto.
        * fast/mediastream/media-stream-renders-first-frame-expected.txt: Added.
        * fast/mediastream/media-stream-renders-first-frame.html: Added.
        * http/tests/media/media-stream/getusermedia-with-canvas-expected.txt: Removed.
        * http/tests/media/media-stream/getusermedia-with-canvas.html: Removed.

2018-12-17  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] Focusing a large editable element always scrolls to the top of the element
        https://bugs.webkit.org/show_bug.cgi?id=192745
        <rdar://problem/46758445>

        Reviewed by Tim Horton.

        Add a new layout test to verify that we don't scroll unnecessarily when focusing a tall editable element, whose
        top offset is already near the top of the viewport.

        * editing/selection/ios/no-scrolling-when-focusing-large-editable-area-expected.txt: Added.
        * editing/selection/ios/no-scrolling-when-focusing-large-editable-area.html: Added.

2018-12-17  Ryosuke Niwa  <rniwa@webkit.org>

        offsetLeft and offsetParent should adjust across shadow boundaries
        https://bugs.webkit.org/show_bug.cgi?id=157437
        <rdar://problem/26154021>

        Reviewed by Simon Fraser.

        Added a W3C style testharness.js test.

        * fast/shadow-dom/offsetParent-across-shadow-boundaries-expected.txt: Added.
        * fast/shadow-dom/offsetParent-across-shadow-boundaries.html: Added.

2018-12-17  Simon Fraser  <simon.fraser@apple.com>

        Don't use more expensive layer backing store formats when subpixel text antialiasing is not enabled
        https://bugs.webkit.org/show_bug.cgi?id=192780
        rdar://problem/43394387

        Reviewed by Tim Horton.
        
        New macOS Mojave and later results.

        * platform/mac-mojave/compositing/contents-format/subpixel-antialiased-nested-layer-expected.txt: Added.
        * platform/mac-mojave/compositing/contents-format/subpixel-antialiased-text-configs-antialiasing-style-expected.txt: Added.
        * platform/mac-mojave/compositing/contents-format/subpixel-antialiased-text-configs-expected.txt: Added.
        * platform/mac-mojave/compositing/contents-format/subpixel-antialiased-text-enabled-expected.txt: Added.
        * platform/mac-mojave/compositing/contents-format/subpixel-antialiased-text-images-expected.txt: Added.
        * platform/mac-mojave/compositing/contents-format/subpixel-antialiased-text-traversal-expected.txt: Added.
        * platform/mac-mojave/compositing/contents-format/subpixel-antialiased-text-visibility-expected.txt: Added.

2018-12-17  Justin Fan  <justin_fan@apple.com>

        [WebGPU] Implement WebGPUBindGroupLayoutDescriptor and its supporting dictionaries
        https://bugs.webkit.org/show_bug.cgi?id=192726

        Reviewed by Myles C. Maxfield.

        Add simple test to ensure a WebGPUBindGroupLayoutDescriptor can be created.

        * webgpu/bind-group-layouts-expected.txt: Added.
        * webgpu/bind-group-layouts.html: Added.

2018-12-17  Zalan Bujtas  <zalan@apple.com>

        Reproducible ASSERTion failure when toggling layer borders with find-in-page up
        https://bugs.webkit.org/show_bug.cgi?id=192762
        <rdar://problem/46676873>

        Reviewed by Simon Fraser.

        * editing/document-marker-null-check-expected.txt: Added.
        * editing/document-marker-null-check.html: Added.

2018-12-17  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r239265 and r239274.
        https://bugs.webkit.org/show_bug.cgi?id=192765

        unorm_normalize is deprecated, and broke an internal build
        (Requested by Truitt on #webkit).

        Reverted changesets:

        "[GTK][WPE] Need a function to convert internal URI to display
        ("pretty") URI"
        https://bugs.webkit.org/show_bug.cgi?id=174816
        https://trac.webkit.org/changeset/239265

        "Fix the Apple Internal Mac build with a newer SDK"
        https://trac.webkit.org/changeset/239274

2018-12-17  Daniel Bates  <dabates@apple.com>

        Implement UIScriptController::toggleCapsLock() for iOS
        https://bugs.webkit.org/show_bug.cgi?id=191815

        Reviewed by Andy Estes.

        Add iOS-specific results for some of the tests. We need to continue to skip the caps
        lock tests on iOS until we have the fix for <rdar://problem/44930119>.

        * fast/forms/password-scrolled-after-caps-lock-toggled.html: Replace input.focus() with
        UIHelper.activateElement(input) to make it work on iOS and update logic accordingly.
        Compensate for the fact that one less character than the size of the input is visible in
        a password field on iOS.
        * fast/repaint/placeholder-after-caps-lock-hidden.html: Replace input.focus() with
        UIHelper.activateElement(input) to make it work on iOS and update logic accordingly.
        * platform/ios-wk2/TestExpectations:
        * platform/ios-wk2/fast/forms/password-scrolled-after-caps-lock-toggled-expected.txt: Added.
        * platform/ios-wk2/fast/repaint/placeholder-after-caps-lock-hidden-expected.txt: Added.

2018-12-17  Simon Fraser  <simon.fraser@apple.com>

        REGRESSION (r233268): Elements animated in from offscreen sometimes don't display
        https://bugs.webkit.org/show_bug.cgi?id=192725
        rdar://problem/46011418

        Reviewed by Antoine Quint.

        * compositing/backing/animate-into-view-expected.txt: Added.
        * compositing/backing/animate-into-view-with-descendant-expected.txt: Added.
        * compositing/backing/animate-into-view-with-descendant.html: Added.
        * compositing/backing/animate-into-view.html: Added.
        * platform/ios/compositing/backing/animate-into-view-expected.txt: Added.
        * platform/ios/compositing/backing/animate-into-view-with-descendant-expected.txt: Added.

2018-12-17  Ms2ger  <Ms2ger@igalia.com>

        [GTK][WPE] Need a function to convert internal URI to display ("pretty") URI
        https://bugs.webkit.org/show_bug.cgi?id=174816

        Reviewed by Michael Catanzaro.

        * TestExpectations: Enable fast/url/user-visible/.

2018-12-15  Youenn Fablet  <youenn@apple.com>

        Make RTCRtpSender.setParameters to activate specific encodings
        https://bugs.webkit.org/show_bug.cgi?id=192732

        Reviewed by Eric Carlson.

        * webrtc/video-expected.txt:
        * webrtc/video.html:

2018-12-15  Nikita Vasilyev  <nvasilyev@apple.com>

        Web Inspector: Styles: toggling selected properties may cause data corruption
        https://bugs.webkit.org/show_bug.cgi?id=192396
        <rdar://problem/46478383>

        Reviewed by Devin Rousso.

        * inspector/css/add-css-property-expected.txt: Added.
        * inspector/css/add-css-property.html: Added.
        Test adding new properties.

        * inspector/css/modify-css-property-expected.txt:
        * inspector/css/modify-css-property.html:
        Test commenting out and uncommenting CSS properties.

2018-12-14  Youenn Fablet  <youenn@apple.com>

        MediaRecorderPrivateAVFImpl should have a Ref<MediaRecorderPrivateWriter> as member
        https://bugs.webkit.org/show_bug.cgi?id=192720

        Reviewed by Eric Carlson.

        * http/wpt/mediarecorder/MediaRecorder-onremovetrack-expected.txt: Added.
        * http/wpt/mediarecorder/MediaRecorder-onremovetrack.html: Added.

2018-12-14  Matt Baker  <mattbaker@apple.com>

        Web Inspector: Cookies view should use model objects instead of raw payload data
        https://bugs.webkit.org/show_bug.cgi?id=189533
        <rdar://problem/44364183>

        Reviewed by Joseph Pecoraro and Devin Rousso.

        * inspector/unit-tests/cookie-expected.txt:
        * inspector/unit-tests/cookie.html:

2018-12-14  Simon Fraser  <simon.fraser@apple.com>

        REGRESSION (r233268): contents of an animated element inside overflow:hidden disappear
        https://bugs.webkit.org/show_bug.cgi?id=188655
        rdar://problem/43382687

        Reviewed by Antoine Quint.

        * compositing/backing/backing-store-attachment-empty-keyframe-expected.txt: Added.
        * compositing/backing/backing-store-attachment-empty-keyframe.html: Added.
        * legacy-animation-engine/compositing/backing/backing-store-attachment-empty-keyframe-expected.txt: Added.
        * legacy-animation-engine/compositing/backing/backing-store-attachment-empty-keyframe.html: Added.

2018-12-14  Zalan Bujtas  <zalan@apple.com>

        Unreviewed test gardening.

        LFC does not support logical to physical coordinate conversion yet.

        * fast/block/block-only/float-avoider-with-margins-expected.txt:
        * fast/block/block-only/float-avoider-with-margins.html:

2018-12-14  Youenn Fablet  <youenn@apple.com>

        IDB should store RTCCertificate
        https://bugs.webkit.org/show_bug.cgi?id=192599

        Reviewed by Brady Eidson.

        * webrtc/certificates-indexeddb-expected.txt: Added.
        * webrtc/certificates-indexeddb.html: Added.

2018-12-13  Ryosuke Niwa  <rniwa@webkit.org>

        Make HTMLConverter work across shadow boundaries
        https://bugs.webkit.org/show_bug.cgi?id=192640

        Reviewed by Wenson Hsieh.

        Added tests for generating attributed string out across shadow boundaries based on the tests
        of respective names in editing/pasteboard.

        * editing/mac/attributed-string/attributed-string-across-shadow-boundaries-1-expected.txt: Added.
        * editing/mac/attributed-string/attributed-string-across-shadow-boundaries-1.html: Added.
        * editing/mac/attributed-string/attributed-string-across-shadow-boundaries-2-expected.txt: Added.
        * editing/mac/attributed-string/attributed-string-across-shadow-boundaries-2.html: Added.
        * editing/mac/attributed-string/attributed-string-across-shadow-boundaries-3-expected.txt: Added.
        * editing/mac/attributed-string/attributed-string-across-shadow-boundaries-3.html: Added.
        * editing/mac/attributed-string/attributed-string-across-shadow-boundaries-4-expected.txt: Added.
        * editing/mac/attributed-string/attributed-string-across-shadow-boundaries-4.html: Added.
        * editing/mac/attributed-string/attributed-string-across-shadow-boundaries-5-expected.txt: Added.
        * editing/mac/attributed-string/attributed-string-across-shadow-boundaries-5.html: Added.
        * editing/mac/attributed-string/attributed-string-across-shadow-boundaries-with-style-1-expected.txt: Added.
        * editing/mac/attributed-string/attributed-string-across-shadow-boundaries-with-style-1.html: Added.
        * editing/mac/attributed-string/attributed-string-across-shadow-boundaries-with-style-2-expected.txt: Added.
        * editing/mac/attributed-string/attributed-string-across-shadow-boundaries-with-style-2.html: Added.
        * editing/mac/attributed-string/resources/dump-attributed-string.js:
        (window.dumpAttributedString): Now takes start and end containers and offsets.
        (serializeSubtreeWithShadow): Added. This function serializes the content of shadow roots along with
        start and end markers.
        (serializeSubtreeWithShadow.serializeCharacterData): Added.
        (serializeSubtreeWithShadow.serializeNode): Added.
        (serializeSubtreeWithShadow.serializeChildNodes): Added.
        (serializeSubtreeWithShadow.serializeShadowRootAndChildNodes): Added.
        (dumpAttributedString): Deleted.
        * platform/mac-sierra/editing/mac/attributed-string/attributed-string-across-shadow-boundaries-1-expected.txt: Added.
        * platform/mac-sierra/editing/mac/attributed-string/attributed-string-across-shadow-boundaries-2-expected.txt: Added.
        * platform/mac-sierra/editing/mac/attributed-string/attributed-string-across-shadow-boundaries-3-expected.txt: Added.
        * platform/mac-sierra/editing/mac/attributed-string/attributed-string-across-shadow-boundaries-4-expected.txt: Added.
        * platform/mac-sierra/editing/mac/attributed-string/attributed-string-across-shadow-boundaries-5-expected.txt: Added.
        * platform/mac-sierra/editing/mac/attributed-string/attributed-string-across-shadow-boundaries-with-style-1-expected.txt: Added.
        * platform/mac-sierra/editing/mac/attributed-string/attributed-string-across-shadow-boundaries-with-style-2-expected.txt: Added.

2018-12-13  Youenn Fablet  <youenn@apple.com>

        Trying to play a media element synchronously after setting srcObject should succeed without user gesture
        https://bugs.webkit.org/show_bug.cgi?id=192679

        Reviewed by Eric Carlson.

        * fast/mediastream/local-audio-playing-event-expected.txt:
        * fast/mediastream/local-audio-playing-event.html:

2018-12-13  Per Arne Vollan  <pvollan@apple.com>

        [macOS] Inline WebVTT styles should override styles from Captions settings in System Preferences
        https://bugs.webkit.org/show_bug.cgi?id=192638

        Reviewed by Eric Carlson.

        * media/track/captions-webvtt/css-styling.vtt:
        * media/track/captions-webvtt/no-css-styling.vtt:
        * media/track/track-css-user-override-expected.txt:
        * media/track/track-css-user-override.html:
        * media/track/track-cue-css-expected.html:

2018-12-13  Matt Baker  <mattbaker@apple.com>

        Web Inspector: Table selection becomes corrupted when deleting selected cookies
        https://bugs.webkit.org/show_bug.cgi?id=192388
        <rdar://problem/46472364>

        Reviewed by Devin Rousso.

        * inspector/table/table-remove-rows-expected.txt:
        * inspector/table/table-remove-rows.html:

2018-12-13  Brent Fulgham  <bfulgham@apple.com>

        Don't attempt to animate invalid CSS properties
        https://bugs.webkit.org/show_bug.cgi?id=192630
        <rdar://problem/46664433>

        Reviewed by Antoine Quint.

        * animations/invalid-property-animation-expected.txt: Added.
        * animations/invalid-property-animation.html: Added.

2018-12-13  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] Calculate width or height when constraints contain only the other
        https://bugs.webkit.org/show_bug.cgi?id=192632
        <rdar://problem/46665734>

        Reviewed by Youenn Fablet.

        * fast/mediastream/constraint-intrinsic-size-expected.txt: Added.
        * fast/mediastream/constraint-intrinsic-size.html: Added.

2018-12-13  Carlos Garcia Campos  <cgarcia@igalia.com>

        [FreeType] Remove HarfBuzzFace
        https://bugs.webkit.org/show_bug.cgi?id=192589

        Reviewed by Michael Catanzaro.

        Rebaseline test that now matches the firefox output.

        * platform/gtk/mathml/opentype/opentype-stretchy-expected.png:
        * platform/gtk/mathml/opentype/opentype-stretchy-expected.txt:

2018-12-12  Carlos Garcia Campos  <cgarcia@igalia.com>

        [FreeType] Add initial implementation of variation fonts
        https://bugs.webkit.org/show_bug.cgi?id=192151

        Reviewed by Michael Catanzaro.

        Unskip variation fonts tests that are now passing in GTK+ port.

        * platform/gtk/TestExpectations:

2018-12-12  Simon Fraser  <simon.fraser@apple.com>

        REGRESSION (r238090): CAPCHA UI jumps to the wrong location
        https://bugs.webkit.org/show_bug.cgi?id=192651
        rdar://problem/46531919

        Reviewed by Zalan Bujtas.
        
        Testcase that makes an intermediate layer non-composited (but still a RenderLayer).

        * compositing/geometry/update-child-geometry-on-compositing-change-expected.html: Added.
        * compositing/geometry/update-child-geometry-on-compositing-change.html: Added.

2018-12-12  Ryosuke Niwa  <rniwa@webkit.org>

        Make TextInputController.legacyAttributedString take DOM nodes and offsets
        https://bugs.webkit.org/show_bug.cgi?id=192653

        Reviewed by Wenson Hsieh.

        Updated the tests per API change.

        * editing/mac/attributed-string/attribute-string-for-copy-with-color-filter.html:
        * editing/mac/attributed-string/resources/dump-attributed-string.js:
        (dumpAttributedString):

2018-12-12  Simon Fraser  <simon.fraser@apple.com>

        REGRESSION (r238357): Pins on Yelp map disappear
        https://bugs.webkit.org/show_bug.cgi?id=192597
        rdar://problem/46578285

        Reviewed by Zalan Bujtas.
        
        Add tests that toggle negative z-index on a child, with and without sibling compositing layers.

        * compositing/z-order/add-negative-z-child-expected.html: Added.
        * compositing/z-order/add-negative-z-child.html: Added.
        * compositing/z-order/rebuild-sibling-of-layer-with-foreground-layer-expected.html: Added.
        * compositing/z-order/rebuild-sibling-of-layer-with-foreground-layer.html: Added.

2018-12-12  YUHAN WU  <yuhan_wu@apple.com>

        Implement non-timeslice mode encoding for MediaRecorder
        https://bugs.webkit.org/show_bug.cgi?id=192069
        <rdar://problem/46443290>

        Reviewed by Eric Carlson.

        Create new tests for encoding of MediaRecorder. Check if the produced video and audio are correct.
        Add code to turn on the mock source of MediaRecorder for the two old tests because the real source is enabled by default.

        * http/wpt/mediarecorder/MediaRecorder-AV-audio-video-dataavailable-expected.txt: Added.
        * http/wpt/mediarecorder/MediaRecorder-AV-audio-video-dataavailable.html: Added.
        * http/wpt/mediarecorder/MediaRecorder-dataavailable.html:
        * http/wpt/mediarecorder/MediaRecorder-mock-dataavailable.html:

2018-12-12  Justin Fan  <justin_fan@apple.com>

        [WebGPU] Vertex buffers and WebGPUInputState
        https://bugs.webkit.org/show_bug.cgi?id=192611

        Reviewed by Dean Jackson.

        Added variation of simple-triangle-strip to use a vertex buffer. Refactored aforementioned
        test to share code with new test.

        * webgpu/js/basic-webgpu-functions.js:
        (setUpPipelineDescriptor):
        * webgpu/js/webgpu-functions.js: Added.
        (async.getBasicDevice):
        (createBasicContext):
        (createBasicPipeline):
        (beginBasicRenderPass):
        * webgpu/render-pipelines-expected.txt:
        * webgpu/render-pipelines.html:
        * webgpu/simple-triangle-strip.html:
        * webgpu/vertex-buffer-triangle-strip-expected.html: Added.
        * webgpu/vertex-buffer-triangle-strip.html: Added.

2018-12-12  Joseph Pecoraro  <pecoraro@apple.com>

        REGRESSION: [ MacOS iOS ] Layout Test http/wpt/resource-timing/rt-revalidate-requests.html is flaky timeout
        https://bugs.webkit.org/show_bug.cgi?id=191207
        <rdar://problem/45818891>

        Reviewed by Devin Rousso.

        Splitting this test up into separate tests eliminated flakiness
        and timeouts for my system that would occasionally encounter them.

        * TestExpectations:
        Remove expectation for the test now that splitting up eliminated flakiness so far.

        * http/wpt/resource-timing/resources/rt-revalidate-utilities.sub.js
        Common code for the split out tests.

        * http/wpt/resource-timing/rt-revalidate-requests-1-expected.txt: Added.
        * http/wpt/resource-timing/rt-revalidate-requests-1.html: Added.
        * http/wpt/resource-timing/rt-revalidate-requests-2-expected.txt: Added.
        * http/wpt/resource-timing/rt-revalidate-requests-2.html: Added.
        * http/wpt/resource-timing/rt-revalidate-requests-3-expected.txt: Added.
        * http/wpt/resource-timing/rt-revalidate-requests-3.html: Added.
        * http/wpt/resource-timing/rt-revalidate-requests.html: Removed.
        * http/wpt/resource-timing/rt-revalidate-requests-expected.txt: Removed.
        Split out into separate tests.        

2018-12-12  Chris Dumez  <cdumez@apple.com>

        [Mojave Release Wk2] Layout Test http/tests/cache/disk-cache/disk-cache-validation-attachment.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=190323
        <rdar://problem/45056253>

        Reviewed by Youenn Fablet.

        * http/tests/cache/disk-cache/disk-cache-validation-attachment-expected.txt:
        * http/tests/cache/disk-cache/disk-cache-validation-attachment.html:
        Simplify test a bit to only test the header combinations it cares about.

        * http/tests/cache/disk-cache/resources/cache-test.js:
        (runTestsNow):
        (runTests):
        The flakiness was due to logic in CachedResourceLoader::determineRevalidationPolicy() which more aggressively
        reuses cached resources (bypassing freshness checks) until the load event has fired. This means that the
        test would give different results depending on whether or not the load event had a chance to fire before
        we do the checks. To address the issue, update runTests() to wait for the load event if it has not yet
        fired. This will likely address flakiness in other disk-cache tests as well.

        * platform/mac-wk2/TestExpectations:
        Unskip test that is no longer flaky.

2018-12-12  Youenn Fablet  <youenn@apple.com>

        Recycling the m section should work if it was rejected remotely
        https://bugs.webkit.org/show_bug.cgi?id=192636

        Reviewed by Eric Carlson.

        * webrtc/msection-recycling-expected.txt: Added.
        * webrtc/msection-recycling.html: Added.

2018-12-12  Tim Horton  <timothy_horton@apple.com>

        REGRESSION (r237565): >20 Find in Page highlights in one tile results in a single giant highlight
        https://bugs.webkit.org/show_bug.cgi?id=192642
        <rdar://problem/46498246>

        Reviewed by Geoffrey Garen.

        * fast/shrink-wrap/rect-shrink-wrap-expected.html:
        * fast/shrink-wrap/rect-shrink-wrap.html:
        Add a test case with >20 tiny rects.

2018-12-12  Michael Catanzaro  <mcatanzaro@igalia.com>

        Unreviewed manual rollout of r239100-r239102 and r239116
        https://bugs.webkit.org/show_bug.cgi?id=192151
        <rdar://problem/46655586>

        * platform/gtk/TestExpectations:
        * platform/gtk/mathml/opentype/opentype-stretchy-expected.png:
        * platform/gtk/mathml/opentype/opentype-stretchy-expected.txt:

2018-12-12  Carlos Garcia Campos  <cgarcia@igalia.com>

        [FreeType] Remove HarfBuzzFace
        https://bugs.webkit.org/show_bug.cgi?id=192589

        Reviewed by Michael Catanzaro.

        Rebaseline test that now matches the firefox output.

        * platform/gtk/mathml/opentype/opentype-stretchy-expected.png:
        * platform/gtk/mathml/opentype/opentype-stretchy-expected.txt:

2018-12-12  Carlos Garcia Campos  <cgarcia@igalia.com>

        [FreeType] Add initial implementation of variation fonts
        https://bugs.webkit.org/show_bug.cgi?id=192151

        Reviewed by Michael Catanzaro.

        Unskip variation fonts tests that are now passing in GTK+ port.

        * platform/gtk/TestExpectations:

2018-12-10  Ryosuke Niwa  <rniwa@webkit.org>

        connectedCallback is invoked during the removal of the element inside another element's connectedCallback
        https://bugs.webkit.org/show_bug.cgi?id=183586
        <rdar://problem/38403504>

        Reviewed by Frédéric Wang.

        Added a W3C style testharness test.

        * fast/custom-elements/enqueue-custom-element-callback-reactions-inside-another-callback-expected.txt: Added.
        * fast/custom-elements/enqueue-custom-element-callback-reactions-inside-another-callback.html: Added.

2018-12-11  Justin Fan  <justin_fan@apple.com>

        [WebGPU] Implement WebGPUBuffer
        https://bugs.webkit.org/show_bug.cgi?id=192516

        Reviewed by Dean Jackson.

        Basic test to create a WebGPUBuffer and ensure that its memory is valid.

        * webgpu/buffers-expected.txt: Added.
        * webgpu/buffers.html: Added.

2018-12-11  Brent Fulgham  <bfulgham@apple.com>

        Don't attempt to compute animated values when there is no relevant animation
        https://bugs.webkit.org/show_bug.cgi?id=192591
        <rdar://problem/34336946>

        Reviewed by Dean Jackson.

        * svg/animations/avoid-calculating-for-non-animating-elements-expected.txt: Added.
        * svg/animations/avoid-calculating-for-non-animating-elements.html: Added.

2018-12-11  Chris Dumez  <cdumez@apple.com>

        Unreviewed, fix typos in console log from r239087.

        * http/tests/events/device-orientation-motion-non-secure-context.html:
        * platform/ios/http/tests/events/device-orientation-motion-non-secure-context-expected.txt:

2018-12-11  Chris Dumez  <cdumez@apple.com>

        Restrict DeviceMotion / DeviceOrientation APIs to secure contexts
        https://bugs.webkit.org/show_bug.cgi?id=192595
        <rdar://problem/46382603>

        Reviewed by Dean Jackson.

        Add layout test coverage. Note however that we currently do not have mock data providers
        for these APIs.

        * http/tests/events/device-orientation-motion-non-secure-context-expected.txt: Added.
        * http/tests/events/device-orientation-motion-non-secure-context.html: Added.
        * http/tests/events/device-orientation-motion-secure-context-expected.txt: Added.
        * http/tests/events/device-orientation-motion-secure-context.html: Added.
        * platform/ios/http/tests/events/device-orientation-motion-non-secure-context-expected.txt: Added.
        * platform/ios/http/tests/events/device-orientation-motion-secure-context-expected.txt: Added.

2018-12-10  Brent Fulgham  <bfulgham@apple.com>

        SVGViewSpec objects should mark relevant SVG elements
        https://bugs.webkit.org/show_bug.cgi?id=192567
        <rdar://problem/46491325>

        Reviewed by Ryosuke Niwa.

        * svg/animations/view-dependency-crash-expected.txt: Added.
        * svg/animations/view-dependency-crash.html: Added.

2018-12-10  Benjamin Poulain  <benjamin@webkit.org>

        <rdar://problem/45296285> Content blocker rule "raw" blocks media elements from loading
        https://bugs.webkit.org/show_bug.cgi?id=192439

        Reviewed by Dean Jackson.

        * http/tests/contentextensions/video-element-resource-type-expected.txt: Added.
        * http/tests/contentextensions/video-element-resource-type.html: Added.
        * http/tests/contentextensions/video-element-resource-type.html.json: Added.

2018-12-10  Justin Michaud  <justin_michaud@apple.com>

        CS Painting API should support multiple worklets.
        https://bugs.webkit.org/show_bug.cgi?id=192335

        Reviewed by Dean Jackson.

        * fast/css-custom-paint/animate-repaint-expected.txt:
        * fast/css-custom-paint/animate-repaint.html:
        * fast/css-custom-paint/delay-expected.html: Added.
        * fast/css-custom-paint/delay-repaint-expected.txt: Copied from LayoutTests/fast/css-custom-paint/animate-repaint-expected.txt.
        * fast/css-custom-paint/delay-repaint.html: Copied from LayoutTests/fast/css-custom-paint/animate-repaint.html.
        * fast/css-custom-paint/delay.html: Copied from LayoutTests/fast/css-custom-paint/animate-repaint.html.
        * fast/css-custom-paint/multiple-worklets-expected.html: Added.
        * fast/css-custom-paint/multiple-worklets.html: Added.

2018-12-10  Youenn Fablet  <youenn@apple.com>

        DataChannels created asynchronously never open and are unusable
        https://bugs.webkit.org/show_bug.cgi?id=192566

        Reviewed by Eric Carlson.

        * webrtc/datachannel/basic-expected.txt:
        * webrtc/datachannel/basic.html:

2018-12-10  Rob Buis  <rbuis@igalia.com>

        XMLHttpRequest removes spaces from content-types before processing
        https://bugs.webkit.org/show_bug.cgi?id=8644

        Reviewed by Chris Dumez.

        Update improved test expectation and remove comment.

        * http/tests/xmlhttprequest/supported-xml-content-types-expected.txt:
        * http/tests/xmlhttprequest/supported-xml-content-types.html:

2018-12-10  Simon Fraser  <simon.fraser@apple.com>

        Allow control over child order when adding nodes to the scrolling tree
        https://bugs.webkit.org/show_bug.cgi?id=176914
        <rdar://problem/46542237>
        
        Re-land r239010 after over-zealous rollout.

        * platform/mac-wk2/TestExpectations:

2018-12-08  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] Scaled video frames should be resized in letterbox mode
        https://bugs.webkit.org/show_bug.cgi?id=192528
        <rdar://problem/46576638>

        Reviewed by Darin Adler.

        * fast/mediastream/resize-letterbox-expected.txt: Added.
        * fast/mediastream/resize-letterbox.html: Added.

2018-12-08  Simon Fraser  <simon.fraser@apple.com>

        Allow control over child order when adding nodes to the scrolling tree
        https://bugs.webkit.org/show_bug.cgi?id=176914
        <rdar://problem/46542237>

        Reviewed by Simon Fraser.

        * platform/mac-wk2/TestExpectations: Mark fast/visual-viewport/tiled-drawing/zoomed-fixed-scrolling-layers-state.html
        as flakey, which it will be until we attach in z-order.

2018-12-07  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] 'devicechange' event should not fire in frames that can't access capture devices
        https://bugs.webkit.org/show_bug.cgi?id=192511
        <rdar://problem/46562063>

        Reviewed by Youenn Fablet.

        * fast/mediastream/device-change-event.html: Fix bogus title.
        * http/tests/media/media-stream/device-change-event-in-iframe-expected.txt: Added.
        * http/tests/media/media-stream/device-change-event-in-iframe.html: Added.
        * http/tests/media/media-stream/resources/device-change-iframe.html: Added.

2018-12-07  Truitt Savell  <tsavell@apple.com>

        [ MacOS Debug ] Layout Test webgl/2.0.0/conformance2/textures/misc/tex-unpack-params.html is flaky timeout
        https://bugs.webkit.org/show_bug.cgi?id=190892

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2018-12-07  Truitt Savell  <tsavell@apple.com>

        Layout Test fast/css/counters/element-removal-crash.xhtml is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=183389

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2018-12-07  Thibault Saunier  <tsaunier@igalia.com>

        [WPE][GTK] Implement WebAudioSourceProviderGStreamer to allow bridging MediaStream and the WebAudio APIs
        https://bugs.webkit.org/show_bug.cgi?id=186933

        Reviewed by Philippe Normand.

        Enabled all tests depending on that feature.

        * platform/gtk/TestExpectations:
        * webrtc/clone-audio-track.html:

2018-12-06  Yongjun Zhang  <yongjun_zhang@apple.com>

        We should ignore minimumEffectiveDeviceWidth if the page specifies device-width in viewport meta-tag.
        https://bugs.webkit.org/show_bug.cgi?id=192377
        <rdar://problem/46364206>

        Reviewed by Tim Horton.

        * fast/viewport/ios/ignore-minimum-device-width-for-page-with-viewport-device-width-expected.txt: Added.
        * fast/viewport/ios/ignore-minimum-device-width-for-page-with-viewport-device-width.html: Added.
        * fast/viewport/ios/use-minimum-device-width-for-page-without-viewport-meta-expected.txt: Added.
        * fast/viewport/ios/use-minimum-device-width-for-page-without-viewport-meta.html: Added.

2018-12-06  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] WKWebView should match UITextView behavior when editing text with an RTL keyboard
        https://bugs.webkit.org/show_bug.cgi?id=187554
        <rdar://problem/42075638>

        Reviewed by Tim Horton.

        Add a new layout test to verify that when focusing an editable WKWebView using a right-to-left keyboard input
        mode, we will set the base writing direction to be right-to-left, and vice versa.

        * TestExpectations:
        * editing/input/ios/rtl-keyboard-input-on-focus-expected.txt: Added.
        * editing/input/ios/rtl-keyboard-input-on-focus.html: Added.
        * platform/ios-wk2/TestExpectations:
        * resources/ui-helper.js:

        Add a UIHelper method to set the keyboard input mode to the given identifier. Example identifiers are "en_US"
        (the default U.S. English keyboard) and "he_IL" (the Hebrew keyboard, which is right-to-left).

        (window.UIHelper.setKeyboardInputModeIdentifier):
        (window.UIHelper):

2018-12-06  Jiewen Tan  <jiewen_tan@apple.com>

        Layout Test http/tests/misc/resource-timing-resolution.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=181957

        Reviewed by Youenn Fablet.

        Since the timing information is a multiplier of a small delta, it is likely that
        two timing information are the same as they are so close that fall into the same
        bucket. Therefore, this patch releases the check of 't0 !== t1'.

        * http/tests/misc/resource-timing-resolution-expected.txt:
        * http/tests/misc/resource-timing-resolution.html:
        * platform/ios-wk2/TestExpectations:
        * platform/mac-wk2/TestExpectations:

2018-12-06  Truitt Savell  <tsavell@apple.com>

        imported/w3c/web-platform-tests/css/mediaqueries/test_media_queries.html is flaky timeout
        https://bugs.webkit.org/show_bug.cgi?id=191565

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2018-12-05  Alicia Boya García  <aboya@igalia.com>

        [GTK] Unreviewed test gardening
        https://bugs.webkit.org/show_bug.cgi?id=192436

        * platform/gtk/TestExpectations:
        * platform/gtk/editing/deleting/delete-emoji-1-expected.txt:
        * platform/gtk/editing/deleting/delete-emoji-expected.txt:
        * platform/wpe/animations/lineheight-animation-expected.txt:
        * platform/wpe/animations/simultaneous-start-transform-expected.txt:
        * platform/wpe/animations/width-using-ems-expected.txt:
        * platform/wpe/legacy-animation-engine/animations/lineheight-animation-expected.txt:
        * platform/wpe/legacy-animation-engine/animations/simultaneous-start-transform-expected.txt:
        * platform/wpe/legacy-animation-engine/animations/width-using-ems-expected.txt:

2018-12-05  Youenn Fablet  <youenn@apple.com>

        REGRESSION: Layout Test http/tests/security/cross-origin-css-resource-timing.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=192408
        <rdar://problem/46492201>

        Reviewed by Ryosuke Niwa.

        Some of the tests are loading the same subresource and check for resource timing.
        We need to clear internal caches to have stable results.

        * http/tests/security/clean-origin-css-exposed-resource-timing.html:
        * http/tests/security/cross-origin-clean-css-resource-timing.html:
        * http/tests/security/cross-origin-css-resource-timing.html:

2018-12-05  Matt Baker  <mattbaker@apple.com>

        Web Inspector: SelectionController should not extend the selection when allowsMultipleSelection is false
        https://bugs.webkit.org/show_bug.cgi?id=192390
        <rdar://problem/46473624>

        Reviewed by Devin Rousso.

        * inspector/table/table-selection-expected.txt:
        * inspector/table/table-selection.html:
        Drive-by fix: removed `allowsMultipleSelection` check from test case
        Table.SelectMultipleRows.ExtendSelection since it is tested in Table.AllowsMultipleSelection.

2018-12-05  Ryosuke Niwa  <rniwa@webkit.org>

        Null pointer crash in DocumentOrderedMap::getElementById via FormAssociatedElement::findAssociatedForm
        https://bugs.webkit.org/show_bug.cgi?id=192392

        Reviewed by Dean Jackson.

        Added a regression test.

        * fast/dom/remove-id-form-associated-elemet-id-observer-crash-expected.txt: Added.
        * fast/dom/remove-id-form-associated-elemet-id-observer-crash.html: Added.

2018-12-05  Youenn Fablet  <youenn@apple.com>

        [iOS] Layout Test imported/w3c/web-platform-tests/service-workers/service-worker/fetch-cors-xhr.https.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=189727
        <rdar://problem/44584993>

        Reviewed by Chris Dumez.

        * TestExpectations:
        * platform/ios/TestExpectations:

2018-12-05  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r238844, r238846, and r238874.
        https://bugs.webkit.org/show_bug.cgi?id=192414

        The layout tests added with this change are flaky. (Requested
        by ryanhaddad on #webkit).

        Reverted changesets:

        "Implement non-timeslice mode encoding for MediaRecorder"
        https://bugs.webkit.org/show_bug.cgi?id=192069
        https://trac.webkit.org/changeset/238844

        "Fix the build"
        https://trac.webkit.org/changeset/238846

        "Fix MediaRecorder flaky tests"
        https://bugs.webkit.org/show_bug.cgi?id=192371
        https://trac.webkit.org/changeset/238874

2018-12-05  Per Arne Vollan  <pvollan@apple.com>

        Layout Test http/tests/misc/resource-timing-resolution.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=181957

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2018-12-05  Alicia Boya García  <aboya@igalia.com>

        [MSE][GStreamer] Remove the AppendPipeline state machine
        https://bugs.webkit.org/show_bug.cgi?id=192204

        Reviewed by Xabier Rodriguez-Calvar.

        Removed timeout expectations for
        media/media-source/media-source-error-crash.html

        Added expectations for mediasource-invalid-codec.html for Mac, where
        WebM is not supported.

        * platform/gtk/TestExpectations:
        * platform/wpe/TestExpectations:
        * platform/mac/imported/w3c/web-platform-tests/media-source/mediasource-invalid-codec-expected.txt: Added.

2018-12-05  Rob Buis  <rbuis@igalia.com>

        [Mac] HEAD requests changed to GET after 301, 302, and 303 redirections (http/tests/xmlhttprequest/head-redirection.html)
        https://bugs.webkit.org/show_bug.cgi?id=114965

        Reviewed by Frédéric Wang.

        Update these since we now expect to pass head-redirection.html here.

        * platform/ios/TestExpectations:
        * platform/mac/http/tests/xmlhttprequest/head-redirection-expected.txt: Removed.

2018-12-05  Javier Fernandez  <jfernandez@igalia.com>

        [css-grid] Crash on debug changing the style of a positioned element
        https://bugs.webkit.org/show_bug.cgi?id=191473

        Reviewed by Dean Jackson and Zalan Bujtas.

        Regression test to ensure that the grid placement logic is executed
        when a positioned item becomes a grid item.

        * fast/css-grid-layout/grid-crash-out-of-flow-positioned-element-expected.txt:
        * fast/css-grid-layout/grid-crash-out-of-flow-positioned-element.html:
        * TestExpectations: Remove a Skip entry, since the test doesn't crash anymore.

2018-12-04  Simon Fraser  <simon.fraser@apple.com>

        Attempt to de-flake this test by scrolling a bit more.

        * compositing/fixed-with-main-thread-scrolling.html:

2018-12-04  Ryosuke Niwa  <rniwa@webkit.org>

        Crash in HTMLCollection::updateNamedElementCache
        https://bugs.webkit.org/show_bug.cgi?id=192347

        Reviewed by Darin Adler.

        Added a regression test. We can't simply call select.options.item
        to catch this crash because the generated bidning code first call length()
        to check if the index is within the valid range.

        * fast/dom/options-collection-zero-length-crash-expected.txt: Added.
        * fast/dom/options-collection-zero-length-crash.html: Added.

2018-11-30  Jiewen Tan  <jiewen_tan@apple.com>

        Don't report resource timing to parent frame for history items
        https://bugs.webkit.org/show_bug.cgi?id=192273
        <rdar://problem/45163764>

        Reviewed by Youenn Fablet.

        * http/tests/misc/resource-timing-navigation-in-restored-iframe-2-expected.txt: Added.
        * http/tests/misc/resource-timing-navigation-in-restored-iframe-2.html: Copied from LayoutTests/http/tests/misc/resource-timing-navigation-in-restored-iframe.html.
        * http/tests/misc/resource-timing-navigation-in-restored-iframe.html:

2018-12-04  Simon Fraser  <simon.fraser@apple.com>

        REGRESSION (r238090): position:fixed sidebar on https://www.w3.org/TR/SVG2/coords.html does not stay fixed
        https://bugs.webkit.org/show_bug.cgi?id=192320
        <rdar://problem/46429833>

        Reviewed by Zalan Bujtas.

        * compositing/fixed-with-main-thread-scrolling-expected.html: Added.
        * compositing/fixed-with-main-thread-scrolling.html: Added.
        * platform/ios/TestExpectations:

2018-12-04  Youenn Fablet  <youenn@apple.com>

        [iOS] Layout Test imported/w3c/web-platform-tests/service-workers/service-worker/fetch-cors-xhr.https.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=189727
        <rdar://problem/44584993>

        Unreviewed.

        * platform/ios/TestExpectations: Update expectation to dump JS console lines in stderr.

2018-12-04  Youenn Fablet  <youenn@apple.com>

        Fix MediaRecorder flaky tests
        https://bugs.webkit.org/show_bug.cgi?id=192371

        Reviewed by Eric Carlson.

        Updated tests to make them less flaky and more debuggable.

        * http/wpt/mediarecorder/MediaRecorder-AV-audio-only-dataavailable.html:
        * http/wpt/mediarecorder/MediaRecorder-AV-audio-video-dataavailable.html:
        * http/wpt/mediarecorder/MediaRecorder-AV-video-only-dataavailable.html:
        * platform/gtk/TestExpectations:
        * platform/wpe/TestExpectations:

2018-12-04  Justin Michaud  <justin_michaud@apple.com>

        CSS Painting API should allow image values in inputProperties
        https://bugs.webkit.org/show_bug.cgi?id=192200

        Reviewed by Dean Jackson.

        * fast/css-custom-paint/arguments-expected.html: Added.
        * fast/css-custom-paint/arguments.html: Added.
        * fast/css-custom-paint/image-expected.html: Added.
        * fast/css-custom-paint/image.html: Added.
        * fast/css-custom-paint/resources/test-image.png: Added.

2018-12-04  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r238838.

        The layout test added with this change is failing on iOS.

        Reverted changeset:

        "Thick overlines and line-throughs grow in the wrong
        direction"
        https://bugs.webkit.org/show_bug.cgi?id=192264
        https://trac.webkit.org/changeset/238838

2018-12-04  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r238840.

        The layout test added with this change is frequently failing.

        Reverted changeset:

        "REGRESSION (r238090): position:fixed sidebar on
        https://www.w3.org/TR/SVG2/coords.html does not stay fixed"
        https://bugs.webkit.org/show_bug.cgi?id=192320
        https://trac.webkit.org/changeset/238840

2018-12-04  Devin Rousso  <drousso@apple.com>

        Web Inspector: Audit: tests should support async operations
        https://bugs.webkit.org/show_bug.cgi?id=192171
        <rdar://problem/46423562>

        Reviewed by Joseph Pecoraro.

        * inspector/audit/resources/audit-utilities.js:
        (TestPage.registerInitializer.InspectorTest.Audit.addFunctionlessTest):
        (TestPage.registerInitializer.InspectorTest.Audit.addStringTest):
        (TestPage.registerInitializer.InspectorTest.Audit.addObjectTest):
        (TestPage.registerInitializer.InspectorTest.Audit.addPromiseTest): Added.
        * inspector/audit/basic-expected.txt:
        * inspector/audit/basic.html:

        * inspector/model/auditTestCaseResult-expected.txt:
        * inspector/model/auditTestCaseResult.html:
        * inspector/model/auditTestGroupResult-expected.txt:
        * inspector/model/auditTestGroupResult.html:

        * inspector/runtime/awaitPromise-expected.txt: Added.
        * inspector/runtime/awaitPromise.html: Added.

2018-12-03  Carlos Garcia Campos  <cgarcia@igalia.com>

        [GTK] Bump freetype, fontconfig, harfbuzz, cairo and icu in jhbuild
        https://bugs.webkit.org/show_bug.cgi?id=192310

        Reviewed by Michael Catanzaro.

        Rebaseline tests.

        * platform/gtk/fast/text/format-control-expected.png:
        * platform/gtk/fast/text/format-control-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/color-prop-05-t-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/color-prop-05-t-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/coords-dom-01-f-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/coords-dom-01-f-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/coords-dom-02-f-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/coords-dom-02-f-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/coords-dom-03-f-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/coords-dom-03-f-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/coords-dom-04-f-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/coords-dom-04-f-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/coords-units-03-b-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/coords-units-03-b-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/filters-felem-01-b-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/filters-felem-01-b-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/filters-image-03-f-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/filters-image-03-f-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/interact-pointer-03-t-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/interact-pointer-03-t-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/painting-control-04-f-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/painting-control-04-f-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/painting-marker-07-f-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/painting-marker-07-f-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/paths-dom-02-f-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/paths-dom-02-f-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/pservers-grad-17-b-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/pservers-grad-17-b-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/pservers-grad-20-b-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/pservers-grad-20-b-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/pservers-pattern-03-f-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/pservers-pattern-03-f-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/pservers-pattern-04-f-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/pservers-pattern-04-f-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/struct-use-14-f-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/struct-use-14-f-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/styling-css-04-f-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/styling-css-04-f-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/styling-pres-02-f-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/styling-pres-02-f-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/text-intro-02-b-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/text-intro-02-b-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/text-intro-05-t-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/text-intro-05-t-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/text-intro-09-b-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/text-intro-09-b-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/text-tref-03-b-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/text-tref-03-b-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/text-tspan-02-b-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/text-tspan-02-b-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/types-dom-01-b-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/types-dom-01-b-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/types-dom-02-f-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/types-dom-02-f-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/types-dom-03-b-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/types-dom-03-b-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/types-dom-04-b-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/types-dom-04-b-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/types-dom-05-b-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/types-dom-05-b-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1-SE/types-dom-07-f-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1-SE/types-dom-07-f-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1/filters-light-04-f-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1/filters-light-04-f-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1/filters-turb-02-f-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1/filters-turb-02-f-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1/fonts-kern-01-t-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1/fonts-kern-01-t-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1/masking-mask-01-b-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1/masking-mask-01-b-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1/render-groups-01-b-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1/render-groups-01-b-expected.txt:
        * platform/gtk/svg/W3C-SVG-1.1/render-groups-03-t-expected.png:
        * platform/gtk/svg/W3C-SVG-1.1/render-groups-03-t-expected.txt:
        * platform/gtk/svg/custom/glyph-transformation-with-hkern-expected.png:
        * platform/gtk/svg/custom/glyph-transformation-with-hkern-expected.txt:
        * platform/gtk/svg/custom/scrolling-embedded-svg-file-image-repaint-problem-expected.txt:
        * platform/gtk/svg/foreignObject/text-tref-02-b-expected.png:
        * platform/gtk/svg/foreignObject/text-tref-02-b-expected.txt:
        * platform/gtk/svg/text/text-hkern-on-vertical-text-expected.png:
        * platform/gtk/svg/text/text-hkern-on-vertical-text-expected.txt:
        * platform/gtk/svg/transforms/text-with-mask-with-svg-transform-expected.png:
        * platform/gtk/svg/transforms/text-with-mask-with-svg-transform-expected.txt:

2018-12-03  Youenn Fablet  <youenn@apple.com>

        A sender created through addTransceiver and populated using addTrack should have its source set
        https://bugs.webkit.org/show_bug.cgi?id=192136

        Reviewed by Eric Carlson.

        * webrtc/video-replace-track-expected.txt:
        * webrtc/video-replace-track.html:

2018-12-03  YUHAN WU  <yuhan_wu@apple.com>

        Implement non-timeslice mode encoding for MediaRecorder
        https://bugs.webkit.org/show_bug.cgi?id=192069

        Reviewed by Youenn Fablet.

        Create new tests for encoding of MediaRecorder. Check if the produced video and audio are correct.
        Add code to turn on the mock source of MediaRecorder for the two old tests because the real source is enabled by default.

        * http/wpt/mediarecorder/MediaRecorder-AV-audio-only-dataavailable-expected.txt: Added.
        * http/wpt/mediarecorder/MediaRecorder-AV-audio-only-dataavailable.html: Added.
        * http/wpt/mediarecorder/MediaRecorder-AV-audio-video-dataavailable-expected.txt: Added.
        * http/wpt/mediarecorder/MediaRecorder-AV-audio-video-dataavailable.html: Added.
        * http/wpt/mediarecorder/MediaRecorder-AV-video-only-dataavailable-expected.txt: Added.
        * http/wpt/mediarecorder/MediaRecorder-AV-video-only-dataavailable.html: Added.
        * http/wpt/mediarecorder/MediaRecorder-dataavailable.html:
        * http/wpt/mediarecorder/MediaRecorder-mock-dataavailable.html:

2018-12-03  Simon Fraser  <simon.fraser@apple.com>

        REGRESSION (r238090): position:fixed sidebar on https://www.w3.org/TR/SVG2/coords.html does not stay fixed
        https://bugs.webkit.org/show_bug.cgi?id=192320
        <rdar://problem/46429833>

        Reviewed by Zalan Bujtas.

        * compositing/fixed-with-main-thread-scrolling-expected.html: Added.
        * compositing/fixed-with-main-thread-scrolling.html: Added.

2018-12-03  Justin Michaud  <justin_michaud@apple.com>

        CSS Painting API should scale display list when drawing
        https://bugs.webkit.org/show_bug.cgi?id=192217

        Reviewed by Simon Fraser.

        * fast/css-custom-paint/properties-expected.html:
        * fast/css-custom-paint/registerPaintBindings-expected.html:
        * fast/css-custom-paint/simple-hidpi-expected.html: Added.
        * fast/css-custom-paint/simple-hidpi.html: Added.
        * fast/css-custom-paint/worklet-expected.html:

2018-12-03  Myles C. Maxfield  <mmaxfield@apple.com>

        Thick overlines and line-throughs grow in the wrong direction
        https://bugs.webkit.org/show_bug.cgi?id=192264

        Reviewed by Dean Jackson.

        I can't figure out a way to test the line-through, so this just tests the overline.

        * fast/css3-text/css3-text-decoration/text-decoration-thicknes-overline-grow-direction-expected.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-thicknes-overline-grow-direction.html: Added.

2018-12-03  Ryan Haddad  <ryanhaddad@apple.com>

        [css-grid] Crash on debug changing the style of a positioned element
        https://bugs.webkit.org/show_bug.cgi?id=191473

        Unreviewed test gardening.

        * TestExpectations: Skip crashing layout test.

2018-12-03  Daniel Bates  <dabates@apple.com>

        [iOS] Do not handle key events that are key commands
        https://bugs.webkit.org/show_bug.cgi?id=191608
        <rdar://problem/46046013>

        Reviewed by Ryosuke Niwa.

        Add tests to ensure that we process key commands correctly.

        * fast/events/ios/key-command-italic-dispatches-keydown-expected.txt: Added.
        * fast/events/ios/key-command-italic-dispatches-keydown.html: Added.
        * fast/events/ios/key-command-italic-expected.txt: Added.
        * fast/events/ios/key-command-italic.html: Added.
        * fast/events/ios/type-digits-holding-control-key-expected.txt: Added.
        * fast/events/ios/type-digits-holding-control-key.html: Added.
        * platform/ios-wk1/TestExpectations:

2018-12-03  Ryosuke Niwa  <rniwa@webkit.org>

        title attribute on style & link elements should be ignored inside a shadow tree
        https://bugs.webkit.org/show_bug.cgi?id=191297

        Reviewed by Antti Koivisto.

        Adde a W3C-style testharness.js test for a more comprehensive testing of the title content attribute
        on HTML link and style elements and SVG style element inside a shadow tree.

        * TestExpectations:
        * fast/shadow-dom/resources/green-div.css: Added.
        * fast/shadow-dom/resources/red-div.css: Added.
        * fast/shadow-dom/stylesheet-title-in-shadow-tree-expected.txt: Added.
        * fast/shadow-dom/stylesheet-title-in-shadow-tree.html: Added.

2018-12-03  Truitt Savell  <tsavell@apple.com>

        Modify unexpected new line in test after https://trac.webkit.org/changeset/238765/webkit
        https://bugs.webkit.org/show_bug.cgi?id=192201

        Unreviewed Test Gardening.

        * platform/ios/compositing/scrolling/overflow-scrolling-layers-are-self-painting-expected.txt:

2018-12-03  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] 'devicechange' event when more capture device information are revealed.
        https://bugs.webkit.org/show_bug.cgi?id=192268

        Reviewed by Youenn Fablet.

        * fast/mediastream/device-change-event-2.html: Fix bogus title.
        * fast/mediastream/enumerate-devices-change-event-expected.txt: Added.
        * fast/mediastream/enumerate-devices-change-event.html: Added.

2018-12-03  Guillaume Emont  <guijemont@igalia.com>

        Gardening: unskip marsaglia.js on arm

        Unreviewed Test Gardening.

        Bug 192152 has been fixed by r238778, so this test should not time out
        any more.

        * js/slow-stress/script-tests/marsaglia.js:

2018-12-03  Yacine Bandou  <yacine.bandou@softathome.com>

        [EME][ClearKey] Add layout test for dynamic change of key and video resolution
        https://bugs.webkit.org/show_bug.cgi?id=191926

        Reviewed by Xabier Rodriguez-Calvar.

       Add new layout tests in order to test the playback of ClearKey encrypted video content with
       a change of key and resolution during decoding.
       The test starts by playing a ClearKey video with a resolution of 240p, then, in the third second,
       the resolution of the video will change to 480p with a new ClearKey key.

        * media/content/encrypted/segments/VideoClearKeyCenc-seg-240-0.mp4: Added.
        * media/content/encrypted/segments/VideoClearKeyCenc-seg-240-1.mp4: Added.
        * media/content/encrypted/segments/VideoClearKeyCenc-seg-240-2.mp4: Added.
        * media/content/encrypted/segments/VideoClearKeyCenc-seg-240-3.mp4: Added.
        * media/content/encrypted/segments/VideoClearKeyCenc-seg-480-0.mp4: Added.
        * media/content/encrypted/segments/VideoClearKeyCenc-seg-480-4.mp4: Added.
        * media/content/encrypted/segments/VideoClearKeyCenc-seg-480-5.mp4: Added.
        * media/content/encrypted/segments/VideoClearKeyCenc-seg-480-6.mp4: Added.
        * media/encrypted-media/clearKey/clearKey-cenc-video-playback-mse-multikey-expected.txt: Added.
        * media/encrypted-media/clearKey/clearKey-cenc-video-playback-mse-multikey.html: Added.
        * media/encrypted-media/medias-enc.js:
        * platform/gtk/TestExpectations:
        * platform/mac/TestExpectations:

2018-11-30  Youenn Fablet  <youenn@apple.com>

        Test that CSS subresource loading are exposed to resource timing in case of a CORS loaded CSS stylesheet but not imported stylesheets
        https://bugs.webkit.org/show_bug.cgi?id=192232

        Reviewed by Dean Jackson.

        * http/tests/security/cross-origin-clean-css-resource-timing-expected.txt: Added.
        * http/tests/security/cross-origin-clean-css-resource-timing.html: Added.
        * http/tests/security/resources/loading-subresources.php: Added.

2018-11-30  Truitt Savell  <tsavell@apple.com>

        Rebaseline test after https://trac.webkit.org/changeset/238725/webkit
        https://bugs.webkit.org/show_bug.cgi?id=192201

        Unreviewed Test Gardening.

        * platform/ios/compositing/scrolling/overflow-scrolling-layers-are-self-painting-expected.txt: Added.

2018-11-30  Justin Fan  <justin_fan@apple.com>

        [WebGPU] WebGPUQueue::submit and WebGPURenderingContext::present() implementation
        https://bugs.webkit.org/show_bug.cgi?id=192254

        Reviewed by Dean Jackson.

        Update webgpu-basics to render an image into canvas. Also added ref-test that draws 
        a green square onto a canvas using WebGPU; reference uses 2D canvas.

        * webgpu/js/basic-webgpu-functions.js:
        (render):
        * webgpu/simple-triangle-strip-expected.html: Added.
        * webgpu/simple-triangle-strip.html: Added.
        * webgpu/webgpu-basics.html:

2018-11-30  Zalan Bujtas  <zalan@apple.com>

        Can’t use RalphLauren.com on iPad because hover menus don’t stay up
        https://bugs.webkit.org/show_bug.cgi?id=192236
        <rdar://problem/45792118>

        Reviewed by Geoffrey Garen.

        * fast/events/touch/ios/hover-when-style-change-is-async-expected.txt: Added.
        * fast/events/touch/ios/hover-when-style-change-is-async.html: Added.

2018-11-30  Ryosuke Niwa  <rniwa@webkit.org>

        ShadowRoot should have styleSheets property
        https://bugs.webkit.org/show_bug.cgi?id=191311
        <rdar://problem/46333290>

        Reviewed by Antti Koivisto.

        Added a regression test for testing that the JS wrapper of a StyleSheetList does not get collected
        as long as its shadow root is alive.

        * fast/shadow-dom/shadowroot-stylesheets-wrapper-gc-expected.txt: Added.
        * fast/shadow-dom/shadowroot-stylesheets-wrapper-gc.html: Added.

2018-11-30  Wenson Hsieh  <wenson_hsieh@apple.com>

        Replace "auto fill" with "AutoFill" in some localizable strings
        https://bugs.webkit.org/show_bug.cgi?id=192233
        <rdar://problem/46311614>

        Reviewed by Chris Fleizach.

        Rebaseline a test.

        * accessibility/auto-fill-types-expected.txt:

2018-11-30  Devin Rousso  <drousso@apple.com>

        Web Inspector: replace all unicode characters with the escaped character code
        https://bugs.webkit.org/show_bug.cgi?id=192216
        <rdar://problem/46275637>

        Reviewed by Brian Burg.

        * inspector/audit/data-domAttributes-expected.txt:
        * inspector/audit/data-domNodes-expected.txt:
        * inspector/audit/data-errors-expected.txt:

2018-11-30  Justin Fan  <justin_fan@apple.com>

        [WebGPU] Flesh out WebGPURenderPassDescriptor to match the WebGPU IDL
        https://bugs.webkit.org/show_bug.cgi?id=192213

        Reviewed by Dean Jackson.

        Updating some tests to match the updated WebGPURenderPassDescriptor. 

        * webgpu/js/basic-webgpu-functions.js:
        (render):
        * webgpu/render-command-encoding.html:
        * webgpu/render-passes.html:

2018-11-30  Zalan Bujtas  <zalan@apple.com>

        [LFC][BFC] Compute min/maxHeight margins only when they are needed.
        https://bugs.webkit.org/show_bug.cgi?id=192223

        Reviewed by Antti Koivisto.

        * fast/block/block-only/collapsed-margin-with-min-height-expected.txt: Added.
        * fast/block/block-only/collapsed-margin-with-min-height.html: Added.

2018-11-30  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Stop running tests without complex text enforced

        Rebaseline tests. Part 3.

2018-11-30  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Stop running tests without complex text enforced

        Rebaseline tests. Part 2.

2018-11-30  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed GTK+ gardening. Stop running tests without complex text enforced

        Rebaseline tests. Part 1.

2018-11-29  Frederic Wang  <fwang@igalia.com>

        Separate paint and scroll offsets for RenderLayerBacking::m_scrollingContentsLayer
        https://bugs.webkit.org/show_bug.cgi?id=183040

        Reviewed by Simon Fraser.

        Update expectations containing layer trees of RenderLayerBacking::m_scrollingContentsLayer, to separate offsetFromRenderer and
        scrollOffset. We have OLD offsetFromRenderer = NEW offsetFromRenderer - scrollOffset.

        * compositing/ios/overflow-scroll-touch-tiles-expected.txt:
        * fast/scrolling/ios/overflow-scroll-touch-expected.txt:
        * fast/scrolling/ios/subpixel-overflow-scrolling-with-ancestor-expected.txt:
        * platform/ios/compositing/overflow/scrolling-without-painting-expected.txt:
        * platform/ios/compositing/overflow/textarea-scroll-touch-expected.txt:
        * platform/ios/compositing/rtl/rtl-scrolling-with-transformed-descendants-expected.txt:
        * platform/ios/fast/scrolling/ios/overflow-scrolling-ancestor-clip-expected.txt:
        * platform/ios/fast/scrolling/ios/overflow-scrolling-ancestor-clip-size-expected.txt:
        * platform/ios/fast/scrolling/ios/textarea-scroll-touch-expected.txt:

2018-11-29  Simon Fraser  <simon.fraser@apple.com>

        Overflow scrolling layers need to be self-painting
        https://bugs.webkit.org/show_bug.cgi?id=192201

        Reviewed by Dean Jackson.

        * compositing/scrolling/overflow-scrolling-layers-are-self-painting-expected.txt: Added.
        * compositing/scrolling/overflow-scrolling-layers-are-self-painting.html: Added.

2018-11-29  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] DeviceIdHashSaltStorage should use iframe and top level documents
        https://bugs.webkit.org/show_bug.cgi?id=192182

        Reviewed by Youenn Fablet.

        * http/tests/media/media-stream/enumerate-devices-source-id-expected.txt:
        * http/tests/media/media-stream/enumerate-devices-source-id.html:
        * http/tests/media/media-stream/resources/enumerate-devices-source-id-frame.html:

2018-11-29  Christopher Reid  <chris.reid@sony.com>

        [Win] listDirectory in FileSystemWin.cpp should not skip all directories
        https://bugs.webkit.org/show_bug.cgi?id=192042

        Reviewed by Fujii Hironori.

        Enable storage tests on WinCairo and adding initial test expectations.

        * platform/wincairo/TestExpectations:

2018-11-29  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r238680.

        Caused existing webrtc layout tests to fail an assertion.

        Reverted changeset:

        "A sender created through addTransceiver and populated using
        addTrack should have its source set"
        https://bugs.webkit.org/show_bug.cgi?id=192136
        https://trac.webkit.org/changeset/238680

2018-11-29  Ryan Haddad  <ryanhaddad@apple.com>

        REGRESSION (r238090): [ MacOS WK1 ] Layout Test imported/blink/compositing/squashing/squashing-into-ancestor-painted-layer.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=191639

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations: Mark test as flaky.

2018-11-29  Zalan Bujtas  <zalan@apple.com>

        [LFC][BFC][Quirk] Body and html height stretching.
        https://bugs.webkit.org/show_bug.cgi?id=192154

        Reviewed by Antti Koivisto.

        * fast/block/block-only/body-height-with-auto-html-height-quirk-expected.txt: Added.
        * fast/block/block-only/body-height-with-auto-html-height-quirk.html: Added.
        * fast/block/block-only/body-height-with-auto-html-height-quirk2-expected.txt: Added.
        * fast/block/block-only/body-height-with-auto-html-height-quirk2.html: Added.
        * fast/block/block-only/body-height-with-non-auto-html-height-quirk-expected.txt: Added.
        * fast/block/block-only/body-height-with-non-auto-html-height-quirk.html: Added.
        * fast/block/block-only/body-height-with-non-auto-html-height-quirk2-expected.txt: Added.
        * fast/block/block-only/body-height-with-non-auto-html-height-quirk2.html: Added.

2018-11-29  Youenn Fablet  <youenn@apple.com>

        CSS subresource loads should not be observable from resource timing if the stylesheet is opaque
        https://bugs.webkit.org/show_bug.cgi?id=192132

        Reviewed by Ryosuke Niwa.

        * http/tests/security/clean-origin-css-exposed-resource-timing-expected.txt: Added.
        * http/tests/security/clean-origin-css-exposed-resource-timinge-timing.html: Added.
        * http/tests/security/cross-origin-css-resource-timing-expected.txt: Added.
        * http/tests/security/cross-origin-css-resource-timing.html: Added.
        * http/tests/security/resources/loading-subresources.css: Added.
        * http/tests/security/resources/imported-loading-subresources.css: Added.

2018-11-29  Ryosuke Niwa  <rniwa@webkit.org>

        Executing "insertunorderedlist" while selecting a contenteditable element inside a shadow dom hangs the browser
        https://bugs.webkit.org/show_bug.cgi?id=184049
        <rdar://problem/38931033>

        Reviewed by Antti Koivisto.

        Added a regression test for executing InsertUnorderedList inside a shadow tree.

        * editing/execCommand/insert-ordered-list-in-shadow-tree-expected.txt: Added.
        * editing/execCommand/insert-ordered-list-in-shadow-tree.html: Added.

2018-11-29  Justin Fan  <justin_fan@apple.com>

        [WebGPU] WebGPURenderPassEncoder::setPipeline, draw, and endPass prototypes
        https://bugs.webkit.org/show_bug.cgi?id=192134

        Reviewed by Dean Jackson.

        Updating the basic rendering test with more commands, and a prototype WPT-based test for WebGPURenderCommandEncoder's
        new functionality.

        * webgpu/js/basic-webgpu-functions.js:
        (render):
        * webgpu/render-command-encoding-expected.txt: Added.
        * webgpu/render-command-encoding.html: Added.
        * webgpu/render-passes.html:

2018-11-29  Justin Michaud  <justin_michaud@apple.com>

        CSS Painting API should pass 'this' correctly to paint callback, and repaint when properties change.
        https://bugs.webkit.org/show_bug.cgi?id=191443

        Reviewed by Dean Jackson.

        * fast/css-custom-paint/animate-expected.html: Added.
        * fast/css-custom-paint/animate-repaint-expected.txt: Added.
        * fast/css-custom-paint/animate-repaint.html: Added.
        * fast/css-custom-paint/animate.html: Added.
        * fast/css-custom-paint/constructor-expected.html: Added.
        * fast/css-custom-paint/constructor.html: Added.
        * fast/css-custom-paint/leaks-expected.txt: Added.
        * fast/css-custom-paint/leaks.html: Added.
        * fast/css-custom-paint/properties.html:
        * fast/css-custom-paint/resources/leaks-frame.html: Added.
        * platform/mac/fast/css-custom-paint/raf-leak-expected.txt: Added.

2018-11-29  Youenn Fablet  <youenn@apple.com>

        A sender created through addTransceiver and populated using addTrack should have its source set
        https://bugs.webkit.org/show_bug.cgi?id=192136

        Reviewed by Eric Carlson.

        * webrtc/video-replace-track-expected.txt:
        * webrtc/video-replace-track.html:

2018-11-29  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed test gardening, skip three datalist tests that are marked as flaky crashes.

        * TestExpectations:
        * platform/ios/TestExpectations:
        * platform/mac/TestExpectations:

2018-11-29  Sihui Liu  <sihui_liu@apple.com>

        IndexedDB: breaks if binary data (Uint8Array) and autoIncrement key in store
        https://bugs.webkit.org/show_bug.cgi?id=185869
        <rdar://problem/40453623>

        Reviewed by Geoffrey Garen.

        * storage/indexeddb/objectstore-autoincrement-expected.txt:
        * storage/indexeddb/objectstore-autoincrement-private-expected.txt:
        * storage/indexeddb/resources/objectstore-autoincrement.js:
        (getLincolnAfterInjectedKeySuccess):
        (putBobSuccess):
        (getBobSuccess):
        (addLincolnWithExplicitKeySuccess):
        (putAbrahamSuccess):

2018-11-29  Sihui Liu  <sihui_liu@apple.com>

        Unexpected constructor / instanceof  behavior when retrieving indexedDB data in an iframe
        https://bugs.webkit.org/show_bug.cgi?id=185906
        <rdar://problem/40583100>

        Reviewed by Geoffrey Garen.

        * storage/indexeddb/instanceof-iframe-expected.txt: Added.
        * storage/indexeddb/instanceof-iframe.html: Added.
        * storage/indexeddb/resources/instanceof-iframe.js: Added.
        (test.else.shouldBe):
        (test.else.shouldBeTrue):
        (test.else.shouldBeFalse):
        (test.else.evalAndLog):
        (test):
        (callback):

2018-11-28  Dean Jackson  <dino@apple.com>

        [ES Modules] Allow .mjs content when loaded from file://
        https://bugs.webkit.org/show_bug.cgi?id=192100
        <rdar://problem/46320065>

        Reviewed by Sam Weinig.

        Test for both import() function and the import statement loading
        from .mjs files.

        * js/dom/modules/import-mjs-module-expected.txt: Added.
        * js/dom/modules/import-mjs-module.html: Added.
        * js/dom/modules/resources/module-simple-A.mjs: Added.
        * js/dom/modules/resources/module-simple-B.mjs: Added.
        * platform/win/TestExpectations: Skip this on Windows. Just wait for Windows
          to recognise the extension.

2018-11-29  Guillaume Emont  <guijemont@igalia.com>

        Gardening: skip test that newly times out on Armv7

        Unreviewed Test Gardening.

        * js/slow-stress/script-tests/marsaglia.js: skip on arm/linux

2018-11-29  Miguel Gomez  <magomez@igalia.com>

        Unreviewed GTK+ gardening after r238665.

        * platform/gtk/TestExpectations:

2018-11-28  Said Abou-Hallawa  <sabouhallawa@apple.com>

        Updating href on linearGradient and radialGradient doesn't update its rendering
        https://bugs.webkit.org/show_bug.cgi?id=191934

        Reviewed by Ryosuke Niwa.

        * fast/shadow-dom/svg-linear-gradient-dynamic-update-href-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-linear-gradient-dynamic-update-href-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-radial-gradient-dynamic-update-href-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-radial-gradient-dynamic-update-href-in-shadow-tree.html: Added.
        * svg/dynamic-updates/SVGLinearGradientElement-svgdom-href-prop-expected.html: Added.
        * svg/dynamic-updates/SVGLinearGradientElement-svgdom-href-prop.html: Added.
        * svg/dynamic-updates/SVGRadialGradientElement-svgdom-href-prop-expected.html: Added.
        * svg/dynamic-updates/SVGRadialGradientElement-svgdom-href-prop.html: Added.

2018-11-28  Truitt Savell  <tsavell@apple.com>

        [ Mojave WK1 ] Layout Test fast/images/animated-image-different-dest-size.html fast/images/animated-image-loop-count.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=190383

        Unreviewed Test Gardening.

        * platform/mac-wk1/TestExpectations:

2018-11-28  Justin Fan  <justin_fan@apple.com>

        [WebGPU] Begin implementation of WebGPURenderPassEncoder and barebones WebGPURenderPassDescriptor
        https://bugs.webkit.org/show_bug.cgi?id=191990

        Reviewed by Dean Jackson.

        Add tests to ensure proper WebGPURenderPassEncoder creation. To be updated as WebGPURenderPassDescriptor is updated.

        * webgpu/js/basic-webgpu-functions.js:
        (render):
        * webgpu/render-passes-expected.txt: Added.
        * webgpu/render-passes.html: Added.

2018-11-28  Rob Buis  <rbuis@igalia.com>

        [XHR] Document.lastModified doesn't work for non-rendered documents
        https://bugs.webkit.org/show_bug.cgi?id=179375

        Reviewed by Alexey Proskuryakov.

        Unskip responsexml-document-properties.htm since the dynamic message is gone.

        * TestExpectations:
        * platform/wpe/TestExpectations:

2018-11-28  Frederic Wang  <fwang@igalia.com>

        [iOS Simulator Release WK2] media/no-fullscreen-when-hidden.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=192088

        Unreviewed test gardening.

        * platform/ios-wk2/TestExpectations: Mark media/no-fullscreen-when-hidden.html as flaky.

2018-11-28  Yongjun Zhang  <yongjun_zhang@apple.com>

        Allow WebKit clients to specify a minimum effective width for layout.
        https://bugs.webkit.org/show_bug.cgi?id=191499
        <rdar://problem/45362678>

        Reviewed by Wenson Hsieh.

        Add two new tests. The first test verifies if we ignore meta viewport, setting a different effective width value
        will change the layout width of the page. The second test verifies if we don't ignore meta viewport, we will always
        respect that (980pt) and setting a different effective width value won't change the layout width. 


        * fast/viewport/ios/ipad/viewport-overriden-by-minimum-effective-width-if-ignore-meta-viewport-expected.txt: Added.
        * fast/viewport/ios/ipad/viewport-overriden-by-minimum-effective-width-if-ignore-meta-viewport.html: Added.
        * fast/viewport/ios/ipad/viewport-unchanged-by-minimum-effective-width-if-not-ignore-meta-viewport-expected.txt: Added.
        * fast/viewport/ios/ipad/viewport-unchanged-by-minimum-effective-width-if-not-ignore-meta-viewport.html: Added.
        * resources/ui-helper.js:
        (window.UIHelper.setMinimumEffectiveWidth): Add a helper method to set the minimum effective width from a test.
        (window.UIHelper):

2018-11-27  Jiewen Tan  <jiewen_tan@apple.com>

        Unreviewed, test gardening

        Add a time out parameter to the following test cases such that WebAuthN requests will timeout
        themselves instead of letting the wpt wrapper or test runner kill them.

        * http/wpt/webauthn/public-key-credential-create-success-hid.https.html:
        * http/wpt/webauthn/public-key-credential-get-success-hid.https.html:
        * platform/mac-wk2/TestExpectations:

2018-11-27  Chris Dumez  <cdumez@apple.com>

        Resync service-workers web platform tests from upstream
        https://bugs.webkit.org/show_bug.cgi?id=192035

        Reviewed by Youenn Fablet.

        * TestExpectations:
        * tests-options.json:

2018-11-27  Simon Fraser  <simon.fraser@apple.com>

        Momentum scrolling ends at the wrong place when a scrolling overflow element has a non-zero border
        https://bugs.webkit.org/show_bug.cgi?id=191322

        Reviewed by Dean Jackson.

        * fast/scrolling/momentum-scroll-with-borders-expected.txt: Added.
        * fast/scrolling/momentum-scroll-with-borders.html: Added.
        * platform/ios/TestExpectations:

2018-11-27  Simon Fraser  <simon.fraser@apple.com>

        Composited and tiled layers fail to update on scrolling in WebView
        https://bugs.webkit.org/show_bug.cgi?id=191821
        rdar://problem/46009272

        Reviewed by Zalan Bujtas.
        
        Tests for backing store attachment, and tile coverage before and after scrolling.

        * compositing/backing/backing-store-attachment-scroll-expected.txt: Added.
        * compositing/backing/backing-store-attachment-scroll.html: Added.
        * compositing/tiling/tile-coverage-on-scroll-expected.txt: Added.
        * compositing/tiling/tile-coverage-on-scroll.html: Added.
        * platform/mac-wk1/compositing/tiling/tile-coverage-on-scroll-expected.txt: Added. Root isn't tiled on WK1, so different result.

2018-11-27  Daniel Bates  <dabates@apple.com>

        Fix test timeout following  <https://trac.webkit.org/changeset/238545>
        (https://bugs.webkit.org/show_bug.cgi?id=191969)

        Actually call HTMLInputElement.setSelectionRange().

        * fast/forms/auto-fill-button/caps-lock-indicator-should-be-visible-after-hiding-auto-fill-strong-password-button-expected.html:

2018-11-27  Timothy Hatcher  <timothy@apple.com>

        Web Inspector: Add support for forcing color scheme appearance in DOM tree.
        https://bugs.webkit.org/show_bug.cgi?id=191820
        rdar://problem/46153172

        Reviewed by Devin Rousso.

        * TestExpectations: Skip dark mode tests on other platforms.
        * inspector/css/force-page-appearance-expected.txt: Added.
        * inspector/css/force-page-appearance.html: Added.
        * platform/mac/TestExpectations: Expect dark mode tests to pass on Mojave and later.

2018-11-27  Tim Horton  <timothy_horton@apple.com>

        Serialize and deserialize editable image strokes
        https://bugs.webkit.org/show_bug.cgi?id=192002
        <rdar://problem/30900149>

        Reviewed by Dean Jackson.

        * editing/images/paste-editable-image-expected.txt: Added.
        * editing/images/paste-editable-image.html: Added.
        Add a test that we can copy and paste and editable image and
        continue to edit it, and are affecting a different attachment than the original.

2018-11-16  Jiewen Tan  <jiewen_tan@apple.com>

        Disallow loading webarchives as iframes
        https://bugs.webkit.org/show_bug.cgi?id=191728
        <rdar://problem/45524528>

        Reviewed by Youenn Fablet.

        * platform/mac-wk1/webarchive/loading/test-loading-archive-subresource-expected.txt: Added.
        * platform/mac/fast/loader/webarchive-encoding-respected.html:
        * webarchive/loading/cache-expired-subresource.html:
        * webarchive/loading/mainresource-null-mimetype-crash.html:
        * webarchive/loading/missing-data.html:
        * webarchive/loading/resources/test-loading-archive-main.webarchive: Copied from LayoutTests/webarchive/loading/test-loading-archive.html.
        * webarchive/loading/test-loading-archive-subresource-expected.txt: Added.
        * webarchive/loading/test-loading-archive-subresource-null-mimetype.html:
        * webarchive/loading/test-loading-archive-subresource.html: Copied from LayoutTests/webarchive/loading/test-loading-archive.html.
        * webarchive/loading/test-loading-archive.html:
        * webarchive/loading/test-loading-top-archive-expected.txt: Added.
        * webarchive/loading/test-loading-top-archive.html: Added.

2018-11-27  Per Arne Vollan  <pvollan@apple.com>

        Layout Test svg/text/monospace-text-size-in-img.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=192011

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2018-11-27  Per Arne Vollan  <pvollan@apple.com>

        Layout Test fast/inline/simple-inline-with-out-of-flow-descendant.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=192010

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2018-11-26  Daniel Bates  <dabates@apple.com>

        REGRESSION (r238078): Do not draw caps lock indicator when Strong Password button is shown
        https://bugs.webkit.org/show_bug.cgi?id=191969
        <rdar://problem/46247569>

        Reviewed by Dean Jackson.

        Add tests to ensure that we show or hide the caps lock indicator depending on whether the
        Strong Password button is visible.

        * TestExpectations: Skip the tests below on all platforms. We will selectively enable them on Mac.
        * fast/forms/auto-fill-button/caps-lock-indicator-should-be-visible-after-hiding-auto-fill-strong-password-button-expected.html: Added.
        * fast/forms/auto-fill-button/caps-lock-indicator-should-be-visible-after-hiding-auto-fill-strong-password-button.html: Added.
        * fast/forms/auto-fill-button/caps-lock-indicator-should-not-be-visible-when-auto-fill-strong-password-button-is-visible-expected.html: Added.
        * fast/forms/auto-fill-button/caps-lock-indicator-should-not-be-visible-when-auto-fill-strong-password-button-is-visible.html: Added.
        * platform/mac-wk2/TestExpectations: Mark the tests above as PASS so that we run them.

2018-11-26  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r238357.

        One of the layout tests added with this change is failing on Mojave.

        Reverted changeset:
        "REGRESSION (r238078): Do not draw caps lock indicator when Strong Password button is shown"
        https://bugs.webkit.org/show_bug.cgi?id=191969
        https://trac.webkit.org/changeset/238513

2018-11-26  Tim Horton  <timothy_horton@apple.com>

        Insert <attachment> elements under editable images to make their backing data accessible
        https://bugs.webkit.org/show_bug.cgi?id=191844
        <rdar://problem/30900149>

        Reviewed by Simon Fraser.

        * editing/images/editable-image-creates-attachment-expected.txt: Added.
        * editing/images/editable-image-creates-attachment.html: Added.
        * resources/ui-helper.js:
        (window.UIHelper.attachmentInfo):
        (window.UIHelper):

2018-11-26  Daniel Bates  <dabates@apple.com>

        REGRESSION (r237738): Command Down Arrow doesn't scroll to the end of a page anymore
        https://bugs.webkit.org/show_bug.cgi?id=191967
        <rdar://problem/45976390>

        Reviewed by Tim Horton.

        Add tests to ensure that Command + Down Arrow and Command + Up Arrow scroll to the end of
        the page and the top of the page, respectively.

        * fast/scrolling/ios/key-command-scroll-to-bottom-expected.html: Added.
        * fast/scrolling/ios/key-command-scroll-to-bottom.html: Added.
        * fast/scrolling/ios/key-command-scroll-to-top-expected.html: Added.
        * fast/scrolling/ios/key-command-scroll-to-top.html: Added.
        * resources/ui-helper.js:
        (window.UIHelper.keyDown): Pass the modifiers array to EventSender.keyDown() to make
        this function work on Mac.

2018-11-24  Ryosuke Niwa  <rniwa@webkit.org>

        SVG use element inside a shadow tree cannot reference an element in the same tree
        https://bugs.webkit.org/show_bug.cgi?id=174977
        <rdar://problem/33665636>

        Reviewed by Zalan Bujtas.

        Added tests for specifying a fragment URL to refer to other elements within shadow trees.

        This patch doesn't add a test for updating a fragment URL of linearGradient and radialGradient
        since it doesn't work at all even outside shadow trees. See webkit.org/b/191934.

        * fast/shadow-dom/svg-animate-href-change-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-animate-href-change-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-animate-href-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-animate-href-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-feimage-href-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-feimage-href-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-linear-gradient-href-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-linear-gradient-href-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-mpath-href-change-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-mpath-href-change-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-mpath-href-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-mpath-href-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-radial-gradient-href-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-radial-gradient-href-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-text-path-href-change-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-text-path-href-change-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-text-path-href-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-text-path-href-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-thref-href-change-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-thref-href-change-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-thref-href-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-thref-href-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-use-href-change-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-use-href-change-in-shadow-tree.html: Added.
        * fast/shadow-dom/svg-use-href-in-shadow-tree-expected.html: Added.
        * fast/shadow-dom/svg-use-href-in-shadow-tree.html: Added.

2018-11-26  Daniel Bates  <dabates@apple.com>

        Caret disappears at end of password field when caps lock indicator is shown; password field
        not scrolled when caps lock indicator is shown
        https://bugs.webkit.org/show_bug.cgi?id=191164
        <rdar://problem/45738179>

        Reviewed by Dean Jackson.

        Add a test to ensure that we scroll the password field when caps lock is toggled.

        * TestExpectations: Skip the test on all platforms as we only support toggling Caps Lock in
        WebKit2 on Mac at the moment.
        * fast/forms/password-scrolled-after-caps-lock-toggled-expected.txt: Added.
        * fast/forms/password-scrolled-after-caps-lock-toggled.html: Added.
        * platform/mac-wk2/TestExpectations: Mark the test as PASS so that we run it.

2018-11-26  Daniel Bates  <dabates@apple.com>

        Placeholder text is not repainted after caps lock indicator is hidden
        https://bugs.webkit.org/show_bug.cgi?id=191968
        <rdar://problem/46247234>

        Substitute UIHelper.toggleCapsLock() for testRunner.toggleCapsLock() as the former replaces
        the latter following r238512.

        * fast/repaint/placeholder-after-caps-lock-hidden.html:

2018-11-26  Daniel Bates  <dabates@apple.com>

        Placeholder text is not repainted after caps lock indicator is hidden
        https://bugs.webkit.org/show_bug.cgi?id=191968
        <rdar://problem/46247234>

        Reviewed by Zalan Bujtas.

        Add a test to ensure to that the placeholder text is repainted when the caps lock indicator is hidden.

        * TestExpectations: Skip the test on all platforms as we only support toggling Caps Lock in
        WebKit2 on Mac at the moment.
        * fast/repaint/placeholder-after-caps-lock-hidden.html: Added.
        * platform/mac-wk2/TestExpectations: Mark the test as PASS so that we run it.

2018-11-26  Daniel Bates  <dabates@apple.com>

        REGRESSION (r238078): Do not draw caps lock indicator when Strong Password button is shown
        https://bugs.webkit.org/show_bug.cgi?id=191969
        <rdar://problem/46247569>

        Reviewed by Dean Jackson.

        Add tests to ensure that we show or hide the caps lock indicator depending on whether the
        Strong Password button is visible.

        * TestExpectations: Skip the tests below on all platforms. We will selectively enable them on Mac.
        * fast/forms/auto-fill-button/caps-lock-indicator-should-be-visible-when-after-hiding-auto-fill-strong-password-button-expected.html: Added.
        * fast/forms/auto-fill-button/caps-lock-indicator-should-be-visible-when-after-hiding-auto-fill-strong-password-button.html: Added.
        * fast/forms/auto-fill-button/caps-lock-indicator-should-not-be-visible-when-auto-fill-strong-password-button-is-visible-expected.html: Added.
        * fast/forms/auto-fill-button/caps-lock-indicator-should-not-be-visible-when-auto-fill-strong-password-button-is-visible.html: Added.
        * platform/mac-wk2/TestExpectations: Mark the tests above as PASS so that we run them.

2018-11-26  Daniel Bates  <dabates@apple.com>

        Move testRunner.toggleCapsLock() to uiController
        https://bugs.webkit.org/show_bug.cgi?id=191972

        Reviewed by Tim Horton.

        Updated existing test to use UIHelper.toggleCapsLock(), which calls uiController.toggleCapsLock(),
        now that testRunner.toggleCapsLock() was removed.

        * fast/events/detect-caps-lock.html:
        * resources/ui-helper.js:
        (window.UIHelper.toggleCapsLock): Added. Convenience function to call uiController.toggleCapsLock()
        and return a Promise that is resolved once the UIProcess has dispatched the NSEvent to simulate
        pressing the caps lock key.

2018-11-26  Zalan Bujtas  <zalan@apple.com>

        Unreviewed rebaseline after r238493.

        * platform/ios/fast/inline/inline-content-with-float-and-margin-expected.txt: Added.

2018-11-26  Zalan Bujtas  <zalan@apple.com>

        Unreviewed test gardening after r238280.

        * fast/content-observation/click-event-suppression-on-content-change.html:

2018-11-26  Zalan Bujtas  <zalan@apple.com>

        Unreviewed rebaseline after r238460.

        * platform/ios/fast/inline/inline-content-with-image-simple-expected.txt: Added.

2018-11-25  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Use float box's margin box to adjust the line constraints.
        https://bugs.webkit.org/show_bug.cgi?id=191961

        Reviewed by Antti Koivisto.

        * fast/inline/inline-content-with-float-and-margin-expected.txt: Added.
        * fast/inline/inline-content-with-float-and-margin.html: Added.

2018-11-26  Manuel Rego Casasnovas  <rego@igalia.com>

        [css-grid] Fix grid container sizing under min-content height
        https://bugs.webkit.org/show_bug.cgi?id=191889

        Reviewed by Javier Fernandez.

        Update tests results to the new behavior.
        Also modified a little bit the test to keep them in sync with Blink versions.

        * fast/css-grid-layout/grid-track-sizing-with-orthogonal-flows-expected.txt:
        * fast/css-grid-layout/grid-track-sizing-with-orthogonal-flows.html:
        * fast/css-grid-layout/maximize-tracks-definite-indefinite-height.html:

2018-11-25  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed test gardening, rebaseline webgpu/queue-creation.html.

        * webgpu/queue-creation-expected.txt:

2018-11-25  Tim Horton  <timothy_horton@apple.com>

        Make it possible to insert editable images with a gesture
        https://bugs.webkit.org/show_bug.cgi?id=191937

        Reviewed by Wenson Hsieh.

        * editing/images/basic-editable-image-from-execCommand-expected.txt: Added.
        * editing/images/basic-editable-image-from-execCommand.html: Added.
        Add a test that ensures that editable images also work when
        inserted via the editor command.

        * editing/images/redo-insert-editable-image-maintains-strokes-expected.txt: Added.
        * editing/images/redo-insert-editable-image-maintains-strokes.html: Added.
        Add a test that ensures that strokes are maintained when re-doing an
        un-done editable image insertion.

        * editing/images/undo-insert-editable-image-expected.txt: Added.
        * editing/images/undo-insert-editable-image.html: Added.
        Add a test that ensures that the selection stays in a sensible place
        when undoing and redoing editable image insertion.

2018-11-23  Ryosuke Niwa  <rniwa@webkit.org>

        REGRESSION (r236785): Nullptr crash in StyledMarkupAccumulator::traverseNodesForSerialization
        https://bugs.webkit.org/show_bug.cgi?id=191921

        Reviewed by Dean Jackson.

        Added a regression test.

        * editing/pasteboard/copy-paste-across-shadow-boundaries-5-expected.txt: Added.
        * editing/pasteboard/copy-paste-across-shadow-boundaries-5.html: Added.
        * platform/ios/editing/pasteboard/copy-paste-across-shadow-boundaries-5-expected.txt: Added.

2018-11-22  Ryosuke Niwa  <rniwa@webkit.org>

        Updating href on textPath doesn't update its rendering
        https://bugs.webkit.org/show_bug.cgi?id=191920

        Reviewed by Dean Jackson.

        Added a ref test.

        * svg/text/textpath-reference-update-expected.html: Added.
        * svg/text/textpath-reference-update.html: Added.

2018-11-23  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Add support for variable height runs.
        https://bugs.webkit.org/show_bug.cgi?id=191925

        Reviewed by Antti Koivisto.

        * fast/inline/inline-content-with-image-simple-expected.txt: Added.
        * fast/inline/inline-content-with-image-simple.html: Added.

2018-11-23  Javier Fernandez  <jfernandez@igalia.com>

        [css-grid] Implement Baseline Alignment for grid items
        https://bugs.webkit.org/show_bug.cgi?id=145566

        Reviewed by Manuel Rego Casasnovas.

        Most of the baseline realated tests pass now; just a few still fail because of unrelated bugs.

        * TestExpectations: Removed several entries, related to the baseline tests that are now passing.
        * fast/css-grid-layout/grid-align-baseline-expected.txt:
        * fast/css-grid-layout/grid-align-baseline-vertical-expected.txt:
        * fast/css-grid-layout/grid-baseline-expected.html:
        * fast/css-grid-layout/grid-baseline-margins-expected.html:
        * fast/css-grid-layout/grid-baseline-margins.html:
        * fast/css-grid-layout/grid-baseline-must-respect-grid-order-expected.txt:
        * fast/css-grid-layout/grid-baseline-must-respect-grid-order.html:
        * fast/css-grid-layout/grid-baseline.html:
        * fast/css-grid-layout/grid-self-baseline-and-flex-tracks-with-indefinite-container-crash-expected.txt: Added.
        * fast/css-grid-layout/grid-self-baseline-and-flex-tracks-with-indefinite-container-crash.html: Added.
        * fast/css-grid-layout/grid-self-baseline-and-flexible-tracks-should-not-crash-expected.txt: Added.
        * fast/css-grid-layout/grid-self-baseline-and-flexible-tracks-should-not-crash.html: Added.
        * fast/css-grid-layout/grid-self-baseline-and-item-relayout-should-not-crash-expected.txt: Added.
        * fast/css-grid-layout/grid-self-baseline-and-item-relayout-should-not-crash.html: Added.
        * fast/css-grid-layout/grid-self-baseline-and-relative-sized-items-crash-expected.txt: Added.
        * fast/css-grid-layout/grid-self-baseline-and-relative-sized-items-crash.html: Added.
        * fast/css-grid-layout/grid-self-baseline-and-relative-sized-tracks-crash-expected.txt: Added.
        * fast/css-grid-layout/grid-self-baseline-and-relative-sized-tracks-crash.html: Added.
        * fast/css-grid-layout/grid-self-baseline-followed-by-item-style-change-should-not-crash-expected.txt: Added.
        * fast/css-grid-layout/grid-self-baseline-followed-by-item-style-change-should-not-crash.html: Added.
        * fast/css-grid-layout/grid-self-baseline-two-dimensional-expected.txt:
        * fast/css-grid-layout/grid-self-baseline-two-dimensional.html:

2018-11-22  Dean Jackson  <dino@apple.com>

        Implement WebGPUQueue and device.getQueue()
        https://bugs.webkit.org/show_bug.cgi?id=191911
        <rdar://problem/46214871>

        Reviewed by Antoine Quint.

        WPT-style test for queue creation.

        * webgpu/queue-creation-expected.txt: Added.
        * webgpu/queue-creation.html: Added.

2018-11-22  Frederic Wang  <fwang@igalia.com>

        Improve fast/scrolling/scrolling-tree-includes-frame.html
        https://bugs.webkit.org/show_bug.cgi?id=191912

        These are small improvements to scrolling-tree-includes-frame.html:
        - Run doTest() after the iframe is loaded and use waitUntilDone/notifyDone for more reliable timing.
        - Use iframe@srcdoc instead of iframe@src and put the content of the iframe document in its own line.
        - Move the iframe style in a separate <style> tag and ensure the iframe is really positioned at (0,0)
        with no extra margin/padding/border.
        - Remove unnecessary id="frame"
        The test expectation is not changed.

        Reviewed by Antonio Gomes.

        * fast/scrolling/scrolling-tree-includes-frame.html:

2018-11-22  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Offset formatting context root runs with horizontal margins.
        https://bugs.webkit.org/show_bug.cgi?id=191900

        Reviewed by Antti Koivisto.

        * fast/inline/inline-content-and-nested-formatting-root-with-margin-left-right-expected.txt: Added.
        * fast/inline/inline-content-and-nested-formatting-root-with-margin-left-right.html: Added.

2018-11-22  Simon Fraser  <simon.fraser@apple.com>

        Extremely small monospace text size when SVG is included as an img
        https://bugs.webkit.org/show_bug.cgi?id=191834

        Reviewed by Myles C. Maxfield.
        
        The test has an x offset in the text transform to work around a different bug
        with text position (webkit.org/b/191871).

        * svg/text/monospace-text-size-in-img-expected.html: Added.
        * svg/text/monospace-text-size-in-img.html: Added.

2018-11-22  Javier Fernandez  <jfernandez@igalia.com>

        Tables with vertical-lr writing-mode doesn't apply correctly vertical-align: baseline
        https://bugs.webkit.org/show_bug.cgi?id=191881

        Reviewed by Manuel Rego Casasnovas.

        Tests to verify that columns of a vertical-lr table vertically aligned by baseline work like
        in the case of horizontal tables.
        Also added tests to verify flexbox baseline alignment works as expected in vertical-lr mode.

        The vertical-align-table-baseline.html test has been rebaselined due to the new behavior.

        * fast/writing-mode/vertical-align-table-baseline-latin-expected.html: Added.
        * fast/writing-mode/vertical-align-table-baseline-latin.html: Added.
        * fast/writing-mode/vertical-align-flex-baseline-expected.html: Added.
        * fast/writing-mode/vertical-align-flex-baseline-html: Added.
        * platform/gtk/fast/writing-mode/vertical-align-table-baseline-expected.txt: Rebaseline.
        * platform/gtk/fast/writing-mode/vertical-align-table-baseline-expected.png: Rebaseline.
        * platform/win/fast/writing-mode/vertical-align-table-baseline-expected.txt: Rebaseline.
        * platform/win/fast/writing-mode/vertical-align-table-baseline-expected.png: Rebaseline.

2018-11-21  Wenson Hsieh  <wenson_hsieh@apple.com>

        [Cocoa] [WebKit2] Add support for replacing find-in-page text matches
        https://bugs.webkit.org/show_bug.cgi?id=191786
        <rdar://problem/45813871>

        Reviewed by Ryosuke Niwa.

        Introduce a `LayoutTests/editing/find` directory to contain tests around `FindController`, and add 7 new layout
        tests. These are currently enabled only for WebKit2 on macOS and iOS.

        * TestExpectations:
        * editing/find/find-and-replace-adjacent-words-expected.txt: Added.
        * editing/find/find-and-replace-adjacent-words.html: Added.

        Test find-and-replace with adjacent words.

        * editing/find/find-and-replace-at-editing-boundary-expected.txt: Added.
        * editing/find/find-and-replace-at-editing-boundary.html: Added.

        Test find-and-replace when one of the find matches straddles an editing boundary. In this case, we verify that
        the replacement does not occur, since only part of the word would be replaced.

        * editing/find/find-and-replace-basic-expected.txt: Added.
        * editing/find/find-and-replace-basic.html: Added.

        Add a basic test that exercises a single text replacement, and "replace all".

        * editing/find/find-and-replace-in-subframes-expected.txt: Added.
        * editing/find/find-and-replace-in-subframes.html: Added.

        Test find-and-replace when some of the matches are in editable content in subframes. This test additionally
        contains matches in shadow content (in this case, text fields) within both the main document and the subframe,
        and verifies that text replacement reaches these elements as well.

        * editing/find/find-and-replace-no-matches-expected.txt: Added.
        * editing/find/find-and-replace-no-matches.html: Added.

        Test find-and-replace when no replacement matches are specified. In this case, we fall back to inserting the
        replacement text at the current selection.

        * editing/find/find-and-replace-noneditable-matches-expected.txt: Added.
        * editing/find/find-and-replace-noneditable-matches.html: Added.

        Test find-and-replace when some of the matches to replace are noneditable, others are editable, and others are
        editable but are nested within noneditable elements (i.e. `contenteditable=false`). In this case, "replace all"
        should still replace all fully editable matches.

        * editing/find/find-and-replace-replacement-text-input-events-expected.txt: Added.
        * editing/find/find-and-replace-replacement-text-input-events.html: Added.

        Tests that find-and-replace emits input events of `inputType` "insertReplacementText", except when inserting
        replacement text at a caret selection.

        * platform/ios-wk2/TestExpectations:
        * platform/mac-wk2/TestExpectations:

2018-11-21  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Horizontal margins should be considered as non-breakable space
        https://bugs.webkit.org/show_bug.cgi?id=191894

        Reviewed by Antti Koivisto.

        * fast/inline/inline-content-with-margin-left-right-expected.txt: Added.
        * fast/inline/inline-content-with-margin-left-right.html: Added.

2018-11-21  Ryosuke Niwa  <rniwa@webkit.org>

        Mutation observers doesn't get notified of character data mutation made by the parser
        https://bugs.webkit.org/show_bug.cgi?id=191874

        Reviewed by Antti Koivisto.

        Added a regression test.

        * fast/dom/MutationObserver/observe-parser-character-data-change-expected.txt: Added.
        * fast/dom/MutationObserver/observe-parser-character-data-change.html: Added.

2018-11-21  Zalan Bujtas <zalan@apple.com>

        [LFC][IFC] Border should be considered as non-breakable space
        https://bugs.webkit.org/show_bug.cgi?id=191891

        Reviewed by Antti Koivisto.

        * fast/inline/inline-content-with-border-left-right-expected.txt: Added.
        * fast/inline/inline-content-with-border-left-right.html: Added.

2018-11-21  Alicia Boya García  <aboya@igalia.com>

        [GTK] Unreviewed test gardening
        https://bugs.webkit.org/show_bug.cgi?id=191887

        * platform/gtk/TestExpectations:

2018-11-21  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Take nonBreakableStart/End into use.
        https://bugs.webkit.org/show_bug.cgi?id=191873

        Reviewed by Antti Koivisto.

        * fast/inline/inline-content-with-padding-left-right-expected.txt: Added.
        * fast/inline/inline-content-with-padding-left-right.html: Added.

2018-11-20  Ryosuke Niwa  <rniwa@webkit.org>

        Input element gains focus when a selectstart event listener on document prevents the default action
        https://bugs.webkit.org/show_bug.cgi?id=191714
        <rdar://problem/46174389>

        Reviewed by Antti Koivisto.

        Added a regression test.

        * fast/events/selectstart-prevent-default-should-not-focus-input-expected.txt: Added.
        * fast/events/selectstart-prevent-default-should-not-focus-input.html: Added.
        * platform/ios/TestExpectations:

2018-11-19  Ryosuke Niwa  <rniwa@webkit.org>

        Click on node assigned to slot in button's shadow cause loss of button focus
        https://bugs.webkit.org/show_bug.cgi?id=191694
        <rdar://problem/46107920>

        Reviewed by Wenson Hsieh.

        Added a regression test.

        * fast/shadow-dom/focus-slot-parent-expected.txt: Added.
        * fast/shadow-dom/focus-slot-parent.html: Added.

2018-11-19  Justin Fan  <justin_fan@apple.com>

        [WebGPU] Begin implementing WebGPUTexture, WebGPUTextureView, and WebGPUTextureFormatEnum, and WebGPUSwapChain::configure upgrades
        https://bugs.webkit.org/show_bug.cgi?id=191794

        Reviewed by Dean Jackson.

        Did some refactoring to better share code among tests, and added basic functionality test for 
        WebGPUTextures and WebGPUTextureView, to be fleshed out when their descriptor objects are implemented. 

        * webgpu/command-buffers.html: Refactored to use basic-webgpu-functions.js.
        * webgpu/js/basic-webgpu-functions.js: Added.
        (vertex.Vertex.vertex_main): The basic MSL code has been moved into this file.
        (fragment.float4.fragment_main):
        (runWebGPUTests): Creates a WebGPURenderingContext on a default canvas and runs its provided functions.
        (async.runWebGPUTestsOnCanvas): 
        (async.setUpContexts): Tests proper creation of a basic WebGPURenderingContext.
        (setUpModule): Creates a basic WebGPUShaderModule.
        (setUpPipelineDescriptor): Creates a basic WebGPURenderPipelineDescriptor.
        (setUpPipeline): Creates a basic WebGPURenderPipeline.
        (render):
        * webgpu/js/set-up-webgpu-contexts.js: Moved into basic-webgpu-functions.js.
        * webgpu/render-pipelines-expected.txt:
        * webgpu/render-pipelines.html: Refactored to use basic-webgpu-functions.js.
        * webgpu/shader-modules.html: Refactored to use basic-webgpu-functions.js.
        * webgpu/textures-textureviews-expected.txt: Added.
        * webgpu/textures-textureviews.html: Added.
        * webgpu/webgpu-basics.html: Refactored to use basic-webgpu-functions.js.

2018-11-19  Wenson Hsieh  <wenson_hsieh@apple.com>

        Dragging image with a border-image larger than the image element crashes
        https://bugs.webkit.org/show_bug.cgi?id=191817
        <rdar://problem/46159222>

        Reviewed by Ryosuke Niwa.

        Verifies that an image that meets the pathological criteria described in Source/WebCore/ChangeLog can still be
        dragged and dropped into an editable area.

        * fast/events/drag-image-with-border-image.html: Added.
        * platform/gtk/TestExpectations:
        * platform/ios/TestExpectations:
        * platform/mac-wk2/TestExpectations:
        * platform/wpe/TestExpectations:

        Enable this test only in WebKit1.

2018-11-18  Yusuke Suzuki  <yusukesuzuki@slowstart.org>

        Unreviewed, rolling in the rest of r237254
        https://bugs.webkit.org/show_bug.cgi?id=190340

        * fast/dom/attribute-event-listener-errors-expected.txt:
        * fast/events/attribute-listener-deletion-crash-expected.txt:
        * fast/events/window-onerror-syntax-error-in-attr-expected.txt:
        * js/dom/invalid-syntax-for-function-expected.txt:
        * js/dom/script-start-end-locations-expected.txt:

2018-11-17  Devin Rousso  <drousso@apple.com>

        Web Inspector: Network: add button to show system certificate dialog
        https://bugs.webkit.org/show_bug.cgi?id=191458
        <rdar://problem/45977019>

        Reviewed by Joseph Pecoraro.

        * http/tests/inspector/network/getSerializedCertificate-expected.txt: Added.
        * http/tests/inspector/network/getSerializedCertificate.html: Added.

        * platform/gtk/TestExpectations:
        * platform/wincairo/TestExpectations:
        * platform/wpe/TestExpectations:

2018-11-17  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] InlineFormattingState::addDetachingRule should accumulate rules.
        https://bugs.webkit.org/show_bug.cgi?id=191801

        Reviewed by Antti Koivisto.

        * fast/inline/simple-inline-with-out-of-flow-descendant2-expected.txt: Added.
        * fast/inline/simple-inline-with-out-of-flow-descendant2.html: Added.

2018-11-17  Jonathan Hammer  <jonathan@e3software.com>

        Caret stops blinking after context menu shown
        https://bugs.webkit.org/show_bug.cgi?id=191715

        Reviewed by Ryosuke Niwa.

        * fast/events/contextmenu-dismiss-blink-caret-expected.txt: Added.
        * fast/events/contextmenu-dismiss-blink-caret.html: Added.

2018-11-16  Antoine Quint  <graouts@apple.com>

        [Pointer Events] event.isPrimary doesn't always represent the oldest active touch
        https://bugs.webkit.org/show_bug.cgi?id=191752
        <rdar://problem/46129270>

        Reviewed by Dean Jackson.

        Add a new test that checks that adding a touch after another existing touch does not make it be
        the primary touch, but that removing the first touch makes the second touch become the primary touch.

        To do this we add a new ui.sequence() method that allows a series of touch actions to be performed
        in a linear sequence. The test author can create a finger and call various actions on it, currently
        begin(), move() and end().

        When these actions are processed, we compute all "stationary" actions for each part of the sequence
        so that we can provide this to the uiController.sendEventStream() function.

        Finally, we add a way to track events received by the target and assert that the events that were
        received match those that were expected.

        * pointerevents/ios/pointer-events-is-primary-expected.txt: Added.
        * pointerevents/ios/pointer-events-is-primary.html: Added.
        * pointerevents/utils.js:
        (prototype.handleEvent):
        (prototype.assertMatchesEvents):
        (const.ui.new.UIController):
        (const.ui.new.UIController.prototype.finger):
        (const.ui.new.UIController.prototype.pinchOut):
        (const.ui.new.UIController.prototype.sequence):
        (const.ui.new.UIController.prototype._runEvents):
        (prototype.begin):
        (prototype.move):
        (prototype.end):
        (prototype.stationary):
        (prototype._action):

2018-11-16  Devin Rousso  <drousso@apple.com>

        Web Inspector: Audit: minor style improvements
        https://bugs.webkit.org/show_bug.cgi?id=191727

        Reviewed by Joseph Pecoraro.

        * inspector/audit/resources/audit-utilities.js:

2018-11-16  Joseph Pecoraro  <pecoraro@apple.com>

        Web Inspector: Keep Web Inspector window alive across process swaps (PSON) (Local Inspector)
        https://bugs.webkit.org/show_bug.cgi?id=191740
        <rdar://problem/45470897>

        Reviewed by Timothy Hatcher.

        * inspector/unit-tests/target-manager-expected.txt:
        * inspector/unit-tests/target-manager.html:
        Update test to pass in both a MultiplexingBackendTarget and DirectBackendTarget world.

2018-11-16  Jeremy Jones  <jeremyj@apple.com>

        Include AirPlay destination name in AirPlay placard.
        https://bugs.webkit.org/show_bug.cgi?id=191574
        rdar://problem/45536144

        Reviewed by Eric Carlson.

        Updated tests for string changes.

        * media/modern-media-controls/airplay-placard/airplay-placard-expected.txt:
        * media/modern-media-controls/airplay-placard/airplay-placard.html:

2018-11-16  Ryan Haddad  <ryanhaddad@apple.com>

        REGRESSION (r232376): Layout Test inspector/console/webcore-logging.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=186425

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations: Remove flaky expectation.

2018-11-16  Sihui Liu  <sihui_liu@apple.com>

        Storing blobs in IDB on iOS: "Error preparing blob/file"
        https://bugs.webkit.org/show_bug.cgi?id=188438
        <rdar://problem/43097279>

        Reviewed by Alex Christensen.

        Three IDB blob tests are passing on iOS device now.

        * platform/ios-device/TestExpectations:

2018-11-16  Zalan Bujtas  <zalan@apple.com>

        [iOS] 2 subsequent taps are required to trigger certain tasks on the desktop version of YouTube.com
        https://bugs.webkit.org/show_bug.cgi?id=191712
        <rdar://problem/45612900>

        Reviewed by Simon Fraser.

        * fast/events/touch/ios/click-instead-of-hover-simple-expected.txt: Added.
        * fast/events/touch/ios/click-instead-of-hover-simple.html: Added.

2018-11-16  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Add support for out-of-flow positioned boxes
        https://bugs.webkit.org/show_bug.cgi?id=191726

        Reviewed by Antti Koivisto.

        * fast/inline/simple-inline-with-out-of-flow-descendant-expected.txt: Added.
        * fast/inline/simple-inline-with-out-of-flow-descendant.html: Added.
        * platform/ios/TestExpectations:

2018-11-16  Thibault Saunier  <tsaunier@igalia.com>

        [GStreamer][MediaStream] Handle track addition and removal
        https://bugs.webkit.org/show_bug.cgi?id=191599

        Reviewed by Xabier Rodriguez-Calvar.

        * fast/mediastream/MediaStream-video-element-remove-track-expected.txt: Added.
        * fast/mediastream/MediaStream-video-element-remove-track.html: Added.

2018-11-16  Antoine Quint  <graouts@apple.com>

        PointerEvents should not require touch event listeners to be registered
        https://bugs.webkit.org/show_bug.cgi?id=191333
        <rdar://problem/45857523>

        Reviewed by Dean Jackson.

        Add two iOS tests that check that we dispatch pointer events when only those events are registered
        and that we correctly account for calls to preventDefault(). To support pointer events test, we add
        a new utility where we will be adding user interaction functions that should allow these tests to be
        submitted to the WPT repository provided browsers implement their own versions of the UIController.

        * TestExpectations:
        * pointerevents/ios/pointer-events-dispatch-on-touch-expected.txt: Added.
        * pointerevents/ios/pointer-events-dispatch-on-touch.html: Added.
        * pointerevents/ios/pointer-events-prevent-default-expected.txt: Added.
        * pointerevents/ios/pointer-events-prevent-default.html: Added.
        * pointerevents/utils.js: Added.

2018-11-15  Zalan Bujtas  <zalan@apple.com>

        [iOS] Do not get stuck in indeterminate content observation state.
        https://bugs.webkit.org/show_bug.cgi?id=191719

        Reviewed by Simon Fraser.

        * fast/events/touch/ios/stuck-with-hover-state-expected.txt: Added.
        * fast/events/touch/ios/stuck-with-hover-state.html: Added.

2018-11-15  Simon Fraser  <simon.fraser@apple.com>

        Add layout test for iframe contents disappearing on view unparent/reparent
        https://bugs.webkit.org/show_bug.cgi?id=191725

        Reviewed by Alex Christensen.
        
        This test tests the changes made in r238229.

        * compositing/iframes/remove-reinsert-webview-with-iframe-expected.txt: Added.
        * compositing/iframes/remove-reinsert-webview-with-iframe.html: Added.
        * platform/ios/compositing/iframes/remove-reinsert-webview-with-iframe-expected.txt: Added.
        * platform/mac-wk1/compositing/iframes/remove-reinsert-webview-with-iframe-expected.txt: Added.

2018-11-15  Simon Fraser  <simon.fraser@apple.com>

        REGRESSION (r238090) Composited iframes that resize from zero don't show
        https://bugs.webkit.org/show_bug.cgi?id=191733
        rdar://problem/46107764

        Reviewed by Zalan Bujtas.

        * compositing/iframes/resize-from-zero-size-expected.txt: Added.
        * compositing/iframes/resize-from-zero-size.html: Added.

2018-11-15  Simon Fraser  <simon.fraser@apple.com>

        Overlay with -webkit-overflow-scrolling:touch doesn't become scrollable after added text makes it taller
        https://bugs.webkit.org/show_bug.cgi?id=158342
        rdar://problem/26652811

        Reviewed by Zalan Bujtas.

        Patch partly by Frédéric Wang.

        Add a test to check that scrollability of composited/non-composited overflow divs is properly
        updated. This test used to fail and assert before #238090. A second test with nested divs
        stills exhibit the issue and is fixed by the present commit.

        * fast/scrolling/ios/change-scrollability-on-content-resize-expected.txt: Added.
        * fast/scrolling/ios/change-scrollability-on-content-resize-nested-expected.txt: Added.
        * fast/scrolling/ios/change-scrollability-on-content-resize-nested.html: Added.
        * fast/scrolling/ios/change-scrollability-on-content-resize.html: Added.

2018-11-15  Truitt Savell  <tsavell@apple.com>

        Unreviewed, rolling out r238244.

        Caused High Sierra test runs to fail early with 50 crashes and
        casued 25 API failures.

        Reverted changeset:

        "[css-logical] Implement flow-relative margin, padding and
        border shorthands"
        https://bugs.webkit.org/show_bug.cgi?id=188697
        https://trac.webkit.org/changeset/238244

2018-11-15  Ryan Haddad  <ryanhaddad@apple.com>

        imported/w3c/web-platform-tests/encoding tests take > 30 minutes to run on debug bots
        https://bugs.webkit.org/show_bug.cgi?id=191720

        Unreviewed test gardening.

        * TestExpectations: Skip the directory on debug.

2018-11-15  Chris Dumez  <cdumez@apple.com>

        REGRESSION (r238038): [iOS] Layout test fast/forms/ios/validation-bubble-dismiss-on-tap.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=191710
        <rdar://problem/46104093>

        Reviewed by Simon Fraser.

        There is a small amount of time after we ask to show the popover before the popover is actually shown on screen.
        During this period, clicks are eaten and not reported to the view. For this reason, we keep tapping until the
        popup is dismissed.

        * fast/forms/ios/validation-bubble-dismiss-on-tap-expected.txt:
        * fast/forms/ios/validation-bubble-dismiss-on-tap.html:

2018-11-15  Jiewen Tan  <jiewen_tan@apple.com>

        [WebAuthN] Use a real nonce for CTAPHID_INIT
        https://bugs.webkit.org/show_bug.cgi?id=191533
        <rdar://problem/46103502>

        Reviewed by Brent Fulgham.

        * http/wpt/webauthn/ctap-hid-failure.https-expected.txt:
        * http/wpt/webauthn/ctap-hid-failure.https.html:
        * http/wpt/webauthn/ctap-hid-success.https-expected.txt:
        * http/wpt/webauthn/ctap-hid-success.https.html:

2018-11-15  Justin Fan  <justin_fan@apple.com>

        [WebGPU] WebGPUCommandBuffer prototype
        https://bugs.webkit.org/show_bug.cgi?id=191663

        Reviewed by Dean Jackson.

        Begin implementation of WebGPUCommandBuffers as well as GPUQueues (MTLCommandBuffer, MTLCommandQueue).

        New testing for WebGPUCommandBuffers, to be fleshed out when WebGPUCommandBufferDescriptors
        are added to the specification.

        * webgpu/command-buffers-expected.txt: Added.
        * webgpu/command-buffers.html: Basic functionality, with more stress tests to be added when the spec is updated.
        * webgpu/webgpu-basics.html: Updated to create the command buffer used by later rendering operations.

2018-11-15  Oriol Brufau  <obrufau@igalia.com>

        [css-logical] Implement flow-relative margin, padding and border shorthands
        https://bugs.webkit.org/show_bug.cgi?id=188697

        Reviewed by Simon Fraser and Antti Koivisto.

        Add tests checking that CSS properties disabled behind runtime flags
        are not exposed.

        * platform/ios/webexposed/css-properties-as-js-properties-expected.txt: Added.
        * platform/ios/webexposed/css-property-listing-expected.txt: Added.
        * platform/mac/webexposed/css-properties-as-js-properties-expected.txt: Added.
        * platform/mac/webexposed/css-property-listing-expected.txt: Added.
        * platform/win/webexposed/css-properties-as-js-properties-expected.txt: Added.
        * platform/win/webexposed/css-property-listing-expected.txt: Added.
        * webexposed/css-properties-as-js-properties-expected.txt: Added.
        * webexposed/css-properties-as-js-properties.html: Added.
        * webexposed/css-properties-behind-flags-expected.txt: Added.
        * webexposed/css-properties-behind-flags.html: Added.
        * webexposed/css-property-listing-expected.txt: Added.
        * webexposed/css-property-listing.html: Added.

2018-11-15  Jiewen Tan  <jiewen_tan@apple.com>

        Unreviewed, test gardening.

        * platform/mac-wk2/TestExpectations:

2018-11-15  Jiewen Tan  <jiewen_tan@apple.com>

        [WebAuthN] UserHandle can be null
        https://bugs.webkit.org/show_bug.cgi?id=191521

        Reviewed by Alex Christensen.

        * http/wpt/webauthn/public-key-credential-get-success-hid.https.html:

2018-11-15  Daniel Bates  <dabates@apple.com>

        [iOS] Shift + Tab does not focus previous field
        https://bugs.webkit.org/show_bug.cgi?id=191596
        <rdar://problem/45892053>

        Reviewed by Wenson Hsieh.

        Add tests to ensure that we do not regress the tab and shift + tab key commands.

        * fast/events/ios/focus-tab-next-field-expected.txt: Added.
        * fast/events/ios/focus-tab-next-field.html: Added.
        * fast/events/ios/focus-tab-previous-field-expected.txt: Added.
        * fast/events/ios/focus-tab-previous-field.html: Added.
        * platform/ios-wk1/TestExpectations: Skip test focus-tab-previous-field.html in Legacy WebKit as
        we do not support testing key commands with modifier keys.
        * resources/ui-helper.js:
        (window.UIHelper.keyDown): Updated to support taking an optional array of modifiers (defaults: [])
        and use the new infrastructure to generate a key down event for the specified character.

2018-11-15  Youenn Fablet  <youenn@apple.com>

        Update RTCPeerConnection JS built-ins to be closer to specWe
        https://bugs.webkit.org/show_bug.cgi?id=191665

        Reviewed by Eric Carlson.

        * TestExpectations:

2018-11-15  Miguel Gomez  <magomez@igalia.com>

        Unreviewed GTK+ gardening after r238220.

        * platform/gtk/TestExpectations:

2018-11-14  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Add support for in-flow positioned inline boxes.
        https://bugs.webkit.org/show_bug.cgi?id=191672

        Reviewed by Antti Koivisto.

        * fast/inline/simple-inline-inflow-positioned-expected.txt: Added.
        * fast/inline/simple-inline-inflow-positioned.html: Added.
        * platform/ios/TestExpectations:

2018-11-15  Antti Koivisto  <antti@apple.com>

        REGRESSION(r238178): fast/forms/access-key-mutated.html and fast/forms/access-key-case-insensitive.html are timing out
        https://bugs.webkit.org/show_bug.cgi?id=191642

        Reviewed by Zalan Bujtas.

        * TestExpectations: Unskip
        * platform/mac-wk2/TestExpectations: Unskip
        * platform/mac-wk2/accessibility/mac/selection-notification-focus-change-expected.txt:

        Rebase. Focus timings depends on layout timings.

2018-11-15  Antti Koivisto  <antti@apple.com>

        Remove fonts from CSSFontFaceSet safely
        https://bugs.webkit.org/show_bug.cgi?id=191676

        Reviewed by Zalan Bujtas.

        * fast/text/font-face-set-remove-safely-expected.txt: Added.
        * fast/text/font-face-set-remove-safely.html: Added.

2018-11-14  Timothy Hatcher  <timothy@apple.com>

        Default the view background color and text color to different values when in dark mode.
        https://bugs.webkit.org/show_bug.cgi?id=191607
        rdar://problem/46045854

        Reviewed by Dean Jackson.

        * css-dark-mode/default-colors-expected.txt: Added.
        * css-dark-mode/default-colors.html: Added.
        * inspector/css/shadow-scoped-style-expected.txt: Rebaseline.
        * platform/mac/printing/width-overflow-expected.txt: Rebaseline.

2018-11-14  Ryan Haddad  <ryanhaddad@apple.com>

        Layout test fast/layers/no-clipping-overflow-hidden-added-after-transform.html is a flaky failure on EWS bots
        https://bugs.webkit.org/show_bug.cgi?id=191658

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations: Mark this test as flaky on Sierra Release WK2 to reduce the number of retries on mac-wk2-ews.

2018-11-14  Timothy Hatcher  <timothy@apple.com>

        Update prefers-color-scheme media query matching based on GitHub issue #3278.
        https://bugs.webkit.org/show_bug.cgi?id=191654
        rdar://problem/46074307

        Reviewed by Simon Fraser.

        * css-dark-mode/prefers-color-scheme-expected.txt: Rebaseline.
        * css-dark-mode/prefers-color-scheme.html: Updates to better match the spec.

2018-11-14  Devin Rousso  <drousso@apple.com>

        Web Inspector: Canvas: send a call stack with each action instead of an array of call frames
        https://bugs.webkit.org/show_bug.cgi?id=191628

        Reviewed by Dean Jackson.

        * inspector/model/recording.html:

2018-11-14  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed test gardening, move a skip expectation to a more specific file.

        * TestExpectations:
        * platform/mac-wk2/TestExpectations:

2018-11-14  Joseph Pecoraro  <pecoraro@apple.com>

        Web Inspector: Keep Web Inspector window alive across process swaps (PSON) (Remote Inspector)
        https://bugs.webkit.org/show_bug.cgi?id=191494
        <rdar://problem/45469854>

        Reviewed by Devin Rousso.

        * inspector/unit-tests/target-manager.html:
        WI.targets has switched to being an array instead of a set.

2018-11-14  Truitt Savell  <tsavell@apple.com>

        [ Sierra Release WK2 ] Layout Test fast/workers/worker-cloneport.html is flaky.
        https://bugs.webkit.org/show_bug.cgi?id=191644.

        Unreviewed test Gardening.

        * platform/mac-wk2/TestExpectations:

2018-11-14  Antti Koivisto  <antti@apple.com>

        REGRESSION(r238178): fast/forms/access-key-mutated.html and fast/forms/access-key-case-insensitive.html are timing out
        https://bugs.webkit.org/show_bug.cgi?id=191642

        * TestExpectations: Additionally skip accessibility/mac/selection-notification-focus-change.html

2018-11-14  Antti Koivisto  <antti@apple.com>

        REGRESSION(r238178): fast/forms/access-key-mutated.html and fast/forms/access-key-case-insensitive.html are timing out
        https://bugs.webkit.org/show_bug.cgi?id=191642

        * TestExpectations: Skipping for now.

2018-11-14  Per Arne Vollan  <pvollan@apple.com>

        REGRESSION (WEBPROCESS_WINDOWSERVER_BLOCKING): requestAnimationFrame Stops Completing
        https://bugs.webkit.org/show_bug.cgi?id=190884

        Reviewed by Dean Jackson.

        * TestExpectations:
        * fast/animation/request-animation-frame-in-two-pages-expected.txt: Added.
        * fast/animation/request-animation-frame-in-two-pages.html: Added.
        * platform/mac-wk2/TestExpectations:

2018-11-14  Youenn Fablet  <youenn@apple.com>

        Calling removeTrack on different RTCPeerConnection should throw InvalidAccessError
        https://bugs.webkit.org/show_bug.cgi?id=191603

        Reviewed by Chris Dumez.

        Removed obsolete test.

        * fast/mediastream/RTCPeerConnection-add-removeTrack-expected.txt:
        * fast/mediastream/RTCPeerConnection-add-removeTrack.html:

2018-11-14  Youenn Fablet  <youenn@apple.com>

        Add support for transport and peerConnection stats
        https://bugs.webkit.org/show_bug.cgi?id=191592

        Reviewed by Alex Christensen.

        * webrtc/video-stats.html:

2018-11-14  Ali Juma  <ajuma@chromium.org>

        Transform of composited layer not updated when layer also needs repaint
        https://bugs.webkit.org/show_bug.cgi?id=191598

        Reviewed by Simon Fraser.

        * compositing/geometry/transform-and-repaint-updates-geometry-expected.html: Added.
        * compositing/geometry/transform-and-repaint-updates-geometry.html: Added.

2018-11-13  Jiewen Tan  <jiewen_tan@apple.com>

        [WebAuthN] Support CTAP HID authenticators on macOS
        https://bugs.webkit.org/show_bug.cgi?id=188623
        <rdar://problem/43353777>

        Reviewed by Brent Fulgham and Chris Dumez.

        * http/wpt/webauthn/ctap-hid-failure.https-expected.txt: Added.
        * http/wpt/webauthn/ctap-hid-failure.https.html: Added.
        * http/wpt/webauthn/ctap-hid-success.https-expected.txt: Added.
        * http/wpt/webauthn/ctap-hid-success.https.html: Added.
        * http/wpt/webauthn/public-key-credential-create-failure-hid-silent.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-create-failure-hid-silent.https.html: Added.
        * http/wpt/webauthn/public-key-credential-create-failure-hid.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-create-failure-hid.https.html: Added.
        * http/wpt/webauthn/public-key-credential-create-success-hid.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-create-success-hid.https.html: Added.
        * http/wpt/webauthn/public-key-credential-get-failure-hid-silent.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-get-failure-hid-silent.https.html: Added.
        * http/wpt/webauthn/public-key-credential-get-failure-hid.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-get-failure-hid.https.html: Added.
        * http/wpt/webauthn/public-key-credential-get-success-hid.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-get-success-hid.https.html: Added.
        * http/wpt/webauthn/resources/util.js:
        * platform/ios-wk2/TestExpectations:

2018-11-13  Timothy Hatcher  <timothy@apple.com>

        Use a light scrollbar for transparent web views in dark mode.
        https://bugs.webkit.org/show_bug.cgi?id=191559
        rdar://problem/46000489

        Reviewed by Dean Jackson.

        * css-dark-mode/supported-color-schemes-scrollbar-expected.txt: Added.
        * css-dark-mode/supported-color-schemes-scrollbar.html: Added.

2018-11-13  Ross Kirsling  <ross.kirsling@sony.com>

        [WinCairo] Unreviewed layout test gardening.

        * platform/wincairo/TestExpectations:

2018-11-13  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] Do not show selection UI for editable elements with opacity near zero
        https://bugs.webkit.org/show_bug.cgi?id=191442
        <rdar://problem/45958625>

        Reviewed by Simon Fraser.

        Add 5 new layout tests. See below for more details.

        * editing/selection/character-granularity-rect.html:

        Adjust for a renamed UIScriptController function.

        * editing/selection/ios/do-not-zoom-to-focused-hidden-contenteditable-expected.txt: Added.
        * editing/selection/ios/do-not-zoom-to-focused-hidden-contenteditable.html: Added.

        Add a test to verify that we don't zoom to fit the focused element, if the focused element is completely
        transparent.

        * editing/selection/ios/hide-selection-after-hiding-contenteditable-expected.txt: Added.
        * editing/selection/ios/hide-selection-after-hiding-contenteditable.html: Added.

        Add a test to verify that selection UI is hidden after making an editable root transparent, and shown again when
        the editable root becomes opaque.

        * editing/selection/ios/hide-selection-in-contenteditable-nested-transparency-expected.txt: Added.
        * editing/selection/ios/hide-selection-in-contenteditable-nested-transparency.html: Added.

        Add a test to verify that transparency applied on an editable root via nested transparent containers causes
        selection UI to be suppressed.

        * editing/selection/ios/hide-selection-in-hidden-contenteditable-expected.txt: Added.
        * editing/selection/ios/hide-selection-in-hidden-contenteditable-frame-expected.txt: Added.
        * editing/selection/ios/hide-selection-in-hidden-contenteditable-frame.html: Added.

        Add a test to verify that selection UI is suppressed when an editable element inside a subframe is focused. This
        test checks that the caret, selection rects and selection handle views are not shown, and additionally verifies
        that the selection in a hidden contenteditable area cannot be changed via tap gesture.

        * editing/selection/ios/hide-selection-in-hidden-contenteditable.html: Added.

        Same test as above, but in a regular editable element in the main document instead of a subframe.

        * resources/ui-helper.js:
        (window.UIHelper.getUISelectionRects.return.new.Promise.):
        (window.UIHelper.getUISelectionRects.return.new.Promise):
        (window.UIHelper.getUISelectionRects):
        (window.UIHelper.getUICaretViewRect.return.new.Promise.):
        (window.UIHelper.getUICaretViewRect.return.new.Promise):
        (window.UIHelper.getUICaretViewRect):

        Add new UIHelper wrapper methods. See Tools/ChangeLog for more detail.

2018-11-13  Matt Baker  <mattbaker@apple.com>

        Web Inspector: Table should support select all (Cmd-A)
        https://bugs.webkit.org/show_bug.cgi?id=190299
        <rdar://problem/45029170>

        Reviewed by Devin Rousso.

        * inspector/table/table-selection-expected.txt:
        * inspector/table/table-selection.html:
        Add tests that `selectAll` works when multiple selection is enabled,
        and does nothing when multiple selection is disabled.

2018-11-13  Timothy Hatcher  <timothy@apple.com>

        Treat supported-color-schemes as the second highest priority property.
        https://bugs.webkit.org/show_bug.cgi?id=191556
        rdar://problem/46000076

        Reviewed by Dean Jackson.

        * css-dark-mode/supported-color-schemes-priority-expected.txt: Added.
        * css-dark-mode/supported-color-schemes-priority.html: Added.

2018-11-13  Youenn Fablet  <youenn@apple.com>

        Refresh WPT webrtc tests to ToT
        https://bugs.webkit.org/show_bug.cgi?id=191564

        Reviewed by Eric Carlson.

        Refresh webrtc tests

        * tests-options.json:

2018-11-12  Antoine Quint  <graouts@apple.com>

        [Web Animations] Don't schedule animation frames or update style while an accelerated animation is running
        https://bugs.webkit.org/show_bug.cgi?id=191542
        <rdar://problem/45356027>

        Reviewed by Simon Fraser.

        Add a test that checks that we make only minimal style updates and still dispatch events while an accelerated animation is running.

        * animations/no-style-recalc-during-accelerated-animation-expected.txt: Added.
        * animations/no-style-recalc-during-accelerated-animation.html: Added.
        * fast/layers/no-clipping-overflow-hidden-added-after-transform-expected.html:
        * fast/layers/no-clipping-overflow-hidden-added-after-transform.html: Change the colors to avoid a tiny ImageOnlyFailure.
        * platform/win/TestExpectations: Mark some regressions tracked by webkit.org/b/191584.

2018-11-12  Darshan Kadu  <darsh7807@gmail.com>

        Implement Cache API support for WPE/GTK
        https://bugs.webkit.org/show_bug.cgi?id=178316

        Reviewed by Michael Catanzaro.

        Removed the http/wpt/cache-storage/cache-quota.any.html from the TestExpectations which 
        were marked faliure.

        * platform/gtk/TestExpectations:
        * platform/wpe/TestExpectations:

2018-11-12  Devin Rousso  <drousso@apple.com>

        Web Inspector: Network: show secure certificate details per-request
        https://bugs.webkit.org/show_bug.cgi?id=191447
        <rdar://problem/30019476>

        Reviewed by Joseph Pecoraro.

        * http/tests/inspector/network/resource-response-security-expected.txt: Added.
        * http/tests/inspector/network/resource-response-security.html: Added.

        * platform/gtk/TestExpectations:
        * platform/wincairo/TestExpectations:
        * platform/wpe/TestExpectations:

2018-11-12  Matt Baker  <mattbaker@apple.com>

        Web Inspector: Table should support shift-extending the row selection
        https://bugs.webkit.org/show_bug.cgi?id=189718
        <rdar://problem/44577942>

        Reviewed by Devin Rousso.

        * inspector/unit-tests/index-set-expected.txt:
        * inspector/unit-tests/index-set.html:
        Add tests for new IndexSet methods `addRange`, `deleteRange`, `equals`, and `difference`.

2018-11-12  Zalan Bujtas  <zalan@apple.com>

        Do not collapse the soon-to-be-parent anon block when we shuffle around the marker item renderer.
        https://bugs.webkit.org/show_bug.cgi?id=191554
        <rdar://problem/45825265>

        Reviewed by Antti Koivisto.

        * fast/inline/marker-list-item-move-should-not-crash-expected.txt: Added.
        * fast/inline/marker-list-item-move-should-not-crash.html: Added.

2018-11-12  Sihui Liu  <sihui_liu@apple.com>

        imported/w3c/web-platform-tests/IndexedDB/keygenerator-explicit.html crashing on iOS device
        https://bugs.webkit.org/show_bug.cgi?id=191500

        Reviewed by Dean Jackson.

        The test should not crash now.

        * platform/ios-device/TestExpectations:

2018-11-12  Tim Horton  <timothy_horton@apple.com>

        Make it possible to edit images inline
        https://bugs.webkit.org/show_bug.cgi?id=191352
        <rdar://problem/30107985>

        Reviewed by Dean Jackson.

        * TestExpectations:
        * editing/images/basic-editable-image-expected.txt: Added.
        * editing/images/basic-editable-image.html: Added.
        * editing/images/reparent-editable-image-maintains-strokes-expected.txt: Added.
        * editing/images/reparent-editable-image-maintains-strokes.html: Added.
        * platform/ios-wk2/TestExpectations:
        * resources/ui-helper.js:
        (window.UIHelper.drawSquareInEditableImage):
        (window.UIHelper.numberOfStrokesInEditableImage):
        (window.UIHelper):
        Add tests that we can find and draw in editable images, and that if
        the element is moved around in the DOM, it persists its strokes.

2018-11-12  Javier Fernandez  <jfernandez@igalia.com>

        [css-grid] Import additional grid layout tests and update TestExpectations
        https://bugs.webkit.org/show_bug.cgi?id=191515

        Reviewed by Dean Jackson.

        Imported several tests from Blink and update TextExpectaions.

        * TestExpectations: Adding specific bugs for the expected failures.
        * fast/css-grid-layout/changing-content-property-on-nested-grid-should-not-crash-expected.txt: Added.
        * fast/css-grid-layout/changing-content-property-on-nested-grid-should-not-crash.html: Added.
        * fast/css-grid-layout/column-property-should-not-apply-on-grid-container-expected.html: Added.
        * fast/css-grid-layout/column-property-should-not-apply-on-grid-container.html: Added.
        * fast/css-grid-layout/crash-large-positions-expected.txt: Added.
        * fast/css-grid-layout/crash-large-positions.html: Added.
        * fast/css-grid-layout/fixed-width-intrinsic-width-should-exclude-scrollbar-width-in-grid-expected.txt: Added.
        * fast/css-grid-layout/fixed-width-intrinsic-width-should-exclude-scrollbar-width-in-grid.html: Added.
        * fast/css-grid-layout/floating-not-effect-on-grid-items-expected.txt: Added.
        * fast/css-grid-layout/floating-not-effect-on-grid-items.html: Added.
        * fast/css-grid-layout/grid-align-baseline-expected.txt: Added.
        * fast/css-grid-layout/grid-align-baseline-vertical-expected.txt: Added.
        * fast/css-grid-layout/grid-align-baseline-vertical.html: Added.
        * fast/css-grid-layout/grid-align-baseline.html: Added.
        * fast/css-grid-layout/grid-auto-repeat-inherit-initial-crash-expected.txt: Added.
        * fast/css-grid-layout/grid-auto-repeat-inherit-initial-crash.html: Added.
        * fast/css-grid-layout/grid-auto-repeat-positioned-container-expected.html: Added.
        * fast/css-grid-layout/grid-auto-repeat-positioned-container.html: Added.
        * fast/css-grid-layout/grid-automatic-minimum-intrinsic-aspect-ratio-expected.txt: Added.
        * fast/css-grid-layout/grid-automatic-minimum-intrinsic-aspect-ratio.html: Added.
        * fast/css-grid-layout/grid-container-percentage-columns-expected.txt:
        * fast/css-grid-layout/grid-container-percentage-columns.html:
        * fast/css-grid-layout/grid-container-percentage-rows-expected.txt: Added.
        * fast/css-grid-layout/grid-container-percentage-rows.html: Added.
        * fast/css-grid-layout/grid-container-scroll-accounts-for-auto-margin-expected.html: Added.
        * fast/css-grid-layout/grid-container-scroll-accounts-for-auto-margin.html: Added.
        * fast/css-grid-layout/grid-container-scroll-accounts-for-sizing-expected.html:
        * fast/css-grid-layout/grid-container-scroll-accounts-for-sizing.html:
        * fast/css-grid-layout/grid-container-width-should-include-scroll-bar-width-expected.txt: Added.
        * fast/css-grid-layout/grid-container-width-should-include-scroll-bar-width.html: Added.
        * fast/css-grid-layout/grid-crash-huge-margins-and-min-height-max-content-expected.txt: Added.
        * fast/css-grid-layout/grid-crash-huge-margins-and-min-height-max-content.html: Added.
        * fast/css-grid-layout/grid-crash-out-of-flow-positioned-element-expected.txt: Added.
        * fast/css-grid-layout/grid-crash-out-of-flow-positioned-element.html: Added.
        * fast/css-grid-layout/grid-crash-remove-positioned-item-expected.txt:
        * fast/css-grid-layout/grid-crash-remove-positioned-item.html:
        * fast/css-grid-layout/grid-item-before-anonymous-child-crash-expected.txt: Added.
        * fast/css-grid-layout/grid-item-before-anonymous-child-crash.html: Added.
        * fast/css-grid-layout/grid-item-border-overflow-paint-expected.html: Added.
        * fast/css-grid-layout/grid-item-border-overflow-paint.html: Added.
        * fast/css-grid-layout/grid-item-change-alignment-from-stretch-expected.txt: Added.
        * fast/css-grid-layout/grid-item-change-alignment-from-stretch.html: Added.
        * fast/css-grid-layout/grid-item-grid-container-percentage-rows-expected.html: Added.
        * fast/css-grid-layout/grid-item-grid-container-percentage-rows.html: Added.
        * fast/css-grid-layout/grid-item-overflow-expected.html: Added.
        * fast/css-grid-layout/grid-item-overflow-paint-expected.html: Added.
        * fast/css-grid-layout/grid-item-overflow-paint.html: Added.
        * fast/css-grid-layout/grid-item-overflow.html: Added.
        * fast/css-grid-layout/grid-item-paddings-and-writing-modes-expected.html: Added.
        * fast/css-grid-layout/grid-item-paddings-and-writing-modes.html: Added.
        * fast/css-grid-layout/grid-item-scroll-position-expected.txt: Added.
        * fast/css-grid-layout/grid-item-scroll-position.html: Added.
        * fast/css-grid-layout/grid-margins-not-collapse-expected.html: Added.
        * fast/css-grid-layout/grid-margins-not-collapse.html: Added.
        * fast/css-grid-layout/grid-painting-item-overflow-expected.html: Added.
        * fast/css-grid-layout/grid-painting-item-overflow.html: Added.
        * fast/css-grid-layout/grid-painting-items-only-once-expected.html: Added.
        * fast/css-grid-layout/grid-painting-items-only-once.html: Added.
        * fast/css-grid-layout/grid-painting-respect-dom-order-expected.html: Added.
        * fast/css-grid-layout/grid-painting-respect-dom-order.html: Added.
        * fast/css-grid-layout/grid-painting-rtl-expected.html: Added.
        * fast/css-grid-layout/grid-painting-rtl.html: Added.
        * fast/css-grid-layout/grid-self-baseline-01-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-01.html: Added.
        * fast/css-grid-layout/grid-self-baseline-02-b-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-02-b.html: Added.
        * fast/css-grid-layout/grid-self-baseline-02-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-02.html: Added.
        * fast/css-grid-layout/grid-self-baseline-03-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-03.html: Added.
        * fast/css-grid-layout/grid-self-baseline-04-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-04.html: Added.
        * fast/css-grid-layout/grid-self-baseline-05-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-05.html: Added.
        * fast/css-grid-layout/grid-self-baseline-06-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-06.html: Added.
        * fast/css-grid-layout/grid-self-baseline-07-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-07.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-01-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-01.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-02-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-02.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-03-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-03.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-04-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-04.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-05-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-05.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-06-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-06.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-07-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-horiz-07.html: Added.
        * fast/css-grid-layout/grid-self-baseline-two-dimensional-expected.txt: Added.
        * fast/css-grid-layout/grid-self-baseline-two-dimensional.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-01-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-01.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-02-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-02.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-03-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-03.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-04-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-04.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-05-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-05.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-06-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-06.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-07-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-lr-07.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-01-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-01.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-02-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-02.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-03-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-03.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-04-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-04.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-05-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-05.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-06-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-06.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-07-expected.html: Added.
        * fast/css-grid-layout/grid-self-baseline-vertical-rl-07.html: Added.
        * fast/css-grid-layout/grid-shorthands-style-format-expected.txt: Added.
        * fast/css-grid-layout/grid-shorthands-style-format.html: Added.
        * fast/css-grid-layout/grid-strict-ordering-crash-2-expected.txt: Added.
        * fast/css-grid-layout/grid-strict-ordering-crash-2.html: Added.
        * fast/css-grid-layout/named-grid-areas-dynamic-with-media-query-expected.html: Added.
        * fast/css-grid-layout/named-grid-areas-dynamic-with-media-query.html: Added.
        * fast/css-grid-layout/negative-growth-share-as-infinity-crash-expected.txt: Added.
        * fast/css-grid-layout/negative-growth-share-as-infinity-crash.html: Added.
        * fast/css-grid-layout/painting-item-marginbox-overflowing-grid-area-expected.html: Added.
        * fast/css-grid-layout/painting-item-marginbox-overflowing-grid-area.html: Added.
        * fast/css-grid-layout/positioned-grid-container-item-percentage-size-expected.html: Added.
        * fast/css-grid-layout/positioned-grid-container-item-percentage-size.html: Added.
        * fast/css-grid-layout/positioned-grid-container-percentage-tracks-expected.txt: Added.
        * fast/css-grid-layout/positioned-grid-container-percentage-tracks.html: Added.
        * fast/css-grid-layout/preferred-width-computed-after-layout-expected.txt: Added.
        * fast/css-grid-layout/preferred-width-computed-after-layout.html: Added.
        * fast/css-grid-layout/quirks-mode-percent-resolution-grid-item-expected.txt: Added.
        * fast/css-grid-layout/quirks-mode-percent-resolution-grid-item.html: Added.
        * fast/css-grid-layout/resources/blue-100x50.png: Added.
        * fast/css-grid-layout/resources/grid-definitions-parsing-utils.js:
        (testGridPositionDefinitionsValues):
        * fast/css-grid-layout/scrolled-grid-painting-expected.html: Added.
        * fast/css-grid-layout/scrolled-grid-painting-overflow-expected.html: Added.
        * fast/css-grid-layout/scrolled-grid-painting-overflow.html: Added.
        * fast/css-grid-layout/scrolled-grid-painting.html: Added.
        * fast/css-grid-layout/setting-node-properties-to-null-during-layout-should-not-crash-expected.txt: Added.
        * fast/css-grid-layout/setting-node-properties-to-null-during-layout-should-not-crash.html: Added.
        * fast/css-grid-layout/stale-grid-layout-2-expected.txt: Added.
        * fast/css-grid-layout/stale-grid-layout-expected.txt: Added.
        * fast/css-grid-layout/vertical-align-do-not-effect-grid-items-expected.html: Added.
        * fast/css-grid-layout/vertical-align-do-not-effect-grid-items.html: Added.

2018-11-12  Youenn Fablet  <youenn@apple.com>

        RealtimeOutgoing A/V sources should observe their sources only if having a sink
        https://bugs.webkit.org/show_bug.cgi?id=191490

        Reviewed by Eric Carlson.

        * webrtc/remove-track-expected.txt:
        * webrtc/remove-track.html:
        Add tests and fixed some flakiness issues on existing tests in the file.

2018-11-12  Youenn Fablet  <youenn@apple.com>

        Support setting stream ids when adding a transceiver
        https://bugs.webkit.org/show_bug.cgi?id=191307

        Reviewed by Eric Carlson.

        * TestExpectations:

2018-11-12  Antti Koivisto  <antti@apple.com>

        Support dynamic pseudo-classes on elements with display: contents
        https://bugs.webkit.org/show_bug.cgi?id=181640
        <rdar://problem/36605415>

        Reviewed by Dean Jackson.

        * fast/css/display-contents-hover-active-expected.txt: Added.
        * fast/css/display-contents-hover-active.html: Added.

2018-11-12  Simon Fraser  <simon.fraser@apple.com>

        feFlood with alpha color doesn't work correctly
        https://bugs.webkit.org/show_bug.cgi?id=163666

        Reviewed by Zalan Bujtas.

        * svg/filters/feFlood-with-alpha-color-expected.html: Added.
        * svg/filters/feFlood-with-alpha-color.html: Added.

2018-11-12  Eric Carlson  <eric.carlson@apple.com>

        Require <iframe allow="display"> for an iframe to use getDisplayMedia
        https://bugs.webkit.org/show_bug.cgi?id=191505
        <rdar://problem/45968811>

        Reviewed by Jer Noble.

        * http/tests/media/media-stream/enumerate-devices-iframe-allow-attribute-expected.txt:
        * http/tests/media/media-stream/get-display-media-iframe-allow-attribute-expected.txt: Added.
        * http/tests/media/media-stream/get-display-media-iframe-allow-attribute.html: Added.
        * http/tests/media/media-stream/resources/get-display-media-devices-iframe.html: Added.
        * http/tests/ssl/media-stream/get-user-media-different-host-expected.txt:
        * http/tests/ssl/media-stream/get-user-media-nested-expected.txt:

2018-11-12  Simon Fraser  <simon.fraser@apple.com>

        Make compositing updates incremental
        https://bugs.webkit.org/show_bug.cgi?id=90342

        Reviewed by Antti Koivisto.

        Add some new tests for issues discovered during development.
        
        Filter tests get new results because composited layer bounds are no longer affected
        by pixel-moving filters. 

        * compositing/filters/sw-layer-overlaps-hw-shadow-expected.txt:
        * compositing/filters/sw-nested-shadow-overlaps-hw-nested-shadow-expected.txt:
        * compositing/filters/sw-shadow-overlaps-hw-layer-expected.txt:
        * compositing/filters/sw-shadow-overlaps-hw-shadow-expected.txt:
        * compositing/geometry/stacking-context-change-layer-reparent-expected.html: Added.
        * compositing/geometry/stacking-context-change-layer-reparent.html: Added.
        * compositing/layer-creation/change-to-overlap-expected.txt: Added.
        * compositing/layer-creation/change-to-overlap.html: Added.
        * compositing/updates/no-updates-in-non-composited-iframe-expected.txt: Added.
        * compositing/updates/no-updates-in-non-composited-iframe.html: Added.
        * compositing/updates/resources/non-composited.html: Added.
        * compositing/video/video-clip-change-src.html: This test was timing-sensitive; the behavior differed bases on whether we
        happened to do a compositing flush between the first and second video load.
        * platform/mac-wk1/TestExpectations: Mark compositing/layer-creation/fixed-overlap-extent.html as flakey; it depends on the
        timing of various AppKit-related things that aren't consistent.

2018-11-12  Jer Noble  <jer.noble@apple.com>

        [MSE] Frame re-ordering can cause iframes to never be enqueued
        https://bugs.webkit.org/show_bug.cgi?id=191485

        Reviewed by Eric Carlson.

        * media/media-source/media-source-dropped-iframe-expected.txt: Added.
        * media/media-source/media-source-dropped-iframe.html: Added.

2018-11-11  Wenson Hsieh  <wenson_hsieh@apple.com>

        Implement a new edit command to change the enclosing list type
        https://bugs.webkit.org/show_bug.cgi?id=191487
        <rdar://problem/45955922>

        Reviewed by Ryosuke Niwa.

        Add a new layout test to verify that the list change type editing command can be used to swap between enclosing
        ordered and unordered lists. Also exercises undo, redo, changing list types under `pre` and `table` elements,
        and handling selection within nested list elements.

        * editing/execCommand/change-list-type-expected.txt: Added.
        * editing/execCommand/change-list-type.html: Added.

2018-11-11  Javier Fernandez  <jfernandez@igalia.com>

        [css-grid] Import additional grid layout test from the WPT suite
        https://bugs.webkit.org/show_bug.cgi?id=191369

        Reviewed by Manuel Rego Casasnovas.

        New Grid Layout tests from the WPT suite.

        * TestExpectations: Added bugs and ImageOnlyFailure for 3 tests that are failing.

2018-11-11  Daniel Bates  <dabates@apple.com>

        [iOS] Draw caps lock indicator in password fields
        https://bugs.webkit.org/show_bug.cgi?id=190565
        <rdar://problem/45262343>

        Unreviewed.

        Update expected results now that iOS supports showing the caps lock indictor.

        * platform/ios/fast/css/text-overflow-input-expected.txt:
        * platform/ios/fast/forms/basic-inputs-expected.txt:
        * platform/ios/fast/forms/input-appearance-height-expected.txt:
        * platform/ios/fast/forms/input-value-expected.txt:
        * platform/ios/fast/forms/placeholder-pseudo-style-expected.txt:
        * platform/ios/tables/mozilla_expected_failures/bugs/bug92647-1-expected.txt:

2018-11-11  Myles C. Maxfield  <mmaxfield@apple.com>

        Address post-review comments after r237955
        https://bugs.webkit.org/show_bug.cgi?id=191496

        Reviewed by Darin Adler.

        * fast/css3-text/css3-text-decoration/text-underline-negative-expected.html:

2018-11-10  Simon Fraser  <simon.fraser@apple.com>

        Remove support for -webkit-svg-shadow
        https://bugs.webkit.org/show_bug.cgi?id=187429

        Reviewed by Dean Jackson.

        -webkit-svg-shadow was a non-standard hack for online iWork, and they no longer use it,
        so remove it. No other browser supports it, and chromestatus say it's used on less than
        0.000001% of pages.

        * css3/blending/svg-blend-layer-shadow.html: Removed.
        * fast/css/getComputedStyle/computed-style-expected.txt:
        * fast/css/getComputedStyle/computed-style-without-renderer-expected.txt:
        * fast/css/getComputedStyle/resources/property-names.js:
        * fast/repaint/moving-shadow-on-container-expected.png: Removed.
        * fast/repaint/moving-shadow-on-container.html: Removed.
        * fast/repaint/moving-shadow-on-path-expected.txt: Removed.
        * fast/repaint/moving-shadow-on-path.html: Removed.
        * legacy-animation-engine/fast/css/getComputedStyle/resources/property-names.js:
        * platform/gtk/TestExpectations:
        * platform/gtk/css3/blending/svg-blend-layer-shadow-expected.png: Removed.
        * platform/gtk/css3/blending/svg-blend-layer-shadow-expected.txt: Removed.
        * platform/gtk/fast/repaint/moving-shadow-on-container-expected.txt: Removed.
        * platform/gtk/fast/repaint/moving-shadow-on-path-expected.png: Removed.
        * platform/gtk/svg/css/arrow-with-shadow-expected.png: Removed.
        * platform/gtk/svg/css/composite-shadow-example-expected.png: Removed.
        * platform/gtk/svg/css/composite-shadow-example-expected.txt: Removed.
        * platform/gtk/svg/css/composite-shadow-text-expected.png: Removed.
        * platform/gtk/svg/css/composite-shadow-text-expected.txt: Removed.
        * platform/gtk/svg/css/composite-shadow-with-opacity-expected.png: Removed.
        * platform/gtk/svg/css/composite-shadow-with-opacity-expected.txt: Removed.
        * platform/gtk/svg/css/group-with-shadow-expected.png: Removed.
        * platform/gtk/svg/css/shadow-changes-expected.png: Removed.
        * platform/gtk/svg/css/shadow-changes-expected.txt: Removed.
        * platform/gtk/svg/css/stars-with-shadow-expected.png: Removed.
        * platform/gtk/svg/custom/simple-text-double-shadow-expected.txt: Removed.
        * platform/gtk/svg/custom/transform-with-shadow-and-gradient-expected.png: Removed.
        * platform/gtk/svg/custom/transform-with-shadow-and-gradient-expected.txt: Removed.
        * platform/gtk/svg/filters/shadow-on-filter-expected.png: Removed.
        * platform/gtk/svg/filters/shadow-on-rect-with-filter-expected.png: Removed.
        * platform/gtk/svg/repaint/repaint-webkit-svg-shadow-expected.png: Removed.
        * platform/ios/TestExpectations:
        * platform/ios/css3/blending/svg-blend-layer-shadow-expected.txt: Removed.
        * platform/ios/fast/css/getComputedStyle/computed-style-expected.txt:
        * platform/ios/fast/css/getComputedStyle/computed-style-without-renderer-expected.txt:
        * platform/ios/svg/css/composite-shadow-example-expected.txt: Removed.
        * platform/ios/svg/css/composite-shadow-text-expected.txt: Removed.
        * platform/ios/svg/css/composite-shadow-with-opacity-expected.txt: Removed.
        * platform/ios/svg/css/getComputedStyle-basic-expected.txt:
        * platform/ios/svg/css/group-with-shadow-expected.txt: Removed.
        * platform/ios/svg/css/shadow-changes-expected.txt: Removed.
        * platform/ios/svg/css/stars-with-shadow-expected.txt: Removed.
        * platform/ios/svg/custom/transform-with-shadow-and-gradient-expected.txt: Removed.
        * platform/mac-sierra/fast/css/getComputedStyle/computed-style-expected.txt:
        * platform/mac-sierra/fast/css/getComputedStyle/computed-style-without-renderer-expected.txt:
        * platform/mac-sierra/svg/css/getComputedStyle-basic-expected.txt:
        * platform/mac/TestExpectations:
        * platform/mac/css3/blending/svg-blend-layer-shadow-expected.png: Removed.
        * platform/mac/css3/blending/svg-blend-layer-shadow-expected.txt: Removed.
        * platform/mac/fast/css/getComputedStyle/computed-style-expected.txt:
        * platform/mac/fast/css/getComputedStyle/computed-style-without-renderer-expected.txt:
        * platform/mac/fast/repaint/moving-shadow-on-container-expected.txt: Removed.
        * platform/mac/fast/repaint/moving-shadow-on-path-expected.png: Removed.
        * platform/mac/fast/repaint/moving-shadow-on-path-expected.txt: Removed.
        * platform/mac/svg/css/arrow-with-shadow-expected.png: Removed.
        * platform/mac/svg/css/circle-in-mask-with-shadow-expected.png: Removed.
        * platform/mac/svg/css/clippath-with-shadow-expected.png: Removed.
        * platform/mac/svg/css/composite-shadow-example-expected.png: Removed.
        * platform/mac/svg/css/composite-shadow-text-expected.txt: Removed.
        * platform/mac/svg/css/composite-shadow-with-opacity-expected.png: Removed.
        * platform/mac/svg/css/getComputedStyle-basic-expected.txt:
        * platform/mac/svg/css/group-with-shadow-expected.png: Removed.
        * platform/mac/svg/css/group-with-shadow-expected.txt: Removed.
        * platform/mac/svg/css/mask-with-shadow-expected.png: Removed.
        * platform/mac/svg/css/path-with-shadow-expected.png: Removed.
        * platform/mac/svg/css/shadow-and-opacity-expected.png: Removed.
        * platform/mac/svg/css/shadow-changes-expected.png: Removed.
        * platform/mac/svg/css/shadow-changes-expected.txt: Removed.
        * platform/mac/svg/css/shadow-with-large-radius-expected.png: Removed.
        * platform/mac/svg/css/shadow-with-negative-offset-expected.png: Removed.
        * platform/mac/svg/css/stars-with-shadow-expected.png: Removed.
        * platform/mac/svg/css/stars-with-shadow-expected.txt: Removed.
        * platform/mac/svg/custom/simple-text-double-shadow-expected.png: Removed.
        * platform/mac/svg/custom/simple-text-double-shadow-expected.txt: Removed.
        * platform/mac/svg/custom/transform-with-shadow-and-gradient-expected.png: Removed.
        * platform/mac/svg/custom/transform-with-shadow-and-gradient-expected.txt: Removed.
        * platform/mac/svg/filters/shadow-on-filter-expected.png: Removed.
        * platform/mac/svg/filters/shadow-on-rect-with-filter-expected.png: Removed.
        * platform/mac/svg/repaint/repaint-webkit-svg-shadow-expected.png: Removed.
        * platform/win/TestExpectations:
        * platform/win/css3/blending/svg-blend-layer-shadow-expected.txt: Removed.
        * platform/win/fast/repaint/moving-shadow-on-container-expected.txt: Removed.
        * platform/win/fast/repaint/moving-shadow-on-path-expected.txt: Removed.
        * platform/win/svg/css/composite-shadow-text-expected.txt: Removed.
        * platform/win/svg/css/group-with-shadow-expected.txt: Removed.
        * platform/win/svg/css/shadow-changes-expected.txt: Removed.
        * platform/win/svg/custom/simple-text-double-shadow-expected.txt: Removed.
        * platform/wincairo/fast/repaint/moving-shadow-on-container-expected.txt: Removed.
        * platform/wincairo/fast/repaint/moving-shadow-on-path-expected.png: Removed.
        * platform/wincairo/svg/css/composite-shadow-text-expected.txt: Removed.
        * platform/wincairo/svg/css/shadow-changes-expected.txt: Removed.
        * platform/wincairo/svg/custom/transform-with-shadow-and-gradient-expected.txt: Removed.
        * platform/wpe/svg/css/composite-shadow-text-expected.txt: Removed.
        * platform/wpe/svg/css/shadow-changes-expected.txt: Removed.
        * platform/wpe/svg/css/stars-with-shadow-expected.txt: Removed.
        * platform/wpe/svg/custom/simple-text-double-shadow-expected.txt: Removed.
        * platform/wpe/svg/custom/transform-with-shadow-and-gradient-expected.txt: Removed.
        * svg/css/arrow-with-shadow-expected.txt: Removed.
        * svg/css/arrow-with-shadow.svg: Removed.
        * svg/css/circle-in-mask-with-shadow-expected.png: Removed.
        * svg/css/circle-in-mask-with-shadow-expected.txt: Removed.
        * svg/css/circle-in-mask-with-shadow.svg: Removed.
        * svg/css/clippath-with-shadow-expected.png: Removed.
        * svg/css/clippath-with-shadow-expected.txt: Removed.
        * svg/css/clippath-with-shadow.svg: Removed.
        * svg/css/composite-shadow-example-expected.txt: Removed.
        * svg/css/composite-shadow-example.html: Removed.
        * svg/css/composite-shadow-text-expected.png: Removed.
        * svg/css/composite-shadow-text.svg: Removed.
        * svg/css/composite-shadow-with-opacity-expected.txt: Removed.
        * svg/css/composite-shadow-with-opacity.html: Removed.
        * svg/css/getComputedStyle-basic-expected.txt:
        * svg/css/group-with-shadow-expected.txt: Removed.
        * svg/css/group-with-shadow.svg: Removed.
        * svg/css/mask-with-shadow-expected.txt: Removed.
        * svg/css/mask-with-shadow.svg: Removed.
        * svg/css/parent-shadow-offscreen-expected.svg: Removed.
        * svg/css/parent-shadow-offscreen.svg: Removed.
        * svg/css/path-with-shadow-expected.png: Removed.
        * svg/css/path-with-shadow-expected.txt: Removed.
        * svg/css/path-with-shadow.svg: Removed.
        * svg/css/root-shadow-offscreen-expected.svg: Removed.
        * svg/css/root-shadow-offscreen.svg: Removed.
        * svg/css/shadow-and-opacity-expected.txt: Removed.
        * svg/css/shadow-and-opacity.svg: Removed.
        * svg/css/shadow-changes.svg: Removed.
        * svg/css/shadow-with-large-radius-expected.png: Removed.
        * svg/css/shadow-with-large-radius-expected.txt: Removed.
        * svg/css/shadow-with-large-radius.svg: Removed.
        * svg/css/shadow-with-negative-offset-expected.png: Removed.
        * svg/css/shadow-with-negative-offset-expected.txt: Removed.
        * svg/css/shadow-with-negative-offset.svg: Removed.
        * svg/css/stars-with-shadow-expected.txt: Removed.
        * svg/css/stars-with-shadow.html: Removed.
        * svg/custom/simple-text-double-shadow-expected.png: Removed.
        * svg/custom/simple-text-double-shadow-expected.txt: Removed.
        * svg/custom/simple-text-double-shadow.svg: Removed.
        * svg/custom/transform-with-shadow-and-gradient.svg: Removed.
        * svg/filters/shadow-on-filter-expected.txt: Removed.
        * svg/filters/shadow-on-filter.svg: Removed.
        * svg/filters/shadow-on-rect-with-filter-expected.txt: Removed.
        * svg/filters/shadow-on-rect-with-filter.svg: Removed.
        * svg/repaint/repaint-webkit-svg-shadow-container-expected.txt: Removed.
        * svg/repaint/repaint-webkit-svg-shadow-container.html: Removed.
        * svg/repaint/repaint-webkit-svg-shadow-expected.txt: Removed.
        * svg/repaint/repaint-webkit-svg-shadow.svg: Removed.

2018-11-10  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r238065.

        Breaks internal builds.

        Reverted changeset:

        "Make it possible to edit images inline"
        https://bugs.webkit.org/show_bug.cgi?id=191352
        https://trac.webkit.org/changeset/238065

2018-11-10  Chris Dumez  <cdumez@apple.com>

        Unreviewed, fix typo in r238066.

        * accessibility/ios-simulator/form-control-validation-message.html:

2018-11-10  Chris Dumez  <cdumez@apple.com>

        Unreviewed attempt to deflake accessibility/ios-simulator/form-control-validation-message.html

        * accessibility/ios-simulator/form-control-validation-message.html:

2018-11-10  Tim Horton  <timothy_horton@apple.com>

        Make it possible to edit images inline
        https://bugs.webkit.org/show_bug.cgi?id=191352
        <rdar://problem/30107985>

        Reviewed by Dean Jackson.

        * TestExpectations:
        * editing/images/basic-editable-image-expected.txt: Added.
        * editing/images/basic-editable-image.html: Added.
        * editing/images/reparent-editable-image-maintains-strokes-expected.txt: Added.
        * editing/images/reparent-editable-image-maintains-strokes.html: Added.
        * platform/ios-wk2/TestExpectations:
        * resources/ui-helper.js:
        (window.UIHelper.drawSquareInEditableImage):
        (window.UIHelper.numberOfStrokesInEditableImage):
        (window.UIHelper):
        Add tests that we can find and draw in editable images, and that if
        the element is moved around in the DOM, it persists its strokes.

2018-11-09  Megan Gardner  <megan_gardner@apple.com>

        Fix Test Expectations for Reveal Test
        https://bugs.webkit.org/show_bug.cgi?id=191476

        Unreviewed test gardening.

        Put the test expectation in the correct location to deal with
        the different behaviour old platforms.

        * platform/mac/editing/mac/selection/context-menu-select-editability-expected.txt: Renamed from LayoutTests/platform/mac-highsierra/editing/mac/selection/context-menu-select-editability-expected.txt.

2018-11-09  Tim Horton  <timothy_horton@apple.com>

        Normal-flow-only flex items don't correctly respect z-index
        https://bugs.webkit.org/show_bug.cgi?id=191486

        Reviewed by Simon Fraser.

        * css3/flexbox/z-index-with-normal-flow-only-expected.html: Added.
        * css3/flexbox/z-index-with-normal-flow-only.html: Added.
        Add a test that a <canvas> with z-index 50 correctly stacks below
        a <canvas> that is a flex-item with z-index 100.

2018-11-09  Jer Noble  <jer.noble@apple.com>

        SourceBuffer throws an error when appending a second init segment after changeType().
        https://bugs.webkit.org/show_bug.cgi?id=191474

        Reviewed by Eric Carlson.

        * media/media-source/media-source-changetype-second-init-expected.txt: Added.
        * media/media-source/media-source-changetype-second-init.html: Added.

2018-11-09  Andy Estes  <aestes@apple.com>

        [Payment Request] canMakePayment() should not consider serialized payment method data
        https://bugs.webkit.org/show_bug.cgi?id=191432

        Reviewed by Dean Jackson.

        * http/tests/paymentrequest/payment-request-canmakepayment-method.https-expected.txt:
        * http/tests/paymentrequest/payment-request-canmakepayment-method.https.html: Updated with
        changes from imported/w3c/web-platform-tests/payment-request/. Modified two tests to use
        user_activation_test() rather than test_driver.bless().
        * http/tests/paymentrequest/payment-request-show-method.https-expected.txt:
        * http/tests/paymentrequest/payment-request-show-method.https.html: Now that canMakePayment
        does not convert payment method data, added a test that ensures show() rejects with a
        TypeError when Apple Pay's payment method data is invalid.
        * platform/ios-wk2/TestExpectations: Un-skipped payment-request-canmakepayment-method.https.html.
        * platform/mac-wk2/TestExpectations: Ditto.

2018-11-09  Andy Estes  <aestes@apple.com>

        [Payment Request] PaymentResponse.details should be updated when the user accepts a rpayment retry
        https://bugs.webkit.org/show_bug.cgi?id=191440

        Reviewed by Dean Jackson.

        * http/tests/paymentrequest/payment-response-retry-method.https-expected.txt:
        * http/tests/paymentrequest/payment-response-retry-method.https.html:

2018-11-09  Chris Dumez  <cdumez@apple.com>

        HTML form validation bubble disappears
        https://bugs.webkit.org/show_bug.cgi?id=191418

        Reviewed by Simon Fraser.

        Add API test coverage and update existing tests to use form-validation.js and
        avoid code duplication.

        * fast/forms/form-validation.js: Added.
        (getValidationBubbleContents):
        (getValidationBubble.return.new.Promise.):
        (getValidationBubble):
        * fast/forms/ios/validation-bubble-dismiss-on-tap-expected.txt:
        * fast/forms/ios/validation-bubble-dismiss-on-tap.html:
        * fast/forms/navigation-dismisses-validation-bubbles-expected.txt: Renamed from LayoutTests/http/tests/navigation/navigation-dismisses-validation-bubbles-expected.txt.
        * fast/forms/navigation-dismisses-validation-bubbles.html: Renamed from LayoutTests/http/tests/navigation/navigation-dismisses-validation-bubbles.html.
        * fast/forms/resources/check-validation-bubble-not-visible.html: Renamed from LayoutTests/http/tests/navigation/resources/check-validation-bubble-not-visible.html.
        * fast/forms/scroll-into-view-and-show-validation-message-expected.txt: Added.
        * fast/forms/scroll-into-view-and-show-validation-message.html: Added.
        * fast/forms/validation-bubble-disappears-when-input-detached-expected.txt:
        * fast/forms/validation-bubble-disappears-when-input-detached.html:
        * fast/forms/validation-bubble-disappears-when-input-moved-expected.txt:
        * fast/forms/validation-bubble-disappears-when-input-moved.html:
        * fast/forms/validation-bubble-disappears-when-input-no-longer-visible-expected.txt:
        * fast/forms/validation-bubble-disappears-when-input-no-longer-visible.html:
        * fast/forms/validation-bubble-escape-key-dismiss-expected.txt:
        * fast/forms/validation-bubble-escape-key-dismiss.html:
        * fast/forms/validation-custom-message-expected.txt:
        * fast/forms/validation-custom-message.html:
        * fast/forms/validation-message-detached-iframe-expected.txt:
        * fast/forms/validation-message-detached-iframe.html:
        * fast/forms/validation-message-detached-iframe2-expected.txt:
        * fast/forms/validation-message-detached-iframe2.html:
        * fast/forms/validation-message-minimum-font-size-expected.txt:
        * fast/forms/validation-message-minimum-font-size.html:
        * fast/forms/validation-messages-expected.txt:
        * fast/forms/validation-messages.html:
        * platform/gtk/TestExpectations:
        * platform/ios-wk1/TestExpectations:
        * platform/win/TestExpectations:

2018-11-09  Jer Noble  <jer.noble@apple.com>

        [Cocoa] Fix failing imported/w3c/web-platform-tests/media-source/mediasource-changetype-play.html test
        https://bugs.webkit.org/show_bug.cgi?id=191396

        Reviewed by Eric Carlson.

        * platform/mac/imported/w3c/web-platform-tests/media-source/mediasource-changetype-play-expected.txt:
        * platform/mac-sierra/imported/w3c/web-platform-tests/media-source/mediasource-changetype-play-expected.txt:

2018-11-09  Ryan Haddad  <ryanhaddad@apple.com>

        Clean up test expectations after r237942
        https://bugs.webkit.org/show_bug.cgi?id=191448

        Unreviewed test gardening.

        Add test expectation files for Sierra WK1.

        * platform/mac-sierra-wk1/compositing/repaint/iframes/compositing-iframe-scroll-repaint-expected.txt: Added.
        * platform/mac-sierra-wk1/compositing/repaint/iframes/compositing-iframe-with-fixed-background-doc-repaint-expected.txt: Added.

2018-11-09  Daniel Bates  <dabates@apple.com>

        [iOS] Pressing forward delete key in text field does nothing and we should not invoke an editor
        action when forward delete is pressed outside a text field
        https://bugs.webkit.org/show_bug.cgi?id=190566
        <rdar://problem/45262367>

        Reviewed by Wenson Hsieh.

        Add a test to ensure that pressing the forward delete key deletes the next character.

        * fast/events/ios/forward-delete-in-editable-expected.txt: Added.
        * fast/events/ios/forward-delete-in-editable.html: Added.

2018-11-09  Carlos Garcia Campos  <cgarcia@igalia.com>

        REGRESSION(r236365): [GTK] Many form-related tests are failing
        https://bugs.webkit.org/show_bug.cgi?id=189993

        Reviewed by Michael Catanzaro.

        Remove expectations for tests that are passing now.

        * platform/gtk/TestExpectations:

2018-11-08  Megan Gardner  <megan_gardner@apple.com>

        Adopt Reveal Framework to replace Lookup
        https://bugs.webkit.org/show_bug.cgi?id=191097

        Reviewed by Tim Horton.

        Reveal selects spaces instead of adjacent words, no matter how interesting they are. 
        Update the tests to show this, and change the expections for previous platforms.

        * editing/mac/selection/context-menu-select-editability-expected.txt:
        * editing/mac/selection/context-menu-select-editability.html:
        * platform/mac-highsierra/editing/mac/selection/context-menu-select-editability-expected.txt: Copied from LayoutTests/editing/mac/selection/context-menu-select-editability-expected.txt.

2018-11-08  Ryan Haddad  <ryanhaddad@apple.com>

        Clean up test expectations after r237942
        https://bugs.webkit.org/show_bug.cgi?id=191448

        Unreviewed test gardening.

        Add High Sierra specific expectation files for three tests, rebaseline one for Mojave, and remove failure expectations.

        * platform/mac-highsierra-wk1/compositing/repaint/iframes/composited-iframe-with-fixed-background-doc-repaint-expected.txt: Copied from LayoutTests/platform/mac-wk1/compositing/repaint/iframes/composited-iframe-with-fixed-background-doc-repaint-expected.txt.
        * platform/mac-highsierra-wk1/compositing/repaint/iframes/compositing-iframe-scroll-repaint-expected.txt: Added.
        * platform/mac-highsierra-wk1/compositing/repaint/iframes/compositing-iframe-with-fixed-background-doc-repaint-expected.txt: Added.
        * platform/mac-wk1/TestExpectations:
        * platform/mac-wk1/compositing/repaint/iframes/composited-iframe-with-fixed-background-doc-repaint-expected.txt:

2018-11-08  Ryan Haddad  <ryanhaddad@apple.com>

        [Mojave WK1] Layout test fast/events/detect-caps-lock.html is timing out
        https://bugs.webkit.org/show_bug.cgi?id=191424

        Unreviewed test gardening.

        Update expectations since this test is only expected to run on WK2.

        * platform/mac-wk2/TestExpectations:
        * platform/mac/TestExpectations:

2018-11-08  Ross Kirsling  <ross.kirsling@sony.com>

        U+180E is no longer a whitespace character
        https://bugs.webkit.org/show_bug.cgi?id=191415

        Reviewed by Saam Barati.

        * js/ToNumber-expected.txt:
        * js/parseFloat-expected.txt:
        * js/script-tests/ToNumber.js:
        * js/script-tests/parseFloat.js:
        Update tests and expectations.

        * sputnik/Conformance/09_Type_Conversion/9.3_ToNumber/9.3.1_ToNumber_from_String/S9.3.1_A2-expected.txt:
        * sputnik/Conformance/09_Type_Conversion/9.3_ToNumber/9.3.1_ToNumber_from_String/S9.3.1_A3_T1-expected.txt:
        * sputnik/Conformance/09_Type_Conversion/9.3_ToNumber/9.3.1_ToNumber_from_String/S9.3.1_A3_T2-expected.txt:
        * sputnik/Conformance/15_Native_Objects/15.10_RegExp/15.10.2/15.10.2.12_CharacterClassEscape/S15.10.2.12_A1_T1-expected.txt:
        * sputnik/Conformance/15_Native_Objects/15.10_RegExp/15.10.2/15.10.2.12_CharacterClassEscape/S15.10.2.12_A2_T1-expected.txt:
        * sputnik/Conformance/15_Native_Objects/15.1_The_Global_Object/15.1.2/15.1.2.2_parseInt/S15.1.2.2_A2_T10-expected.txt:
        * sputnik/Conformance/15_Native_Objects/15.1_The_Global_Object/15.1.2/15.1.2.3_parseFloat/S15.1.2.3_A2_T10-expected.txt:
        * sputnik/Unicode/Unicode_410/S15.10.2.12_A1_T6-expected.txt:
        * sputnik/Unicode/Unicode_410/S15.10.2.12_A2_T6-expected.txt:
        * sputnik/Unicode/Unicode_410/S7.2_A1.6_T1-expected.txt:
        * sputnik/Unicode/Unicode_500/S15.10.2.12_A1_T6-expected.txt:
        * sputnik/Unicode/Unicode_500/S15.10.2.12_A2_T6-expected.txt:
        * sputnik/Unicode/Unicode_500/S7.2_A1.6_T1-expected.txt:
        * sputnik/Unicode/Unicode_510/S15.10.2.12_A1_T6-expected.txt:
        * sputnik/Unicode/Unicode_510/S15.10.2.12_A2_T6-expected.txt:
        * sputnik/Unicode/Unicode_510/S7.2_A1.6_T1-expected.txt:
        Let outdated sputnik checks fail.

2018-11-07  Myles C. Maxfield  <mmaxfield@apple.com>

        Unprefix text-decoration CSS3 properties
        https://bugs.webkit.org/show_bug.cgi?id=127193

        Reviewed by Dean Jackson.

        * fast/css3-text/css3-text-decoration/unprefix-expected.html: Added.
        * fast/css3-text/css3-text-decoration/unprefix.html: Added.

2018-11-08  Timothy Hatcher  <timothy@apple.com>

        Add experimental support for a `supported-color-schemes` CSS property.
        https://bugs.webkit.org/show_bug.cgi?id=191319
        rdar://problem/45852261

        Reviewed by Dean Jackson.

        * css-dark-mode/parse-supported-color-schemes-expected.txt: Added.
        * css-dark-mode/parse-supported-color-schemes.html: Added.
        * css-dark-mode/supported-color-schemes-css-expected.txt: Added.
        * css-dark-mode/supported-color-schemes-css.html: Added.

2018-11-08  Per Arne Vollan  <pvollan@apple.com>

        [Sierra Release WK2] Layout Test media/track/track-cue-css.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=191200

        Unreviewed, speculative fix for test flakiness.

        * media/track/track-cue-css-expected.html:
        * media/track/track-cue-css.html:

2018-11-08  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] Use DeviceIdHashSaltStorage to generate device ID hash salt
        https://bugs.webkit.org/show_bug.cgi?id=190825
        <rdar://problem/45486085>

        Update enumerate-devices-source-id to expect the same device to have the same ID in all
        iframes, remove enumerate-devices-source-id-persistent because the logic was faulty.

        Reviewed by Youenn Fablet.

        * TestExpectations: Unskip http/tests/media/media-stream/enumerate-devices-source-id.html
        * http/tests/media/media-stream/enumerate-devices-source-id-expected.txt:
        * http/tests/media/media-stream/enumerate-devices-source-id-persistent-expected.txt: Removed.
        * http/tests/media/media-stream/enumerate-devices-source-id-persistent.html: Removed.
        * http/tests/media/media-stream/enumerate-devices-source-id.html:

2018-11-08  Jonathan Hammer  <jonathan@e3software.com>

        Plain text drag in contenteditable is always DragOperationCopy, never DragOperationMove
        https://bugs.webkit.org/show_bug.cgi?id=191228
        <rdar://problem/45786830>

        Reviewed by Wenson Hsieh.

        A test that checks that dragging plain text in a contenteditable element results
        in the text being moved and not copied. Only applies to WK1. Test skipped on
        WK2 because WK2 EventSender does not support drag events. Test also skipped on 
        AppleWin because drag and drop doesn't work correctly in DRT (according to the 
        TestExpectations file).

        * fast/events/drag-and-drop-move-not-copy-expected.txt: Added.
        * fast/events/drag-and-drop-move-not-copy.html: Added.
        * platform/win/TestExpectations:
        * platform/wk2/TestExpectations:

2018-11-08  Alicia Boya García  <aboya@igalia.com>

        [GTK] Unreviewed test gardening
        https://bugs.webkit.org/show_bug.cgi?id=191404

        * platform/gtk/TestExpectations:
        * platform/gtk/fast/block/basic/height-percentage-simple-expected.txt: Added.
        * platform/gtk/fast/inline/simple-inline-block-expected.txt: Added.
        * platform/gtk/fast/inline/simple-intruding-float1-expected.txt: Added.
        * platform/gtk/fast/inline/simple-intruding-floats2-expected.txt: Added.
        * platform/gtk/fast/inline/simple-shrink-to-fit-inline-block-expected.txt: Added.

2018-11-07  Justin Michaud  <justin_michaud@apple.com>

        CSS Painting API should pass size, arguments and input properties to paint callback
        https://bugs.webkit.org/show_bug.cgi?id=191309

        Reviewed by Chris Dumez.

        * fast/css-custom-paint/properties-expected.html: Added.
        * fast/css-custom-paint/properties.html: Added.
        * fast/css-custom-paint/worklet.html:

2018-11-07  Zalan Bujtas  <zalan@apple.com>

        Click and touch event listeners on the body don't work
        https://bugs.webkit.org/show_bug.cgi?id=191392
        <rdar://problem/5844416>

        Reviewed by Simon Fraser.

        * fast/events/click-handler-on-body-simple-expected.txt: Added.
        * fast/events/click-handler-on-body-simple.html: Added.
        * fast/events/touch/touch-handler-on-body-simple-expected.txt: Added.
        * fast/events/touch/touch-handler-on-body-simple.html: Added.

2018-11-07  Wenson Hsieh  <wenson_hsieh@apple.com>

        Add an editing command for creating and inserting child lists
        https://bugs.webkit.org/show_bug.cgi?id=191335
        <rdar://problem/45814050>

        Reviewed by Ryosuke Niwa.

        Add a new layout tests that exercise the "InsertNested(Un)orderedList" editing commands in several scenarios
        including undo, redo, executing the edit command with a ranged selection, outdenting to decrease list level,
        inserting lists in and around tables and table cells, and inserting lists in and around pre elements.

        * editing/execCommand/insert-nested-lists-expected.txt: Added.
        * editing/execCommand/insert-nested-lists-in-table-expected.txt: Added.
        * editing/execCommand/insert-nested-lists-in-table.html: Added.
        * editing/execCommand/insert-nested-lists-with-pre-expected.txt: Added.
        * editing/execCommand/insert-nested-lists-with-pre.html: Added.
        * editing/execCommand/insert-nested-lists.html: Added.

2018-11-07  Chris Dumez  <cdumez@apple.com>

        ASSERT(renderer()) under HTMLTextAreaElement::updateValue()
        https://bugs.webkit.org/show_bug.cgi?id=191391
        <rdar://problem/34219633>

        Reviewed by Geoffrey Garen.

        Add layout test coverage. I have verified that this test passes in Firefox and Chrome.
        It used to crash before this change in debug.

        * editing/inserting/inset-html-textarea-without-renderer-expected.txt: Added.
        * editing/inserting/inset-html-textarea-without-renderer.html: Added.

2018-11-07  Myles C. Maxfield  <mmaxfield@apple.com>

        Positioned text underline can look like a strike-through
        https://bugs.webkit.org/show_bug.cgi?id=191341

        Reviewed by Simon Fraser.

        * fast/css3-text/css3-text-decoration/text-underline-negative-expected.html: Added.
        * fast/css3-text/css3-text-decoration/text-underline-negative.html: Added.

2018-11-07  Myles C. Maxfield  <mmaxfield@apple.com>

        Dotted underlines that skip descenders are invisible
        https://bugs.webkit.org/show_bug.cgi?id=191403

        Reviewed by Simon Fraser.

        * fast/css3-text/css3-text-decoration/text-underline-style-expected.html: Added.
        * fast/css3-text/css3-text-decoration/text-underline-style.html: Added.

2018-11-07  Andy Estes  <aestes@apple.com>

        Crash in WebCore::PaymentRequest::canMakePayment when Apple Pay payment method data is missing
        https://bugs.webkit.org/show_bug.cgi?id=191331

        Reviewed by Alexey Proskuryakov.

        * http/tests/paymentrequest/payment-request-canmakepayment-method.https.html:

2018-11-07  Simon Fraser  <simon.fraser@apple.com>

        Revert 237849: it breaks MotionMark
        https://bugs.webkit.org/show_bug.cgi?id=191398

        Reviewed by Simon Fraser.

        * fast/scrolling/ios/update-scroll-coordinated-status-expected.txt: Removed.
        * fast/scrolling/ios/update-scroll-coordinated-status.html: Removed.

2018-11-07  Simon Fraser  <simon.fraser@apple.com>

        Some WK1 repaint tests are flakey
        https://bugs.webkit.org/show_bug.cgi?id=190627

        Reviewed by Zalan Bujtas.
        
        New baseline.

        * compositing/masks/compositing-clip-path-change-no-repaint-expected.txt:

2018-11-07  Ross Kirsling  <ross.kirsling@sony.com>

        [WinCairo] Unreviewed layout test gardening.

        * platform/wincairo/TestExpectations:

2018-11-07  Dean Jackson  <dino@apple.com>

        [iOS] WebGL leaks exact GPU type
        https://bugs.webkit.org/show_bug.cgi?id=191393
        <rdar://problem/45788297>

        Reviewed by Tim Horton.

        A test that checks that when the GPU vendor is Apple we're
        returning a generic renderer name.

        * fast/canvas/webgl/hide-some-renderer-info-expected.txt: Added.
        * fast/canvas/webgl/hide-some-renderer-info.html: Added.

2018-11-07  Ali Juma  <ajuma@chromium.org>

        IntersectionObserver GC-dependent tests are flaky
        https://bugs.webkit.org/show_bug.cgi?id=191387

        Reviewed by Chris Dumez.

        Make these tests more robust by triggering GC repeatedly inside a setInterval(). Having only a single call to
        GC is potentially flaky, since that call will early-out and return immediately if a GC is already underway.

        * intersection-observer/root-element-deleted.html:
        * intersection-observer/target-deleted.html:

2018-11-07  Dan Bernstein  <mitz@apple.com>

        Add a pseudoclass that matches img elements that are backed by an attachment
        https://bugs.webkit.org/show_bug.cgi?id=191286
        <rdar://problem/45823554>

        Reviewed by Dean Jackson.

        * fast/css/has-attachment-expected.txt: Added.
        * fast/css/has-attachment.html: Added.
        * platform/win/TestExpectations:

2018-11-07  Ali Juma  <ajuma@chromium.org>

        IntersectionObserverEntry doesn't keep JS wrappers of rects alive
        https://bugs.webkit.org/show_bug.cgi?id=191330

        Reviewed by Chris Dumez.

        Add test coverage.

        * intersection-observer/intersection-observer-entry-keeps-js-wrappers-of-rects-alive-expected.txt: Added.
        * intersection-observer/intersection-observer-entry-keeps-js-wrappers-of-rects-alive.html: Added.

2018-11-07  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, update test expectations for fast/events/pointer.

        * TestExpectations: Skip this directory.
        * platform/ios/TestExpectations: Remove skip since it is now skipped globally.

2018-11-07  Per Arne Vollan  <pvollan@apple.com>

        Layout Test fast/text/international/khmer-selection.html is crashing
        https://bugs.webkit.org/show_bug.cgi?id=191368

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2018-11-07  Per Arne Vollan  <pvollan@apple.com>

        Layout Test fast/block/basic/quirk-mode-percent-height.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=191366

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2018-11-07  Zamiul Haque  <zhaque@apple.com>

        Created a layout test to ensure that date controls marked as credit card expiry
        fields present a Gregorian calendar regardless of default system settings. 
        https://bugs.webkit.org/show_bug.cgi?id=191096
        rdar://problem/42640256

        Reviewed by Tim Horton.

        Added two new methods to UIHelper, helping to facilitate this. calendarType
        returns the calendar identifier of the NSCalendar instance used by the presented
        date picker and setDefaultCalendarType accepts a calendar identifier as an
        argument for changing the default system settings.

        * fast/forms/ios/force-gregorian-calendar-for-credit-card-expiry.html:
        * platform/win/TestExpectations:
        * resources/ui-helper.js:
        (window.UIHelper.calendarType):
        (window.UIHelper.setDefaultCalendarType):

2018-11-07  Tadeu Zagallo  <tzagallo@apple.com>

        REGRESSION(r237547): Test failures on 32-bit JSC since the JIT was disabled
        https://bugs.webkit.org/show_bug.cgi?id=191184

        Reviewed by Saam Barati.

        Skip test when the JIT is disabled since it's too slow to run on CLoop.

        * js/script-tests/regress-139548.js:

2018-11-06  Youenn Fablet  <youenn@apple.com>

        Reenable imported/w3c/web-platform-tests/webrtc/RTCPeerConnection-ontrack.https.html
        https://bugs.webkit.org/show_bug.cgi?id=191343

        Unreviewed.

        * TestExpectations: Unskipping test.
        * platform/ios-wk2/imported/w3c/web-platform-tests/webrtc/RTCPeerConnection-ontrack.https-expected.txt: Removed.

2018-11-06  Youenn Fablet  <youenn@apple.com>

        sender.replaceTrack() fails with InvalidStateError if the transceiver.direction is "inactive"
        https://bugs.webkit.org/show_bug.cgi?id=191202

        Reviewed by Eric Carlson.

        * TestExpectations: skipping a timing out related test.
        It is already timing out but is also flaky.

2018-11-06  Justin Fan  <justin_fan@apple.com>

        [WebGPU] Experimental prototype for WebGPURenderPipeline and WebGPUSwapChain
        https://bugs.webkit.org/show_bug.cgi?id=191291

        Reviewed by Myles Maxfield.

        * webgpu/js/set-up-webgpu-contexts.js: Added helper script for running different webgpu tests.
        (runWebGPUTests):
        (async.runWebGPUTestsOnCanvas):
        (async.setUpContexts):
        * webgpu/render-pipelines-expected.txt: Added.
        * webgpu/render-pipelines.html: Added.
        * webgpu/shader-modules-expected.txt:
        * webgpu/shader-modules.html: Updated to use functions in set-up-webgpu-contexts.js.
        * webgpu/webgpu-basics-expected.txt:
        * webgpu/webgpu-basics.html: Updated through creating a WebGPURenderPipeline.

2018-11-06  Youenn Fablet  <youenn@apple.com>

        Calling sender.replaceTrack() twice produces a new transceiver and its corresponding m= section
        https://bugs.webkit.org/show_bug.cgi?id=191261

        Reviewed by Eric Carlson.

        * webrtc/video-addTransceiver-expected.txt:
        * webrtc/video-addTransceiver.html:

2018-11-06  Youenn Fablet  <youenn@apple.com>

        Make mDNS ICE Candidate an experimental flag again
        https://bugs.webkit.org/show_bug.cgi?id=191262

        Reviewed by Dean Jackson.

        * webrtc/datachannel/mdns-ice-candidates.html:

2018-11-06  Myles C. Maxfield  <mmaxfield@apple.com>

        Implement text-underline-offset and text-decoration-thickness
        https://bugs.webkit.org/show_bug.cgi?id=190774

        Reviewed by Dean Jackson.

        * animations/text-decoration-thickness-expected.txt: Added.
        * animations/text-decoration-thickness.html: Added.
        * animations/text-underline-offset-expected.txt: Added.
        * animations/text-underline-offset.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-2-expected-mismatch.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-2.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-3-expected-mismatch.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-3.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-auto-length-expected.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-auto-length.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-baseline-expected.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-baseline.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-expected-mismatch.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-from-font-auto-expected.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-from-font-auto.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-from-font-length-expected.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-from-font-length.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-repaint-expected.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-repaint.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-under-auto-expected.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-under-auto.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-under-length-expected.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset-under-length.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-offset.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-thickness-length-expected.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-thickness-length.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-thickness-repaint-expected.html: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-thickness-repaint.html: Added.

2018-11-06  Dean Jackson  <dino@apple.com>

        Add some basic pointer events tests
        https://bugs.webkit.org/show_bug.cgi?id=191336
        <rdar://problem/45858574>

        Reviewed by Wenson Hsieh.

        Generate some fake touches for pointer events testing.

        * fast/events/pointer/ios/drag-gives-pointerdown-pointermove-pointerup-expected.txt: Added.
        * fast/events/pointer/ios/drag-gives-pointerdown-pointermove-pointerup.html: Added.
        * fast/events/pointer/ios/tap-gives-pointerdown-pointerup-expected.txt: Added.
        * fast/events/pointer/ios/tap-gives-pointerdown-pointerup.html: Added.
        * platform/ios/TestExpectations:

2018-11-06  Timothy Hatcher  <timothy@apple.com>

        Skip css-dark-mode tests on older macOS platforms
        https://bugs.webkit.org/show_bug.cgi?id=191334

        Reviewed by Brian Burg.

        * platform/mac-highsierra/css-dark-mode/prefers-color-scheme-expected.txt: Removed.
        * platform/mac-highsierra/css-dark-mode/supported-color-schemes-expected.txt: Removed.
        * platform/mac-sierra/css-dark-mode/prefers-color-scheme-expected.txt: Removed.
        * platform/mac-sierra/css-dark-mode/supported-color-schemes-expected.txt: Removed.
        * platform/mac/TestExpectations: Skip css-dark-mode for Sierra and HighSierra.

2018-11-06  John Wilander  <wilander@apple.com>

        Resource Load Statistics: Remove cap on partitioned cache max age if it matches a network reload (redirect-only)
        https://bugs.webkit.org/show_bug.cgi?id=189760
        <rdar://problem/44612242>

        Reviewed by Youenn Fablet and Antti Koivisto.

        * http/tests/resourceLoadStatistics/cap-cache-max-age-for-prevalent-resource-expected.txt:
        * http/tests/resourceLoadStatistics/cap-cache-max-age-for-prevalent-resource.html:
            The test now performs:
            - an initial Fetch request with a permanent redirect to ID 1234. Capped max age.
            - a second Fetch request with a permanent redirect to ID 4321. Capped max age.
            - a third Fetch request with a permanent redirect to and empty ID. Capped max age.
            - a fourth Fetch request with a permanent redirect to and empty ID. Max age cap removed.
            - a fifth Fetch request with a permanent redirect to and empty ID. Regular cache hit.
        * http/tests/resourceLoadStatistics/resources/cached-permanent-redirect.php:
            Now returns an HTTP 500 if the request contains validation headers.

2018-11-06  Myles C. Maxfield  <mmaxfield@apple.com>

        Spelling dots are drawn in the wrong place
        https://bugs.webkit.org/show_bug.cgi?id=190764

        Reviewed by Dean Jackson.

        * editing/spelling/resources/VerySmallDescentAhem.ttf: Added. In order to test repaint rects,
              this is a version of Ahem with a very small descent, so that the dots don't intersect
              with the text itself.
        * editing/spelling/spelling-dots-position-2-expected-mismatch.html: Added.
        * editing/spelling/spelling-dots-position-2.html: Added. Make sure dots are painted in the
              correct vertical place.
        * editing/spelling/spelling-dots-position-3-expected-mismatch.html: Added.
        * editing/spelling/spelling-dots-position-3.html: Added. Make sure dots are painted in the
              correct vertical place.
        * editing/spelling/spelling-dots-position-expected.html: Added.
        * editing/spelling/spelling-dots-position.html: Added. Make sure dots are not painted in
              the wrong place.
        * editing/spelling/spelling-dots-repaint-expected.html: Added.
        * editing/spelling/spelling-dots-repaint.html: Added. Test repaint by drawing an element
              with spelling dots, and then deleting the element from the document. The spelling
              dots should be removed too.
        * fast/writing-mode/english-bt-text-with-spelling-marker-expected.html:
        * fast/writing-mode/english-bt-text-with-spelling-marker.html: Update the test to compensate
              for new spelling dot positions.

2018-11-06  Ross Kirsling  <ross.kirsling@sony.com>

        [WinCairo] Unreviewed layout test gardening.

        * platform/wincairo/TestExpectations:

2018-11-06  Per Arne Vollan  <pvollan@apple.com>

        REGRESSION (r230523): Caps lock indicator not shown in password field
        https://bugs.webkit.org/show_bug.cgi?id=190056

        Reviewed by Ryosuke Niwa.

        * TestExpectations:
        * fast/events/detect-caps-lock-expected.txt: Added.
        * fast/events/detect-caps-lock.html: Added.
        * platform/mac/TestExpectations:

2018-11-06  Ali Juma  <ajuma@chromium.org>

        IntersectionObserver doesn't keep target's JS wrapper alive
        https://bugs.webkit.org/show_bug.cgi?id=190235

        Reviewed by Ryosuke Niwa.

        Add test coverage.

        Update test that depends on a target getting GC'd to call takeRecords() since
        targets with pending entries are no logner GC'd.

        * intersection-observer/intersection-observer-entry-keeps-js-wrapper-of-target-alive-expected.txt: Added.
        * intersection-observer/intersection-observer-entry-keeps-js-wrapper-of-target-alive.html: Added.
        * intersection-observer/intersection-observer-keeps-js-wrapper-of-target-alive-expected.txt: Added.
        * intersection-observer/intersection-observer-keeps-js-wrapper-of-target-alive.html: Added.
        * intersection-observer/root-element-deleted.html:
        * intersection-observer/target-deleted-expected.txt: Added.
        * intersection-observer/target-deleted.html: Added.

2018-11-06  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] User should not be prompted again after denying getDisplayMedia request
        https://bugs.webkit.org/show_bug.cgi?id=191227
        <rdar://problem/45784512>

        Reviewed by Youenn Fablet.

        * TestWebKitAPI/Tests/WebKitCocoa/GetDisplayMedia.mm:
        (-[GetDisplayMediaUIDelegate _webView:requestUserMediaAuthorizationForDevices:url:mainFrameURL:decisionHandler:]):
        (TestWebKitAPI::GetDisplayMediaTest::promptForCapture):
        (TestWebKitAPI::TEST_F):

2018-11-06  Timothy Hatcher  <timothy@apple.com>

        <picture> container doesn't update when prefers-color-scheme media query changes
        https://bugs.webkit.org/show_bug.cgi?id=190913
        rdar://problem/45608456

        Reviewed by Dean Jackson.

        * css-dark-mode/prefers-color-scheme-picture-element-expected.txt: Added.
        * css-dark-mode/prefers-color-scheme-picture-element.html: Added.
        * platform/mac-highsierra/css-dark-mode/prefers-color-scheme-picture-element-expected.txt: Added.
        * platform/mac-sierra/css-dark-mode/prefers-color-scheme-picture-element-expected.txt: Added.

2018-11-06  Alex Christensen  <achristensen@webkit.org>

        Fix tests after r237863
        https://bugs.webkit.org/show_bug.cgi?id=191315

        Reviewed by Chris Dumez.

        * platform/mac-wk2/http/tests/navigation: Added.
        * platform/mac-wk2/http/tests/navigation/keyboard-events-during-provisional-navigation-expected.txt: Copied from LayoutTests/http/tests/navigation/keyboard-events-during-provisional-navigation-expected.txt.
        This test is timing related, and I need to update its WK2 expectations every time I enable or disable safe browsing checks during navigation.
        See r237149.

2018-11-06  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r237834.

        Tests for this change crash on iOS Simulator

        Reverted changeset:

        "Spelling dots are drawn in the wrong place"
        https://bugs.webkit.org/show_bug.cgi?id=190764
        https://trac.webkit.org/changeset/237834

2018-11-06  Youenn Fablet  <youenn@apple.com>

        Make sure RTCIceCandidateStats address is undefined for host and peer reflexive case
        https://bugs.webkit.org/show_bug.cgi?id=191263

        Reviewed by Eric Carlson.

        * webrtc/datachannel/getStats-no-prflx-remote-candidate-expected.txt: Added.
        * webrtc/datachannel/getStats-no-prflx-remote-candidate.html: Added.

2018-11-06  Youenn Fablet  <youenn@apple.com>

        Layout Test imported/w3c/web-platform-tests/webrtc/RTCPeerConnection-setRemoteDescription-tracks.https.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=191278

        Reviewed by Eric Carlson.

        * TestExpectations:

2018-11-06  Thibault Saunier  <tsaunier@igalia.com>

        [GStreamer][WebRTC] Implement black frame generation
        https://bugs.webkit.org/show_bug.cgi?id=190684

        Reviewed by Xabier Rodriguez-Calvar.

        Avoiding webrtc/video-mute-vp8.html to crash but it still fails because
        we are missing the canvas bridging code.

        * platform/gtk/TestExpectations:
        * platform/wpe/TestExpectations:

2018-11-06  Antoine Quint  <graouts@apple.com>

        [Web Animations] Update all tests to match the latest API changes
        https://bugs.webkit.org/show_bug.cgi?id=191302
        <rdar://problem/41000438>

        Reviewed by Dean Jackson.

        * TestExpectations:
        * platform/ios/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-expected.txt:
        * platform/ios/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-expected.txt:
        * platform/ios/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-expected.txt:
        * platform/mac-sierra/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-expected.txt:
        * platform/mac-sierra/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-expected.txt:
        * platform/mac-sierra/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/accumulation-per-property-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/addition-per-property-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/web-animations/animation-model/animation-types/interpolation-per-property-expected.txt:
        * webanimations/css-animations.html:
        * webanimations/left-and-opacity-animation-yields-no-compositing.html:
        * webanimations/opacity-animation-no-longer-composited-upon-completion.html:
        * webanimations/width-and-opacity-separate-animation-yields-no-compositing.html:

2018-11-06  Zan Dobersek  <zdobersek@igalia.com>

        Unreviewed WPE gardening. Handle a bunch of test failures under the
        directories containing imported W3C wpt tests. A few test expectations
        are added, but mostly the corresponding baselines are provided.

        * platform/wpe/TestExpectations:
        * platform/wpe/http/tests/dom: Added.
        * platform/wpe/http/tests/dom/same-origin-detached-window-properties-expected.txt: Added.
        * platform/wpe/http/wpt: Added.
        * platform/wpe/http/wpt/mediarecorder: Added.
        * platform/wpe/http/wpt/mediarecorder/MediaRecorder-dataavailable-expected.txt: Added.
        * platform/wpe/http/wpt/mediarecorder/MediaRecorder-mock-dataavailable-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-generate-request-disallowed-input.https-expected.txt:
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-encrypted-clear.https-expected.txt:
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-reset-src-after-setmediakeys.https-expected.txt:
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/idlharness.https-expected.txt:
        * platform/wpe/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element: Added.
        * platform/wpe/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/hidden-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/text-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/mimesniff: Added.
        * platform/wpe/imported/w3c/web-platform-tests/mimesniff/mime-types: Added.
        * platform/wpe/imported/w3c/web-platform-tests/mimesniff/mime-types/charset-parameter.window-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/pointerevents: Added.
        * platform/wpe/imported/w3c/web-platform-tests/pointerevents/extension: Added.
        * platform/wpe/imported/w3c/web-platform-tests/pointerevents/extension/pointerevent_touch-action-verification-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/pointerevents/pointerevent_touch-action-illegal-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/pointerevents/pointerevent_touch-action-verification-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/service-workers: Added.
        * platform/wpe/imported/w3c/web-platform-tests/service-workers/service-worker: Added.
        * platform/wpe/imported/w3c/web-platform-tests/service-workers/service-worker/fetch-event-within-sw-manual.https-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/service-workers/service-worker/fetch-frame-resource.https-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/shadow-dom: Added.
        * platform/wpe/imported/w3c/web-platform-tests/shadow-dom/input-element-list-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/xhr/formdata-blob-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/xhr/formdata-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/xhr/getallresponseheaders-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/xhr/getresponseheader.any-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/xhr/getresponseheader.any.worker-expected.txt: Added.
        * platform/wpe/imported/w3c/web-platform-tests/xhr/setrequestheader-content-type-expected.txt:

2018-11-06  Frederic Wang  <fwang@igalia.com>

        Overlay with -webkit-overflow-scrolling:touch doesn't become scrollable after added text makes it taller
        https://bugs.webkit.org/show_bug.cgi?id=158342

        Reviewed by Simon Fraser.

        Add a test to ensure the change of scrolling status is reflected in the layer and scrolling
        trees. This test should also ASSERT in debug mode without the associated code change.

        * fast/scrolling/ios/update-scroll-coordinated-status-expected.txt: Added.
        * fast/scrolling/ios/update-scroll-coordinated-status.html: Added.

2018-11-05  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] Swatch appears squished and off-center in inputs of type color
        https://bugs.webkit.org/show_bug.cgi?id=191279
        <rdar://problem/45816319>

        Reviewed by Tim Horton.

        * fast/forms/color/color-input-uses-color-well-appearance-expected-mismatch.html: Added.
        * fast/forms/color/color-input-uses-color-well-appearance.html: Added.

        Add a test to verify that setting `-webkit-appearance: textfield;` on a color input causes the color input to
        render differently from a color input with a default appearance.

        * platform/ios-wk1/TestExpectations:
        * platform/ios/TestExpectations:

        In the WebKit2 port of iOS, enable a handful of color input tests that are currently disabled.

        * platform/ios/fast/forms/color/input-appearance-color-expected.txt:

        Rebaseline an existing test on iOS.

2018-11-05  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] An audio track should be muted when capture is interrupted by the OS.
        https://bugs.webkit.org/show_bug.cgi?id=191283
         <rdar://problem/45773103>

        Reviewed by Jon Lee.

        * fast/mediastream/media-stream-track-interrupted-expected.txt: Added.
        * fast/mediastream/media-stream-track-interrupted.html: Added.

2018-11-05  Myles C. Maxfield  <mmaxfield@apple.com>

        Parsing support for text-underline-offset and text-decoration-thickness
        https://bugs.webkit.org/show_bug.cgi?id=191242

        Reviewed by Simon Fraser.

        * fast/css3-text/css3-text-decoration/getComputedStyle/getComputedStyle-text-underline-position-expected.txt:
        * fast/css3-text/css3-text-decoration/getComputedStyle/getComputedStyle-text-underline-position.html: Update the
        test for the new grammar of text-underline-position
        * fast/css3-text/css3-text-decoration/text-decoration-thickness-parse-expected.txt: Added.
        * fast/css3-text/css3-text-decoration/text-decoration-thickness-parse.html: Added.
        * fast/css3-text/css3-text-decoration/text-underline-offset-parse-expected.txt: Added.
        * fast/css3-text/css3-text-decoration/text-underline-offset-parse.html: Added.

2018-11-05  Myles C. Maxfield  <mmaxfield@apple.com>

        Spelling dots are drawn in the wrong place
        https://bugs.webkit.org/show_bug.cgi?id=190764

        Reviewed by Dean Jackson.

        * editing/spelling/resources/VerySmallDescentAhem.ttf: Added. In order to test repaint rects,
              this is a version of Ahem with a very small descent, so that the dots don't intersect
              with the text itself.
        * editing/spelling/spelling-dots-position-2-expected-mismatch.html: Added.
        * editing/spelling/spelling-dots-position-2.html: Added. Make sure dots are painted in the
              correct vertical place.
        * editing/spelling/spelling-dots-position-3-expected-mismatch.html: Added.
        * editing/spelling/spelling-dots-position-3.html: Added. Make sure dots are painted in the
              correct vertical place.
        * editing/spelling/spelling-dots-position-expected.html: Added.
        * editing/spelling/spelling-dots-position.html: Added. Make sure dots are not painted in
              the wrong place.
        * editing/spelling/spelling-dots-repaint-expected.html: Added.
        * editing/spelling/spelling-dots-repaint.html: Added. Test repaint by drawing an element
              with spelling dots, and then deleting the element from the document. The spelling
              dots should be removed too.
        * fast/writing-mode/english-bt-text-with-spelling-marker-expected.html:
        * fast/writing-mode/english-bt-text-with-spelling-marker.html: Update the test to compensate
              for new spelling dot positions.

2018-11-05  Ryan Haddad  <ryanhaddad@apple.com>

        Layout Test imported/w3c/web-platform-tests/webrtc/RTCPeerConnection-setRemoteDescription-tracks.https.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=191278

        Unreviewed test gardening.

        * TestExpectations: Mark test as flaky.

2018-11-05  Chris Dumez  <cdumez@apple.com>

        Crash under DOMWindow::postMessageTimerFired()
        https://bugs.webkit.org/show_bug.cgi?id=191217
        <rdar://problem/40888466>

        Reviewed by Geoffrey Garen.

        Add layout test coverage.

        * fast/dom/Window/remove-frame-in-message-event-handler-expected.txt: Added.
        * fast/dom/Window/remove-frame-in-message-event-handler.html: Added.

2018-11-05  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] Changing view scale sometimes does not zoom the page to the new initial scale when the page is zoomed in when ignoring meta viewport
        https://bugs.webkit.org/show_bug.cgi?id=191226
        <rdar://problem/45781765>

        Reviewed by Tim Horton.

        Add a new layout test that sets the view scale to several values greater than or equal to 1 and verifies that
        the minimum scale and resulting scroll view scale are exactly the same as the view scale, when (1) the "ignores
        meta viewport" preference is enabled, and (2) the viewport is forced to be always scalable.

        * fast/viewport/ios/minimum-scale-after-changing-view-scale-expected.txt: Added.
        * fast/viewport/ios/minimum-scale-after-changing-view-scale.html: Added.

2018-11-05  Matt Baker  <mattbaker@apple.com>

        Web Inspector: Table selection should not require that rows be in the cache
        https://bugs.webkit.org/show_bug.cgi?id=190993
        <rdar://problem/45613812>

        Reviewed by Devin Rousso.

        Add a test that a table row that is not in the cache can be selected/deselected.

        * inspector/table/table-selection-expected.txt:
        * inspector/table/table-selection.html:

2018-11-05  Devin Rousso  <drousso@apple.com>

        Web Inspector: show save/restore stack for recorded 2D Canvases
        https://bugs.webkit.org/show_bug.cgi?id=175283
        <rdar://problem/34040756>

        Reviewed by Matt Baker.

        * inspector/canvas/recording-2d.html:
        * inspector/canvas/resources/recording-utilities.js:
        (TestPage.registerInitializer.log):
        (TestPage.registerInitializer.async logRecording):

2018-11-05  Thibault Saunier  <tsaunier@igalia.com>

        [GStreamer][WebRTC] Error out when simulcast is activated
        https://bugs.webkit.org/show_bug.cgi?id=190678

        Reviewed by Philippe Normand.

        Implementing it is not for now yet.
        Tests for simulcast have been disabled as they now fail (instead of crashing).

        * platform/gtk/TestExpectations:
        * platform/wpe/TestExpectations:

2018-11-05  Zan Dobersek  <zdobersek@igalia.com>

        Unreviewed WPE gardening. Updating or adding various baselines. Also
        adding new failure expectations for tests that need a closer look.

        * platform/wpe/TestExpectations:
        * platform/wpe/fast/block/basic/child-block-level-box-with-height-percent-expected.txt: Added.
        * platform/wpe/fast/block/basic/height-percentage-simple-expected.txt: Added.
        * platform/wpe/fast/block/basic/inline-content-with-floating-image-expected.txt: Added.
        * platform/wpe/fast/block/basic/inline-content-with-floating-images2-expected.txt: Added.
        * platform/wpe/fast/block/basic/quirk-mode-percent-height-expected.txt: Added.
        * platform/wpe/fast/history: Added.
        * platform/wpe/fast/history/page-cache-webdatabase-pending-transaction-expected.txt: Added.
        * platform/wpe/fast/inline-block/14498-positionForCoordinates-expected.txt:
        * platform/wpe/fast/inline/simple-inline-block-expected.txt: Added.
        * platform/wpe/fast/inline/simple-intruding-float1-expected.txt: Added.
        * platform/wpe/fast/inline/simple-intruding-floats2-expected.txt: Added.
        * platform/wpe/fast/inline/simple-intruding-floats3-expected.txt: Added.
        * platform/wpe/fast/inline/simple-shrink-to-fit-inline-block-expected.txt: Added.
        * platform/wpe/webgl/2.0.0/conformance/canvas/drawingbuffer-test-expected.txt: Added.
        * platform/wpe/webgl/2.0.0/conformance/context/context-attributes-alpha-depth-stencil-antialias-expected.txt:
        * platform/wpe/webgl/2.0.0/conformance/context/context-hidden-alpha-expected.txt:
        * platform/wpe/webgl/2.0.0/conformance/extensions/get-extension-expected.txt:
        * platform/wpe/webgl/2.0.0/conformance/extensions/oes-texture-half-float-with-image-data-expected.txt: Added.
        * platform/wpe/webgl/2.0.0/conformance/glsl/misc/shaders-with-invariance-expected.txt:
        * platform/wpe/webgl/2.0.0/conformance/rendering/multisample-corruption-expected.txt:
        * platform/wpe/webgl/2.0.0/conformance2/buffers/bound-buffer-size-change-test-expected.txt:
        * platform/wpe/webgl/2.0.0/conformance2/extensions/promoted-extensions-in-shaders-expected.txt:

2018-11-04  Zalan Bujtas  <zalan@apple.com>

        [LFC][BFC] Add support for percentage height in quirks mode.
        https://bugs.webkit.org/show_bug.cgi?id=191232

        Reviewed by Antti Koivisto.

        * fast/block/basic/quirk-mode-percent-height-expected.txt: Added.
        * fast/block/basic/quirk-mode-percent-height.html: Added.
        * platform/ios/TestExpectations:

2018-11-04  Zalan Bujtas  <zalan@apple.com>

        [LFC][BCF] Add support for block level non-replaced inflow height percentage
        https://bugs.webkit.org/show_bug.cgi?id=191229

        Reviewed by Antti Koivisto.

        * fast/block/basic/child-block-level-box-with-height-percent-expected.txt: Added.
        * fast/block/basic/child-block-level-box-with-height-percent.html: Added.
        * platform/ios/TestExpectations:

2018-11-03  Devin Rousso  <drousso@apple.com>

        Web Inspector: Canvas: capture changes to <canvas> that would affect the recorded context
        https://bugs.webkit.org/show_bug.cgi?id=190854

        Reviewed by Matt Baker.

        * inspector/canvas/recording-2d-expected.txt:
        * inspector/canvas/recording-2d.html:
        * inspector/canvas/recording-bitmaprenderer-expected.txt:
        * inspector/canvas/recording-bitmaprenderer.html:
        * inspector/canvas/recording-webgl-expected.txt:
        * inspector/canvas/recording-webgl.html:

2018-11-03  Andy Estes  <aestes@apple.com>

        [Payment Request] PaymentResponse.retry()'s errorFields should be optional
        https://bugs.webkit.org/show_bug.cgi?id=191212

        Reviewed by Youenn Fablet.

        * http/tests/paymentrequest/payment-response-retry-method.https-expected.txt:
        * http/tests/paymentrequest/payment-response-retry-method.https.html:

2018-11-02  Zalan Bujtas  <zalan@apple.com>

        [LFC][BFC] Resolve percentage height values.
        https://bugs.webkit.org/show_bug.cgi?id=191224

        Reviewed by Antti Koivisto.

        * fast/block/basic/height-percentage-simple-expected.txt: Added.
        * fast/block/basic/height-percentage-simple.html: Added.
        * platform/ios/TestExpectations:

2018-11-03  Youenn Fablet  <youenn@apple.com>

        Refresh WPT webrtc tests
        https://bugs.webkit.org/show_bug.cgi?id=191133

        Reviewed by Eric Carlson.

        * TestExpectations:

2018-11-03  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] enumerateDevices should not expose devices that are not available to getUserMedia
        https://bugs.webkit.org/show_bug.cgi?id=191177
        <rdar://problem/45747873>

        Reviewed by Jer Noble.

        * http/tests/media/media-stream/enumerate-devices-iframe-allow-attribute-expected.txt: Added.
        * http/tests/media/media-stream/enumerate-devices-iframe-allow-attribute.html: Added.
        * http/tests/media/media-stream/resources/enumerate-devices-iframe.html: Added.
        * http/tests/ssl/media-stream/get-user-media-different-host-expected.txt: Rebased for updated logging.
        * http/tests/ssl/media-stream/get-user-media-nested-expected.txt: Ditto.

2018-11-02  Justin Michaud  <justin_michaud@apple.com>

        Add new global object and preliminary Worklets support for CSS painting api
        https://bugs.webkit.org/show_bug.cgi?id=190979

        Reviewed by Chris Dumez.

        Add a new test harness for worklet tests, since they do not have access to the dom.

        * fast/css-custom-paint/basic-expected.txt:
        * fast/css-custom-paint/basic.html:
        * fast/css-custom-paint/registerPaintBindings-expected.html: Added.
        * fast/css-custom-paint/registerPaintBindings-expected.txt: Removed.
        * fast/css-custom-paint/registerPaintBindings.html:
        * fast/css-custom-paint/resources/testharness-worklet.js: Added.
        (format_value):
        * fast/css-custom-paint/resources/testharness.js: Added.
        (async.importWorklet):
        * fast/css-custom-paint/worklet-expected.html: Added.
        * fast/css-custom-paint/worklet.html: Added.

2018-11-02  Chris Dumez  <cdumez@apple.com>

        REGRESSION (r237699): Layout Test http/tests/security/anchor-download-block-crossorigin.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=191199

        Reviewed by Dewei Zhu.

        Navigate the subframe instead of the main frame, to make sure that the console message is consistently logged.

        * http/tests/security/anchor-download-block-crossorigin-expected.txt:
        * http/tests/security/anchor-download-block-crossorigin.html:

2018-11-02  Per Arne Vollan  <pvollan@apple.com>

        [Win] Layout Test fast/block/basic/inline-content-with-floating-image.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=191194

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2018-11-02  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] Changing view scale sometimes does not zoom the page to the new initial scale, when the page is at initial scale
        https://bugs.webkit.org/show_bug.cgi?id=191180
        <rdar://problem/45744786>

        Reviewed by Simon Fraser.

        Add a layout test, and make some adjustments to UIHelper.

        * fast/viewport/ios/constant-width-viewport-after-changing-view-scale.html:
        * fast/viewport/ios/device-width-viewport-after-changing-view-scale.html:
        * fast/viewport/ios/viewport-minimum-and-initial-scale-expected.txt: Added.
        * fast/viewport/ios/viewport-minimum-and-initial-scale.html: Added.

        Add a new layout test that contains a viewport meta tag with minimum and initial scales set to 0.94, and checks
        that the resulting minimum and initial scales are 0.94 instead of 0.94158.

        * fast/viewport/watchos/viewport-disable-extra-zoom-adaptations.html:
        * resources/ui-helper.js:

        Make UIHelper.zoomScale return a number rather than a string, and adjust a few call sites.

        (window.UIHelper.zoomScale):
        (window.UIHelper.minimumZoomScale):
        (window.UIHelper):

2018-11-02  Daniel Bates  <dabates@apple.com>

        [iOS] WebKit should dispatch DOM events when a modifier key is pressed
        https://bugs.webkit.org/show_bug.cgi?id=190487

        Reviewed by Tim Horton.

        Update expected results of an existing test now that we identify modifier keys.

        * fast/events/ios/keydown-keyup-special-keys-in-non-editable-element-expected.txt:

2018-11-02  Ali Juma  <ajuma@chromium.org>

        Allow cross-document intersection observing
        https://bugs.webkit.org/show_bug.cgi?id=165746

        Reviewed by Simon Fraser.

        Add a test that cross-document intersection observations are triggered when an intermediate frame
        scrolls. Skip the test on WK1 platforms where IntersectionObserver is not supported.

        Add platform-specific baselines for tests involving iframe scrolling, which isn't supported on iOS.

        * http/tests/intersection-observer/intermediate-frame-changes-expected.txt: Added.
        * http/tests/intersection-observer/intermediate-frame-changes.html: Added.
        * http/tests/intersection-observer/resources/intermediate-frame.html: Added.
        * http/tests/intersection-observer/resources/nested-frame.html: Added.
        * platform/ios/imported/w3c/web-platform-tests/intersection-observer/cross-origin-iframe-expected.txt: Copied from LayoutTests/imported/w3c/web-platform-tests/intersection-observer/cross-origin-iframe-expected.txt.
        * platform/ios/imported/w3c/web-platform-tests/intersection-observer/iframe-no-root-expected.txt: Copied from LayoutTests/imported/w3c/web-platform-tests/intersection-observer/iframe-no-root-expected.txt.
        * platform/mac-wk1/TestExpectations:
        * platform/win/TestExpectations:
        * platform/wincairo/TestExpectations:

2018-11-02  Per Arne Vollan  <pvollan@apple.com>

        [Win] Layout Test fast/block/basic/inline-content-with-floating-image.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=191194

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2018-11-02  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Add support for intrinsic width calculation
        https://bugs.webkit.org/show_bug.cgi?id=191144

        Reviewed by Antti Koivisto.

        * fast/inline/simple-shrink-to-fit-inline-block-expected.txt: Added.
        * fast/inline/simple-shrink-to-fit-inline-block.html: Added.
        * platform/ios/TestExpectations:

2018-11-01  Philippe Normand  <pnormand@igalia.com>

        [Apache] Self-signed SSL certificate RSA key is considered too weak
        https://bugs.webkit.org/show_bug.cgi?id=191156

        Reviewed by Michael Catanzaro.

        Regenerate the self-signed SSL certificate with a 2048 bits RSA key.

        * http/conf/webkit-httpd.pem:

2018-11-01  Antoine Quint  <graouts@apple.com>

        [Web Animations] Make document.getAnimations() return declarative animations in the correct order
        https://bugs.webkit.org/show_bug.cgi?id=191153

        Reviewed by Dean Jackson.

        Mark that the two document.getAnimations() tests for declarative animations are no longer flaky.

        * TestExpectations:

2018-11-02  Justin Fan  <justin_fan@apple.com>

        [WebGPU] Experimental prototype for MSL shaders
        https://bugs.webkit.org/show_bug.cgi?id=191084

        Reviewed by Dean Jackson.

        * webgpu/shader-modules.html: Added.
        * webgpu/shader-modules-expected.html: Added.
        * webgpu/webgpu-basics.html: Added.
        * webgpu/webgpu-basics-expected.html: Added.

2018-11-01  Devin Rousso  <drousso@apple.com>

        Web Inspector: View: introduce a didLayoutSubtree
        https://bugs.webkit.org/show_bug.cgi?id=191176

        Reviewed by Matt Baker.

        * inspector/view/resources/test-view.js:
        (TestPage.registerInitializer.WI.TestView.prototype.layout):
        (TestPage.registerInitializer.WI.TestView.prototype.didLayoutSubtree): Added.

2018-11-01  Chris Dumez  <cdumez@apple.com>

        Location object sans browsing context
        https://bugs.webkit.org/show_bug.cgi?id=191060

        Reviewed by Geoffrey Garen.

        Update existing tests to reflect behavior change.

        * http/tests/dom/same-origin-detached-window-properties-expected.txt:
        * http/tests/dom/same-origin-detached-window-properties.html:
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window.html:
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window2-pson.html:
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window2.html:
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window3.html:

2018-11-01  Ross Kirsling  <ross.kirsling@sony.com>

        [WinCairo] Unreviewed layout test gardening.

        (Also remove one outdated global test failure.)

        * TestExpectations:
        * platform/wincairo/TestExpectations:

2018-11-01  Sihui Liu  <sihui_liu@apple.com>

        Add a storage limit for IndexedDB
        https://bugs.webkit.org/show_bug.cgi?id=190598
        <rdar://problem/44654715>

        Reviewed by Chris Dumez.

        Some tests will fail after adding storage limit to IndexedDB, so we need to reduce their 
        size and rebase their expectations.

        * storage/indexeddb/key-type-array-expected.txt:
        * storage/indexeddb/key-type-array-private-expected.txt:
        * storage/indexeddb/modern/idbkey-array-equality-expected.txt:
        * storage/indexeddb/modern/idbkey-array-equality-private-expected.txt:
        * storage/indexeddb/modern/resources/idbkey-array-equality.js:
        (request.onsuccess):
        (request.onerror):
        (doAdd):
        * storage/indexeddb/prefetch-invalidation-expected.txt:
        * storage/indexeddb/prefetch-invalidation-private-expected.txt:
        * storage/indexeddb/resources/key-type-array.js:
        (testValidArrayKeys.getreq.onsuccess):
        (testValidArrayKeys.putreq.onsuccess):
        (testValidArrayKeys.testArrayPutGet):
        * storage/indexeddb/resources/prefetch-invalidation.js:
        (cursorRequest.onsuccess):
        (continue50Times):
        (continue100Times): Deleted.
        * storage/indexeddb/resources/storage-limit.js: Added.
        (prepareDatabase):
        (onOpenSuccess.request.onerror):
        (onOpenSuccess.request.onsuccess):
        (onOpenSuccess):
        * storage/indexeddb/storage-limit-expected.txt: Added.
        * storage/indexeddb/storage-limit.html: Added.

2018-11-01  Chris Dumez  <cdumez@apple.com>

        Unreviewed, mark a couple of newly imported WPT tests as flaky on Mac WK1.

        * platform/mac-wk1/TestExpectations:

2018-11-01  Justin Michaud  <justin_michaud@apple.com>

        CSS Custom Properties API Should Support syntax="*" and "<length>", and handle cycles properly
        https://bugs.webkit.org/show_bug.cgi?id=191042

        Reviewed by Antti Koivisto.

        * css-custom-properties-api/crash-expected.txt: Added.
        * css-custom-properties-api/crash.html: Added.
        * css-custom-properties-api/cycles-expected.txt: Added.
        * css-custom-properties-api/cycles.html: Added.
        * css-custom-properties-api/inline-expected.txt: Added.
        * css-custom-properties-api/inline.html: Added.

2018-11-01  Guillaume Emont  <guijemont@igalia.com>

        Skip tests on arm/mips that time out now we're running on CLoop

        Unreviewed gardening.

        Since the JIT is temporarily disabled on 32-bit platforms, these tests
        time out on the bots and need to be disabled. There's more tests
        disabled on arm because the timeout is longer on the mips bot (as the
        device is slower to start with), so many of the tests don't time out
        there.

        * js/script-tests/regress-139548.js: disable on arm and mips.

2018-11-01  Devin Rousso  <drousso@apple.com>

        Web Inspector: fix debug WK1 test failures for WI.ObjectStore
        https://bugs.webkit.org/show_bug.cgi?id=191158

        Reviewed by Joseph Pecoraro.

        * inspector/unit-tests/objectStore/delete.html:
        * inspector/unit-tests/objectStore/deleteObject.html:
        * inspector/unit-tests/objectStore/resources/objectStore-utilities.js:
        (TestPage.registerInitializer):

2018-11-01  Said Abou-Hallawa  <sabouhallawa@apple.com>

        [CG] Adopt CG SPI for non-even cornered rounded rects
        https://bugs.webkit.org/show_bug.cgi?id=190155

        Reviewed by Simon Fraser.

        This test fails on iOS simulator because of just one pixel difference
        between drawing a shadow of the element and drawing a copy of the element.
        This failure happens on iOS and does not happen on macOS because we don't 
        use accelerated drawing for macOS testing but we use it for iOS testing.

        * platform/ios/TestExpectations:

2018-11-01  Chris Dumez  <cdumez@apple.com>

        [PSON] Unable to submit a file in FormData cross-site
        https://bugs.webkit.org/show_bug.cgi?id=191138

        Reviewed by Alex Christensen.

        Add layout test coverage.

        * http/tests/misc/form-submit-file-cross-site-expected.txt:
        * http/tests/misc/form-submit-file-cross-site.html:

2018-11-01  Devin Rousso  <drousso@apple.com>

        Unreviewed test fix after r237670.

        * inspector/canvas/setRecordingAutoCaptureFrameCount-expected.txt:
        * inspector/canvas/setRecordingAutoCaptureFrameCount.html:
        Make the `CanvasAdded` event listener synchronous, so it won't miss the `RecordingStarted`
        or `RecordingStopped` events, since `awaitEvent` evaluates on the next tick.

2018-10-31  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Add support for inline-block elements.
        https://bugs.webkit.org/show_bug.cgi?id=191143

        Reviewed by Antti Koivisto.

        * fast/inline/simple-inline-block-expected.txt: Added.
        * fast/inline/simple-inline-block.html: Added.
        * platform/ios/TestExpectations:

2018-11-01  YUHAN WU  <yuhan_wu@apple.com>

        MediaRecorder should fire dataavailable event when all tracks are ended and stop() is called
        https://bugs.webkit.org/show_bug.cgi?id=190778
        <rdar://problem/45703574>

        Reviewed by Youenn Fablet.

        Remove share FileReader object between three asynchronous tests which might cause flaky failure.
        We will need to fix all the falky failures in this test after we implement timeslice.

        * http/wpt/mediarecorder/MediaRecorder-mock-dataavailable.html:

2018-10-31  Devin Rousso  <drousso@apple.com>

        Web Inspector: Canvas: create a setting for auto-recording newly created contexts
        https://bugs.webkit.org/show_bug.cgi?id=190856

        Reviewed by Brian Burg.

        * inspector/canvas/resources/recording-utilities.js:
        (TestPage.registerInitializer.window.startRecording):
        (TestPage.registerInitializer.handleRecordingProgress):
        * inspector/canvas/recording-2d.html:
        * inspector/canvas/recording-bitmaprenderer.html:
        * inspector/canvas/recording-webgl-snapshots.html:
        * inspector/canvas/recording-webgl.html:

        * inspector/canvas/setRecordingAutoCaptureFrameCount-expected.txt: Added.
        * inspector/canvas/setRecordingAutoCaptureFrameCount.html: Added.

2018-10-31  Devin Rousso  <drousso@apple.com>

        Web Inspector: Audit: save imported audits across WebInspector sessions
        https://bugs.webkit.org/show_bug.cgi?id=190858
        <rdar://problem/45527625>

        Reviewed by Brian Burg.

        * inspector/unit-tests/objectStore/add-expected.txt: Added.
        * inspector/unit-tests/objectStore/add.html: Added.
        * inspector/unit-tests/objectStore/addObject-expected.txt: Added.
        * inspector/unit-tests/objectStore/addObject.html: Added.
        * inspector/unit-tests/objectStore/basic-expected.txt: Added.
        * inspector/unit-tests/objectStore/basic.html: Added.
        * inspector/unit-tests/objectStore/delete-expected.txt: Added.
        * inspector/unit-tests/objectStore/delete.html: Added.
        * inspector/unit-tests/objectStore/deleteObject-expected.txt: Added.
        * inspector/unit-tests/objectStore/deleteObject.html: Added.
        * inspector/unit-tests/objectStore/resources/objectStore-utilities.js: Added.
        (TestPage.registerInitializer.InspectorTest.ObjectStore.TestObject):
        (TestPage.registerInitializer.InspectorTest.ObjectStore.TestObject.prototype.toJSON):
        (TestPage.registerInitializer.InspectorTest.ObjectStore.createSuite):
        (TestPage.registerInitializer.InspectorTest.ObjectStore.createObjectStore):
        (TestPage.registerInitializer.InspectorTest.ObjectStore.add):
        (TestPage.registerInitializer.InspectorTest.ObjectStore.addObject):
        (TestPage.registerInitializer.InspectorTest.ObjectStore.delete):
        (TestPage.registerInitializer.InspectorTest.ObjectStore.deleteObject):
        (TestPage.registerInitializer.InspectorTest.ObjectStore.logValues):
        (TestPage.registerInitializer.InspectorTest.ObjectStore.wrapTest):

2018-10-31  Alicia Boya García  <aboya@igalia.com>

        [MSE] Use tolerance when growing the coded frame group
        https://bugs.webkit.org/show_bug.cgi?id=190085

        Reviewed by Jer Noble.

        A test simulating unordered appends with imprecise timestamps,
        overlapping <1ms (replicating a typical WebM 30fps video file) is
        added.

        * media/media-source/media-source-append-acb-tolerance.html: Added.

2018-10-31  Devin Rousso  <drousso@apple.com>

        Web Inspector: Audit: attempt to re-link DOM nodes for imported results
        https://bugs.webkit.org/show_bug.cgi?id=191044
        <rdar://problem/45687364>

        Reviewed by Brian Burg.

        * inspector/model/auditTestCase.html:
        * inspector/model/auditTestCaseResult.html:
        * inspector/model/auditTestGroup.html:
        * inspector/model/auditTestGroupResult.html:

2018-10-31  Jer Noble  <jer.noble@apple.com>

        MediaSource.isTypeSupported('video/mp4; codecs="hvc1.1.6.L60.B0') is inproperly rejected
        https://bugs.webkit.org/show_bug.cgi?id=191129

        Reviewed by Eric Carlson.

        * media/media-source/media-source-istypesupported-case-sensitive-expected.txt: Added.
        * media/media-source/media-source-istypesupported-case-sensitive.html: Added.

2018-10-31  Alicia Boya García  <aboya@igalia.com>

        [MSE] WebKit tests: Use fixed point in makeASample()
        https://bugs.webkit.org/show_bug.cgi?id=191128

        Reviewed by Jer Noble.

        This patch modifies the utility function makeASample() so as to accept
        time values in arbitrary time scales.

        Previously makeASample() accepted optionally a time scale, but still
        required to receive all time values as seconds, therefore requiring a
        division at call time in order to use the function, which could cause
        rounding errors (see https://bugs.webkit.org/show_bug.cgi?id=190085#c20).

        * media/media-source/media-source-append-acb-no-frame-lost-expected.txt:
        * media/media-source/media-source-append-acb-no-frame-lost.html:
        * media/media-source/media-source-append-buffer-with-append-window.html:
        * media/media-source/media-source-append-media-segment-without-init.html:
        * media/media-source/media-source-append-nonsync-sample-after-abort.html:
        * media/media-source/media-source-append-out-of-order.html:
        * media/media-source/media-source-append-overlapping-dts-expected.txt:
        * media/media-source/media-source-append-overlapping-dts.html:
        * media/media-source/media-source-canplaythrough.html:
        * media/media-source/media-source-duplicate-seeked.html:
        * media/media-source/media-source-duration-after-append.html:
        * media/media-source/media-source-end-of-stream-buffered.html:
        * media/media-source/media-source-end-of-stream-readyState.html:
        * media/media-source/media-source-fastseek.html:
        * media/media-source/media-source-fudge-factor.html:
        * media/media-source/media-source-monitor-source-buffers.html:
        * media/media-source/media-source-overlapping-append-buffered.html:
        * media/media-source/media-source-overlapping-append-expected.txt:
        * media/media-source/media-source-overlapping-append.html:
        * media/media-source/media-source-overlapping-decodetime-expected.txt:
        * media/media-source/media-source-overlapping-decodetime.html:
        * media/media-source/media-source-play.html:
        * media/media-source/media-source-range-end-frame-not-removed-expected.txt:
        * media/media-source/media-source-range-end-frame-not-removed.html:
        * media/media-source/media-source-range-start-frame-replaced-expected.txt:
        * media/media-source/media-source-range-start-frame-replaced.html:
        * media/media-source/media-source-remove-decodeorder-crash.html:
        * media/media-source/media-source-remove-too-much.html:
        * media/media-source/media-source-remove.html:
        * media/media-source/media-source-restrictions.html:
        * media/media-source/media-source-sample-wrong-track-id.html:
        * media/media-source/media-source-seek-back-expected.txt:
        * media/media-source/media-source-seek-back.html:
        * media/media-source/media-source-seek-complete.html:
        * media/media-source/media-source-sequence-timestamps-expected.txt:
        * media/media-source/media-source-sequence-timestamps.html:
        * media/media-source/media-source-small-gap.html:
        * media/media-source/media-source-timeoffset-expected.txt:
        * media/media-source/media-source-timeoffset.html:
        * media/media-source/media-source-timestampoffset-rounding-error.html:
        * media/media-source/media-source-timestampoffset-then-zero-expected.txt:
        * media/media-source/media-source-timestampoffset-then-zero.html:
        * media/media-source/media-source-video-playback-quality.html:
        * media/media-source/mock-media-source.js:
        (makeASample):

2018-10-31  YUHAN WU  <yuhan_wu@apple.com>

        MediaRecorder should fire dataavailable event when all tracks are ended and stop() is called
        https://bugs.webkit.org/show_bug.cgi?id=190778
        <rdar://problem/45703574>

        Reviewed by Youenn Fablet.

        Increase the timer of recording to 2 seconds until we support timeslice in order to reduce flakiness.

        * http/wpt/mediarecorder/MediaRecorder-dataavailable.html:
        * http/wpt/mediarecorder/MediaRecorder-mock-dataavailable.html:

2018-10-31  Zach Li  <zacharyli323@gmail.com>

        Add credit card autofill button
        https://bugs.webkit.org/show_bug.cgi?id=191051
        <rdar://problem/45657011>

        Reviewed by Wenson Hsieh.

        * fast/forms/auto-fill-button/input-credit-card-auto-fill-button-expected.txt: Added.
        * fast/forms/auto-fill-button/input-credit-card-auto-fill-button.html: Added.
        * fast/forms/auto-fill-button/last-auto-fill-button-type-expected.txt:
        * fast/forms/auto-fill-button/last-auto-fill-button-type.html:
        * platform/ios-simulator/fast/forms/auto-fill-button/input-credit-card-auto-fill-button-expected.txt: Added.
        * platform/mac/fast/forms/auto-fill-button/input-credit-card-auto-fill-button-expected.png: Added.
        * platform/win/fast/forms/auto-fill-button/input-credit-card-auto-fill-button-expected.txt: Added.

2018-10-31  Devin Rousso  <drousso@apple.com>

        Web Inspector: Audit: show metadata for results
        https://bugs.webkit.org/show_bug.cgi?id=190853
        <rdar://problem/45527623>

        Reviewed by Brian Burg.

        * inspector/model/auditTestCaseResult-expected.txt:
        * inspector/model/auditTestCaseResult.html:
        * inspector/model/auditTestGroupResult-expected.txt:
        * inspector/model/auditTestGroupResult.html:
        * inspector/unit-tests/string-utilities-expected.txt:
        * inspector/unit-tests/string-utilities.html:

2018-10-31  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] Don't reveal device IDs until the user has granted permission to capture
        https://bugs.webkit.org/show_bug.cgi?id=191112
        <rdar://problem/45699932>

        Reviewed by Youenn Fablet.

        * TestExpectations: Skip http/tests/media/media-stream/enumerate-devices-source-id-persistent.html
        and http/tests/media/media-stream/enumerate-devices-source-id.html for now, they don't make sense
        with these changes and will be updated to pass in a future patch.
        * fast/mediastream/MediaStreamTrack-getCapabilities.html:
        * fast/mediastream/get-user-media-device-id-expected.txt:
        * fast/mediastream/get-user-media-device-id.html:

2018-10-31  YUHAN WU  <yuhan_wu@apple.com>

        MediaRecorder should fire dataavailable event when all tracks are ended and stop() is called
        https://bugs.webkit.org/show_bug.cgi?id=190778

        Reviewed by Youenn Fablet.

        These tests are used to check if MediaRecorder can generate both video and audio buffers through mock source.

        * http/wpt/mediarecorder/MediaRecorder-dataavailable-expected.txt: Added.
        * http/wpt/mediarecorder/MediaRecorder-dataavailable.html: Added.
        * http/wpt/mediarecorder/MediaRecorder-mock-dataavailable-expected.txt: Added.
        * http/wpt/mediarecorder/MediaRecorder-mock-dataavailable.html: Added.
        * platform/win/TestExpectations:

2018-10-31  Chris Dumez  <cdumez@apple.com>

        [PSON] When process-swapping for a POST request the HTTP body gets dropped
        https://bugs.webkit.org/show_bug.cgi?id=191046
        <rdar://problem/45229732>

        Reviewed by Alex Christensen.

        Add layout test coverage.

        * http/tests/misc/form-post-textplain-cross-site-expected.txt: Added.
        * http/tests/misc/form-post-textplain-cross-site.html: Added.

2018-10-30  David Kilzer  <ddkilzer@apple.com>

        XSLTProcessor should limit max transform depth
        <https://webkit.org/b/191075>
        <rdar://problem/45531453>

        Reviewed by Alex Christensen.

        * fast/xsl/xslt-max-depth-expected.txt: Added.
        * fast/xsl/xslt-max-depth.html: Added.

2018-10-30  Devin Rousso  <drousso@apple.com>

        Web Inspector: Audit: create Audit Tab
        https://bugs.webkit.org/show_bug.cgi?id=190754

        Reviewed by Matt Baker.

        * inspector/audit/resources/audit-utilities.js: Added.
        * inspector/audit/basic-expected.txt: Added.
        * inspector/audit/basic.html: Added.
        * inspector/audit/data-domAttributes-expected.txt: Added.
        * inspector/audit/data-domAttributes.html: Added.
        * inspector/audit/data-domNodes-expected.txt: Added.
        * inspector/audit/data-domNodes.html: Added.
        * inspector/audit/data-errors-expected.txt: Added.
        * inspector/audit/data-errors.html: Added.
        * inspector/model/auditTestCase-expected.txt: Added.
        * inspector/model/auditTestCase.html: Added.
        * inspector/model/auditTestCaseResult-expected.txt: Added.
        * inspector/model/auditTestCaseResult.html: Added.
        * inspector/model/auditTestGroup-expected.txt: Added.
        * inspector/model/auditTestGroup.html: Added.
        * inspector/model/auditTestGroupResult-expected.txt: Added.
        * inspector/model/auditTestGroupResult.html: Added.
        * inspector/unit-tests/promise-utilities-expected.txt: Added.
        * inspector/unit-tests/promise-utilities.html: Added.

        * inspector/audit/audit-manager-expected.txt: Removed.
        * inspector/audit/audit-manager.html: Removed.
        * inspector/audit/audit-report-expected.txt: Removed.
        * inspector/audit/audit-report.html: Removed.
        * inspector/audit/audit-test-case-expected.txt: Removed.
        * inspector/audit/audit-test-case.html: Removed.
        * inspector/audit/audit-test-suite-expected.txt: Removed.
        * inspector/audit/audit-test-suite.html: Removed.
        * inspector/audit/resources/audit-test-fixtures.js: Removed.

2018-10-30  Dawei Fenton  <realdawei@apple.com>

        WebGL conformance: Failures and Timeouts in suite 2.0.0/conformance
        https://bugs.webkit.org/show_bug.cgi?id=189641

        Unreviewed.

        * platform/ios-wk2/TestExpectations: Mark test as [ Slow ]

2018-10-30  Devin Rousso  <drousso@apple.com>

        Web Inspector: provide options to WI.cssPath for more verbosity
        https://bugs.webkit.org/show_bug.cgi?id=190987

        Reviewed by Brian Burg.

        * inspector/dom/domutilities-csspath.html:

2018-10-30  Ali Juma  <ajuma@chromium.org>

        Calling window.open("", "_self") allows working around restrictions on window.close()
        https://bugs.webkit.org/show_bug.cgi?id=191073

        Reviewed by Chris Dumez.

        * fast/dom/Window/window-open-self-disallow-close-expected.txt: Added.
        * fast/dom/Window/window-open-self-disallow-close.html: Added.

2018-10-30  Andy Estes  <aestes@apple.com>

        [Payment Request] Implement PaymentResponse.retry()
        https://bugs.webkit.org/show_bug.cgi?id=190985

        Reviewed by Daniel Bates

        * http/tests/paymentrequest/payment-address-attributes-and-toJSON-method.https.html:
        * http/tests/paymentrequest/payment-response-complete-method.https.html:
        * http/tests/paymentrequest/payment-response-methodName-attribute.https.html:
        * http/tests/paymentrequest/payment-response-payerEmail-attribute.https.html:
        * http/tests/paymentrequest/payment-response-payerName-attribute.https.html:
        * http/tests/paymentrequest/payment-response-payerPhone-attribute.https.html:
        * http/tests/paymentrequest/payment-response-rejects-if-not-active.https-expected.txt: Added.
        * http/tests/paymentrequest/payment-response-rejects-if-not-active.https.html: Copied from
        imported/w3c/web-platform-tests/payment-request/payment-response/rejects_if_not_active-manual.https.html
        and automated using internals.mockPaymentCoordinator.
        * http/tests/paymentrequest/payment-response-retry-method.https-expected.txt: Added.
        * http/tests/paymentrequest/payment-response-retry-method.https.html: Copied from
        imported/w3c/web-platform-tests/payment-request/payment-response/retry-method-manual.https.html
        and automated using internals.mockPaymentCoordinator.
        * http/tests/paymentrequest/resources/helpers.js:
        (setUpAndSmokeTest):

2018-10-30  Andy Estes  <aestes@apple.com>

        [Apple Pay] PaymentRequest.canMakePayment() should resolve to true whenever Apple Pay is available
        https://bugs.webkit.org/show_bug.cgi?id=191039

        Reviewed by Megan Gardner.

        * http/tests/paymentrequest/payment-request-canmakepayment-method.https-expected.txt:
        * http/tests/paymentrequest/payment-request-canmakepayment-method.https.html:

2018-10-30  Dawei Fenton  <realdawei@apple.com>

        [ Mojave Debug ] Layout Test http/tests/workers/service/self_registration.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=190828

        Unreviewed.

        * platform/mac-wk2/TestExpectations: Mark test as flay.

2018-10-30  Sihui Liu  <sihui_liu@apple.com>

        Add a deprecation warning to console for Web SQL
        https://bugs.webkit.org/show_bug.cgi?id=190936

        Reviewed by Ryosuke Niwa.

        Rebaseline the tests that are affected by the added console message.

        * fast/dom/MutationObserver/database-callback-delivery-expected.txt:
        * fast/frames/sandboxed-iframe-storage-expected.txt:
        * fast/history/page-cache-webdatabase-no-transaction-db-expected.txt:
        * http/tests/security/cross-origin-websql-allowed-expected.txt:
        * http/tests/security/cross-origin-websql-expected.txt:
        * http/tests/security/same-origin-websql-blocked-expected.txt:
        * http/tests/security/storage-blocking-loosened-websql-expected.txt:
        * http/tests/security/storage-blocking-strengthened-websql-expected.txt:
        * http/tests/storage/callbacks-are-called-in-correct-context-expected.txt:
        * inspector/runtime/CommandLineAPI-inspect-expected.txt:
        * js/dom/callback-function-with-handle-event-expected.txt:
        * js/dom/exceptions-thrown-in-callbacks-expected.txt:
        * storage/websql/alter-to-info-table-expected.txt:
        * storage/websql/change-version-expected.txt:
        * storage/websql/change-version-handle-reuse-expected.txt:
        * storage/websql/change-version-no-crash-on-preflight-failure-expected.txt:
        * storage/websql/close-during-stress-test-expected.txt:
        * storage/websql/database-lock-after-reload-expected.txt:
        * storage/websql/empty-statement-expected.txt:
        * storage/websql/execute-sql-args-expected.txt:
        * storage/websql/execute-sql-rowsAffected-expected.txt:
        * storage/websql/executesql-accepts-only-one-statement-expected.txt:
        * storage/websql/hash-change-with-xhr-expected.txt:
        * storage/websql/multiple-databases-garbage-collection-expected.txt:
        * storage/websql/multiple-transactions-expected.txt:
        * storage/websql/multiple-transactions-on-different-handles-expected.txt:
        * storage/websql/null-callbacks-expected.txt:
        * storage/websql/open-database-creation-callback-expected.txt:
        * storage/websql/open-database-creation-callback-isolated-world-expected.txt:
        * storage/websql/open-database-empty-version-expected.txt:
        * storage/websql/open-database-expand-quota-expected.txt:
        * storage/websql/open-database-over-quota-expected.txt:
        * storage/websql/open-database-set-empty-version-expected.txt:
        * storage/websql/open-database-while-transaction-in-progress-expected.txt:
        * storage/websql/private-browsing-noread-nowrite-expected.txt:
        * storage/websql/read-and-write-transactions-dont-run-together-expected.txt:
        * storage/websql/read-transactions-running-concurrently-expected.txt:
        * storage/websql/sql-data-types-expected.txt:
        * storage/websql/statement-error-callback-expected.txt:
        * storage/websql/statement-error-callback-isolated-world-expected.txt:
        * storage/websql/statement-success-callback-isolated-world-expected.txt:
        * storage/websql/success-callback-expected.txt:
        * storage/websql/success-callback-when-page-defers-loading-expected.txt:
        * storage/websql/test-authorizer-expected.txt:
        * storage/websql/transaction-callback-exception-crash-expected.txt:
        * storage/websql/transaction-callback-isolated-world-expected.txt:
        * storage/websql/transaction-database-expand-quota-expected.txt:
        * storage/websql/transaction-error-callback-expected.txt:
        * storage/websql/transaction-error-callback-isolated-world-expected.txt:
        * storage/websql/transaction-prototype-expected.txt:
        * storage/websql/transaction-success-callback-isolated-world-expected.txt:

2018-10-30  Sihui Liu  <sihui_liu@apple.com>

        IndexedDB: iteration of cursors skip records if updated or deleted
        https://bugs.webkit.org/show_bug.cgi?id=190917
        <rdar://problem/35250410>

        Reviewed by Chris Dumez.

        * storage/indexeddb/cursor-update-while-iterating-expected.txt: Added.
        * storage/indexeddb/cursor-update-while-iterating.html: Added.
        * storage/indexeddb/resources/cursor-update-while-iterating.js: Added.
        (prepareDatabase):
        (onOpenSuccess.request.onsuccess):
        (onOpenSuccess):

2018-10-28  Antoine Quint  <graouts@apple.com>

        [Web Animations] Implement the update animations and send events procedure
        https://bugs.webkit.org/show_bug.cgi?id=191013
        <rdar://problem/45620495>

        Reviewed by Dean Jackson.

        Several tests that broke when turning Web Animations CSS Integration on by default are now passing. In the case of one test, we had to ensure
        that the final animation frame had been committed before terminating the test or there would be a tiny image reference issue.

        * TestExpectations:
        * fast/layers/no-clipping-overflow-hidden-added-after-transform.html:

2018-10-30  Youenn Fablet  <youenn@apple.com>

        LibWebRTCRtpReceiverBackend::getSynchronizationSources should use Vector::append
        https://bugs.webkit.org/show_bug.cgi?id=191026

        Reviewed by Eric Carlson.

        * webrtc/video-addTransceiver-expected.txt:
        * webrtc/video-addTransceiver.html:

2018-10-29  Devin Rousso  <drousso@apple.com>

        Web Inspector: refactor code for getting properties via WI.RemoteObject
        https://bugs.webkit.org/show_bug.cgi?id=190989

        Reviewed by Matt Baker.

        * http/tests/inspector/paymentrequest/payment-request-internal-properties.https.html:
        * inspector/debugger/breakpoint-scope.html:
        * inspector/debugger/paused-scopes.html:
        * inspector/debugger/tail-deleted-frames-from-vm-entry.html:
        * inspector/debugger/tail-deleted-frames.html:
        * inspector/debugger/tail-recursion.html:
        * inspector/model/remote-object-fake-object.html:
        * inspector/model/remote-object-get-properties.html:

2018-10-29  Justin Michaud  <justin_michaud@apple.com>

        Revert r237347 registered custom properties... https://bugs.webkit.org/show_bug.cgi?id=190039
        https://bugs.webkit.org/show_bug.cgi?id=190919

        Reviewed by Michael Saboff.

        * css-custom-properties-api/crash-expected.txt: Removed.
        * css-custom-properties-api/crash.html: Removed.
        * css-custom-properties-api/cycles-expected.txt: Removed.
        * css-custom-properties-api/cycles.html: Removed.
        * css-custom-properties-api/inline-expected.txt: Removed.
        * css-custom-properties-api/inline.html: Removed.

2018-10-29  Matt Lewis  <jlewis3@apple.com>

        Marked http/tests/misc/large-js-program.php as a flaky timeout.
        https://bugs.webkit.org/show_bug.cgi?id=190724

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2018-10-29  Youenn Fablet  <youenn@apple.com>

        Handle MDNS resolution of candidates through libwebrtc directly
        https://bugs.webkit.org/show_bug.cgi?id=190681

        Reviewed by Eric Carlson.

        * TestExpectations:
        Test should no longer be flaky as we no longer enforce a timer for resolving MDNS candidates.

2018-10-29  Tim Horton  <timothy_horton@apple.com>

        Modernize WebKit nibs and lprojs for localization's sake
        https://bugs.webkit.org/show_bug.cgi?id=190911
        <rdar://problem/45349466>

        Reviewed by Dan Bernstein.

        * media/modern-media-controls/localized-strings/replaced-string.html:
        English->en

2018-10-29  Youenn Fablet  <youenn@apple.com>

        Invalid ssrc value in the stats of type 'inbound-rtp'
        https://bugs.webkit.org/show_bug.cgi?id=190826
        <rdar://problem/45487435>

        Reviewed by Eric Carlson.

        * webrtc/video-mediastreamtrack-stats.html:
        * webrtc/video-stats-expected.txt:
        * webrtc/video-stats.html:

2018-10-29  Ali Juma  <ajuma@chromium.org>

        Unreviewed test gardening
        https://bugs.webkit.org/show_bug.cgi?id=191002

        Make expectations for IntersectionObserver WPTs more specific.

        * TestExpectations:
        * platform/gtk/TestExpectations:
        * platform/mac-wk2/TestExpectations:

2018-10-29  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Compute estimated margin top for inline formatting root's ancestors
        https://bugs.webkit.org/show_bug.cgi?id=191018

        Reviewed by Antti Koivisto.

        * fast/inline/simple-intruding-floats3-expected.txt: Added.
        * fast/inline/simple-intruding-floats3.html: Added.
        * platform/ios/TestExpectations:

2018-10-29  Zalan Bujtas  <zalan@apple.com>

        [LFC] Add support for inflow non replaced content height when the box is an inline formatting root.
        https://bugs.webkit.org/show_bug.cgi?id=191011

        Reviewed by Antti Koivisto.

        * fast/inline/simple-intruding-floats2-expected.txt: Added.
        * fast/inline/simple-intruding-floats2.html: Added.
        * platform/ios/TestExpectations:

2018-10-29  Zalan Bujtas  <zalan@apple.com>

        Missing from r237549

        Reviewed by Antti Koivisto.

        * platform/ios/TestExpectations:

2018-10-29  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Add support for simple intruding floats.
        https://bugs.webkit.org/show_bug.cgi?id=190998

        Reviewed by Antti Koivisto.

        * fast/inline/simple-intruding-float1-expected.txt: Added.
        * fast/inline/simple-intruding-float1.html: Added.
        * platform/ios/TestExpectations:

2018-10-29  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Inline layout produces separate runs when float is present.
        https://bugs.webkit.org/show_bug.cgi?id=190980

        Reviewed by Antti Koivisto.

        * fast/block/basic/inline-content-with-floating-images2-expected.txt: Added.
        * fast/block/basic/inline-content-with-floating-images2.html: Added.
        * platform/ios/TestExpectations:

2018-10-29  Tadeu Zagallo  <tzagallo@apple.com>

        New bytecode format for JSC
        https://bugs.webkit.org/show_bug.cgi?id=187373
        <rdar://problem/44186758>

        Reviewed by Filip Pizlo.

        Don't use recursion on `equal` to avoid premature stack overflows when testing deep arrays.

        * fast/dom/Window/resources/postmessage-test.js:

2018-10-28  Michael Catanzaro  <mcatanzaro@igalia.com>

        Unreviewed, one more GTK expectations fix

        * platform/gtk/inspector/canvas/recording-bitmaprenderer-expected.txt:

2018-10-28  Michael Catanzaro  <mcatanzaro@igalia.com>

        Unreviewed, fix a few more expectations from yesterday

        These should be timeouts!

        * platform/gtk/TestExpectations:

2018-10-28  Michael Catanzaro  <mcatanzaro@igalia.com>

        Unreviewed, attempt to fix missing trailing whitespace in new expectations

        * platform/gtk/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-validity-badInput-expected.txt:
        * platform/gtk/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-willValidate-expected.txt:
        * platform/gtk/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/selection-expected.txt:

2018-10-27  Michael Catanzaro  <mcatanzaro@igalia.com>

        Unreviewed, fix content added by a stray Ctrl+V

        * platform/gtk/TestExpectations:

2018-10-27  Michael Catanzaro  <mcatanzaro@igalia.com>

        Unreviewed GTK test gardening

        * TestExpectations:
        * platform/gtk/TestExpectations:
        * platform/gtk/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-validity-badInput-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-willValidate-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/selection-expected.txt: Added.
        * platform/gtk/inspector/canvas/recording-bitmaprenderer-expected.txt: Added.

2018-10-27  Matt Baker  <mattbaker@apple.com>

        Web Inspector: Table should support deleting rows
        https://bugs.webkit.org/show_bug.cgi?id=189803
        <rdar://problem/44655709>

        Reviewed by Devin Rousso.

        * inspector/table/resources/table-utilities.js:
        (TestPage.registerInitializer.InspectorTest.TableDelegate.prototype.tableDidRemoveRows):
        (TestPage.registerInitializer.createDataSource):
        (TestPage.registerInitializer.InspectorTest.createTable):
        (TestPage.registerInitializer.InspectorTest.createTableWithDelegate):
        (TestPage.registerInitializer):
        Update table test utilities to keep TableDataSource backing array in
        sync when rows are removed. Also allow the number of table rows to be
        specified when creating a table for testing.

        * inspector/table/table-remove-rows-expected.txt: Added.
        * inspector/table/table-remove-rows.html: Added.
        Add tests for new Table methods `removeRow(rowIndex)` and `removeSelectedRows()`.

        * inspector/unit-tests/index-set-expected.txt:
        * inspector/unit-tests/index-set.html:
        Add tests for new IndexSet method `copy()`.

2018-10-26  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r237479 and r237484.
        https://bugs.webkit.org/show_bug.cgi?id=190978

        broke JSC on iOS (Requested by tadeuzagallo on #webkit).

        Reverted changesets:

        "New bytecode format for JSC"
        https://bugs.webkit.org/show_bug.cgi?id=187373
        https://trac.webkit.org/changeset/237479

        "Gardening: Build fix after r237479."
        https://bugs.webkit.org/show_bug.cgi?id=187373
        https://trac.webkit.org/changeset/237484

2018-10-26  Tadeu Zagallo  <tzagallo@apple.com>

        New bytecode format for JSC
        https://bugs.webkit.org/show_bug.cgi?id=187373
        <rdar://problem/44186758>

        Reviewed by Filip Pizlo.

        Don't use recursion on `equal` to avoid premature stack overflows when testing deep arrays.

        * fast/dom/Window/resources/postmessage-test.js:

2018-10-26  Antoine Quint  <graouts@apple.com>

        [Web Animations] Remove useless internals methods
        https://bugs.webkit.org/show_bug.cgi?id=190968

        Reviewed by Dean Jackson.

        Remove a test that is no longer useful.

        * webanimations/animation-creation-addition-expected.txt: Removed.
        * webanimations/animation-creation-addition.html: Removed.

2018-10-26  Per Arne Vollan  <pvollan@apple.com>

        [High Sierra/Sierra Release] Layout Test media/track/track-cue-css.html is a flaky image failure
        https://bugs.webkit.org/show_bug.cgi?id=190876

        Unreviewed test fix.

        This is a speculative flakiness fix.

        * media/track/track-cue-css-expected.html:
        * media/track/track-cue-css.html:

2018-10-26  Zalan Bujtas  <zalan@apple.com>

        [iOS] Unreviewed test gardening.

        * platform/ios/TestExpectations:

2018-10-26  Ali Juma  <ajuma@chromium.org>

        [GTK] Unreviewed test gardening.
        https://bugs.webkit.org/show_bug.cgi?id=190962

        Add a baseline for the test added in r237449.

        * platform/gtk/fast/repaint/text-selection-overflow-hidden-expected.txt: Added.

2018-10-26  Zalan Bujtas  <zalan@apple.com>

        [LFC][IFC] Layout floats as part of the inline content
        https://bugs.webkit.org/show_bug.cgi?id=190942

        Reviewed by Antti Koivisto.

        * fast/block/basic/inline-content-with-floating-image-expected.txt: Added.
        * fast/block/basic/inline-content-with-floating-image.html: Added.

2018-10-26  Alicia Boya García  <aboya@igalia.com>

        [MSE][WTF][Media] Invalid MediaTime should be falsy
        https://bugs.webkit.org/show_bug.cgi?id=190893

        Reviewed by Jer Noble.

        A test is added that replicates a bug fixed by this patch.

        * media/media-source/media-source-timestampoffset-then-zero-expected.txt: Added.
        * media/media-source/media-source-timestampoffset-then-zero.html: Added.

2018-10-26  Ali Juma  <ajuma@chromium.org>

        REGRESSION (r237255): Text selection is broken in form fields
        https://bugs.webkit.org/show_bug.cgi?id=190899

        Reviewed by Ryosuke Niwa.

        Add layout test coverage.

        * fast/repaint/text-selection-overflow-hidden-expected.txt: Added.
        * fast/repaint/text-selection-overflow-hidden.html: Added.
        * platform/win/fast/repaint/text-selection-overflow-hidden-expected.txt: Added.

2018-10-25  Ryan Haddad  <ryanhaddad@apple.com>

        Layout Test http/tests/websocket/tests/hybi/handshake-ok-with-legacy-sec-websocket-response-headers.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=173041

        Unreviewed test gardening.

        * platform/ios/TestExpectations: Mark test as flaky.

2018-10-25  Devin Rousso  <drousso@apple.com>

        Web Inspector: Canvas Recording loading goes significantly slower when "Frame" tree element is expanded
        https://bugs.webkit.org/show_bug.cgi?id=190497

        Reviewed by Joseph Pecoraro.

        * inspector/unit-tests/set-utilities-expected.txt: Added.
        * inspector/unit-tests/set-utilities.html: Added.

2018-10-25  Dawei Fenton  <realdawei@apple.com>

        Layout Test compositing/iframes/display-none-subframe.html is a flaky failure.
        https://bugs.webkit.org/show_bug.cgi?id=186406

        Unreviewed.

        * platform/mac-wk1/TestExpectations: Mark test flaky.

2018-10-25  Devin Rousso  <drousso@apple.com>

        Web Inspector: display fullscreen enter/exit events in Timelines and Network node waterfalls
        https://bugs.webkit.org/show_bug.cgi?id=189874
        <rdar://problem/44700000>

        Reviewed by Joseph Pecoraro.

        * http/tests/inspector/dom/didFireEvent-expected.txt:
        * http/tests/inspector/dom/didFireEvent.html:

2018-10-25  Alexey Proskuryakov  <ap@apple.com>

        https://bugs.webkit.org/show_bug.cgi?id=175597
        XMLHttpRequest should not sniff content encoding

        Actually, the discussion in Bugzilla claims that it should always have worked on
        iOS. Not sure why the test was not enabled from the start.

        * platform/ios/TestExpectations:

2018-10-25  Alexey Proskuryakov  <ap@apple.com>

        Update test results for https://bugs.webkit.org/show_bug.cgi?id=175597
        XMLHttpRequest should not sniff content encoding

        This code doesn't work like planned on macOS High Sierra, and I'm not sure what's
        up with iOS and other platforms. But I can to re-enable the test for Mojave.

        * platform/mac/TestExpectations: As expected, this test is passing on macOS Mojave.

2018-10-25  Per Arne Vollan  <pvollan@apple.com>

        [High Sierra/Sierra Release] Layout Test media/track/track-cue-css.html is a flaky image failure
        https://bugs.webkit.org/show_bug.cgi?id=190876

        Reviewed by Alexey Proskuryakov.

        This is a speculative fix; avoid an unnecessary video seek step in test.

        * media/track/track-cue-css-expected.html:
        * media/track/track-cue-css.html:

2018-10-25  Chris Dumez  <cdumez@apple.com>

        REGRESSION (236779) scandinaviandesigns.com product pages auto redirect to product image
        https://bugs.webkit.org/show_bug.cgi?id=190891
        <rdar://problem/45296796>

        Reviewed by Antti Koivisto.

        Add layout test coverage.

        * fast/dom/HTMLInputElement/radio-element-fires-change-event-only-when-checked-state-changes-expected.txt: Added.
        * fast/dom/HTMLInputElement/radio-element-fires-change-event-only-when-checked-state-changes.html: Added.

2018-10-25  Frederic Wang  <fwang@igalia.com>

        Unreviewed test gardening.

        * platform/ios-wk1/TestExpectations: Add failures for tests requiring findString.
        * platform/ios-wk1/fast/scrolling/adjust-scroll-offset-on-zoom-expected.txt: Added. Adjust
        expectation to handle whitespace difference.
        * platform/ios-wk1/fast/scrolling/scrolling-tree-includes-frame-expected.txt: Added. The
        scrolling tree is not displayed on WK1.

2018-10-25  Frederic Wang  <fwang@igalia.com>

        Add more tests for the Find UI
        https://bugs.webkit.org/show_bug.cgi?id=190823

        Reviewed by Antonio Gomes.

        We add more tests for iOS's find UI to cover cases fixed by r224284. Equivalent tests for
        subframes currently fails when frame flattening is disabled, they will be handled in bug
        184297.

        * platform/ios/fast/scrolling/find-text-in-overflow-node-indicator-position-expected.png: Added.
        * platform/ios/fast/scrolling/find-text-in-overflow-node-indicator-position-expected.txt: Added.
        * platform/ios/fast/scrolling/find-text-in-overflow-node-indicator-position-limit-expected.png: Added.
        * platform/ios/fast/scrolling/find-text-in-overflow-node-indicator-position-limit-expected.txt: Added.
        * platform/ios/fast/scrolling/find-text-in-overflow-node-indicator-position-limit.html: Added.
        Test with a match at the limit of the scrolling element.
        * platform/ios/fast/scrolling/find-text-in-overflow-node-indicator-position.html: Added. Test
        with a match at the middle of the scrolling element.
        * platform/ios/fast/scrolling/find-text-in-overflow-node.html: Use names for parameters to
        make it more explicit.
        * platform/ios/fast/scrolling/find-text-in-subframe-expected.txt: Added.
        * platform/ios/fast/scrolling/find-text-in-subframe.html: Added. Test with a subframe instead
        of an overflow node.

2018-10-25  Jiewen Tan  <jiewen_tan@apple.com>

        [WPT] Update resource-timing WPT tests to use the right cross origin
        https://bugs.webkit.org/show_bug.cgi?id=190554

        Reviewed by Youenn Fablet.

        * TestExpectations:

2018-10-24  Tim Horton  <timothy_horton@apple.com>

        Attachment filenames with RTL characters should format similar to Finder
        https://bugs.webkit.org/show_bug.cgi?id=190736
        <rdar://problem/44735946>

        Reviewed by Dan Bernstein.

        * fast/attachment/attachment-title-with-rtl-expected.html: Added.
        * fast/attachment/attachment-title-with-rtl.html: Added.
        Add a test that directionality marks in the attachment's title are
        isolated from the file extension.

2018-10-24  Megan Gardner  <megan_gardner@apple.com>

        Turn on Conic Gradients
        https://bugs.webkit.org/show_bug.cgi?id=190810

        Reviewed by Tim Horton.

        No longer necessary to manually turn on conic gradients for testing.

        * http/wpt/css/css-images-4/conic-gradient-parsing.html:

2018-10-11  Jiewen Tan  <jiewen_tan@apple.com>

        Only report resource timing to parent frame for the first iframe load
        https://bugs.webkit.org/show_bug.cgi?id=190498
        <rdar://problem/44347398>

        Reviewed by Youenn Fablet.

        The layout test is from Chromium change:
        https://chromium-review.googlesource.com/c/chromium/src/+/1186215.

        * http/tests/misc/resource-timing-navigation-in-restored-iframe-expected.txt: Added.
        * http/tests/misc/resource-timing-navigation-in-restored-iframe.html: Added.
        * http/tests/misc/resources/alert-then-back.html: Added.
        * http/tests/misc/resources/navigate-on-message.html: Added.
        * http/tests/misc/resources/post-message-to-parent.html: Added.

2018-10-24  Ryan Haddad  <ryanhaddad@apple.com>

        [macOS] Layout Test legacy-animation-engine/animations/suspend-resume-animation.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=190883

        Unreviewed test gardening.

        * platform/mac/TestExpectations: Mark test as flaky.

2018-10-24  Matt Lewis  <jlewis3@apple.com>

        Marked webgl/1.0.2/conformance/glsl/misc/shader-with-reserved-words.html as a flaky timout.
        https://bugs.webkit.org/show_bug.cgi?id=170877

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2018-10-24  Truitt Savell  <tsavell@apple.com>

        Marking Multiple tests as flakey at once
        https://bugs.webkit.org/show_bug.cgi?id=190847

        Unreviewed Test Gardening

        * platform/ios-wk2/TestExpectations:
        * platform/mac-wk1/TestExpectations:
        * platform/mac-wk2/TestExpectations:

2018-10-24  Andy Estes  <aestes@apple.com>

        [macOS Debug WK2] Layout Test http/tests/ssl/applepay/ApplePayShippingAddressChangeEventErrorsV3.https.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=190650
        <rdar://problem/45341914>

        Reviewed by Alex Christensen.

        * http/tests/resources/payment-request.js:
        (updateDetailsOnShippingAddressChange):

2018-10-23  Jer Noble  <jer.noble@apple.com>

        TextTrack cues should be updated more often than every 250ms.
        https://bugs.webkit.org/show_bug.cgi?id=190827

        Reviewed by Eric Carlson.

        Add a LayoutTest which plays back 6s of captions, each 50 ms in duration, and uses
        when the "enter" and "exit" were fired (in media time) to check whether they were missed
        or not. The test succeeds if fewer than 50 of the 120 cues were missed.

        * media/track/track-cue-missing-expected.txt: Added.
        * media/track/track-cue-missing.html: Added.

2018-10-23  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r237261.

        The layout test for this change crashes under GuardMalloc.

        Reverted changeset:

        "Handle MDNS resolution of candidates through libwebrtc
        directly"
        https://bugs.webkit.org/show_bug.cgi?id=190681
        https://trac.webkit.org/changeset/237261

2018-10-23  Joseph Pecoraro  <pecoraro@apple.com>

        Web Inspector: Remove unused css-rules pretty printing test expectation
        https://bugs.webkit.org/show_bug.cgi?id=190834

        Reviewed by Matt Baker.

        * inspector/codemirror/prettyprinting-css-rules-expected.txt: Removed.

2018-10-23  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r237280.

        Causes fast/box-shadow/box-shadow-with-zero-radius.html to
        fail on iOS Simulator.

        Reverted changeset:

        "[CG] Adopt CG SPI for non-even cornered rounded rects"
        https://bugs.webkit.org/show_bug.cgi?id=190155
        https://trac.webkit.org/changeset/237280

2018-10-23  Ryan Haddad  <ryanhaddad@apple.com>

        [macOS Debug WK1] Layout Test inspector/codemirror/prettyprinting-css.html is a flaky timeout
        https://bugs.webkit.org/show_bug.cgi?id=190833

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations: Mark test as slow.

2018-10-23  Truitt Savell  <tsavell@apple.com>

        [ MacOS Debug WK1 ] Layout Test fast/forms/state-restore-to-non-edited-controls.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=190832

        Unreviewed Test Gardening.

        * platform/mac-wk1/TestExpectations:

2018-10-23  Ryan Haddad  <ryanhaddad@apple.com>

        Layout Test imported/w3c/web-platform-tests/html/semantics/embedded-content/media-elements/ready-states/autoplay-with-slow-text-tracks.html is flaky.
        https://bugs.webkit.org/show_bug.cgi?id=176929

        Unreviewed test gardening.

        * platform/mac/TestExpectations: Mark test as flaky.

2018-10-23  Ryan Haddad  <ryanhaddad@apple.com>

        REGRESSION (r236501?): Layout Test compositing/geometry/limit-layer-bounds-opacity-transition.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=190210

        Unreviewed test gardening.

        * platform/mac/TestExpectations: Mark test as flaky.

2018-10-22  Justin Michaud  <justin_michaud@apple.com>

        Registered custom properties should support syntax parameter for <length> and *
        https://bugs.webkit.org/show_bug.cgi?id=190039

        Reviewed by Antti Koivisto.

        Add tests for inline styles, font-size cycles with custom properties, and a crash that was reported.

        * css-custom-properties-api/crash-expected.txt: Added.
        * css-custom-properties-api/crash.html: Added.
        * css-custom-properties-api/cycles-expected.txt: Added.
        * css-custom-properties-api/cycles.html: Added.
        * css-custom-properties-api/inline-expected.txt: Added.
        * css-custom-properties-api/inline.html: Added.

2018-10-22  Ryan Haddad  <ryanhaddad@apple.com>

        REGRESSION: [iOS] Layout Test media/media-fullscreen-pause-inline.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=187618

        Unreviewed test gardening.

        * platform/ios/TestExpectations: Mark test as flaky.

2018-10-22  Justin Michaud  <justin_michaud@apple.com>

        CSS Paint API should give a 2d rendering context
        https://bugs.webkit.org/show_bug.cgi?id=190762

        Reviewed by Dean Jackson.

        * fast/css-custom-paint/basic.html:

2018-10-22  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, update TestExpectations for imported/w3c/web-platform-tests/fetch/nosniff/importscripts.html.
        https://bugs.webkit.org/show_bug.cgi?id=157068

        * TestExpectations: Mark test as a flaky failure for release builds.
        * platform/mac-wk1/TestExpectations: Remove duplicate expectation.

2018-10-22  Dawei Fenton  <realdawei@apple.com>

        REGRESSION (r234330): [mac-wk1] Layout Test fast/repaint/animation-after-layer-scroll.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=188421

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations: Mark test as flaky.

2018-10-22  Ryan Haddad  <ryanhaddad@apple.com>

        [ Mojave WK1 ] Layout Test storage/indexeddb/database-odd-names.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=190350

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations: Mark test as failing.

2018-10-22  Ryan Haddad  <ryanhaddad@apple.com>

        [macOS WK1] Layout Test http/tests/security/cross-origin-xsl-redirect-BLOCKED.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=189723

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations: Mark test as flaky.

2018-10-22  Ali Juma  <ajuma@chromium.org>

        Layout Test imported/w3c/web-platform-tests/intersection-observer/containing-block.html is a flaky failure on Debug builds
        https://bugs.webkit.org/show_bug.cgi?id=190808

        Unreviewed test gardening.

        * TestExpectations:

2018-10-22  Dawei Fenton  <realdawei@apple.com>

        Some WK1 repaint tests are flaky on Mojave
        https://bugs.webkit.org/show_bug.cgi?id=190627

        Unreviewed, marked tests as flaky.

        * platform/mac-wk1/TestExpectations:

2018-10-22  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] [Datalist] fast/forms/datalist/datalist-show-hide.html fails
        https://bugs.webkit.org/show_bug.cgi?id=190777

        Reviewed by Tim Horton.

        Refactor this test such that it passes on both iOS and macOS. This test verifies that datalist suggestions menu
        UI can be shown and hidden. On macOS, we focus and then blur the input field; on iOS, we tap in the datalist
        button to show the suggestions UI, and then tap in the text field to bring back the regular keyboard.

        * fast/forms/datalist/datalist-show-hide-expected.txt:
        * fast/forms/datalist/datalist-show-hide.html:
        * platform/ios/TestExpectations:

        Unskip the layout test on iOS.

        * resources/ui-helper.js:
        (window.UIHelper.isShowingDataListSuggestions):

        Tweak this helper function to resolve with either true or false (Boolean types), instead of the strings "true"
        and "false".

2018-10-22  Truitt Savell  <tsavell@apple.com>

        [ MacOS WK1 ] Layout Test platform/mac/media/audio-session-category-video-paused.html is flaky Timeout 
        https://bugs.webkit.org/show_bug.cgi?id=189680

        Unreviewed Test Gardening

        * platform/mac-wk1/TestExpectations:

2018-10-20  Daniel Bates  <dabates@apple.com>

        Unskip test fast/writing-mode/english-rl-text-with-spelling-marker.html in iOS WebKit2

        Following r235149 we mark spelling errors in iOS WebKit2.

        * platform/ios-wk1/TestExpectations: Skip in legacy WebKit until we fix <https://webkit.org/b/188762>.
        * platform/ios/TestExpectations: Unskip test.

2018-10-19  Justin Fan  <justin_fan@apple.com>

        [WebGPU] Add stubs for WebGPUSwapChain and WebGPURenderingContext
        https://bugs.webkit.org/show_bug.cgi?id=190742

        Reviewed by Dean Jackson.

        Updated basic webgpu feature detection test to check for WebGPURenderingContext.

        * webgpu/webgpu-enabled-expected.txt: 
        * webgpu/webgpu-enabled.html:

2018-10-19  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] [Datalist] Can't pick datalist suggestions in a stock WKWebView
        https://bugs.webkit.org/show_bug.cgi?id=190621
        <rdar://problem/45310649>

        Reviewed by Tim Horton.

        Refactor an existing layout test to run on both iOS and macOS. On both platforms, it checks that the top
        suggestion respects option element order in the document, as well as the current contents of the text field.
        On macOS, we use arrow keys and hit return to select a suggestion; on iOS, we tap the suggestions button and
        simulate hitting the done button on the input view to dismiss the keyboard.

        * fast/forms/datalist/datalist-textinput-suggestions-order-expected.txt:
        * fast/forms/datalist/datalist-textinput-suggestions-order.html:
        * platform/ios/TestExpectations:

        Enable this test on iOS.

        * resources/ui-helper.js:
        (window.UIHelper.resignFirstResponder):
        (window.UIHelper):

2018-10-19  John Wilander  <wilander@apple.com>

        Only cap lifetime of persistent cookies created client-side through document.cookie when resource load statistics is enabled
        https://bugs.webkit.org/show_bug.cgi?id=190687
        <rdar://problem/45349024>

        Reviewed by Alex Christensen.

        The test case now makes use of internals.setResourceLoadStatisticsEnabled()
        and was thus moved to http/tests/resourceLoadStatistics/.

        * TestExpectations:
            Removed skip of previous test location.
        * http/tests/resourceLoadStatistics/capped-lifetime-for-cookie-set-in-js-expected.txt: Renamed from LayoutTests/http/tests/cookies/capped-lifetime-for-cookie-set-in-js-expected.txt.
        * http/tests/resourceLoadStatistics/capped-lifetime-for-cookie-set-in-js.html: Renamed from LayoutTests/http/tests/cookies/capped-lifetime-for-cookie-set-in-js.html.
        * http/tests/webAPIStatistics/canvas-read-and-write-data-collection-expected.txt:
            Removed line containing "isMarkedForCookieBlocking: No."
        * http/tests/webAPIStatistics/font-load-data-collection-expected.txt:
            Removed line containing "isMarkedForCookieBlocking: No."
        * http/tests/webAPIStatistics/navigator-functions-accessed-data-collection-expected.txt:
            Removed line containing "isMarkedForCookieBlocking: No."
        * http/tests/webAPIStatistics/screen-functions-accessed-data-collection-expected.txt:
            Removed line containing "isMarkedForCookieBlocking: No."
        * platform/ios/TestExpectations:
            Removed pass of previous test location. The whole http/tests/resourceLoadStatistics/ is marked pass for relevant platforms.
        * platform/mac-wk2/TestExpectations:
            Removed pass of previous test location. The whole http/tests/resourceLoadStatistics/ is marked pass for relevant platforms.

2018-10-19  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r237254.
        https://bugs.webkit.org/show_bug.cgi?id=190760

        "It regresses JetStream 2 by 5% on some iOS devices"
        (Requested by saamyjoon on #webkit).

        Reverted changeset:

        "[JSC] JSC should have "parseFunction" to optimize Function
        constructor"
        https://bugs.webkit.org/show_bug.cgi?id=190340
        https://trac.webkit.org/changeset/237254

2018-10-19  Charlie Turner  <cturner@igalia.com>

        [EME] Fix crash during tracing in  gst_qtdemux_request_protection_context
        https://bugs.webkit.org/show_bug.cgi?id=190738

        Reviewed by Xabier Rodriguez-Calvar.

        Add failing test expectations for the GTK port. These tests are
        not mirrored in the top-level TestExpectations file, since there
        are no passing baselines for these tests there. The testing
        infrastructure will report them as unexpected passing when they
        are marked as [ Failure ] there, since their output matches the
        failing output in this directory, and if you don't have an
        expected test, then they fail as [ Missing ], and putting failing
        baselines in the top-level cross-platform directory also seem
        wrong...

        The following two tests produce a dumpRenderTree output for
        unknown reasons, and so they have been marked as Missing for now.

        platform/gtk/imported/w3c/web-platform-tests/encrypted-media/resources/clearkey-retrieve-destroy-persistent-license.html
        platform/gtk/imported/w3c/web-platform-tests/encrypted-media/resources/clearkey-retrieve-persistent-license.html

        * platform/gtk/TestExpectations: Update expectations.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearKey-encrypted-webm-event-mse-actual.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-persistent-license-events.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-persistent-usage-record-events.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-persistent-usage-record.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-retrieve-persistent-usage-record.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-encrypted-clear.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-events.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-multikey-sequential-readyState.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-multikey-sequential.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-setMediaKeys-after-src.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-requestmediakeysystemaccess.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-reset-src-after-setmediakeys.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-syntax-mediakeys.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-unique-origin.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-update-disallowed-input.https-expected.txt: Added.
        * platform/gtk/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-waiting-for-a-key.https-expected.txt: Added.

2018-10-18  Said Abou-Hallawa  <sabouhallawa@apple.com>

        [CG] Adopt CG SPI for non-even cornered rounded rects
        https://bugs.webkit.org/show_bug.cgi?id=190155

        Reviewed by Simon Fraser.

        This test fails on iOS simulator because of just one pixel difference.
        I think it happens because of anti aliasing the color at the border of
        the black shadow. Since this test is testing the radius attribute of the
        CSS box-shadow and this should not be affected by whether the shadow has
        non-even rounded corners or not, I am going to change it to have even 
        rounded corners.

        * fast/box-shadow/box-shadow-with-zero-radius-expected.html:
        * fast/box-shadow/box-shadow-with-zero-radius.html:

2018-10-18  Justin Fan  <justin_fan@apple.com>

        Add test expectations for webgpu-enabled.html
        https://bugs.webkit.org/show_bug.cgi?id=190739

        Unreviewed test gardening.

        Added forgotten expectations for webgpu-enabled, and updated some expectations 
        to match the WebGPU -> WebMetal naming and new WebGPU tests.

        * platform/ios/TestExpectations:
        * platform/mac-wk1/TestExpectations:
        * platform/win/TestExpectations:
        * platform/wincairo/TestExpectations:
        * platform/wpe/TestExpectations:
        * webgpu/webgpu-enabled-expected.txt: Added.

2018-10-18  Justin Michaud  <justin_michaud@apple.com>

        Add new image type for CSS painting API
        https://bugs.webkit.org/show_bug.cgi?id=190697

        Reviewed by Dean Jackson.

        * fast/css-custom-paint/basic-expected.txt:
        * fast/css-custom-paint/basic.html:

2018-10-18  Jer Noble  <jer.noble@apple.com>

        [MSE] timestampOffset can introduce floating-point rounding errors to incoming samples
        https://bugs.webkit.org/show_bug.cgi?id=190590
        <rdar://problem/45275626>

        Reviewed by Eric Carlson.

        * media/media-source/media-source-sequence-timestamps-expected.txt:
        * media/media-source/media-source-timestampoffset-rounding-error-expected.txt: Added.
        * media/media-source/media-source-timestampoffset-rounding-error.html: Added.
        * media/media-source/mock-media-source.js:
        (makeASample):

2018-10-18  Jer Noble  <jer.noble@apple.com>

        Enable WKPreferences._lowPowerVideoAudioBufferSizeEnabled by default
        https://bugs.webkit.org/show_bug.cgi?id=190315
        <rdar://problem/45047807>

        Reviewed by Eric Carlson.

        * media/audio-controls-timeline-in-media-document-expected.txt:
        * media/audio-controls-timeline-in-media-document.html:

2018-10-18  Jer Noble  <jer.noble@apple.com>

        Safari is not able to adapt between H264 streams with EditList and without EditList
        https://bugs.webkit.org/show_bug.cgi?id=190638
        <rdar://problem/45342208>

        Reviewed by Eric Carlson.

        * media/media-source/media-source-append-overlapping-dts-expected.txt: Added.
        * media/media-source/media-source-append-overlapping-dts.html: Added.

2018-10-18  Per Arne Vollan  <pvollan@apple.com>

        [WebVTT] Region parameter and value should be separated by ':'
        https://bugs.webkit.org/show_bug.cgi?id=190735

        Reviewed by Eric Carlson.

        * media/track/captions-webvtt/captions-regions.vtt:
        * media/track/captions-webvtt/header-regions.vtt:

2018-10-18  Jer Noble  <jer.noble@apple.com>

        Add support for MediaKeyEncryptionScheme
        https://bugs.webkit.org/show_bug.cgi?id=190173

        Reviewed by Eric Carlson.

        * media/encrypted-media/mock-navigator-requestMediaKeySystemAccess-expected.txt:
        * media/encrypted-media/mock-navigator-requestMediaKeySystemAccess.html:

2018-10-18  Youenn Fablet  <youenn@apple.com>

        Handle MDNS resolution of candidates through libwebrtc directly
        https://bugs.webkit.org/show_bug.cgi?id=190681

        Reviewed by Eric Carlson.

        * TestExpectations:
        Test should no longer be flaky as we no longer enforce a timer for resolving MDNS candidates.

2018-10-18  Ross Kirsling  <ross.kirsling@sony.com>

        delete expression should not throw without a reference
        https://bugs.webkit.org/show_bug.cgi?id=190637

        Reviewed by Yusuke Suzuki.

        * js/basic-strict-mode-expected.txt:
        * js/script-tests/basic-strict-mode.js:
        Update test cases.

2018-10-18  Wenson Hsieh  <wenson_hsieh@apple.com>

        [GTK] fast/selectors/read-only-read-write-input-basics.html failing since r237245
        https://bugs.webkit.org/show_bug.cgi?id=190711

        Unreviewed test gardening.

        Adjust layout test baselines after r237245. Make fast/selectors/read-only-read-write-input-basics-expected.txt
        contain PASS expectations for color inputs, and remove port-specific iOS/macOS WebKit2 expectations. Since color
        inputs are disabled in legacy WebKit, move the layout test expectation in platform/mac to platform/mac-wk1.

        * fast/selectors/read-only-read-write-input-basics-expected.txt:
        * platform/ios-wk2/fast/selectors/read-only-read-write-input-basics-expected.txt: Removed.
        * platform/mac-wk2/fast/selectors/read-only-read-write-input-basics-expected.txt: Removed.

2018-10-18  Miguel Gomez  <magomez@igalia.com>

        Unreviewed GTK+ gardening after r237249.

        * platform/gtk/TestExpectations:
        * platform/gtk/fast/forms/fieldset/fieldset-elements-htmlcollection-expected.txt: Added.

2018-10-18  Yusuke Suzuki  <yusukesuzuki@slowstart.org>

        [JSC] JSC should have "parseFunction" to optimize Function constructor
        https://bugs.webkit.org/show_bug.cgi?id=190340

        Reviewed by Mark Lam.

        * fast/dom/attribute-event-listener-errors-expected.txt:
        * fast/events/attribute-listener-deletion-crash-expected.txt:
        * fast/events/window-onerror-syntax-error-in-attr-expected.txt:
        * js/dom/invalid-syntax-for-function-expected.txt:
        * js/dom/script-start-end-locations-expected.txt:

2018-10-17  Wenson Hsieh  <wenson_hsieh@apple.com>

        Enable the datalist element by default on iOS and macOS
        https://bugs.webkit.org/show_bug.cgi?id=190594
        <rdar://problem/45281159>

        Reviewed by Ryosuke Niwa and Tim Horton.

        * TestExpectations:

        Mark a couple of datalist tests as failures, with corresponding Bugzilla links.

        * fast/forms/datalist/datalist-fallback-content-expected.html:
        * fast/forms/datalist/datalist-fallback-content.html:

        Refactor this ref test. This was checking that a text input field with an associated datalist with fallback
        content looks identical to an text input field without a datalist, but this simply isn't the case with our
        current implementation due to the presence of the list button. Instead, add a div to cover the list button in
        both cases, and further augment this test to check that inputs of type color behave the same.

        * fast/forms/datalist/range-snap-to-datalist-expected.txt: Added.

        Add missing expectations for this test that were never checked in. Since sliderTickSnappingThreshold simply
        returns 0, this test behaves as expected, though behavior here may change when we add a make the "snapping
        threshold" nonzero.

        * fast/forms/datalist/validity-assertion-inserting-into-datalist-expected.txt: Renamed from LayoutTests/fast/forms/validity-assertion-inserting-into-datalist-expected.txt.
        * fast/forms/datalist/validity-assertion-inserting-into-datalist.html: Renamed from LayoutTests/fast/forms/validity-assertion-inserting-into-datalist.html.
        * fast/selectors/read-only-read-write-input-basics-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/dom/reflection-forms-expected.txt:
        * platform/ios-simulator/fast/forms/datalist/datalist-searchinput-appearance-expected.txt: Added.
        * platform/ios-simulator/fast/forms/datalist/datalist-textinput-appearance-expected.txt: Added.

        Add missing expectations.

        * platform/ios-wk1/TestExpectations:

        Don't run datalist tests in WebKitLegacy by marking them as [ WontFix ].

        * platform/ios-wk2/accessibility/roles-exposed-expected.txt: Added.
        * platform/ios-wk2/fast/borders/empty-outline-border-assert-expected.txt: Added.
        * platform/ios-wk2/fast/dom/Window/window-lookup-precedence-expected.txt: Added.
        * platform/ios-wk2/fast/forms/label/labelable-elements-expected.txt: Added.
        * platform/ios-wk2/fast/forms/label/readwrite-readonly-expected.txt: Copied from LayoutTests/platform/mac/imported/w3c/web-platform-tests/html/semantics/selectors/pseudo-classes/readwrite-readonly-expected.txt.
        * platform/ios-wk2/fast/selectors/read-only-read-write-input-basics-expected.txt: Copied from LayoutTests/fast/selectors/read-only-read-write-input-basics-expected.txt.
        * platform/ios-wk2/imported/w3c/web-platform-tests/custom-elements/builtin-coverage-expected.txt: Added.
        * platform/ios-wk2/imported/w3c/web-platform-tests/dom/nodes/Node-cloneNode-expected.txt: Added.
        * platform/ios-wk2/imported/w3c/web-platform-tests/html/dom/documents/dom-tree-accessors/document.getElementsByName/document.getElementsByName-newelements-expected.txt: Added.
        * platform/ios-wk2/imported/w3c/web-platform-tests/html/dom/documents/dom-tree-accessors/document.getElementsByName/document.getElementsByName-newelements-xhtml-expected.txt: Added.
        * platform/mac-wk2/imported/w3c/web-platform-tests/html/dom/reflection-forms-expected.txt: Copied from LayoutTests/platform/mac/imported/w3c/web-platform-tests/html/dom/reflection-forms-expected.txt.
        * platform/ios-wk2/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-validity-badInput-expected.txt: Copied from LayoutTests/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-validity-badInput-expected.txt.
        * platform/ios-wk2/imported/w3c/web-platform-tests/html/semantics/forms/textfieldselection/selection-not-application-expected.txt:
        * platform/ios-wk2/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/selection-expected.txt: Copied from LayoutTests/platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/selection-expected.txt.
        * platform/ios-wk2/imported/w3c/web-platform-tests/html/semantics/interfaces-expected.txt:
        * platform/ios-wk2/imported/w3c/web-platform-tests/html/semantics/selectors/pseudo-classes/readwrite-readonly-expected.txt: Copied from LayoutTests/platform/mac/imported/w3c/web-platform-tests/html/semantics/selectors/pseudo-classes/readwrite-readonly-expected.txt.
        * platform/ios-wk2/imported/w3c/web-platform-tests/shadow-dom/input-element-list-expected.txt: Added.
        * platform/ios-wk2/mathml/presentation/foreign-element-in-token-expected.txt: Added.

        Add baselines for WebKit2, where we enable the datalist element and color inputs.

        * platform/ios/TestExpectations:
        * platform/mac-wk1/TestExpectations:

        Don't run datalist tests in WebKitLegacy by marking them as [ WontFix ].

        * platform/mac-wk2/accessibility/roles-exposed-expected.txt: Copied from LayoutTests/platform/mac/accessibility/roles-exposed-expected.txt.
        * platform/mac-wk2/fast/borders/empty-outline-border-assert-expected.txt: Added.
        * platform/mac-wk2/fast/dom/Window/window-lookup-precedence-expected.txt: Added.
        * platform/mac-wk2/fast/forms/label/labelable-elements-expected.txt: Added.
        * platform/mac-wk2/fast/forms/label/readwrite-readonly-expected.txt: Copied from LayoutTests/platform/mac/imported/w3c/web-platform-tests/html/semantics/selectors/pseudo-classes/readwrite-readonly-expected.txt.
        * platform/mac-wk2/fast/selectors/read-only-read-write-input-basics-expected.txt: Copied from LayoutTests/fast/selectors/read-only-read-write-input-basics-expected.txt.
        * platform/mac-wk2/imported/w3c/web-platform-tests/custom-elements/builtin-coverage-expected.txt: Added.
        * platform/mac-wk2/imported/w3c/web-platform-tests/dom/nodes/Node-cloneNode-expected.txt: Added.
        * platform/mac-wk2/imported/w3c/web-platform-tests/html/dom/documents/dom-tree-accessors/document.getElementsByName/document.getElementsByName-newelements-expected.txt: Added.
        * platform/mac-wk2/imported/w3c/web-platform-tests/html/dom/documents/dom-tree-accessors/document.getElementsByName/document.getElementsByName-newelements-xhtml-expected.txt: Added.
        * platform/mac-wk2/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-validity-badInput-expected.txt: Renamed from LayoutTests/platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-validity-badInput-expected.txt.
        * platform/mac-wk2/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-willValidate-expected.txt: Renamed from LayoutTests/platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-willValidate-expected.txt.
        * platform/mac-wk2/imported/w3c/web-platform-tests/html/semantics/forms/textfieldselection/selection-not-application-expected.txt: Copied from LayoutTests/platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/textfieldselection/selection-not-application-expected.txt.
        * platform/mac-wk2/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/selection-expected.txt: Renamed from LayoutTests/platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/selection-expected.txt.
        * platform/mac-wk2/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/type-change-state-expected.txt: Copied from LayoutTests/platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/type-change-state-expected.txt.
        * platform/mac-wk2/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/valueMode-expected.txt: Copied from LayoutTests/platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/valueMode-expected.txt.
        * platform/mac-wk2/imported/w3c/web-platform-tests/html/semantics/interfaces-expected.txt: Copied from LayoutTests/platform/ios-wk2/imported/w3c/web-platform-tests/html/semantics/interfaces-expected.txt.
        * platform/mac-wk2/imported/w3c/web-platform-tests/html/semantics/selectors/pseudo-classes/readwrite-readonly-expected.txt: Copied from LayoutTests/platform/mac/imported/w3c/web-platform-tests/html/semantics/selectors/pseudo-classes/readwrite-readonly-expected.txt.
        * platform/mac-wk2/imported/w3c/web-platform-tests/shadow-dom/input-element-list-expected.txt: Added.
        * platform/mac-wk2/mathml/presentation/foreign-element-in-token-expected.txt: Added.

        Add baselines for WebKit2, where we enable the datalist element and color inputs.

        * platform/mac/TestExpectations:
        * platform/mac/accessibility/roles-exposed-expected.txt:
        * platform/mac/fast/selectors/read-only-read-write-input-basics-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/textfieldselection/selection-not-application-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/type-change-state-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/valueMode-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/semantics/selectors/pseudo-classes/readwrite-readonly-expected.txt:

        Re-rebaseline test expectations that involve input type color, now that color inputs are off by default in WebKitLegacy.

        * platform/win/TestExpectations:

        Remove various datalist test skips and failures on macOS and iOS; ensure that the test failures that are still
        present are tracked with links to Bugzilla.

2018-10-17  Justin Michaud  <justin_michaud@apple.com>

        Parse paint() and store paint callbacks for CSS Painting API
        https://bugs.webkit.org/show_bug.cgi?id=190657

        Reviewed by Dean Jackson.

        * fast/css-custom-paint/basic-expected.txt:
        * fast/css-custom-paint/basic.html:

2018-10-17  Justin Fan  <justin_fan@apple.com>

        [WebGPU] Implement WebGPU bindings up through WebGPUDevice creation
        https://bugs.webkit.org/show_bug.cgi?id=190653

        Reviewed by Dean Jackson.

        Small test to validate creation of a WebGPUDevice when WebGPU is enabled.

        * webgpu/webgpu-enabled.html: Added.

2018-10-17  Andy Estes  <aestes@apple.com>

        [Apple Pay] Increment the API version to 5
        https://bugs.webkit.org/show_bug.cgi?id=190686
        <rdar://problem/45348523>

        Reviewed by Simon Fraser.

        * http/tests/ssl/applepay/ApplePaySessionV5-expected.txt: Added.
        * http/tests/ssl/applepay/ApplePaySessionV5.html: Added.
        * platform/mac-wk2/TestExpectations:

2018-10-17  Chris Fleizach  <cfleizach@apple.com>

        AX: Certain tags should identify their context to iOS API
        https://bugs.webkit.org/show_bug.cgi?id=190622
        <rdar://problem/45308194>

        Reviewed by Zalan Bujtas.

        * accessibility/ios-simulator/text-context-attributes.html: Added.
        * accessibility/ios-simulator/text-context-attributes-expcted.txt: Added.

2018-10-17  Ali Juma  <ajuma@chromium.org>

        Flaky IntersectionObserver web platform tests involving style updates
        https://bugs.webkit.org/show_bug.cgi?id=189091

        Reviewed by Simon Fraser.

        Remove expectation for tests that are no longer flaky.

        Skip IntersectionObserver tests on WK1.

        * TestExpectations:
        * platform/mac-wk1/TestExpectations:

2018-10-17  Charlie Turner  <cturner@igalia.com>

        [EME] media/encrypted-media/mock-MediaKeySystemAccess.html crashes in CDM::createInstance
        https://bugs.webkit.org/show_bug.cgi?id=190578

        Reviewed by Xabier Rodriguez-Calvar.

        * platform/gtk/TestExpectations:

2018-10-16  Chris Dumez  <cdumez@apple.com>

        Regression(r236795) Check boxes are sometimes checked when they should not be
        https://bugs.webkit.org/show_bug.cgi?id=190651
        <rdar://problem/45319934>

        Reviewed by Ryosuke Niwa.

        Add layout test coverage.

        * fast/dom/HTMLInputElement/checkbox-dirty-checkedness-flag-expected.txt: Added.
        * fast/dom/HTMLInputElement/checkbox-dirty-checkedness-flag.html: Added.

2018-10-16  Chris Dumez  <cdumez@apple.com>

        window.performance should not become null after the window loses its browsing context
        https://bugs.webkit.org/show_bug.cgi?id=190636

        Reviewed by Ryosuke Niwa.

        Extend layout test coverage.

        * http/tests/dom/cross-origin-detached-window-properties-expected.txt:
        * http/tests/dom/cross-origin-detached-window-properties.html:
        * http/tests/dom/same-origin-detached-window-properties-expected.txt:
        * http/tests/dom/same-origin-detached-window-properties.html:

2018-10-16  Timothy Hatcher  <timothy@apple.com>

        Add <meta name="supported-color-schemes"> to control what color schemes the page supports
        https://bugs.webkit.org/show_bug.cgi?id=190526
        rdar://problem/45230140

        Reviewed by Dean Jackson.

        * css-dark-mode/supported-color-schemes-expected.txt: Added.
        * css-dark-mode/supported-color-schemes.html: Added.

2018-10-16  Devin Rousso  <drousso@apple.com>

        Web Inspector: Canvas: capture previously saved states and add them to the recording payload
        https://bugs.webkit.org/show_bug.cgi?id=190473

        Reviewed by Joseph Pecoraro.

        * inspector/canvas/recording-2d-expected.txt:
        * inspector/canvas/recording-2d.html:
        * inspector/canvas/resources/recording-utilities.js:
        (TestPage.registerInitializer):
        (TestPage.registerInitializer.async.logRecording): Added.
        (TestPage.registerInitializer.logRecording): Deleted.
        * inspector/model/recording-expected.txt:
        * inspector/model/recording.html:

2018-10-16  Justin Michaud  <justin_michaud@apple.com>

        Implement feature flag and bindings for CSS Painting API
        https://bugs.webkit.org/show_bug.cgi?id=190237

        Reviewed by Ryosuke Niwa.

        Add basic tests for the CSS Painting API registerPaint function,
        and test the custom bindings.

        * fast/css-custom-paint/basic-expected.txt: Added.
        * fast/css-custom-paint/basic.html: Added.
        * fast/css-custom-paint/registerPaintBindings-expected.txt: Added.
        * fast/css-custom-paint/registerPaintBindings.html: Added.
        * platform/ios-wk1/TestExpectations:
        * platform/mac-wk1/TestExpectations:
        * platform/win/TestExpectations:

2018-10-16  Per Arne Vollan  <pvollan@apple.com>

        [WebVTT] Support inline WebVTT styles
        https://bugs.webkit.org/show_bug.cgi?id=190369

        Reviewed by Eric Carlson.

        * media/track/captions-webvtt/css-styling.vtt: Added.
        * media/track/captions-webvtt/no-css-styling.vtt: Added.
        * media/track/track-cue-css-expected.html: Added.
        * media/track/track-cue-css.html: Added.

2018-10-16  Chris Dumez  <cdumez@apple.com>

        window.navigator should not become null after the window loses its browsing context
        https://bugs.webkit.org/show_bug.cgi?id=190595

        Reviewed by Ryosuke Niwa.

        Extend layout test coverage.

        * fast/frames/detached-frame-property-expected.txt:
        * fast/frames/detached-frame-property.html:
        * http/tests/dom/cross-origin-detached-window-properties-expected.txt:
        * http/tests/dom/cross-origin-detached-window-properties.html:
        * http/tests/dom/same-origin-detached-window-properties-expected.txt:
        * http/tests/dom/same-origin-detached-window-properties.html:

2018-10-16  Charlie Turner  <cturner@igalia.com>

        [EME] Multiple ClearKey tests crashing in gst_qtdemux_request_protection_context
        https://bugs.webkit.org/show_bug.cgi?id=190577

        Reviewed by Michael Catanzaro.

        * platform/gtk/TestExpectations:

2018-10-15  Timothy Hatcher  <timothy@apple.com>

        Add support for prefers-color-scheme media query
        https://bugs.webkit.org/show_bug.cgi?id=190499
        rdar://problem/45212025

        Reviewed by Dean Jackson.

        * css-dark-mode/prefers-color-scheme-expected.txt: Added.
        * css-dark-mode/prefers-color-scheme.html: Added.
        * platform/gtk/TestExpectations: Skip css-dark-mode.
        * platform/ios/TestExpectations: Skip css-dark-mode.
        * platform/mac-wk1/TestExpectations: Skip css-dark-mode.
        * platform/win/TestExpectations: Skip css-dark-mode.
        * platform/wincairo/TestExpectations: Skip css-dark-mode.
        * platform/wpe/TestExpectations: Skip css-dark-mode.

2018-10-15  Matt Baker  <mattbaker@apple.com>

        Web Inspector: Cleanup Table test utilities
        https://bugs.webkit.org/show_bug.cgi?id=190538
        <rdar://problem/45237730>

        Reviewed by Joseph Pecoraro.

        Cleanup Table test utilities by exposing removing the artificial dependency
        between TableDelegate and TableDataSource, and exposing a cleaner set of
        utility methods to InspectorTest. This patch changes `InspectorTest.createTable`
        to take no parameters, and adds `InspectorTest.createTableWithDelegate` for
        tests that need to supply a custom delegate.

        * inspector/table/resources/table-utilities.js:
        (TestPage.registerInitializer.InspectorTest.TableDataSource):
        (TestPage.registerInitializer.InspectorTest.TableDelegate):
        (TestPage.registerInitializer.InspectorTest.TableDelegate.prototype.tablePopulateCell):
        (TestPage.registerInitializer.createDataSource):
        (TestPage.registerInitializer.createTableInternal):
        (TestPage.registerInitializer.InspectorTest.createTable):
        (TestPage.registerInitializer.InspectorTest.createTableWithDelegate):
        (TestPage.registerInitializer):

        * inspector/table/table-selection-expected.txt:
        Update with new test suite name.

        * inspector/table/table-selection.html:

2018-10-15  Charles Vazac  <cvazac@gmail.com>

        Web Inspector: Expose Server Timing Response Headers in Network Tab
        https://bugs.webkit.org/show_bug.cgi?id=190440

        Reviewed by Joseph Pecoraro.

        * inspector/unit-tests/server-timing-entry-expected.txt:
        * inspector/unit-tests/server-timing-entry.html:

2018-10-15  Alex Christensen  <achristensen@webkit.org>

        Garden WK2 tests after r237104
        https://bugs.webkit.org/show_bug.cgi?id=190522

        * platform/wk2/http/tests/navigation/keyboard-events-during-provisional-navigation-expected.txt: Removed.
        I added  this wk2 expectation in r234658 after r234640.  r237104 effectively did the inverse of r234640,
        so behavior is back to how it was before then.  This makes the expectations reflect such.

2018-10-15  Chris Dumez  <cdumez@apple.com>

        Experiment: target=_blank on anchors should imply rel=noopener
        https://bugs.webkit.org/show_bug.cgi?id=190481

        Reviewed by Alex Christensen.

        Update existing tests to reflect behavior change.

        * TestExpectations:
        * http/tests/navigation/no-referrer-reset.html:
        * http/tests/security/resources/referrer-policy-redirect-link.html:
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window2-pson.html:
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window2.html:
        * http/tests/security/xssAuditor/link-opens-new-window.html:

2018-10-15  Andy Estes  <aestes@apple.com>

        [Apple Pay] New shipping methods are ignored when updating after the shippingaddresschange event
        https://bugs.webkit.org/show_bug.cgi?id=190560
        <rdar://problem/44559075>

        Reviewed by Youenn Fablet.

        * http/tests/ssl/applepay/ApplePayShippingAddressChangeEventErrors.https-expected.txt:
        * http/tests/ssl/applepay/ApplePayShippingAddressChangeEventErrors.https.html:

2018-10-15  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] Can't select text after dismissing the keyboard when changing focus
        https://bugs.webkit.org/show_bug.cgi?id=190563
        <rdar://problem/44613559>

        Reviewed by Tim Horton.

        Add a new layout test to check that the user can make a selection by long pressing after the keyboard is
        dismissed due to changing the focused element.

        * editing/selection/ios/select-text-after-changing-focus-expected.txt: Added.
        * editing/selection/ios/select-text-after-changing-focus.html: Added.
        * resources/ui-helper.js:

        Also tweak the behavior of `UIHelper.waitForKeyboardToHide()`, so that it resolves immediately if the keyboard
        is not shown. This allows us to ensure that tests which use `UIHelper.waitForKeyboardToHide()` are robust in the
        case where they wait for another action to complete (e.g. a simulated tap) prior to registering a keyboard
        hiding callback.

        (window.UIHelper.waitForKeyboardToHide.return.new.Promise):
        (window.UIHelper.waitForKeyboardToHide):

2018-10-15  Andy Estes  <aestes@apple.com>

        [Apple Pay] Payment authorization results with ApplePayErrors should never be considered final
        https://bugs.webkit.org/show_bug.cgi?id=190559
        <rdar://problem/37250908>

        Reviewed by Anders Carlsson.

        * http/tests/ssl/applepay/ApplePaySessionFinalState.https-expected.txt: Added.
        * http/tests/ssl/applepay/ApplePaySessionFinalState.https.html: Added.

2018-10-15  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r237054.
        https://bugs.webkit.org/show_bug.cgi?id=190593

        "this regressed JetStream 2 by 6% on iOS" (Requested by
        saamyjoon on #webkit).

        Reverted changeset:

        "[JSC] JSC should have "parseFunction" to optimize Function
        constructor"
        https://bugs.webkit.org/show_bug.cgi?id=190340
        https://trac.webkit.org/changeset/237054

2018-10-15  Wenson Hsieh  <wenson_hsieh@apple.com>

        Changing view scale should zoom to initial scale if the page is already at initial scale
        https://bugs.webkit.org/show_bug.cgi?id=190570
        <rdar://problem/45261877>

        Reviewed by Tim Horton.

        * fast/viewport/ios/initial-scale-after-changing-view-scale-expected.txt: Added.
        * fast/viewport/ios/initial-scale-after-changing-view-scale.html: Added.

        Add a new layout test to verify that:
        1.  Changing view scale before the page scale factor is changed by the user zooms to the new initial scale.
        2.  Changing view scale after the user changes the page scale to something different than initial scale does not
            cause the page to zoom to the new initial scale.
        3.  Changing view scale after the user changes the page scale factor back to initial scale causes the page to
            zoom to the new initial scale.

        * resources/basic-gestures.js:

        Make a small tweak in `doubleTapToZoomAtPoint` to ensure that both single taps as well as zooming are complete
        before invoking UIScriptController completion.

        (return.new.Promise):

2018-10-15  Yoshiaki Jitsukawa  <yoshiaki.jitsukawa@sony.com>

        [Cairo] Incorrect rendering for 135-deg skews
        https://bugs.webkit.org/show_bug.cgi?id=190513

        Reviewed by Žan Doberšek.

        * fast/transforms/skew-x-135deg-with-gradient-expected.html: Added.
        * fast/transforms/skew-x-135deg-with-gradient.html: Added.
        * fast/transforms/skew-y-135deg-with-gradient-expected.html: Added.
        * fast/transforms/skew-y-135deg-with-gradient.html: Added.

2018-10-15  Chris Dumez  <cdumez@apple.com>

        Restrict browsing context lookup by name to frames that are related to one another
        https://bugs.webkit.org/show_bug.cgi?id=190475

        Reviewed by Alex Christensen.

        * http/tests/dom/new-window-can-target-opener-expected.txt: Added.
        * http/tests/dom/new-window-can-target-opener.html: Added.
        * http/tests/dom/noopener-window-cannot-target-opener-expected.txt: Added.
        * http/tests/dom/noopener-window-cannot-target-opener.html: Added.
        * http/tests/dom/noopener-window-not-targetable-expected.txt: Added.
        * http/tests/dom/noopener-window-not-targetable.html: Added.
        * http/tests/dom/noopener-window-not-targetable2-expected.txt: Added.
        * http/tests/dom/noopener-window-not-targetable2.html: Added.
        * http/tests/dom/noreferrer-window-not-targetable-expected.txt: Added.
        * http/tests/dom/noreferrer-window-not-targetable.html: Added.
        * http/tests/dom/opened-window-not-targetable-after-disowning-opener-expected.txt: Added.
        * http/tests/dom/opened-window-not-targetable-after-disowning-opener.html: Added.
        * http/tests/dom/resources/new-window-can-target-opener-win.html: Added.
        * http/tests/dom/resources/noopener-window-cannot-target-opener-win.html: Added.
        Add layout test coverage.

        * fast/dom/Window/a-rel-noopener-expected.txt:
        * fast/dom/Window/area-rel-noopener-expected.txt:
        * fast/dom/Window/resources/rel-noopener.js:
        * http/tests/navigation/no-referrer-target-blank-expected.txt:
        * http/tests/navigation/resources/no-referrer-helper.php:
        * platform/mac-wk1/imported/w3c/web-platform-tests/html/browsers/windows/noreferrer-window-name-expected.txt:
        * platform/wk2/imported/w3c/web-platform-tests/html/browsers/windows/noreferrer-window-name-expected.txt:
        Update / rebaseline existing tests to reflect behavior change.

2018-10-15  YUHAN WU  <yuhan_wu@apple.com>

        Implement error handler of MediaRecorder
        https://bugs.webkit.org/show_bug.cgi?id=190438

        Reviewed by Youenn Fablet.

        Since dataavailable event has not been implemented, skip three MediaRecorder-related tests now.
        We will need to reenable those tests once implementing the dataavailable event for MediaRecorder.

        * TestExpectations:

2018-10-15  Chris Dumez  <cdumez@apple.com>

        Window's properties such as 'location' should not become null when it loses its browsing context
        https://bugs.webkit.org/show_bug.cgi?id=190539

        Reviewed by Alex Christensen.

        * http/tests/dom/cross-origin-detached-window-properties-expected.txt: Added.
        * http/tests/dom/cross-origin-detached-window-properties.html: Added.
        * http/tests/dom/resources/post-message-to-parent-when-loaded.html: Added.
        * http/tests/dom/same-origin-detached-window-properties-expected.txt: Added.
        * http/tests/dom/same-origin-detached-window-properties.html: Added.
        Add layout test coverage.

        * fast/frames/detached-frame-property-expected.txt:
        * fast/frames/detached-frame-property.html:
        * http/tests/security/named-window-property-from-same-origin-inactive-document-expected.txt:
        * http/tests/security/named-window-property-from-same-origin-inactive-document.html:
        * http/tests/security/xss-DENIED-named-window-property-from-cross-origin-inactive-document-expected.txt:
        * http/tests/security/xss-DENIED-named-window-property-from-cross-origin-inactive-document.html:
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window.html:
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window2-pson.html:
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window2.html:
        * http/tests/security/xss-DENIED-script-inject-into-inactive-window3.html:
        Update existing layout tests to reflect behavior change.

2018-10-15  Claudio Saavedra  <csaavedra@igalia.com>

        [GStreamer] MediaStream test failing since r236877

        Unreviewed gardening
        * platform/gtk/TestExpectations:
        * platform/wpe/TestExpectations:

2018-10-12  Wenson Hsieh  <wenson_hsieh@apple.com>

        [iOS] Allow SPI clients to lay out at arbitrarily scaled sizes and scale to fit the view
        https://bugs.webkit.org/show_bug.cgi?id=190504
        <rdar://problem/45117760>

        Reviewed by Tim Horton.

        Add two new layout tests on iOS that change WKWebView's view scale, and measure the resulting window sizes and
        lengths of viewport units.

        * fast/viewport/ios/constant-width-viewport-after-changing-view-scale-expected.txt: Added.
        * fast/viewport/ios/constant-width-viewport-after-changing-view-scale.html: Added.

        Add a test page with a viewport meta tag that has a constant width and an explicit initial scale of 0.5.

        * fast/viewport/ios/device-width-viewport-after-changing-view-scale-expected.txt: Added.
        * fast/viewport/ios/device-width-viewport-after-changing-view-scale.html: Added.

        Add a test page with a viewport meta tag at device-width, with initial scale 1.

        * resources/ui-helper.js:
        (window.UIHelper.setViewScale):

        Add a convenience function that wraps a UI script invocation of `setViewScale` in a promise.

        (window.UIHelper):

2018-10-12  Dawei Fenton  <realdawei@apple.com>

        [Mojave Wk2] Layout Test http/tests/cache/disk-cache/disk-cache-validation-attachment.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=190323

        Unreviewed, mark test as Flaky.

        * platform/mac-wk2/TestExpectations:

2018-10-12  Per Arne Vollan  <pvollan@apple.com>

        Layout Test editing/pasteboard/copy-paste-across-shadow-boundaries-with-style-2.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=190520

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2018-10-08  Yusuke Suzuki  <yusukesuzuki@slowstart.org>

        [JSC] JSC should have "parseFunction" to optimize Function constructor
        https://bugs.webkit.org/show_bug.cgi?id=190340

        Reviewed by Mark Lam.

        * fast/dom/attribute-event-listener-errors-expected.txt:
        * fast/events/attribute-listener-deletion-crash-expected.txt:
        * fast/events/window-onerror-syntax-error-in-attr-expected.txt:
        * js/dom/invalid-syntax-for-function-expected.txt:
        * js/dom/script-start-end-locations-expected.txt:

2018-10-11  Thibault Saunier  <tsaunier@igalia.com>

        [GStreamer] Support arbitrary video resolution in getUserMedia API
        https://bugs.webkit.org/show_bug.cgi?id=189734

        Implement arbitrary video resolution for the getUserMedia API in GStreamer.

        Fix the MockRealtimeMediaSource device list to make devices properties match
        test expectations.

        Reactivate tests that were failling because of that.

        Reviewed by Xabier Rodriguez-Calvar.

        * platform/gtk/TestExpectations:
        * platform/wpe/TestExpectations:

2018-10-11  Per Arne Vollan  <pvollan@apple.com>

        Layout Test fast/forms/fieldset/fieldset-elements-htmlcollection.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=190472

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2018-10-11  Alejandro G. Castro  <alex@igalia.com>

        [GTK][WPE] Add mediaDevices.enumerateDevices support
        https://bugs.webkit.org/show_bug.cgi?id=185761

        Reviewed by Youenn Fablet.

        Remove the failure expectation for the test
        media-devices-enumerate-devices.html. Just for the record we have
        also checked the following tests.

        fast/mediastream/media-devices-enumerate-devices.html
        fast/mediastream/resources/enumerate-devices-frame.html
        http/tests/media/media-stream/enumerate-devices-source-id.html
        http/tests/media/media-stream/enumerate-devices-source-id-persistent.html
        http/tests/media/media-stream/resources/enumerate-devices-source-id-frame.html

        * platform/gtk/TestExpectations:

2018-10-10  Devin Rousso  <drousso@apple.com>

        Web Inspector: create special Network waterfall for media events
        https://bugs.webkit.org/show_bug.cgi?id=189773
        <rdar://problem/44626605>

        Reviewed by Joseph Pecoraro.

        * http/tests/inspector/dom/didFireEvent-expected.txt: Added.
        * http/tests/inspector/dom/didFireEvent.html: Added.

        * inspector/unit-tests/array-utilities-expected.txt:
        * inspector/unit-tests/array-utilities.html:

2018-10-10  Brent Fulgham  <bfulgham@apple.com>

        Only report the supported WebGL version
        https://bugs.webkit.org/show_bug.cgi?id=190434
        <rdar://problem/45024677>

        Reviewed by Dean Jackson.

        * fast/canvas/webgl/gl-getstring-expected.txt:
        * fast/canvas/webgl/gl-getstring.html:

2018-10-10  Tim Horton  <timothy_horton@apple.com>

        Share more WKShareSheet code between macOS and iOS, and fix a few bugs
        https://bugs.webkit.org/show_bug.cgi?id=190420

        Reviewed by Simon Fraser.

        * fast/events/ios/share-expected.txt: Removed.
        * fast/events/ios/share.html: Removed.
        * fast/web-share/share.html: Added.
        * fast/web-share/share-expected.txt: Added.
        * resources/ui-helper.js:
        (window.UIHelper.setShareSheetCompletesImmediatelyWithResolution):
        (window.UIHelper.invokeShareSheetWithResolution): Deleted.
        Move the existing share sheet test to fast/web-share so it runs on both macOS and iOS.

        * fast/web-share/share-with-no-url.html: Added.
        * fast/web-share/share-with-no-url-expected.txt: Added.
        Add a new test that the sheet is successfully invoked even when a URL is not provided.

2018-10-10  Devin Rousso  <drousso@apple.com>

        Web Inspector: notify the frontend when a canvas has started recording via console.record
        https://bugs.webkit.org/show_bug.cgi?id=190306

        Reviewed by Brian Burg.

        * inspector/canvas/recording-2d.html:
        * inspector/canvas/recording-bitmaprenderer.html:
        * inspector/canvas/recording-webgl-snapshots.html:
        * inspector/canvas/recording-webgl.html:
        * inspector/canvas/resources/recording-utilities.js:
        (TestPage.registerInitializer.window.startRecording):
        Wait to complete the test until the "LastFrame" event is fired, ensuring that any running
        commands don't affect the next test case.

2018-10-09  Antoine Quint  <graouts@apple.com>

        Remove the frames() timing function
        https://bugs.webkit.org/show_bug.cgi?id=190034
        <rdar://problem/44827544>

        Reviewed by Dean Jackson.

        * legacy-animation-engine/transitions/frames-timing-function-expected.txt:
        * legacy-animation-engine/transitions/transitions-parsing-expected.txt:
        * transitions/frames-timing-function-expected.txt:
        * transitions/transitions-parsing-expected.txt:

2018-10-09  Devin Rousso  <drousso@apple.com>

        Web Inspector: show redirect requests in Network and Timelines tabs
        https://bugs.webkit.org/show_bug.cgi?id=150005
        <rdar://problem/5378164>

        Reviewed by Joseph Pecoraro.

        * http/tests/inspector/network/resource-timing-expected.txt:
        * http/tests/inspector/network/resource-timing.html:

        * http/tests/inspector/network/resources/delay.php: Added.
        * http/tests/inspector/network/resources/redirect.php: Added.

2018-10-09  Said Abou-Hallawa  <sabouhallawa@apple.com>

        REGRESSION(r234620): SVGLangSpace::svgAttributeChanged() should invalidate the renderer of the SVGGeometryElement descendant only
        https://bugs.webkit.org/show_bug.cgi?id=190411

        Reviewed by Simon Fraser.

        * svg/dynamic-updates/SVGStopElement-dom-xml-lang-attrr-expected.txt: Added.
        * svg/dynamic-updates/SVGStopElement-dom-xml-lang-attrr.html: Added.

2018-10-09  Chris Dumez  <cdumez@apple.com>

        Anchor target should be ignored on activation when the download attribute is set
        https://bugs.webkit.org/show_bug.cgi?id=190408

        Reviewed by Geoffrey Garen.

        * fast/dom/HTMLAnchorElement/anchor-file-blob-download-blank-base-target-popup-not-allowed-expected.txt: Added.
        * fast/dom/HTMLAnchorElement/anchor-file-blob-download-blank-base-target-popup-not-allowed.html: Added.
        * fast/dom/HTMLAnchorElement/anchor-file-blob-download-blank-target-popup-not-allowed-expected.txt: Added.
        * fast/dom/HTMLAnchorElement/anchor-file-blob-download-blank-target-popup-not-allowed.html: Added.
        Add layout test coverage.

        * http/tests/download/anchor-load-after-download.html:
        * http/tests/workers/service/resources/registration-task-queue-scheduling-1.js:
        Update existing WK2-only layout tests to call testRunner.setCanOpenWindows() since they rely on
        opening a new window. We failed to notice the issue because these tests are not run on WK1.

        * platform/ios-wk2/TestExpectations:
        * platform/mac-wk1/TestExpectations:
        * platform/win/TestExpectations:
        Skip new tests on WebKit1 since the download attribute is only supported on WebKit2.

2018-10-09  Chris Dumez  <cdumez@apple.com>

        Unreviewed, skip fast/dom/HTMLAnchorElement/anchor-file-blob-download-blank-target.html on iOS.

        The download attribute is not supported on iOS yet.

        * platform/ios-wk2/TestExpectations:

2018-10-09  Devin Rousso  <drousso@apple.com>

        Web Inspector: REGRESSION: fix canvas test failures after r236952 and r236954
        https://bugs.webkit.org/show_bug.cgi?id=190403

        Reviewed by Joseph Pecoraro.

        * inspector/canvas/create-context-webmetal.html:
        Fix missing parenthesis.

        * inspector/canvas/resources/shaderProgram-utilities.js:
        (createProgram):
        (TestPage.registerInitializer.awaitProgramAdded):
        (TestPage.registerInitializer):
        (TestPage.registerInitializer.window.initializeTestSuite):
        Replace the `WI.CanvasManager` events (which were removed) with listeners for events on the
        specific `WI.Canvas`.

2018-10-09  Chris Dumez  <cdumez@apple.com>

        REGRESSION (Safari 12): Download of Blob URL fails
        https://bugs.webkit.org/show_bug.cgi?id=190351
        <rdar://problem/45091181>

        Reviewed by Geoffrey Garen.

        Add layout test coverage.

        * fast/dom/HTMLAnchorElement/anchor-file-blob-download-blank-target-expected.txt: Added.
        * fast/dom/HTMLAnchorElement/anchor-file-blob-download-blank-target.html: Added.

2018-10-09  Youenn Fablet  <youenn@apple.com>

        Add support for IceCandidate stats
        https://bugs.webkit.org/show_bug.cgi?id=190329

        Reviewed by Eric Carlson.

        * webrtc/candidate-stats-expected.txt: Added.
        * webrtc/candidate-stats.html: Added.
        * webrtc/routines.js:
        * webrtc/video-stats.html:

2018-10-09  Philippe Normand  <pnormand@igalia.com>

        [GStreamer] Stealing cross-origin video pixel with HLS
        https://bugs.webkit.org/show_bug.cgi?id=190003

        Reviewed by Xabier Rodriguez-Calvar.

        * platform/gtk/TestExpectations: Unflag now-passing test.

2018-10-08  Devin Rousso  <drousso@apple.com>

        Fix inspector/canvas/recording.html after r236952

        Unreviewed. Test gardening.

        * inspector/canvas/recording-expected.txt:
        * inspector/canvas/recording.html:
        Recordings default to only capturing a single frame, so add a parameter to ensure that we
        are capturing multiple frames.

2018-10-08  Wenson Hsieh  <wenson_hsieh@apple.com>

        [Cocoa] [WK2] Add support for text alignment and text lists in font attributes
        https://bugs.webkit.org/show_bug.cgi?id=190342
        <rdar://problem/44767118>

        Reviewed by Tim Horton.

        * editing/mac/attributed-string/attributed-string-for-typing-expected.txt:
        * editing/mac/attributed-string/attributed-string-for-typing-with-color-filter-expected.txt:
        * platform/mac-sierra/editing/mac/attributed-string/attributed-string-for-typing-expected.txt:
        * platform/mac-sierra/editing/mac/attributed-string/attributed-string-for-typing-with-color-filter-expected.txt:

        Rebaseline these two layout tests, now that typing attributes include an NSParagraphStyle.

2018-10-08  Justin Fan  <justin_fan@apple.com>

        WebGPU: Rename old WebGPU prototype to WebMetal
        https://bugs.webkit.org/show_bug.cgi?id=190325
        <rdar://problem/44990443>

        Reviewed by Dean Jackson.

        Rename WebGPU prototype files to WebMetal in preparation for implementing the new (Oct 2018) WebGPU interface.

        * fast/canvas/webgpu/webgpu-runtime-flag-expected.txt: Removed.
        * fast/canvas/webmetal/webmetal-dispatch-expected.txt: Renamed from LayoutTests/fast/canvas/webgpu/webgpu-dispatch-expected.txt.
        * fast/canvas/webmetal/webmetal-dispatch.html: Renamed from LayoutTests/fast/canvas/webgpu/webgpu-dispatch.html.
        * fast/canvas/webmetal/webmetal-runtime-flag-expected.txt: Added.
        * fast/canvas/webmetal/webmetal-runtime-flag.html: Renamed from LayoutTests/fast/canvas/webgpu/webgpu-runtime-flag.html.
        * inspector/canvas/create-context-webmetal-expected.txt: Renamed from LayoutTests/inspector/canvas/create-context-webgpu-expected.txt.
        * inspector/canvas/create-context-webmetal.html: Renamed from LayoutTests/inspector/canvas/create-context-webgpu.html.
        * inspector/canvas/resolveCanvasContext-webgpu-expected.txt: Removed.
        * inspector/canvas/resolveCanvasContext-webmetal-expected.txt: Added.
        * inspector/canvas/resolveCanvasContext-webmetal.html: Renamed from LayoutTests/inspector/canvas/resolveCanvasContext-webgpu.html.
        * platform/gtk/TestExpectations:
        * platform/ios/TestExpectations:
        * platform/mac/TestExpectations:
        * platform/win/TestExpectations:

2018-10-08  Devin Rousso  <drousso@apple.com>

        Web Inspector: allow multiple canvases to be recorded at the same time
        https://bugs.webkit.org/show_bug.cgi?id=190305

        Reviewed by Brian Burg.

        * inspector/canvas/recording-2d.html:
        * inspector/canvas/recording-bitmaprenderer.html:
        * inspector/canvas/recording-expected.html:
        * inspector/canvas/recording-webgl.html:
        * inspector/canvas/recording.html:
        * inspector/canvas/resources/recording-utilities.js:
        (TestPage.registerInitializer.window.startRecording.handleRecordingProgress):
        (TestPage.registerInitializer.window.startRecording):
        (TestPage.registerInitializer.window.consoleRecord):
        (TestPage.registerInitializer):

2018-10-08  Dean Jackson  <dino@apple.com>

        CrashTracer: backboardd at Recursion :: QuartzCore: CA::Render::Updater::prepare_sublayer0
        https://bugs.webkit.org/show_bug.cgi?id=190376
        <rdar://problem/44986520>

        Reviewed by Tim Horton.

        * compositing/layer-creation/deep-tree.html:

2018-10-08  Aditya Keerthi  <akeerthi@apple.com>

        Make <input type=color> a runtime enabled (on-by-default) feature
        https://bugs.webkit.org/show_bug.cgi?id=189162

        Reviewed by Wenson Hsieh and Tim Horton.

        Rebaseline layout tests after enabling input type=color by default.

        * platform/ios-simulator-wk2/imported/w3c/web-platform-tests/html/semantics/forms/textfieldselection/selection-not-application-expected.txt:
        * platform/ios-wk2/imported/w3c/web-platform-tests/html/dom/reflection-forms-expected.txt:
        * platform/ios-wk2/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-willValidate-expected.txt:
        * platform/ios-wk2/imported/w3c/web-platform-tests/html/semantics/forms/textfieldselection/selection-not-application-expected.txt:
        * platform/ios-wk2/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/type-change-state-expected.txt:
        * platform/ios-wk2/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/valueMode-expected.txt:
        * platform/ios/fast/forms/color/input-appearance-color-expected.txt:
        * platform/ios/imported/w3c/web-platform-tests/html/semantics/forms/the-form-element/form-elements-filter-expected.txt: Added.
        * platform/ios/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/color-expected.txt:
        * platform/mac/accessibility/roles-exposed-expected.txt:
        * platform/mac/fast/selectors/read-only-read-write-input-basics-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/dom/reflection-forms-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-validity-badInput-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/constraints/form-validation-willValidate-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/textfieldselection/selection-not-application-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/selection-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/type-change-state-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/semantics/forms/the-input-element/valueMode-expected.txt:
        * platform/mac/imported/w3c/web-platform-tests/html/semantics/selectors/pseudo-classes/readwrite-readonly-expected.txt:

2018-10-08  Ryan Haddad  <ryanhaddad@apple.com>

        Move test expectations from ios-12 to ios directory
        https://bugs.webkit.org/show_bug.cgi?id=189839

        Unreviewed test gardening..

        * platform/ios-11/http/tests/quicklook/hide-referer-on-navigation-expected.txt: Removed.
        * platform/ios-11/imported/w3c/web-platform-tests/WebCryptoAPI/derive_bits_keys/hkdf.https.worker-expected.txt: Removed.
        * platform/ios-11/imported/w3c/web-platform-tests/WebCryptoAPI/derive_bits_keys/test_hkdf.https-expected.txt: Removed.
        * platform/ios-11/platform/ios/ios/fast/text/opticalFont-expected.txt: Removed.
        * platform/ios-11/platform/ios/ios/fast/text/opticalFontWithTextStyle-expected.txt: Removed.
        * platform/ios-11/platform/ios/ios/fast/text/opticalFontWithWeight-expected.txt: Removed.
        * platform/ios-11/quicklook/powerpoint-expected.txt: Removed.
        * platform/ios-11/quicklook/powerpoint-legacy-expected.txt: Removed.
        * platform/ios-11/quicklook/word-expected.txt: Removed.
        * platform/ios-11/quicklook/word-legacy-expected.txt: Removed.
        * platform/ios-11/svg/batik/text/longTextOnPath-expected.txt: Removed.
        * platform/ios-12/TestExpectations: Removed.
        * platform/ios/TestExpectations:

2018-10-08  Truitt Savell  <tsavell@apple.com>

        Attempt to fix test failure after 236915
        https://bugs.webkit.org/show_bug.cgi?id=190352

        Unreviewed Test Gardening

        * platform/mac-highsierra/hkdf.https.worker-expected.txt: Removed.
        * platform/mac/imported/w3c/canvas/2d.shadow.gradient.basic-expected.png: Removed.
        * platform/mac/imported/w3c/web-platform-tests/WebCryptoAPI/derive_bits_keys/hkdf.https.worker-expected.txt:

2018-10-08  Truitt Savell  <tsavell@apple.com>

        Moving files to fix failures introduced in r236915
        https://bugs.webkit.org/show_bug.cgi?id=190352

        Unreviewed test gardening 

        * platform/mac-highsierra/imported/w3c/web-platform-tests/WebCryptoAPI/derive_bits_keys/hkdf.https.worker-expected.txt: Copied from LayoutTests/platform/mac/hkdf.https.worker-expected.txt.
        * platform/mac/imported/w3c/web-platform-tests/WebCryptoAPI/derive_bits_keys/hkdf.https.worker-expected.txt: Renamed from LayoutTests/platform/mac/hkdf.https.worker-expected.txt.

2018-10-08  Devin Rousso  <drousso@apple.com>

        Web Inspector: group media network entries by the node that triggered the request
        https://bugs.webkit.org/show_bug.cgi?id=189606
        <rdar://problem/44438527>

        Reviewed by Brian Burg.

        * http/tests/inspector/network/resource-initiatorNode-expected.txt: Added.
        * http/tests/inspector/network/resource-initiatorNode.html: Added.

        * inspector/canvas/requestNode.html:
        Test case no longer needed since the document is always requested once it's available.

2018-10-08  Andy Estes  <aestes@apple.com>

        [Payment Request] Requests should be aborted after details settle when the user cancels
        https://bugs.webkit.org/show_bug.cgi?id=190333

        Reviewed by Alex Christensen.

        * http/tests/paymentrequest/payment-request-show-method.https-expected.txt:
        * http/tests/paymentrequest/payment-request-show-method.https.html:

2018-10-08  Ryan Haddad  <ryanhaddad@apple.com>

        REGRESSION (r235630?): [Mojave WK1] Layout test compositing/filters/opacity-change-on-filtered-paints-into-ancestor.html is a flaky image failure
        https://bugs.webkit.org/show_bug.cgi?id=189756

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:

2018-10-08  David Fenton  <david_fenton@apple.com>

        Layout Tests editing/deleting/delete-emoji.html editing/deleting/delete-emoji-1.html editing/deleting/delete-emoji-9.html are passing.
        https://bugs.webkit.org/show_bug.cgi?id=190353

        Unreviewed. Remove the tests from TestExpectations file.

        * platform/mac/TestExpectations:

2018-10-08  Dawei Fenton  <realdawei@apple.com>

        Layout Tests editing/deleting/delete-emoji.html editing/deleting/delete-emoji-1.html editing/deleting/delete-emoji-9.html are passing.
        https://bugs.webkit.org/show_bug.cgi?id=190353

        Unreviewed test gardening.

        * platform/mac/TestExpectations:

2018-10-08  Truitt Savell  <tsavell@apple.com>

        Rebaseline imported/w3c/web-platform-tests/WebCryptoAPI/derive_bits_keys/hkdf.https.worker.html for Mojave
        https://bugs.webkit.org/show_bug.cgi?id=190352

        Unreviewed test Gardening

        * platform/mac-highsierra/hkdf.https.worker-expected.txt: Copied from LayoutTests/imported/w3c/web-platform-tests/WebCryptoAPI/derive_bits_keys/hkdf.https.worker-expected.txt.
        * platform/mac/hkdf.https.worker-expected.txt: Copied from LayoutTests/imported/w3c/web-platform-tests/WebCryptoAPI/derive_bits_keys/hkdf.https.worker-expected.txt.
        * platform/mac/imported/w3c/canvas/2d.shadow.gradient.basic-expected.png: Added.

2018-10-05  Devin Rousso  <drousso@apple.com>

        Web Inspector: refactor constructor of WI.Resource
        https://bugs.webkit.org/show_bug.cgi?id=190318

        Reviewed by Joseph Pecoraro.

        * http/tests/inspector/network/har/har-basic.html:
        * inspector/unit-tests/resource-collection.html:

2018-10-05  Joseph Pecoraro  <pecoraro@apple.com>

        Try to unflake inspector/layers/layerTreeDidChange.html

        Unreviewed. Test gardening.

        * inspector/layers/layerTreeDidChange.html:
        Force a layout early in the test to try to force layout tree
        update events in the expected sequence.

2018-10-05  Antoine Quint  <graouts@apple.com>

        [Web Animations] REGRESSION (r236809): crash under AnimationTimeline::updateCSSAnimationsForElement()
        https://bugs.webkit.org/show_bug.cgi?id=190307
        <rdar://problem/45009901>

        Reviewed by Dean Jackson.

        This test was also crashing even though it should not have been using the new animation engine. Adding the
        flag to opt into the legacy animation engine.

        * legacy-animation-engine/animations/animation-shorthand-removed.html:

2018-10-04  Chris Dumez  <cdumez@apple.com>

        A Document / Window should lose its browsing context as soon as its iframe is removed from the document
        https://bugs.webkit.org/show_bug.cgi?id=190282

        Reviewed by Ryosuke Niwa.

        Update existing layout test to reflect behavior change.

        * fast/dom/Window/BarInfo-after-frame-removed.html:
        * fast/dom/Window/dom-access-from-closure-iframe-expected.txt:
        * fast/dom/Window/dom-access-from-closure-window-expected.txt:
        * fast/dom/Window/dom-access-from-closure-window-with-gc-expected.txt:
        * fast/dom/Window/resources/dom-access-from-closure-iframe-child.html:
        * fast/dom/Window/resources/dom-access-from-closure-window-child.html:
        * fast/events/resources/before-unload-return-string-conversion-frame.html:
        * fast/parser/resources/set-parent-to-javascript-url.html:
        * http/tests/media/media-stream/disconnected-frame.html:
        * http/tests/security/contentSecurityPolicy/resources/checkDidSameOriginChildWindowLoad.js:
        (checkDidLoad):
        * http/tests/security/named-window-property-from-same-origin-inactive-document-expected.txt:
        * http/tests/security/named-window-property-from-same-origin-inactive-document.html:
        * http/tests/security/xss-DENIED-contentWindow-eval-expected.txt:
        * http/tests/security/xss-DENIED-named-window-property-from-cross-origin-inactive-document-expected.txt:
        * http/tests/security/xss-DENIED-named-window-property-from-cross-origin-inactive-document.html:

2018-10-04  Ross Kirsling  <ross.kirsling@sony.com>

        Unreviewed test gardening for WinCairo (and one cross-platform test). 

        * TestExpectations:
        Remove a cross-platform failure that seems to be passing on all platforms now.

        * platform/wincairo/TestExpectations:
        * platform/wincairo/editing/pasteboard/emacs-ctrl-k-y-001-expected.txt: Added.

2018-10-04  Matt Baker  <mattbaker@apple.com>

        Web Inspector: Table should support multiple selection and Cmd-click behavior
        https://bugs.webkit.org/show_bug.cgi?id=189705
        <rdar://problem/44571170>

        Reviewed by Devin Rousso.

        * inspector/table/resources/table-utilities.js: Added.
        (TestPage.registerInitializer.InspectorTest.TableDataSource):
        (TestPage.registerInitializer.InspectorTest.TableDataSource.prototype.get items):
        (TestPage.registerInitializer.InspectorTest.TableDataSource.prototype.tableNumberOfRows):
        (TestPage.registerInitializer.InspectorTest.TableDelegate):
        (TestPage.registerInitializer.InspectorTest.TableDelegate.prototype.tableSelectionDidChange):
        (TestPage.registerInitializer.InspectorTest.TableDelegate.prototype.tablePopulateCell):
        (TestPage.registerInitializer.InspectorTest.createTable):
        (TestPage.registerInitializer):

        * inspector/table/table-selection-expected.txt: Added.
        * inspector/table/table-selection.html: Added.
        * inspector/unit-tests/index-set-expected.txt: Added.
        * inspector/unit-tests/index-set.html: Added.

2018-10-03  Ryosuke Niwa  <rniwa@webkit.org>

        MutationRecord doesn't keep JS wrappers of target, addedNodes, and removedNodes alive
        https://bugs.webkit.org/show_bug.cgi?id=190277

        Reviewed by Antti Koivisto.

        Added two regression tests for making sure mutation observers and mutation records keep JS wrappers
        of the enqueued nodes alive. Also see r236799 for a previous failed attempt to add a similar test.

        * fast/dom/MutationObserver/mutation-observer-keeps-js-wrappers-of-nodes-alive-expected.txt: Added.
        * fast/dom/MutationObserver/mutation-observer-keeps-js-wrappers-of-nodes-alive.html: Added.
        * fast/dom/MutationObserver/mutation-record-keeps-js-wrappers-of-nodes-alive-expected.txt: Added.
        * fast/dom/MutationObserver/mutation-record-keeps-js-wrappers-of-nodes-alive.html: Added.

2018-10-04  Devin Rousso  <drousso@apple.com>

        Web Inspector: merge ProbeManager into DebuggerManager
        https://bugs.webkit.org/show_bug.cgi?id=190225

        Reviewed by Joseph Pecoraro.

        * http/tests/inspector/debugger/debugger-test.js:
        (TestPage.registerInitializer.InspectorTest.startTracingProbes):
        (TestPage.registerInitializer):
        * http/tests/inspector/resources/probe-test.js:
        (TestPage.registerInitializer.ProtocolTest.Probe.installTracingListeners):
        (TestPage.registerInitializer):

2018-10-04  Devin Rousso  <drousso@apple.com>

        Web Inspector: some files not listed in OpenResourceDialog
        https://bugs.webkit.org/show_bug.cgi?id=190272

        Reviewed by Joseph Pecoraro.

        * inspector/unit-tests/resource-query-controller-expected.txt:
        * inspector/unit-tests/resource-query-controller.html:

2018-10-04  Jiewen Tan  <jiewen_tan@apple.com>

        [WebAuthN] Move time out control from WebProcess to UIProcess
        https://bugs.webkit.org/show_bug.cgi?id=189642
        <rdar://problem/44476765>

        Reviewed by Chris Dumez.

        This patch also fixes some flaky behaviours regarding to the dirty ASN.1 decoder.

        * http/wpt/webauthn/public-key-credential-create-failure-local-silent.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-create-failure-local-silent.https.html: Copied from LayoutTests/http/wpt/webauthn/public-key-credential-create-failure-local.https.html.
        * http/wpt/webauthn/public-key-credential-create-failure-local.https-expected.txt:
        * http/wpt/webauthn/public-key-credential-create-failure-local.https.html:
        * http/wpt/webauthn/public-key-credential-create-failure.https-expected.txt:
        * http/wpt/webauthn/public-key-credential-create-failure.https.html:
        * http/wpt/webauthn/public-key-credential-get-failure-local-silent.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-get-failure-local-silent.https.html: Copied from LayoutTests/http/wpt/webauthn/public-key-credential-get-failure-local.https.html.
        * http/wpt/webauthn/public-key-credential-get-failure-local.https-expected.txt:
        * http/wpt/webauthn/public-key-credential-get-failure-local.https.html:
        * http/wpt/webauthn/public-key-credential-get-failure.https-expected.txt:
        * http/wpt/webauthn/public-key-credential-get-failure.https.html:
        * http/wpt/webauthn/resources/util.js:

2018-10-04  Chris Dumez  <cdumez@apple.com>

        Regression(r236779): Crash when changing the input element type from inside an 'input' event listener
        https://bugs.webkit.org/show_bug.cgi?id=190252

        Reviewed by Alex Christensen.

        Add layout test coverage.

        * fast/dom/HTMLInputElement/change-type-in-click-event-listener-expected.txt: Added.
        * fast/dom/HTMLInputElement/change-type-in-click-event-listener.html: Added.
        * fast/dom/HTMLInputElement/change-type-in-input-event-listener-expected.txt: Added.
        * fast/dom/HTMLInputElement/change-type-in-input-event-listener.html: Added.

2018-10-04  YUHAN WU  <yuhan_wu@apple.com>

        runtime flag and IDL for MediaRecorder
        https://bugs.webkit.org/show_bug.cgi?id=190018

        Reviewed by Youenn Fablet and Chris Dumez.

        * platform/win/TestExpectations:
        * fast/mediacapturefromelement/CanvasCaptureMediaStream-capture-out-of-DOM-element-expected.txt:
        * fast/mediacapturefromelement/CanvasCaptureMediaStream-framerate-0-expected.txt:
        * fast/mediacapturefromelement/CanvasCaptureMediaStream-imagebitmaprenderingcontext-expected.txt:

2018-10-04  Chris Dumez  <cdumez@apple.com>

        Unreviewed, rolling out r236803.

        Caused crashes on some bots

        Reverted changeset:

        "Regression(r236779): Crash when changing the input element
        type from inside an 'input' event listener"
        https://bugs.webkit.org/show_bug.cgi?id=190252
        https://trac.webkit.org/changeset/236803

2018-10-03  Justin Michaud  <justin_michaud@apple.com>

        Registered custom properties should allow inheritance to be controlled
        https://bugs.webkit.org/show_bug.cgi?id=190038

        Reviewed by Antti Koivisto.

        Add tests to check css registered custom properties with inherits. Also test
        calc expression evaluation for inherited registered custom properties.

        * css-custom-properties-api/inherits-expected.txt: Added.
        * css-custom-properties-api/inherits.html: Added.
        * css-custom-properties-api/length-expected.txt: Added.
        * css-custom-properties-api/length.html: Added.
        * css-custom-properties-api/length2-expected.txt: Added.
        * css-custom-properties-api/length2.html: Added.

2018-10-03  Youenn Fablet  <youenn@apple.com>

        Add VP8 support to WebRTC
        https://bugs.webkit.org/show_bug.cgi?id=189976

        Reviewed by Eric Carlson.

        * webrtc/audio-peer-connection-g722.html:
        * webrtc/routines.js:
        * webrtc/video-mute-vp8-expected.txt: Added.
        * webrtc/video-mute-vp8.html: Added.

2018-09-28  Jiewen Tan  <jiewen_tan@apple.com>

        [WebCrypto] ECDSA could not deal with invalid signature inputs
        https://bugs.webkit.org/show_bug.cgi?id=189879
        <rdar://problem/44701276>

        Reviewed by Brent Fulgham.

        * crypto/subtle/ecdsa-verify-malformed-parameters-expected.txt:
        * crypto/subtle/ecdsa-verify-malformed-parameters.html:

2018-10-03  Antoine Quint  <graouts@apple.com>

        [Web Animations] REGRESSION: setting 'animation-name: none' after a 'fill: forwards' animation has completed does not revert to the unanimated style
        https://bugs.webkit.org/show_bug.cgi?id=190257
        <rdar://problem/41341473>

        Reviewed by Dean Jackson.

        Add a test that checks that an animation with fill: forwards no longer applies to an element once it's been removed.

        * animations/animation-fill-forwards-removal-expected.txt: Added.
        * animations/animation-fill-forwards-removal.html: Added.

2018-10-03  Chris Dumez  <cdumez@apple.com>

        Regression(r236779): Crash when changing the input element type from inside an 'input' event listener
        https://bugs.webkit.org/show_bug.cgi?id=190252

        Reviewed by Alex Christensen.

        Add layout test coverage.

        * fast/dom/HTMLInputElement/change-type-in-click-event-listener-expected.txt: Added.
        * fast/dom/HTMLInputElement/change-type-in-click-event-listener.html: Added.
        * fast/dom/HTMLInputElement/change-type-in-input-event-listener-expected.txt: Added.
        * fast/dom/HTMLInputElement/change-type-in-input-event-listener.html: Added.

2018-10-03  Matt Lewis  <jlewis3@apple.com>

        Unreviewed, rolling out r236781.

        The test added with this commit is timing out consistently.

        Reverted changeset:

        "GC can collect JS wrappers of nodes in the mutation records
        waiting to be delivered"
        https://bugs.webkit.org/show_bug.cgi?id=190115
        https://trac.webkit.org/changeset/236781

2018-10-03  Youenn Fablet  <youenn@apple.com>

        Enable H264 simulcast
        https://bugs.webkit.org/show_bug.cgi?id=190167

        Reviewed by Eric Carlson.

        * TestExpectations:
        * webrtc/simulcast-h264-expected.txt: Added.
        * webrtc/simulcast-h264.html: Added.

2018-10-03  Ryosuke Niwa  <rniwa@webkit.org>

        Enable selectionAcrossShadowBoundariesEnabled by default in WebKitLegacy
        https://bugs.webkit.org/show_bug.cgi?id=190238

        Reviewed by Antti Koivisto.

        Removed the unnecessary webkit-test-runner directive.

        * editing/pasteboard/copy-paste-across-shadow-boundaries-1.html:
        * editing/pasteboard/copy-paste-across-shadow-boundaries-2.html:
        * editing/pasteboard/copy-paste-across-shadow-boundaries-3.html:
        * editing/pasteboard/copy-paste-across-shadow-boundaries-4.html:
        * editing/pasteboard/copy-paste-across-shadow-boundaries-with-style-1.html:
        * editing/pasteboard/copy-paste-across-shadow-boundaries-with-style-2.html:
        * editing/pasteboard/copy-paste-with-shadow-content.html:
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-1.html:
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-2.html:
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-3.html:
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-4.html:
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-5.html:
        * editing/selection/selection-across-shadow-boundaries-readonly-1.html:
        * editing/selection/selection-across-shadow-boundaries-readonly-2.html:
        * editing/selection/selection-across-shadow-boundaries-readonly-3.html:
        * editing/selection/selection-across-shadow-boundaries-user-select-all-1.html:

2018-10-02  Fujii Hironori  <Hironori.Fujii@sony.com>

        [WinCairo][BuildBot] archive-test-results fails to delete pywebsocket.ws.log-err.txt
        https://bugs.webkit.org/show_bug.cgi?id=190236

        Unreviewed test gardening.

        * platform/wincairo/TestExpectations: Skipped http/wpt and imported/w3c.

2018-10-02  Ryosuke Niwa  <rniwa@webkit.org>

        Copying content with shadow DOM doesn't copy any contents
        https://bugs.webkit.org/show_bug.cgi?id=157443

        Reviewed by Wenson Hsieh.

        Added tests for copying and pasting across shadow boundaries with HTML and plain text.

        * editing/pasteboard/copy-paste-across-shadow-boundaries-1-expected.txt: Added.
        * editing/pasteboard/copy-paste-across-shadow-boundaries-1.html: Added.
        * editing/pasteboard/copy-paste-across-shadow-boundaries-2-expected.txt: Added.
        * editing/pasteboard/copy-paste-across-shadow-boundaries-2.html: Added.
        * editing/pasteboard/copy-paste-across-shadow-boundaries-3-expected.txt: Added.
        * editing/pasteboard/copy-paste-across-shadow-boundaries-3.html: Added.
        * editing/pasteboard/copy-paste-across-shadow-boundaries-4-expected.txt: Added.
        * editing/pasteboard/copy-paste-across-shadow-boundaries-4.html: Added.
        * editing/pasteboard/copy-paste-across-shadow-boundaries-with-style-1-expected.txt: Added.
        * editing/pasteboard/copy-paste-across-shadow-boundaries-with-style-1.html: Added.
        * editing/pasteboard/copy-paste-across-shadow-boundaries-with-style-2-expected.txt: Added.
        * editing/pasteboard/copy-paste-across-shadow-boundaries-with-style-2.html: Added.
        * editing/pasteboard/copy-paste-with-shadow-content-expected.txt: Added.
        * editing/pasteboard/copy-paste-with-shadow-content.html: Added.

2018-10-01  Ryosuke Niwa  <rniwa@webkit.org>

        GC can collect JS wrappers of nodes in the mutation records waiting to be delivered
        https://bugs.webkit.org/show_bug.cgi?id=190115

        Reviewed by Geoffrey Garen.

        Added a regression test.

        * fast/dom/MutationObserver/mutation-observer-retains-js-wrappers-of-targets-alive-expected.txt: Added.
        * fast/dom/MutationObserver/mutation-observer-retains-js-wrappers-of-targets-alive.html: Added.

2018-10-02  Chris Dumez  <cdumez@apple.com>

        radio / checkbox inputs should fire "click, input, change" events in order when clicked
        https://bugs.webkit.org/show_bug.cgi?id=190223

        Reviewed by Ryosuke Niwa.

        Update existing test to reflect behavior change. I have verified that our new behavior
        on this test is consistent with Gecko and Chrome.

        * fast/forms/radio/radio-group-keyboard-change-event-expected.txt:
        * fast/forms/radio/radio-group-keyboard-change-event.html:

2018-10-02  Chris Dumez  <cdumez@apple.com>

        fieldset.elements should return an HTMLCollection instead of an HTMLFormControlsCollection
        https://bugs.webkit.org/show_bug.cgi?id=190218

        Reviewed by Alex Christensen.

        Update existing tests to reflect behavior change, after checking that our behavior is consistent
        with Gecko and Blink on these tests.

        * fast/forms/fieldset/fieldset-elements-expected.txt:
        * fast/forms/fieldset/fieldset-elements-htmlcollection-expected.txt: Added.
        * fast/forms/fieldset/fieldset-elements-htmlcollection.html: Added.
        * fast/forms/fieldset/fieldset-elements.html:
        * fast/forms/fieldset/fieldset-form-collection-radionode-list-expected.txt: Removed.
        * fast/forms/fieldset/fieldset-form-collection-radionode-list.html: Removed.

2018-10-02  Devin Rousso  <drousso@apple.com>

        Web Inspector: prevent layer events from firing until the layer information is re-requested
        https://bugs.webkit.org/show_bug.cgi?id=190159

        Reviewed by Joseph Pecoraro.

        * inspector/layers/layerTreeDidChange-expected.txt: Added.
        * inspector/layers/layerTreeDidChange.html: Added.

2018-10-02  Devin Rousso  <drousso@apple.com>

        Web Inspector: rename frontend managers to be more consistent with backend agents
        https://bugs.webkit.org/show_bug.cgi?id=190160

        Reviewed by Joseph Pecoraro.

        * http/tests/inspector/dom/cross-domain-inspected-node-access.html:
        * http/tests/inspector/dom/disconnect-dom-tree-after-main-frame-navigation.html:
        * http/tests/inspector/dom/shapes-test.js:
        * http/tests/inspector/network/har/har-page.html:
        * http/tests/inspector/network/loadResource-insecure-resource.html:
        * http/tests/inspector/network/resource-response-source-memory-cache-revalidate-expired-only.html:
        * http/tests/inspector/network/resource-response-source-memory-cache.html:
        * http/tests/inspector/network/resource-sizes-memory-cache.html:
        * http/tests/inspector/network/set-resource-caching-disabled-memory-cache.html:
        * http/tests/websocket/tests/hybi/inspector/before-load.html:
        * http/tests/websocket/tests/hybi/inspector/resolveWebSocket.html:
        * inspector/canvas/requestNode.html:
        * inspector/codemirror/resources/prettyprinting/utilities.js:
        (TestPage.registerInitializer.loadPrettyPrintingTestAndExpectedResults):
        (TestPage.registerInitializer.window.addPrettyPrintingTests):
        (TestPage.registerInitializer):
        * inspector/console/clearMessages.html:
        * inspector/console/command-line-api.html:
        * inspector/console/console-api.html:
        * inspector/console/console-count.html:
        * inspector/console/console-table.html:
        * inspector/console/console-time.html:
        * inspector/console/message-stack-trace.html:
        * inspector/console/messageAdded-from-named-evaluations.html:
        * inspector/console/messageRepeatCountUpdated.html:
        * inspector/console/messagesCleared.html:
        * inspector/console/webcore-logging-expected.txt:
        * inspector/console/webcore-logging.html:
        * inspector/controller/runtime-controller-import.html:
        * inspector/controller/runtime-controller.html:
        * inspector/css/add-rule.html:
        * inspector/css/createStyleSheet.html:
        * inspector/css/css-property.html:
        * inspector/css/getAllStyleSheets.html:
        * inspector/css/manager-preferredInspectorStyleSheetForFrame.html:
        * inspector/css/matched-style-properties.html:
        * inspector/css/modify-css-property.html:
        * inspector/css/modify-rule-selector.html:
        * inspector/css/pseudo-element-matches-for-pseudo-element-node.html:
        * inspector/css/pseudo-element-matches.html:
        * inspector/css/selector-dynamic-specificity.html:
        * inspector/css/selector-specificity.html:
        * inspector/css/shadow-scoped-style.html:
        * inspector/css/stylesheet-events-basic.html:
        * inspector/css/stylesheet-events-imports.html:
        * inspector/css/stylesheet-events-inspector-stylesheet.html:
        * inspector/css/stylesheet-events-multiple-documents.html:
        * inspector/css/stylesheet-with-mutations.html:
        * inspector/debugger/csp-exceptions.html:
        * inspector/debugger/js-stacktrace.html:
        * inspector/debugger/resources/log-pause-location.js:
        (TestPage.registerInitializer.window.findScript):
        (TestPage.registerInitializer.window.loadMainPageContent):
        (TestPage.registerInitializer.window.logResolvedBreakpointLinesWithContext):
        (TestPage.registerInitializer.window.logLinesWithContext):
        * inspector/debugger/stepping/stepping-through-autoContinue-breakpoint.html:
        * inspector/dom-debugger/dom-breakpoints.html:
        * inspector/dom-debugger/xhr-breakpoints.html:
        * inspector/dom/breakpoint-for-event-listener.html:
        * inspector/dom/csp-big5-hash.html:
        * inspector/dom/csp-hash.html:
        * inspector/dom/customElementState.html:
        * inspector/dom/domutilities-csspath.html:
        * inspector/dom/domutilities-path-dump.html:
        * inspector/dom/domutilities-xpath.html:
        * inspector/dom/event-listener-add-remove.html:
        * inspector/dom/getEventListenersForNode.html:
        * inspector/dom/getOuterHTML.html:
        * inspector/dom/hideHighlight.html:
        * inspector/dom/highlightFrame.html:
        * inspector/dom/highlightNode.html:
        * inspector/dom/highlightNodeList.html:
        * inspector/dom/highlightSelector.html:
        * inspector/dom/insertAdjacentHTML.html:
        * inspector/dom/inspect.html:
        * inspector/dom/pseudo-element-dynamic.html:
        * inspector/dom/pseudo-element-static.html:
        * inspector/dom/push-node-by-path-to-frontend.html:
        * inspector/dom/setEventListenerDisabled.html:
        * inspector/dom/setInspectedNode.html:
        * inspector/dom/setOuterHTML-no-document-element.html:
        * inspector/dom/setOuterHTML.html:
        * inspector/dom/shadow-and-non-shadow-children.html:
        * inspector/dom/shadowRootType.html:
        * inspector/dom/template-content.html:
        * inspector/formatting/resources/utilities.js:
        (TestPage.registerInitializer.loadFormattingTestAndExpectedResults):
        (TestPage.registerInitializer.window.addFormattingTests):
        (TestPage.registerInitializer):
        * inspector/indexeddb/clearObjectStore.html:
        * inspector/indexeddb/deleteDatabaseNamesWithSpace.html:
        * inspector/indexeddb/requestData.html:
        * inspector/indexeddb/requestDatabase.html:
        * inspector/indexeddb/requestDatabaseNames.html:
        * inspector/layers/layer-tree-manager.html:
        * inspector/model/dom-node.html:
        * inspector/model/frame-extra-scripts.html:
        * inspector/model/script-resource-relationship.html:
        * inspector/model/stack-trace.html:
        * inspector/page/empty-or-missing-resources.html:
        * inspector/page/hidpi-snapshot-size.html:
        * inspector/page/main-frame-resource.html:
        * inspector/runtime/change-execution-context-identifier.html:
        * inspector/runtime/saveResult.html:
        * inspector/storage/domStorage-events.html:
        * inspector/worker/console-basic.html:
        * inspector/worker/resources-in-worker.html:

2018-10-02  Basuke Suzuki  <Basuke.Suzuki@sony.com>

        [Curl] Fix missing values of  resource timing API.
        https://bugs.webkit.org/show_bug.cgi?id=190193

        Reviewed by Alex Christensen.

        * platform/wincairo/TestExpectations:

2018-10-02  Per Arne Vollan  <pvollan@apple.com>

        [WebVTT] Cue with line setting is not rendered correctly
        https://bugs.webkit.org/show_bug.cgi?id=190168

        Reviewed by Eric Carlson.

        * media/track/captions-webvtt/line-position.vtt: Added.
        * media/track/track-cue-line-position-expected-mismatch.html: Added.
        * media/track/track-cue-line-position.html: Added.

2018-10-02  Carlos Eduardo Ramalho  <cadubentzen@gmail.com>

        [GTK] fast/forms/color/input-appearance-color.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=189350

        Reviewed by Michael Catanzaro.

        Update test expectations to match changes introduced in r235435.

        * platform/gtk/TestExpectations:
        * platform/gtk/fast/forms/color/input-appearance-color-expected.png:
        * platform/gtk/fast/forms/color/input-appearance-color-expected.txt:

2018-10-01  Dean Jackson  <dino@apple.com>

        Remove CSS Animation Triggers
        https://bugs.webkit.org/show_bug.cgi?id=190175
        <rdar://problem/44925626>

        Reviewed by Simon Fraser.

        Remove a bunch of tests that no longer have an implementation.

        * TestExpectations:
        * animations/trigger-computed-style-expected.txt: Removed.
        * animations/trigger-computed-style.html: Removed.
        * animations/trigger-container-scroll-boundaries-expected.txt: Removed.
        * animations/trigger-container-scroll-boundaries.html: Removed.
        * animations/trigger-container-scroll-empty-expected.txt: Removed.
        * animations/trigger-container-scroll-empty.html: Removed.
        * animations/trigger-container-scroll-simple-expected.txt: Removed.
        * animations/trigger-container-scroll-simple.html: Removed.
        * animations/trigger-parsing-expected.txt: Removed.
        * animations/trigger-parsing.html: Removed.
        * fast/css/compare-animation-trigger-expected.txt: Removed.
        * fast/css/compare-animation-trigger.html: Removed.
        * legacy-animation-engine/animations/trigger-computed-style-expected.txt: Removed.
        * legacy-animation-engine/animations/trigger-computed-style.html: Removed.
        * legacy-animation-engine/animations/trigger-container-scroll-boundaries-expected.txt: Removed.
        * legacy-animation-engine/animations/trigger-container-scroll-boundaries.html: Removed.
        * legacy-animation-engine/animations/trigger-container-scroll-empty-expected.txt: Removed.
        * legacy-animation-engine/animations/trigger-container-scroll-empty.html: Removed.
        * legacy-animation-engine/animations/trigger-container-scroll-simple-expected.txt: Removed.
        * legacy-animation-engine/animations/trigger-container-scroll-simple.html: Removed.
        * legacy-animation-engine/animations/trigger-parsing-expected.txt: Removed.
        * legacy-animation-engine/animations/trigger-parsing.html: Removed.
        * legacy-animation-engine/fast/css/compare-animation-trigger-expected.txt: Removed.
        * legacy-animation-engine/fast/css/compare-animation-trigger.html: Removed.
        * platform/gtk/TestExpectations:
        * platform/ios/TestExpectations:
        * platform/mac-wk2/TestExpectations:
        * platform/wincairo/TestExpectations:

2018-10-02  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r236624 and r236671.
        https://bugs.webkit.org/show_bug.cgi?id=190207

        The change in r236624 introduced crashes on the bots
        (Requested by ryanhaddad on #webkit).

        Reverted changesets:

        "Refactoring: eliminate raw pointer usage in Fullscreen code"
        https://bugs.webkit.org/show_bug.cgi?id=188747
        https://trac.webkit.org/changeset/236624

        "Unify implementation in VideoFullscreenInterfaceAVKit"
        https://bugs.webkit.org/show_bug.cgi?id=190091
        https://trac.webkit.org/changeset/236671

2018-10-02  Frederic Wang  <fwang@igalia.com>

        [WPE] Enable more Cache Storage and Service Workers tests
        https://bugs.webkit.org/show_bug.cgi?id=190198

        Reviewed by Michael Catanzaro.

        * platform/wpe/TestExpectations: Unskip most tests and add expectations for a few of them.

2018-10-02  Frederic Wang  <fwang@igalia.com>

        [GTK] Enable more Cache Storage and Service Workers tests
        https://bugs.webkit.org/show_bug.cgi?id=190196

        Reviewed by Michael Catanzaro.

        * platform/gtk/TestExpectations: Unskip most tests are add some failure annotations.

2018-10-02  Thibault Saunier  <tsaunier@igalia.com>

        [GTK][WPE] Blacklist more tests that are requiring webrtc <-> webaudio bridging
        https://bugs.webkit.org/show_bug.cgi?id=189829

        Reviewed by Alejandro G. Castro.

        * platform/gtk/TestExpectations:
        * platform/wpe/TestExpectations:

2018-10-02  Basuke Suzuki  <Basuke.Suzuki@sony.com>

        [WinCairo] Enable some wpt tests.
        https://bugs.webkit.org/show_bug.cgi?id=190129

        Unreviewed test gardening..

        * platform/wincairo/TestExpectations:
        * platform/wincairo/http/wpt/html/browsers/browsing-the-web/navigating-across-documents/click-expected.txt: Added.
        * platform/wincairo/http/wpt/html/browsers/browsing-the-web/navigating-across-documents/href-expected.txt: Added.

2018-10-01  Ross Kirsling  <ross.kirsling@sony.com>

        [WinCairo] Unreviewed test gardening.

        * platform/wincairo/TestExpectations:

2018-10-01  Ryosuke Niwa  <rniwa@webkit.org>

        Removed a failing test expectation on imported/w3c/web-platform-tests/shadow-dom/slotchange.html
        since we haven't seen a single failure after the fix in r236440.

        * platform/mac/TestExpectations:

2018-10-01  Myles C. Maxfield  <mmaxfield@apple.com>

        [Cocoa] Update delete-emoji expected results
        https://bugs.webkit.org/show_bug.cgi?id=190182

        Unreviewed.

        Simply update the expected results.

        * platform/mac-highsierra/editing/deleting/delete-emoji-1-expected.txt: Copied from LayoutTests/platform/mac/editing/deleting/delete-emoji-1-expected.txt.
        * platform/mac-highsierra/editing/deleting/delete-emoji-9-expected.txt: Copied from LayoutTests/platform/mac/editing/deleting/delete-emoji-9-expected.txt.
        * platform/mac-highsierra/editing/deleting/delete-emoji-expected.txt: Copied from LayoutTests/platform/mac/editing/deleting/delete-emoji-expected.txt.
        * platform/mac/TestExpectations:
        * platform/mac/editing/deleting/delete-emoji-1-expected.txt:
        * platform/mac/editing/deleting/delete-emoji-9-expected.txt:
        * platform/mac/editing/deleting/delete-emoji-expected.txt:

2018-10-01  Ryosuke Niwa  <rniwa@webkit.org>

        Add a new variant of serializePreservingVisualAppearance which takes VisibleSelection
        https://bugs.webkit.org/show_bug.cgi?id=190108

        Reviewed by Wenson Hsieh.

        Rebaselined the test since the bug that interchange new lines are inserted in the last table cell is fixed.
        Also updated the description in the test to reflect this change.

        * editing/pasteboard/paste-table-003-expected.txt:
        * editing/pasteboard/paste-table-003.html:

2018-10-01  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rebaseline tests after r236632.

        * platform/ios/css3/blending/repaint/blend-mode-isolate-stacking-context-expected.txt:
        * platform/ios/css3/blending/repaint/blend-mode-turn-off-isolation-expected.txt:
        * platform/ios/css3/blending/repaint/blend-mode-turn-off-isolation-no-effect-expected.txt: Added.

2018-10-01  Sihui Liu  <sihui_liu@apple.com>

        Remove StorageProcess
        https://bugs.webkit.org/show_bug.cgi?id=189975

        Reviewed by Geoffrey Garen.

        Since Service Worker management is in netowrk process now, we should terminate network 
        process instead of storage process.

        * http/wpt/service-workers/persistent-importScripts.html:

2018-10-01  Jiewen Tan  <jiewen_tan@apple.com>

        [WebAuthN] Import a JS CBOR coder
        https://bugs.webkit.org/show_bug.cgi?id=189877
        <rdar://problem/44701124>

        Reviewed by Chris Dumez.

        This patch import a 3rd party JS CBOR coder from https://github.com/paroga/cbor-js.
        The library is MIT licensed, which should be fine to use within WebKit.

        As a benefit from the library, tests are updated to check CBOR binaries.

        * http/wpt/credential-management/credentialscontainer-store-basics.https.html:
        * http/wpt/webauthn/idl.https.html:
        * http/wpt/webauthn/public-key-credential-create-failure-local.https.html:
        * http/wpt/webauthn/public-key-credential-create-success-local.https.html:
        * http/wpt/webauthn/public-key-credential-get-failure-local.https.html:
        * http/wpt/webauthn/public-key-credential-get-success-local.https.html:
        * http/wpt/webauthn/resources/cbor.js: Added.
        * http/wpt/webauthn/resources/util.js:

2018-10-01  Daniel Bates  <dabates@apple.com>

        [iOS] Special keys are misidentified in DOM keyboard events
        https://bugs.webkit.org/show_bug.cgi?id=189974

        Reviewed by Wenson Hsieh.

        Add tests to ensure that we do not regress key identification for special keys.

        Update the expected results for test fast/events/ios/keydown-keyup-special-keys-in-non-editable-element.html
        now that we correctly identify some more keys.

        * fast/events/ios/keydown-keyup-arrow-keys-in-non-editable-element-expected.txt: Added.
        * fast/events/ios/keydown-keyup-arrow-keys-in-non-editable-element.html: Added.
        * fast/events/ios/keydown-keyup-special-keys-in-non-editable-element-expected.txt:
        * fast/events/ios/keypress-keys-in-non-editable-element-expected.txt: Added.
        * fast/events/ios/keypress-keys-in-non-editable-element.html: Added.
        * resources/ui-helper.js:
        (window.UIHelper.typeCharacter): Actually type the specified character in DumpRenderTree.

2018-10-01  Ryan Haddad  <ryanhaddad@apple.com>

        REGRESSION (r235948?): Layout Test media/media-controls-accessibility.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=189674

        Unreviewed test gardening..

        * platform/mac/TestExpectations: Remove flaky expectation.

2018-10-01  Youenn Fablet  <youenn@apple.com>

        [macOS Sierra] Layout Test http/wpt/cache-storage/cache-put-keys.https.any.worker.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=184204

        Reviewed by Chris Dumez.

        * platform/mac-wk2/TestExpectations:

2018-10-01  Chris Dumez  <cdumez@apple.com>

        Make crossOriginObject.then undefined for promises
        https://bugs.webkit.org/show_bug.cgi?id=190094

        Reviewed by Darin Adler.

        Update existing tests to reflect behavior change.

        * http/tests/navigation/process-swap-window-open-expected.txt:
        * http/tests/navigation/process-swap-window-open.html:
        * http/wpt/cross-origin-window-policy/resources/utils.js:
        (testCrossOriginOption):

2018-10-01  Alicia Boya García  <aboya@igalia.com>

        [MSE][GStreamer] Reset running time in PlaybackPipeline::flush()
        https://bugs.webkit.org/show_bug.cgi?id=190076

        Reviewed by Philippe Normand.

        A test where a seek is followed by a redundant append is added. This
        test timed out in the GStreamer MSE implementation before the
        accompanying patch fixed it.

        The MIME type declared in test-48khz-manifest.json has also been
        changed, from non-standard `audio/x-m4a` to `audio/mp4;
        codecs="mp4a.40.2"`, as implied by the MSE specs. This should not
        affect other tests because no other tests were reading this type
        string before.

        * media/media-source/content/test-48khz-manifest.json:
        * media/media-source/media-source-seek-redundant-append-expected.txt: Added.
        * media/media-source/media-source-seek-redundant-append.html: Added.
        * media/video-test.js:

2018-10-01  Antoine Quint  <graouts@apple.com>

        [Web Animations] Fix test regressions after enabling Web Animations with CSS Integration
        https://bugs.webkit.org/show_bug.cgi?id=190032

        Unreviewed. We need to opt into the legacy animation engine for these tests to fix some crashes in other
        tests due to webkit.org/b/186946.

        * legacy-animation-engine/animations/cross-fade-webkit-mask-image.html:
        * legacy-animation-engine/transitions/delay.html:
        * legacy-animation-engine/transitions/transition-timing-function.html:

2018-09-30  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] Clean up RealtimeMediaSource settings change handling
        https://bugs.webkit.org/show_bug.cgi?id=189998
        <rdar://problem/44797884>

        Reviewed by Youenn Fablet.

        * webrtc/video-disabled-black.html:

2018-09-29  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r236631.
        https://bugs.webkit.org/show_bug.cgi?id=190112

        Caused various eventSender tests, including fast/css/pseudo-
        active-style-sharing*, to fail (Requested by smfr on #webkit).

        Reverted changeset:

        "Regression(r236512): http/tests/navigation/keyboard-events-
        during-provisional-navigation.html is flaky"
        https://bugs.webkit.org/show_bug.cgi?id=190052
        https://trac.webkit.org/changeset/236631

2018-09-28  Zamiul Haque  <zhaque@apple.com>

        Angled gradient backgrounds in body render vertically when body height is 0
        https://bugs.webkit.org/show_bug.cgi?id=177232
        <rdar://problem/34548230>.

        Reviewed by Tim Horton.

        Added tests to make sure that angled background gradients inside of a 
        body tag of height 0 render as empty white screens.

        * angled-background-repeating-gradient-rendering-vertical.html: Added.
        * angled-background-repeating-gradient-rendering-vertical-expected.html: Added.

2018-09-28  Chris Dumez  <cdumez@apple.com>

        The return value of an OnBeforeUnloadEventHandler should always be coerced into a DOMString
        https://bugs.webkit.org/show_bug.cgi?id=190090

        Reviewed by Ryosuke Niwa.

        Update test that was returning a value in a beforeunload event listener instead of using an
        event handler. The test needs to use an event handler (window.onbeforeunload) as an event
        listener does not have a return value. I have verified that our behavior is consistent with
        Chrome and Firefox on this test, both with an event listener and an event handler.

        * fast/loader/form-submission-after-beforeunload-cancel.html:

2018-09-28  Simon Fraser  <simon.fraser@apple.com>

        RenderLayer::removeOnlyThisLayer() should not call updateLayerPositions()
        https://bugs.webkit.org/show_bug.cgi?id=190093

        Reviewed by Dean Jackson and Zalan Bujtas.
        
        The ordering of the repaints changes.
        
        blend-mode-turn-off-isolation-no-effect.html now issues a repaint, which is expected now.
        Isolation is so rare that this is not a problem.

        * css3/blending/repaint/blend-mode-isolate-stacking-context-expected.txt:
        * css3/blending/repaint/blend-mode-turn-off-isolation-expected.txt:
        * css3/blending/repaint/blend-mode-turn-off-isolation-no-effect-expected.txt:
        * fast/repaint/absolute-position-change-containing-block-expected.txt:

2018-09-28  Devin Rousso  <drousso@apple.com>

        Web Inspector: crash in InspectorNetworkAgent::didReceiveResponse when loading denied x-frame resources
        https://bugs.webkit.org/show_bug.cgi?id=190046

        Reviewed by Joseph Pecoraro.

        * http/tests/inspector/network/resources/x-frame-options.php: Added.
        * http/tests/inspector/network/x-frame-options-expected.txt: Added.
        * http/tests/inspector/network/x-frame-options.html: Added.

2018-09-28  Jiewen Tan  <jiewen_tan@apple.com>

        [WebAuthN] Polish WebAuthN auto-test environment
        https://bugs.webkit.org/show_bug.cgi?id=189283
        <rdar://problem/44117828>

        Reviewed by Chris Dumez.

        This patch does the following few things:
        1. Update tests that employ old mocking mechnism to the new one.
        2. Move tests from http/tests/webauthn to http/wpt/webauthn. As a result, we have one unified place for
        all WebAuthN tests: http/wpt/webauthn.
        3. Add a helper function to check DOMException message as well.

        * TestExpectations:
        * http/tests/webauthn/public-key-credential-create-with-invalid-parameters.https-expected.txt: Removed.
        * http/tests/webauthn/public-key-credential-get-with-invalid-parameters.https-expected.txt: Removed.
        * http/tests/webauthn/public-key-credential-same-origin-with-ancestors-2.https-expected.txt: Removed.
        * http/tests/webauthn/public-key-credential-same-origin-with-ancestors-2.https.html: Removed.
        * http/tests/webauthn/public-key-credential-same-origin-with-ancestors.https-expected.txt: Removed.
        * http/tests/webauthn/public-key-credential-same-origin-with-ancestors.https.html: Removed.
        * http/tests/webauthn/resources/last-layer-frame.https.html: Removed.
        * http/tests/webauthn/resources/util.js: Removed.
        * http/wpt/credential-management/credentialscontainer-store-basics.https.html:
        * http/wpt/webauthn/idl.https.html:
        * http/wpt/webauthn/public-key-credential-create-failure-local.https.html:
        * http/wpt/webauthn/public-key-credential-create-failure.https-expected.txt:
        * http/wpt/webauthn/public-key-credential-create-failure.https.html:
        * http/wpt/webauthn/public-key-credential-create-success.https-expected.txt: Removed.
        * http/wpt/webauthn/public-key-credential-create-success.https.html: Removed.
        * http/wpt/webauthn/public-key-credential-create-with-invalid-parameters.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-create-with-invalid-parameters.https.html: Renamed from LayoutTests/http/tests/webauthn/public-key-credential-create-with-invalid-parameters.https.html.
        * http/wpt/webauthn/public-key-credential-get-failure-local.https.html:
        * http/wpt/webauthn/public-key-credential-get-failure.https-expected.txt:
        * http/wpt/webauthn/public-key-credential-get-failure.https.html:
        * http/wpt/webauthn/public-key-credential-get-success.https-expected.txt: Removed.
        * http/wpt/webauthn/public-key-credential-get-success.https.html: Removed.
        * http/wpt/webauthn/public-key-credential-get-with-invalid-parameters.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-get-with-invalid-parameters.https.html: Renamed from LayoutTests/http/tests/webauthn/public-key-credential-get-with-invalid-parameters.https.html.
        * http/wpt/webauthn/public-key-credential-same-origin-with-ancestors.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-same-origin-with-ancestors.https.html: Added.
        * http/wpt/webauthn/resources/last-layer-frame.https.html: Added.
        * http/wpt/webauthn/resources/second-layer-frame.https.html: Renamed from LayoutTests/http/tests/webauthn/resources/second-layer-frame.https.html.
        * http/wpt/webauthn/resources/util.js:
        * platform/gtk/TestExpectations:
        * platform/ios-wk1/TestExpectations:
        * platform/mac-wk1/TestExpectations:
        * platform/mac-wk2/TestExpectations:
        * platform/win/TestExpectations:
        * platform/wincairo/TestExpectations:
        * platform/wpe/TestExpectations:

2018-09-28  Jer Noble  <jer.noble@apple.com>

        Refactoring: eliminate raw pointer usage in Fullscreen code
        https://bugs.webkit.org/show_bug.cgi?id=188747
        <rdar://problem/43541164>

        Reviewed by Alex Christensen.

        Test was causing false pass results due to the webkitPresentationMode being correctly set
        to "inline" during the close() operation; modify the test to only perform the close()
        operation when the presetation mode is changed to "picture-in-picture".

        * media/controls/ipad/close-page-with-picture-in-picture-video-assertion-failure.html:
        * media/controls/ipad/resources/picture-in-picture.html:

2018-09-28  Chris Dumez  <cdumez@apple.com>

        Drop support for cross-origin-window-policy header
        https://bugs.webkit.org/show_bug.cgi?id=190081

        Reviewed by Ryosuke Niwa.

        * http/wpt/cross-origin-window-policy/allow-postmessage-expected.txt: Removed.
        * http/wpt/cross-origin-window-policy/allow-postmessage-from-deny-expected.txt: Removed.
        * http/wpt/cross-origin-window-policy/allow-postmessage-from-deny.html: Removed.
        * http/wpt/cross-origin-window-policy/allow-postmessage-from-deny.html.headers: Removed.
        * http/wpt/cross-origin-window-policy/allow-postmessage.html: Removed.
        * http/wpt/cross-origin-window-policy/cross-origin-window-policy-header-expected.txt: Removed.
        * http/wpt/cross-origin-window-policy/cross-origin-window-policy-header.html: Removed.
        * http/wpt/cross-origin-window-policy/navigation-from-opener-via-open-target-expected.txt: Removed.
        * http/wpt/cross-origin-window-policy/navigation-from-opener-via-open-target.html: Removed.
        * http/wpt/cross-origin-window-policy/navigation-from-subframe-via-anchor-target-expected.txt: Removed.
        * http/wpt/cross-origin-window-policy/navigation-from-subframe-via-anchor-target.html: Removed.
        * http/wpt/cross-origin-window-policy/resources/cross-origin-window-policy-allow-postmessage-pong.html: Removed.
        * http/wpt/cross-origin-window-policy/resources/cross-origin-window-policy-allow-postmessage-pong.html.headers: Removed.
        * http/wpt/cross-origin-window-policy/resources/destination.html: Removed.
        * http/wpt/cross-origin-window-policy/resources/navigate-parent-via-anchor.html: Removed.
        * http/wpt/cross-origin-window-policy/resources/navigation-from-subframe-frame.py: Removed.
        * http/wpt/cross-origin-window-policy/resources/serve-cross-origin-window-policy-header.py: Removed.
        * http/wpt/cross-origin-window-policy/resources/utils.js: Removed.

2018-09-28  Andy Estes  <aestes@apple.com>

        [Apple Pay] Remove the "in-store" button type
        https://bugs.webkit.org/show_bug.cgi?id=190079

        Reviewed by Tim Horton.

        * http/tests/ssl/applepay/ApplePayButton.html:
        * platform/mac/http/tests/ssl/applepay/ApplePayButton-expected.png:
        * platform/mac/http/tests/ssl/applepay/ApplePayButton-expected.txt:

2018-09-28  Dawei Fenton  <realdawei@apple.com>

        WebGL conformance: Failures and Timeouts in suite 2.0.0/conformance
        https://bugs.webkit.org/show_bug.cgi?id=189641

        Unreviewed, skip tests that are timing out.

        * TestExpectations:

2018-09-28  Chris Dumez  <cdumez@apple.com>

        document.open() should throw errors for cross-origin calls
        https://bugs.webkit.org/show_bug.cgi?id=189371
        <rdar://problem/44282700>

        Reviewed by Youenn Fablet.

        Tweak a couple of existing tests to reflect behavior change.

        * fast/dom/HTMLDocument/document-open-return-value.html:
        * fast/parser/tokenizer-close-during-document-write.html:

2018-09-28  Commit Queue  <commit-queue@webkit.org>

        Unreviewed, rolling out r236605.
        https://bugs.webkit.org/show_bug.cgi?id=190087

        caused three API test timeouts (Requested by jernoble on
        #webkit).

        Reverted changeset:

        "Refactoring: eliminate raw pointer usage in Fullscreen code"
        https://bugs.webkit.org/show_bug.cgi?id=188747
        https://trac.webkit.org/changeset/236605

2018-09-28  Jer Noble  <jer.noble@apple.com>

        Refactoring: eliminate raw pointer usage in Fullscreen code
        https://bugs.webkit.org/show_bug.cgi?id=188747
        <rdar://problem/43541164>

        Reviewed by Alex Christensen.

        Test was causing false pass results due to the webkitPresentationMode being correctly set
        to "inline" during the close() operation; modify the test to only perform the close()
        operation when the presetation mode is changed to "picture-in-picture".

        * media/controls/ipad/close-page-with-picture-in-picture-video-assertion-failure.html:
        * media/controls/ipad/resources/picture-in-picture.html:

2018-09-28  Chris Dumez  <cdumez@apple.com>

        REGRESSION (r236573): [iOS] Layout test editing/pasteboard/emacs-ctrl-a-k-y.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=190067

        Unreviewed, re-land ios-specific expected result for this test as they were inadvertently
        dropped in r236573.

        * platform/ios-wk2/editing/pasteboard/emacs-ctrl-a-k-y-expected.txt: Added.
        * platform/ios/TestExpectations:

2018-09-27  Basuke Suzuki  <Basuke.Suzuki@sony.com>

        [Curl] Fix priority issue with multiple cookies with different level of path.
        https://bugs.webkit.org/show_bug.cgi?id=189920

        Reviewed by Fujii Hironori.

        * http/tests/cookies/cookie-with-multiple-level-path-expected.txt: Added.
        * http/tests/cookies/cookie-with-multiple-level-path.html: Added.
        * http/tests/cookies/resources/cookie-with-multiple-level-path.php: Added.

2018-09-27  Ryan Haddad  <ryanhaddad@apple.com>

        [iOS] Layout test editing/pasteboard/emacs-ctrl-a-k-y.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=190067

        Unreviewed test gardening.

        * platform/ios/TestExpectations: Mark test as failing.

2018-09-27  John Wilander  <wilander@apple.com>

        Resource Load Statistics: Non-redirected top frame navigation should not get captured in statistics
        https://bugs.webkit.org/show_bug.cgi?id=190055
        <rdar://problem/44843460>

        Reviewed by Chris Dumez.

        * http/tests/resourceLoadStatistics/do-not-capture-statistics-for-simple-top-navigations-expected.txt: Added.
        * http/tests/resourceLoadStatistics/do-not-capture-statistics-for-simple-top-navigations.html: Added.

2018-09-27  Chris Dumez  <cdumez@apple.com>

        Regression(r236512): fast/scrolling/scroll-animator-overlay-scrollbars-clicked.html and editing/pasteboard/emacs-ctrl-a-k-y.html are flaky
        https://bugs.webkit.org/show_bug.cgi?id=190048

        Reviewed by Ryosuke Niwa.

        Update editing/pasteboard/emacs-ctrl-a-k-y.html to address flakiness:
        - Stop dumping editing callbacks as some of them may get logged in a slightly different order
          due to IPC ordering, and those are not needed to determine that the test passes.
        - Dump the test as text to avoid needing platform-specific results.

        * editing/pasteboard/emacs-ctrl-a-k-y-expected.txt: Added.
        * editing/pasteboard/emacs-ctrl-a-k-y.html:
        * platform/gtk/editing/pasteboard/emacs-ctrl-a-k-y-expected.png: Removed.
        * platform/gtk/editing/pasteboard/emacs-ctrl-a-k-y-expected.txt: Removed.
        * platform/ios-wk1/editing/pasteboard/emacs-ctrl-a-k-y-expected.txt: Removed.
        * platform/ios-wk2/editing/pasteboard/emacs-ctrl-a-k-y-expected.png: Removed.
        * platform/ios-wk2/editing/pasteboard/emacs-ctrl-a-k-y-expected.txt: Removed.
        * platform/mac/editing/pasteboard/emacs-ctrl-a-k-y-expected.png: Removed.
        * platform/mac/editing/pasteboard/emacs-ctrl-a-k-y-expected.txt: Removed.
        * platform/win/editing/pasteboard/emacs-ctrl-a-k-y-expected.txt: Removed.
        * platform/wincairo/editing/pasteboard/emacs-ctrl-a-k-y-expected.txt: Removed.
        * platform/wincairo/editing/pasteboard/emacs-ctrl-k-y-001-expected.txt: Removed.

2018-09-27  Andy Estes  <aestes@apple.com>

        [Payment Request] Update web platform tests
        https://bugs.webkit.org/show_bug.cgi?id=190049

        Reviewed by Youenn Fablet.

        Updated web-platform-tests/payment-request/ to tip-of-tree from web-platform-tests.

        * platform/ios-wk2/TestExpectations:
        * platform/mac-wk2/TestExpectations:

2018-09-27  Alicia Boya García  <aboya@igalia.com>

        [MSE] Fix unwanted sample erase from the decode queue
        https://bugs.webkit.org/show_bug.cgi?id=180643

        Reviewed by Jer Noble.

        Added a test case for the fixed bug.

        * media/media-source/media-source-append-acb-no-frame-lost.html: Added.

2018-09-27  Chris Dumez  <cdumez@apple.com>

        Unreviewed, make fast/scrolling/scroll-animator-overlay-scrollbars-clicked.html more deterministic to address flakiness.

        * fast/scrolling/scroll-animator-overlay-scrollbars-clicked-expected.txt:
        * fast/scrolling/scroll-animator-overlay-scrollbars-clicked.html:

2018-09-27  John Wilander  <wilander@apple.com>

        Resource Load Statistics: Remove temporary compatibility fix for auto-dismiss popups
        https://bugs.webkit.org/show_bug.cgi?id=189980
        <rdar://problem/44780645>

        Reviewed by Alex Christensen.

        This test was for the temporary compatibility fix in:
        https://bugs.webkit.org/show_bug.cgi?id=183620. This change makes it into a
        test that the compatibility fix is no longer there.

        * http/tests/storageAccess/deny-storage-access-under-opener-if-auto-dismiss-expected.txt: Renamed from LayoutTests/http/tests/storageAccess/grant-storage-access-under-opener-expected.txt.
        * http/tests/storageAccess/deny-storage-access-under-opener-if-auto-dismiss.html: Renamed from LayoutTests/http/tests/storageAccess/grant-storage-access-under-opener.html.
        * platform/ios-wk2/TestExpectations:
            Removed comment and entry since https://bugs.webkit.org/show_bug.cgi?id=183714 was fixed long ago.
        * platform/ios/TestExpectations:
            Changed test name.
        * platform/mac-wk2/TestExpectations:
            Changed test name.

2018-09-27  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r236557.

        Really roll out r236557 this time because it breaks internal
        builds.

        Reverted changeset:

        "Add VP8 support to WebRTC"
        https://bugs.webkit.org/show_bug.cgi?id=189976
        https://trac.webkit.org/changeset/236557

2018-09-27  Youenn Fablet  <youenn@apple.com>

        Add VP8 support to WebRTC
        https://bugs.webkit.org/show_bug.cgi?id=189976

        Reviewed by Eric Carlson.

        * webrtc/audio-peer-connection-g722.html:
        * webrtc/routines.js:
        * webrtc/video-mute-vp8-expected.txt: Added.
        * webrtc/video-mute-vp8.html: Added.

2018-09-27  Youenn Fablet  <youenn@apple.com>

        LayoutTest webrtc/video-unmute.html is a flaky timeout
        https://bugs.webkit.org/show_bug.cgi?id=172879
        <rdar://problem/32548738>

        Reviewed by Eric Carlson.

        * platform/ios-wk2/TestExpectations:
        * platform/mac-wk2/TestExpectations:
        * webrtc/video-unmute.html:
        Resort on routines.js black frame routine.
        Reenable test in mac and ios.

2018-09-27  Andy Estes  <aestes@apple.com>

        [Apple Pay] Support granular errors in PaymentDetailsUpdate
        https://bugs.webkit.org/show_bug.cgi?id=189938

        Reviewed by Youenn Fablet.

        * http/tests/resources/payment-request.js:
        (validPaymentDetails):
        (updateDetailsOnShippingAddressChange):
        * http/tests/ssl/applepay/ApplePayShippingAddressChangeEventErrors.https-expected.txt: Added.
        * http/tests/ssl/applepay/ApplePayShippingAddressChangeEventErrors.https.html: Added.
        * http/tests/ssl/applepay/ApplePayShippingAddressChangeEventErrorsV3.https-expected.txt: Added.
        * http/tests/ssl/applepay/ApplePayShippingAddressChangeEventErrorsV3.https.html: Added.
        * platform/mac-wk2/TestExpectations:

2018-09-27  Chris Dumez  <cdumez@apple.com>

        document.open() should not propagate URLs to non-fully active documents
        https://bugs.webkit.org/show_bug.cgi?id=189375
        <rdar://problem/44282755>

        Reviewed by Youenn Fablet.

        Update existing test to reflect behavior change. I have verified that this test was
        failing in Firefox and is now passing in Firefox.

        * fast/dom/resource-locations-in-created-html-document.html:

2018-09-27  Chris Dumez  <cdumez@apple.com>

        The WebContent process should not process incoming IPC while waiting for a sync IPC reply
        https://bugs.webkit.org/show_bug.cgi?id=184183
        <rdar://problem/36800576>

        Reviewed by Ryosuke Niwa.

        Drop test for the DoNotProcessIncomingMessagesWhenWaitingForSyncReply IPC::SendOption as it was
        removed in this patch. This SendOption is no longer useful because it is now the default behavior
        for the WebContent process.

        * fast/misc/testIncomingSyncIPCMessageWhileWaitingForSyncReply-expected.txt: Removed.
        * fast/misc/testIncomingSyncIPCMessageWhileWaitingForSyncReply.html: Removed.

2018-09-27  Philippe Normand  <pnormand@igalia.com>

        Unreviewed GTK WebAudio rebaseline.

        This time from the 64-bit Release bot...

        * platform/gtk/webaudio/oscillator-custom-expected.wav:
        * platform/gtk/webaudio/oscillator-sawtooth-expected.wav:
        * platform/gtk/webaudio/oscillator-sine-expected.wav:
        * platform/gtk/webaudio/oscillator-square-expected.wav:
        * platform/gtk/webaudio/oscillator-triangle-expected.wav:

2018-09-27  Philippe Normand  <pnormand@igalia.com>

        Unreviewed GTK WebAudio rebaselines

        * platform/gtk/TestExpectations: webaudio/audioprocessingevent.html doesn't fail.
        * platform/gtk/webaudio/codec-tests/wav/24bit-22khz-resample-expected.wav: Rebaselined.

2018-09-27  Philippe Normand  <pnormand@igalia.com>

        [GTK] Several tests are failing since r217598
        https://bugs.webkit.org/show_bug.cgi?id=172809

        Unreviewed, GTK platform test expectations rebaseline.

        * platform/gtk/TestExpectations:
        * platform/gtk/http/tests/xmlhttprequest/cache-override-expected.txt: Removed.
        * platform/gtk/webaudio/oscillator-custom-expected.wav:
        * platform/gtk/webaudio/oscillator-sawtooth-expected.wav:
        * platform/gtk/webaudio/oscillator-sine-expected.wav:
        * platform/gtk/webaudio/oscillator-square-expected.wav:
        * platform/gtk/webaudio/oscillator-triangle-expected.wav:

2018-09-27  Antoine Quint  <graouts@apple.com>

        [Web Animations] Turn Web Animations with CSS integration on
        https://bugs.webkit.org/show_bug.cgi?id=184819
        <rdar://problem/39597337>

        Reviewed by Dean Jackson.

        * TestExpectations:
        * animations/3d/matrix-transform-type-animation.html:
        * animations/3d/replace-filling-transform.html:
        * animations/3d/transform-origin-vs-functions.html:
        * animations/3d/transform-perspective.html:
        * animations/additive-transform-animations.html:
        * animations/animation-border-overflow.html:
        * animations/animation-callback-timestamp.html:
        * animations/animation-controller-drt-api.html:
        * animations/animation-direction-alternate-reverse-expected.txt:
        * animations/animation-direction-alternate-reverse.html:
        * animations/animation-direction-reverse-fill-mode-hardware.html:
        * animations/animation-direction-reverse-hardware-opacity.html:
        * animations/animation-direction-reverse-hardware.html:
        * animations/animation-direction-reverse-non-hardware.html:
        * animations/animation-direction-reverse-timing-functions-hardware.html:
        * animations/animation-direction-reverse-timing-functions.html:
        * animations/animation-direction.html:
        * animations/animation-followed-by-transition.html:
        * animations/animation-hit-test-transform.html:
        * animations/animation-hit-test.html:
        * animations/animation-internals-api-expected.txt: Removed.
        * animations/animation-internals-api-multiple-keyframes-expected.txt: Removed.
        * animations/animation-internals-api-multiple-keyframes.html: Removed.
        * animations/animation-internals-api.html: Removed.
        * animations/animation-offscreen-to-onscreen.html:
        * animations/animation-playstate-paused-style-resolution.html:
        * animations/big-rotation-expected.txt:
        * animations/big-rotation.html:
        * animations/change-completed-animation-transform.html:
        * animations/change-keyframes.html:
        * animations/combo-transform-rotate+scale.html:
        * animations/cross-fade-background-image.html:
        * animations/cross-fade-border-image-source.html:
        * animations/cross-fade-list-style-image.html:
        * animations/cross-fade-webkit-mask-box-image.html:
        * animations/duplicate-keys-expected.html:
        * animations/duplicate-keys.html:
        * animations/duplicated-keyframes-name.html:
        * animations/fill-forwards-end-state.html:
        * animations/fill-mode-forwards-zero-duration-expected.txt:
        * animations/fill-mode-forwards-zero-duration.html:
        * animations/fill-mode-removed.html:
        * animations/font-variations/font-stretch.html:
        * animations/font-variations/font-style.html:
        * animations/font-variations/font-variation-settings-order.html:
        * animations/font-variations/font-variation-settings-unlike.html:
        * animations/font-variations/font-variation-settings.html:
        * animations/font-variations/font-weight.html:
        * animations/generic-from-to.html:
        * animations/import.html:
        * animations/keyframe-multiple-timing-functions-transform.html:
        * animations/keyframe-timing-functions-transform.html:
        * animations/keyframe-timing-functions.html:
        * animations/keyframe-timing-functions2.html:
        * animations/keyframes-comma-separated.html:
        * animations/keyframes-dynamic.html:
        * animations/keyframes-infinite-iterations.html:
        * animations/keyframes-invalid-keys.html:
        * animations/keyframes-out-of-order.html:
        * animations/keyframes.html:
        * animations/leak-document-with-css-animation.html:
        * animations/lineheight-animation.html:
        * animations/longhand-timing-function.html:
        * animations/matrix-anim.html:
        * animations/missing-from-to-transforms.html:
        * animations/missing-from-to.html:
        * animations/missing-keyframe-properties-repeating.html:
        * animations/missing-keyframe-properties-timing-function.html:
        * animations/missing-keyframe-properties.html:
        * animations/missing-values-first-keyframe.html:
        * animations/missing-values-last-keyframe.html:
        * animations/multiple-animations-timing-function.html:
        * animations/multiple-animations.html:
        * animations/multiple-keyframes.html:
        * animations/negative-delay.html:
        * animations/pause-crash.html:
        * animations/play-state-start-paused.html:
        * animations/resources/animation-leak-iframe.html:
        * animations/simultaneous-start-left.html:
        * animations/simultaneous-start-transform.html:
        * animations/spring-function.html:
        * animations/stacking-context-unchanged-while-running.html:
        * animations/stop-animation-on-suspend.html:
        * animations/suspend-resume-animation-events.html:
        * animations/timing-functions.html:
        * animations/transition-and-animation-1.html:
        * animations/transition-and-animation-2.html:
        * animations/transition-and-animation-3.html:
        * animations/trigger-container-scroll-boundaries.html:
        * animations/trigger-container-scroll-empty.html:
        * animations/trigger-container-scroll-simple.html:
        * animations/unanimated-style.html:
        * animations/unprefixed-keyframes.html:
        * animations/width-using-ems.html:
        * compositing/animation/animated-composited-inside-hidden.html:
        * compositing/animation/computed-style-during-delay.html:
        * compositing/animation/layer-for-filling-animation.html:
        * compositing/backing/backface-visibility-flip.html:
        * compositing/backing/transform-transition-from-outside-view.html:
        * compositing/contents-scale/animating.html:
        * compositing/layer-creation/animation-overlap-with-children.html:
        * compositing/layer-creation/mismatched-rotated-transform-animation-overlap.html:
        * compositing/layer-creation/mismatched-rotated-transform-transition-overlap.html:
        * compositing/layer-creation/mismatched-transform-transition-overlap.html:
        * compositing/layer-creation/multiple-keyframes-animation-overlap.html:
        * compositing/layer-creation/overlap-animation-clipping.html:
        * compositing/layer-creation/overlap-animation-container.html:
        * compositing/layer-creation/overlap-animation.html:
        * compositing/layer-creation/scale-rotation-animation-overlap.html:
        * compositing/layer-creation/scale-rotation-transition-overlap.html:
        * compositing/layer-creation/translate-animation-overlap.html:
        * compositing/layer-creation/translate-scale-animation-overlap.html:
        * compositing/layer-creation/translate-scale-transition-overlap.html:
        * compositing/layer-creation/translate-transition-overlap.html:
        * compositing/overflow/overflow-positioning.html:
        * compositing/reflections/animation-inside-reflection.html:
        * compositing/reflections/nested-reflection-animated.html:
        * compositing/reflections/nested-reflection-transition.html:
        * compositing/scrolling/touch-scroll-to-clip.html:
        * compositing/transitions/scale-transition-no-start.html:
        * compositing/transitions/singular-scale-transition.html:
        * compositing/visible-rect/animated-from-none.html:
        * compositing/visible-rect/animated.html:
        * css3/calc/transitions-dependent.html:
        * css3/calc/transitions.html:
        * css3/filters/backdrop/animation.html:
        * css3/filters/composited-during-animation.html:
        * css3/filters/filter-animation-from-none-hw.html:
        * css3/filters/filter-animation-from-none-multi-hw.html:
        * css3/filters/filter-animation-from-none-multi.html:
        * css3/filters/filter-animation-from-none.html:
        * css3/filters/filter-animation-hw.html:
        * css3/filters/filter-animation-multi-hw.html:
        * css3/filters/filter-animation-multi.html:
        * css3/filters/filter-animation.html:
        * css3/masking/clip-path-animation.html:
        * fast/animation/css-animation-resuming-when-visible-with-style-change.html:
        * fast/animation/css-animation-resuming-when-visible-with-style-change2.html:
        * fast/animation/css-animation-resuming-when-visible.html:
        * fast/animation/css-animation-throttling-lowPowerMode.html:
        * fast/animation/height-auto-transition-computed-value.html:
        * fast/css-generated-content/pseudo-animation.html:
        * fast/css-generated-content/pseudo-transition.html:
        * fast/filter-image/filter-image-animation.html:
        * fast/shapes/shape-outside-floats/shape-outside-animation.html:
        * fast/shapes/shape-outside-floats/shape-outside-shape-image-threshold-animation.html:
        * fast/shapes/shape-outside-floats/shape-outside-shape-margin-animation.html:
        * http/wpt/css/css-animations/start-animation-001.html:
        * imported/blink/transitions/transition-not-interpolable.html:
        * imported/blink/transitions/unprefixed-transform.html:
        * platform/ios/TestExpectations:
        * platform/win/TestExpectations:
        * transitions/remove-transition-style.html:
        * transitions/transition-drt-api-delay-expected.txt: Removed.
        * transitions/transition-drt-api-delay.html: Removed.
        * transitions/transition-drt-api-expected.txt: Removed.
        * transitions/transition-drt-api.html: Removed.
        * transitions/zero-duration-with-non-zero-delay-end.html:

2018-09-26  Devin Rousso  <drousso@apple.com>

        Web Inspector: Hide DOM and XHR breakpoint sections when they are empty
        https://bugs.webkit.org/show_bug.cgi?id=182406
        <rdar://problem/37131512>

        Reviewed by Joseph Pecoraro.

        * inspector/debugger/break-on-uncaught-exception-throw-in-promise.html:
        * inspector/debugger/break-on-uncaught-exception.html:
        * inspector/debugger/breakpoints-disabled-expected.txt:
        * inspector/debugger/breakpoints-disabled.html:
        * inspector/debugger/pause-reason.html:
        * inspector/debugger/setPauseOnAssertions.html:
        * inspector/worker/debugger-pause.html:

2018-09-26  Devin Rousso  <drousso@apple.com>

        Web Inspector: determine hasVisibleEffect for each RecordingAction as it's processed
        https://bugs.webkit.org/show_bug.cgi?id=189860

        Reviewed by Joseph Pecoraro.

        * inspector/unit-tests/array-utilities-expected.txt:
        * inspector/unit-tests/array-utilities.html:

2018-09-26  Justin Fan  <justin_fan@apple.com>

        WebGL 2: updated passing test expectations for deqp/primitiverestart
        https://bugs.webkit.org/show_bug.cgi?id=189981

        Reviewed by Jon Lee.

        Test-expectation updates for trac.webkit.org/changeset/236490; these are still to be skipped on ews.

        * webgl/2.0.0/deqp/functional/gles3/primitiverestart/00-expected.txt:
        * webgl/2.0.0/deqp/functional/gles3/primitiverestart/01-expected.txt:
        * webgl/2.0.0/deqp/functional/gles3/primitiverestart/02-expected.txt:
        * webgl/2.0.0/deqp/functional/gles3/primitiverestart/03-expected.txt:
        * webgl/2.0.0/deqp/functional/gles3/primitiverestart/04-expected.txt:
        * webgl/2.0.0/deqp/functional/gles3/primitiverestart/05-expected.txt:
        * webgl/2.0.0/deqp/functional/gles3/primitiverestart/06-expected.txt:
        * webgl/2.0.0/deqp/functional/gles3/primitiverestart/07-expected.txt:

2018-09-26  Alex Christensen  <achristensen@webkit.org>

        Unreviewed, rolling out r236524.

        Broke API tests

        Reverted changeset:

        "URLWithUserTypedString should return nil for URLs deemed to
        be invalid by WebCore::URL"
        https://bugs.webkit.org/show_bug.cgi?id=189979
        https://trac.webkit.org/changeset/236524

2018-09-26  Per Arne Vollan  <pvollan@apple.com>

        WebVTT cue alignment broken
        https://bugs.webkit.org/show_bug.cgi?id=190004

        Reviewed by Eric Carlson.

        * media/track/captions-webvtt/left-align.vtt: Added.
        * media/track/track-add-remove-cue-expected.txt:
        * media/track/track-add-remove-cue.html:
        * media/track/track-cue-left-align-expected-mismatch.html: Added.
        * media/track/track-cue-left-align.html: Added.
        * media/track/track-cue-mutable-expected.txt:
        * media/track/track-cue-mutable.html:
        * media/track/track-vttcue-expected.txt:
        * media/track/track-vttcue.html:
        * media/track/track-webvtt-tc013-settings-expected.txt:
        * media/track/track-webvtt-tc013-settings.html:
        * media/track/track-webvtt-tc015-positioning-expected.txt:
        * media/track/track-webvtt-tc015-positioning.html:
        * media/track/track-webvtt-tc016-align-positioning-expected.txt:
        * media/track/track-webvtt-tc016-align-positioning.html:
        * media/track/track-webvtt-tc018-align-text-line-position-expected.txt:
        * media/track/track-webvtt-tc018-align-text-line-position.html:
        * media/track/track-webvtt-tc021-valign-expected.txt:
        * media/track/track-webvtt-tc021-valign.html:
        * media/video-test.js:
        (testCues):

2018-09-26  James Savage  <james.savage@apple.com>

        Allow override of viewport configuration.
        https://bugs.webkit.org/show_bug.cgi?id=188772.
        <rdar://problem/43538892>.

        Reviewed by Simon Fraser.

        Add test proving that a document without a meta viewport specifying
        width=device-width still gets a layout when this setting is enabled. I also
        added a baseline case to prove that without this setting we do not layout
        at device width.

        * fast/viewport/ios/ipad/empty-viewport-expected.txt: Added.
        * fast/viewport/ios/ipad/empty-viewport.html: Added.
        * fast/viewport/ios/ipad/meta-viewport-disabled-expected.txt: Added.
        * fast/viewport/ios/ipad/meta-viewport-disabled.html: Added.

2018-09-26  Alex Christensen  <achristensen@webkit.org>

        uidna_nameToASCII only needs a buffer capacity of 64
        https://bugs.webkit.org/show_bug.cgi?id=190006

        Reviewed by Chris Dumez.

        * fast/dom/DOMURL/parsing.html:

2018-09-26  Ryosuke Niwa  <rniwa@webkit.org>

        Selection should work across shadow boundary when initiated by a mouse drag
        https://bugs.webkit.org/show_bug.cgi?id=151380
        <rdar://problem/24363872>

        Reviewed by Antti Koivisto and Wenson Hsieh.

        Added regression tests using ref tests since getSelection() doesn't expose any node inside a shadow tree.

        * editing/selection/selection-across-shadow-boundaries-mixed-editability-1-expected.html: Added.
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-1.html: Added.
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-2-expected.html: Added.
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-2.html: Added.
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-3-expected.html: Added.
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-3.html: Added.
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-4-expected.html: Added.
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-4.html: Added.
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-5-expected.html: Added.
        * editing/selection/selection-across-shadow-boundaries-mixed-editability-5.html: Added.
        * editing/selection/selection-across-shadow-boundaries-readonly-1-expected.html: Added.
        * editing/selection/selection-across-shadow-boundaries-readonly-1.html: Added.
        * editing/selection/selection-across-shadow-boundaries-readonly-2-expected.html: Added.
        * editing/selection/selection-across-shadow-boundaries-readonly-2.html: Added.
        * editing/selection/selection-across-shadow-boundaries-readonly-3-expected.html: Added.
        * editing/selection/selection-across-shadow-boundaries-readonly-3.html: Added.
        * editing/selection/selection-across-shadow-boundaries-user-select-all-1-expected.html: Added.
        * editing/selection/selection-across-shadow-boundaries-user-select-all-1.html: Added.

2018-09-26  Alicia Boya García  <aboya@igalia.com>

        [GTK] Unreviewed test gardening
        https://bugs.webkit.org/show_bug.cgi?id=190002

        * TestExpectations:
        * platform/gtk/TestExpectations:

2018-09-26  Truitt Savell  <tsavell@apple.com>

        Marking two more media-fragments/ tests as flakey after the iOS12 update
        https://bugs.webkit.org/show_bug.cgi?id=187557

        Unreviewed Test Gardening

        * platform/ios/TestExpectations:

2018-09-25  Justin Fan  <justin_fan@apple.com>

        WebGL 2 Conformance: primitive restart and draw_primitive_restart WebGL2 sample
        https://bugs.webkit.org/show_bug.cgi?id=189625
        <rdar://problem/42882620>

        Reviewed by Dean Jackson.

        Implement support for Primitive Restart Fixed Index as expected 
        by the WebGL 2 specifications. 

        * TestExpectations: Skip some flaky tests between different Mac machines under 2.0.0. 
        * webgl/webgl2-primitive-restart.html: Canary ref test to be run as part of LayoutTests suite.
        * webgl/webgl2-primitive-restart-expected.html:

2018-09-25  Chris Dumez  <cdumez@apple.com>

        Unreviewed, rolling out r236420 and r236458.

        This change is not fully correct

        Reverted changesets:

        "Do not do early processing of incoming sync IPC unless we're
        waiting for a sync IPC reply"
        https://bugs.webkit.org/show_bug.cgi?id=186941
        https://trac.webkit.org/changeset/236420

        "Unreviewed, update bug number of http/tests/misc/blob-
        size.html crash on Windows"
        https://trac.webkit.org/changeset/236458

2018-09-25  Justin Fan  <justin_fan@apple.com>

        WebGL 2 conformance: expected test results for the deqp suite (mac-mojave-wk2)
        https://bugs.webkit.org/show_bug.cgi?id=189942

        Reviewed by Jon Lee.

        Add expected results for the deqp suite with the new detailed format, for this spade for macOS Mojave.

        * webgl/2.0.0/deqp/.../*-expected.txt: Added expected results.

2018-09-25  Jiewen Tan  <jiewen_tan@apple.com>

        [WebAuthN] Make AuthenticatorManager
        https://bugs.webkit.org/show_bug.cgi?id=189279
        <rdar://problem/44116792>

        Reviewed by Chris Dumez.

        Most of the new tests are rewritten from the LocalAuthenticator API tests. Old mock tests are temporarily skipped
        for the new mock tests.

        * TestExpectations:
        * http/wpt/webauthn/public-key-credential-create-failure-local.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-create-failure-local.https.html: Added.
        * http/wpt/webauthn/public-key-credential-create-success-local.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-create-success-local.https.html: Added.
        * http/wpt/webauthn/public-key-credential-create-success.https.html:
        * http/wpt/webauthn/public-key-credential-get-failure-local.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-get-failure-local.https.html: Added.
        * http/wpt/webauthn/public-key-credential-get-success-local.https-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-get-success-local.https.html: Added.
        * http/wpt/webauthn/public-key-credential-get-success.https.html:
        * http/wpt/webauthn/public-key-credential-is-user-verifying-platform-authenticator-available-expected.txt: Added.
        * http/wpt/webauthn/public-key-credential-is-user-verifying-platform-authenticator-available.html: Added.
        * http/wpt/webauthn/public-key-is-user-verifying-platform-authenticator-available-expected.txt: Removed.
        * http/wpt/webauthn/public-key-is-user-verifying-platform-authenticator-available.html: Removed.
        * http/wpt/webauthn/resources/util.js:
        * platform/mac-wk2/TestExpectations:

2018-09-25  Ryan Haddad  <ryanhaddad@apple.com>

        REGRESSION: (r235948) Layout Test compositing/backing/backing-store-attachment-fill-forwards-animation.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=189598#c0

        Unreviewed test gardening.

        * platform/ios/TestExpectations: Mark test as flaky.
        * platform/mac-wk2/TestExpectations: Ditto.

2018-09-25  Eric Carlson  <eric.carlson@apple.com>

        [MediaStream] Update constraints supported by getDisplayMedia
        https://bugs.webkit.org/show_bug.cgi?id=189930

        Reviewed by Youenn Fablet.

        * http/tests/media/media-stream/get-display-media-prompt-expected.txt:
        * http/tests/media/media-stream/get-display-media-prompt.html:

2018-09-25  Ryan Haddad  <ryanhaddad@apple.com>

        [resource-timing] imported/w3c/web-platform-tests/resource-timing/resource_timing.worker.html times out on WK1
        https://bugs.webkit.org/show_bug.cgi?id=189908

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations: Mark test as a failure since it is hitting a WPT harness timeout.
        * platform/mac/TestExpectations: Remove expectation in favor of a mac-wk1 specific one.

2018-09-25  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, correct a typo in a bug URL.

        * platform/mac/TestExpectations:

2018-09-25  Chris Dumez  <cdumez@apple.com>

        Unreviewed, update bug number of http/tests/misc/blob-size.html crash on Windows

        * platform/win/TestExpectations:

2018-09-24  Simon Fraser  <simon.fraser@apple.com>

        Mark two tests as flakey.

        * platform/mac/TestExpectations:

2018-09-24  John Wilander  <wilander@apple.com>

        Cap lifetime of persistent cookies created client-side through document.cookie
        https://bugs.webkit.org/show_bug.cgi?id=189933
        <rdar://problem/44741888>

        Reviewed by Chris Dumez.

        * TestExpectations:
            Skipped the new test by default since the behavior change is for
            Cocoa platforms only.
        * http/tests/cookies/capped-lifetime-for-cookie-set-in-js-expected.txt: Added.
        * http/tests/cookies/capped-lifetime-for-cookie-set-in-js.html: Added.
        * http/tests/cookies/resources/cookie-utilities.js:
        * platform/ios/TestExpectations:
            Marked the new test as [ Pass ].
        * platform/mac-wk2/TestExpectations:
            Marked the new test as [ Pass ].

2018-09-24  Simon Fraser  <simon.fraser@apple.com>

        Remove filterRes parameter from filters
        https://bugs.webkit.org/show_bug.cgi?id=129565
        <rdar://problem/44714340>

        Reviewed by Dean Jackson.

        Remove support for the "filterRes" attribute on SVG filters. It's marked as
        deprecated in https://drafts.fxtf.org/filter-effects/#element-attrdef-filter-filterres
        and no longer supported by Chrome or Firefox.
        
        Removed existing filterRes tests, added new test checking that it has no effect.

        * html5lib/resources/tests11.dat: Edited to remove filterRes. This seems to have been superseded by
            imported/w3c/web-platform-tests/html/syntax/parsing/html5lib_tests11.html
        * platform/gtk/svg/dynamic-updates/SVGFilterElement-dom-filterRes-attr-expected.png: Removed.
        * platform/gtk/svg/dynamic-updates/SVGFilterElement-svgdom-filterRes-call-expected.png: Removed.
        * platform/gtk/svg/dynamic-updates/SVGFilterElement-svgdom-filterResX-prop-expected.png: Removed.
        * platform/gtk/svg/dynamic-updates/SVGFilterElement-svgdom-filterResY-prop-expected.png: Removed.
        * platform/gtk/svg/filters/filterRes-expected.png: Removed.
        * platform/gtk/svg/filters/filterRes1-expected.png: Removed.
        * platform/gtk/svg/filters/filterRes3-expected.png: Removed.
        * platform/mac/svg/W3C-SVG-1.1-SE/svgdom-over-01-f-expected.txt: Removed.
        * platform/mac/svg/dynamic-updates/SVGFilterElement-dom-filterRes-attr-expected.png: Removed.
        * platform/mac/svg/dynamic-updates/SVGFilterElement-svgdom-filterRes-call-expected.png: Removed.
        * platform/mac/svg/dynamic-updates/SVGFilterElement-svgdom-filterResX-prop-expected.png: Removed.
        * platform/mac/svg/dynamic-updates/SVGFilterElement-svgdom-filterResY-prop-expected.png: Removed.
        * platform/mac/svg/filters/filterRes-expected.png: Removed.
        * platform/mac/svg/filters/filterRes1-expected.png: Removed.
        * platform/mac/svg/filters/filterRes2-expected.png: Removed.
        * platform/mac/svg/filters/filterRes3-expected.png: Removed.
        * svg/W3C-SVG-1.1-SE/svgdom-over-01-f-expected.txt:
        * svg/W3C-SVG-1.1-SE/svgdom-over-01-f.svg:
        * svg/dom/SVGAnimatedInteger-expected.txt:
        * svg/dom/SVGAnimatedInteger.html: Change to use feConvolveMatrix orderX.
        * svg/dynamic-updates/SVGFilterElement-svgdom-filterRes-call-expected.txt: Removed.
        * svg/dynamic-updates/SVGFilterElement-svgdom-filterRes-call.html: Removed.
        * svg/dynamic-updates/SVGFilterElement-svgdom-filterResX-prop-expected.txt: Removed.
        * svg/dynamic-updates/SVGFilterElement-svgdom-filterResX-prop.html: Removed.
        * svg/dynamic-updates/SVGFilterElement-svgdom-filterResY-prop-expected.txt: Removed.
        * svg/dynamic-updates/SVGFilterElement-svgdom-filterResY-prop.html: Removed.
        * svg/filters/filterRes-is-noop-expected.svg: Added.
        * svg/filters/filterRes-is-noop.svg: Added.
        * svg/filters/filterRes.svg: Removed.
        * svg/filters/filterRes1-expected.txt: Removed.
        * svg/filters/filterRes1.svg: Removed.
        * svg/filters/filterRes2-expected.png: Removed.
        * svg/filters/filterRes2-expected.txt: Removed.
        * svg/filters/filterRes2.svg: Removed.
        * svg/filters/filterRes3-expected.txt: Removed.
        * svg/filters/filterRes3.svg: Removed.

2018-09-24  Justin Michaud  <justin_michaud@apple.com>

        Import WPT tests for css custom properties api
        https://bugs.webkit.org/show_bug.cgi?id=189764

        Reviewed by Ryosuke Niwa.

        * platform/mac-wk1/TestExpectations:

2018-09-24  Matt Lewis  <jlewis3@apple.com>

        Skipped accessibility/mac/focus-setting-selection-syncronizing-not-clearing.html on High Sierra+.
        https://bugs.webkit.org/show_bug.cgi?id=189094

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations:

2018-09-24  Ryosuke Niwa  <rniwa@webkit.org>

        imported/w3c/web-platform-tests/shadow-dom/slotchange.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=167652

        Reviewed by Saam Barati.

        Added a regression test for signaling a lot of slot elements.

        * fast/shadow-dom/signal-slot-list-retains-js-wrappers-expected.txt: Added.
        * fast/shadow-dom/signal-slot-list-retains-js-wrappers.html: Added.

2018-09-24  Ryosuke Niwa  <rniwa@webkit.org>

        Release assert when using paper-textarea due to autocorrect IDL attribute missing CEReactions
        https://bugs.webkit.org/show_bug.cgi?id=174629
        <rdar://problem/33407620>

        Reviewed by Simon Fraser.

        Added a regression test for mutating autocorrect and autocapitalize IDL attributes during connected callback.

        * fast/custom-elements/autocorrect-autocapitalize-idl-attributes-crash-expected.txt: Added.
        * fast/custom-elements/autocorrect-autocapitalize-idl-attributes-crash.html: Added.

2018-09-24  Basuke Suzuki  <Basuke.Suzuki@sony.com>

        [Curl] Enable http/tests/misc tests.
        https://bugs.webkit.org/show_bug.cgi?id=189931

        Unreviewed test gardening.

        * platform/wincairo/TestExpectations:
        * platform/wincairo/http/tests/misc/acid2-expected.txt: Added.
        * platform/wincairo/http/tests/misc/acid2-pixel-expected.txt: Added.
        * platform/wincairo/http/tests/misc/error404-expected.txt: Added.
        * platform/wincairo/http/tests/misc/favicon-as-image-expected.txt: Added.
        * platform/wincairo/http/tests/misc/frame-access-during-load-expected.txt: Added.
        * platform/wincairo/http/tests/misc/generated-content-inside-table-expected.txt: Added.
        * platform/wincairo/http/tests/misc/iframe404-expected.txt: Added.
        * platform/wincairo/http/tests/misc/object-embedding-svg-delayed-size-negotiation-2-expected.txt: Added.
        * platform/wincairo/http/tests/misc/object-embedding-svg-delayed-size-negotiation-expected.png: Added.
        * platform/wincairo/http/tests/misc/slow-loading-image-in-pattern-expected.txt: Added.

2018-09-24  Simon Fraser  <simon.fraser@apple.com>

        Update some test results under compositing/overflow
        https://bugs.webkit.org/show_bug.cgi?id=189857

        Reviewed by Tim Horton.
        
        Unskip some tests under compositing/overflow, and land new macOS and iOS expectations.

        * compositing/overflow/overflow-auto-with-touch-expected.txt:
        * compositing/overflow/overflow-overlay-with-touch-expected.txt:
        * compositing/overflow/scrolling-content-clip-to-viewport-expected.txt:
        * compositing/overflow/scrolling-without-painting-expected.txt:
        * compositing/overflow/textarea-scroll-touch-expected.txt:
        * compositing/overflow/updating-scrolling-content-expected.txt:
        * platform/ios-simulator-wk2/TestExpectations:
        * platform/ios/TestExpectations:
        * platform/ios/compositing/overflow/nested-scrolling-expected.txt:
        * platform/ios/compositing/overflow/overflow-auto-with-touch-expected.txt: Copied from LayoutTests/compositing/overflow/overflow-auto-with-touch-expected.txt.
        * platform/ios/compositing/overflow/overflow-auto-with-touch-toggle-expected.txt: Copied from LayoutTests/compositing/overflow/overflow-auto-with-touch-expected.txt.
        * platform/ios/compositing/overflow/overflow-overlay-with-touch-expected.txt: Copied from LayoutTests/compositing/overflow/overflow-overlay-with-touch-expected.txt.
        * platform/ios/compositing/overflow/scrolling-content-clip-to-viewport-expected.txt: Copied from LayoutTests/compositing/overflow/scrolling-content-clip-to-viewport-expected.txt.
        * platform/ios/compositing/overflow/scrolling-without-painting-expected.txt: Copied from LayoutTests/compositing/overflow/scrolling-without-painting-expected.txt.
        * platform/ios/compositing/overflow/textarea-scroll-touch-expected.txt: Copied from LayoutTests/compositing/overflow/textarea-scroll-touch-expected.txt.
        * platform/ios/compositing/overflow/updating-scrolling-content-expected.txt: Copied from LayoutTests/compositing/overflow/updating-scrolling-content-expected.txt.
        * platform/mac/TestExpectations:
        * platform/mac/compositing/overflow/composited-scrolling-paint-phases-expected.txt:

2018-09-24  Truitt Savell  <tsavell@apple.com>

        Continued test gardening of media-fragment/ tests for ios 12
        https://bugs.webkit.org/show_bug.cgi?id=187557

        Unreviewed test gardening

        * platform/ios/TestExpectations:

2018-09-21  Simon Fraser  <simon.fraser@apple.com>

        Remove the old "AcceleratedCompositingForOverflowScroll" code
        https://bugs.webkit.org/show_bug.cgi?id=189870

        Reviewed by Zalan Bujtas.

        The "AcceleratedCompositingForOverflowScroll" code was added to allow overflow:scroll to use
        composited scrolling if an overflow:scroll could be made a stacking context without affecting
        z-order. We need overflow:scroll to be accelerated always, so a different approach is needed.
        Remove this old code (unused by any platform?) to make working on new code easier.
        
        Keep some of the tests; they will be useful later.

        * compositing/overflow/automatically-opt-into-composited-scrolling-expected.txt: Removed.
        * compositing/overflow/automatically-opt-into-composited-scrolling.html: Removed.
        * compositing/overflow/clipping-ancestor-with-accelerated-scrolling-ancestor.html:
        * compositing/overflow/composited-scrolling-creates-a-stacking-container.html: Removed.
        * compositing/overflow/composited-scrolling-paint-phases.html:
        * compositing/overflow/do-not-paint-outline-into-composited-scrolling-contents.html:
        * compositing/overflow/dynamic-composited-scrolling-status.html:
        * compositing/overflow/iframe-inside-overflow-clipping.html:
        * compositing/overflow/nested-scrolling.html:
        * compositing/overflow/overflow-clip-with-accelerated-scrolling-ancestor.html:
        * compositing/overflow/paint-neg-z-order-descendants-into-scrolling-contents-layer.html:
        * compositing/overflow/scrolling-content-clip-to-viewport.html:
        * compositing/overflow/scrolling-without-painting.html:
        * compositing/overflow/textarea-scroll-touch.html:
        * compositing/overflow/updating-scrolling-content.html:
        * compositing/rtl/rtl-overflow-scrolling.html:
        * platform/gtk/compositing/overflow/composited-scrolling-creates-a-stacking-container-expected.txt: Removed.
        * platform/ios-simulator-wk2/TestExpectations:
        * platform/ios-wk1/TestExpectations:
        * platform/ios/compositing/overflow/automatically-opt-into-composited-scrolling-expected.txt: Removed.
        * platform/ios/compositing/overflow/composited-scrolling-creates-a-stacking-container-expected.txt: Removed.
        * platform/mac/compositing/overflow/composited-scrolling-creates-a-stacking-container-expected.txt: Removed.

2018-09-24  Chris Dumez  <cdumez@apple.com>

        Do not do early processing of incoming sync IPC unless we're waiting for a sync IPC reply
        https://bugs.webkit.org/show_bug.cgi?id=186941

        Reviewed by Alex Christensen.

        Add layout test coverage.

        * http/tests/misc/blob-size-expected.txt: Added.
        * http/tests/misc/blob-size.html: Added.

2018-09-24  Chris Dumez  <cdumez@apple.com>

        Unreviewed, skip imported/w3c/web-platform-tests/html/webappapis/dynamic-markup-insertion/document-write/contentType.window.html

        This newly imported test flakily times out.

        * TestExpectations:

2018-09-24  Zan Dobersek  <zdobersek@igalia.com>

        Unreviewed WPE gardening. Managing failing WebGL tests in the 2.0.0
        version of the Khronos conformance suite.

        * platform/wpe/TestExpectations: Skip the GLSL test cases of which one
        is DoS-ing AMD GPUs on Linux. This needs more research to isolate the
        culprit and properly fix the underlying problem.
        * platform/wpe/webgl/2.0.0/: 44 test baselines added.

2018-09-24  Daniel Bates  <dabates@apple.com>

        [iOS] Key code is 0 for many hardware keyboard keys
        https://bugs.webkit.org/show_bug.cgi?id=189604

        Reviewed by Wenson Hsieh.

        Update existing test and test result and add a new test to ensure we dispatch DOM keydown
        and DOM keyup events dispatched for special keys.

        * fast/events/ios/keydown-keyup-in-non-editable-content-expected.txt: Update expected result.
        * fast/events/ios/keydown-keyup-in-non-editable-content.html: Remove logic to test arrow keys
        as these are tested in test keydown-keyup-special-keys-in-non-editable-element.html. Also
        update manual instructions to use <kbd> to format keyboard keys.
        * fast/events/ios/keydown-keyup-special-keys-in-non-editable-element-expected.txt:

2018-09-24  Simon Fraser  <simon.fraser@apple.com>

        feMorphology filter in CSS doesn't update when element moves
        https://bugs.webkit.org/show_bug.cgi?id=189895

        Reviewed by Dean Jackson.
        
        Test that moves a box inside a filtered div. Masking is necessary to work
        around bugs in feMorphology invalidation (webkit.org/b/189896).

        * css3/filters/invalidate-sourceAlpha-expected.html: Added.
        * css3/filters/invalidate-sourceAlpha.html: Added.

2018-09-24  Simon Fraser  <simon.fraser@apple.com>

        CSS reference filter with feDisplacementMap shows buffer corruption on Retina displays
        https://bugs.webkit.org/show_bug.cgi?id=188486
        <rdar://problem/43189750>

        Reviewed by Dean Jackson.

        * css3/filters/hidpi-feDisplacementMap-expected.html: Added.
        * css3/filters/hidpi-feDisplacementMap.html: Added.

2018-09-24  Simon Fraser  <simon.fraser@apple.com>

        Garbled rendering of image when applied feConvolveMatrix to it, on Retina display
        https://bugs.webkit.org/show_bug.cgi?id=189748
        <rdar://problem/44621494>

        Reviewed by Jon Lee.

        * css3/filters/hidpi-feConvolveMatrix-expected.html: Added.
        * css3/filters/hidpi-feConvolveMatrix.html: Added.

2018-09-22  Dean Jackson  <dino@apple.com>

        Ensure PointerEvent is not visible when disabled
        https://bugs.webkit.org/show_bug.cgi?id=189889
        <rdar://problem/44708253>

        Reviewed by Eric Carlson.

        A test that explicitly disables PointerEvents and checks
        that the interface is not visible.

        * pointerevents/disabled-expected.html: Added.
        * pointerevents/disabled.html: Added.

2018-09-24  Truitt Savell  <tsavell@apple.com>

        [ iOS ] Layout Tests in media/media-fragments/ are flaky - Remved Debug only as tests are flakey on Release. 
        https://bugs.webkit.org/show_bug.cgi?id=187557

        Unreviewed Test Gardening

        * platform/ios/TestExpectations:

2018-09-24  Truitt Savell  <tsavell@apple.com>

        [ iOS ] Layout Tests in media/media-fragments/ are flaky
        https://bugs.webkit.org/show_bug.cgi?id=187557

        Unreviewed Test Gardening

        * platform/ios/TestExpectations:

2018-09-24  Andy Estes  <aestes@apple.com>

        Try to make payment-response-reference-cycle-leak.https.html not be flaky.

        Unreviewed.

        * http/tests/paymentrequest/payment-response-reference-cycle-leak.https.html:
        Doubled the number of repetitions (from 40 to 80).

2018-09-24  Per Arne Vollan  <pvollan@apple.com>

        [WebVTT] Change name of WebVTT region attribute 'height' to 'lines'.
        https://bugs.webkit.org/show_bug.cgi?id=189862

        Reviewed by Eric Carlson.

        * media/track/captions-webvtt/captions-regions.vtt:
        * media/track/captions-webvtt/header-regions.vtt:
        * media/track/regions-webvtt/vtt-region-constructor-expected.txt:
        * media/track/regions-webvtt/vtt-region-constructor.html:
        * media/track/regions-webvtt/vtt-region-display-expected.txt:
        * media/track/regions-webvtt/vtt-region-display.html:
        * media/track/regions-webvtt/vtt-region-list-expected.txt:
        * media/track/regions-webvtt/vtt-region-list.html:
        * media/track/regions-webvtt/vtt-region-parser-expected.txt:
        * media/track/regions-webvtt/vtt-region-parser.html:

2018-09-24  Yoav Weiss  <yoav@yoav.ws>

        Import WPT resource-timing tests
        https://bugs.webkit.org/show_bug.cgi?id=189903

        Reviewed by Youenn Fablet.

        * TestExpectations:: Added a few failing tests.
        * platform/mac/TestExpectations:: Added a timeout test.

2018-09-22  Dean Jackson  <dino@apple.com>

        Unreviewed - Skip pointer events tests on legacy WebKit.

        * platform/ios-wk1/TestExpectations:
        * platform/mac-wk1/TestExpectations:

2018-09-22  Youenn Fablet  <youenn@apple.com>

        Tests checking document GC in case of ActiveDOMObjects are flaky
        https://bugs.webkit.org/show_bug.cgi?id=189413
        <rdar://problem/44243231>

        Reviewed by Eric Carlson.

        Media controls prevent in some cases to collect the document.
        Remove the controls to remove a source of flakiness for this test.

        * http/tests/media/clearkey/resources/mywebkitmediasessionframe.htm:
        * platform/mac/TestExpectations:

2018-09-21  Ryosuke Niwa  <rniwa@webkit.org>

        Cannot start a drag inside a shadow tree when an inclusive-ancestor of its shadow host is a draggable element
        https://bugs.webkit.org/show_bug.cgi?id=136836

        Reviewed by Wenson Hsieh.

        Added regression tests for dragging a element with a shadow tree, which is fixed in this bug
        as well as dragging an element inside a shadow tree, which was already functional but had no tests.

        * TestExpectations:
        * fast/shadow-dom/dragging-element-inside-shadow-tree-expected.txt: Added.
        * fast/shadow-dom/dragging-element-inside-shadow-tree.html: Added.
        * fast/shadow-dom/dragging-element-with-shadow-tree-expected.txt: Added.
        * fast/shadow-dom/dragging-element-with-shadow-tree.html: Added.
        * platform/ios/TestExpectations: Don't mark the entirety of fast/shadow-dom as PASS.
        * platform/mac-wk1/TestExpectations:

2018-09-21  Devin Rousso  <drousso@apple.com>

        Web Inspector: REGRESSION(r236336): computed CSSProperty doesn't have a value for _text
        https://bugs.webkit.org/show_bug.cgi?id=189864

        Reviewed by Joseph Pecoraro.

        * inspector/css/pseudo-element-matches-for-pseudo-element-node.html:

        `CSS.types.CSSComputedStyleProperty` doesn't include a `text` value, which was used to print
         each property's text. Modify the test to generate it's own text via `name` and `value`.

2018-09-21  Justin Michaud  <justin_michaud@apple.com>

        Implement initialValue support for CSS Custom Properties and Values API
        https://bugs.webkit.org/show_bug.cgi?id=189819

        Reviewed by Simon Fraser.

        * css-custom-properties-api/initialValue-expected.html: Added.
        * css-custom-properties-api/initialValue.html: Added.
        * css-custom-properties-api/initialValueJS-expected.txt: Added.
        * css-custom-properties-api/initialValueJS.html: Added.
        * css-custom-properties-api/registerProperty-expected.txt:
        * css-custom-properties-api/registerProperty.html:
        * platform/win/TestExpectations:

2018-09-21  Ryan Haddad  <ryanhaddad@apple.com>

        [macOS EWS] Layout test accessibility/smart-invert-reference.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=189818

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations: Mark test as flaky.

2018-09-21  Ryosuke Niwa  <rniwa@webkit.org>

        Custom elements in a reaction queue can lose its JS wrapper and become HTMLUnknownElement
        https://bugs.webkit.org/show_bug.cgi?id=184307

        Reviewed by Keith Miller.

        Added a test for enqueuing a lot of custom elements into the reaction queue via innerHTML setter.
        WebKit should retain the JS wrappers of all custom elements.

        * fast/custom-elements/custom-elements-reaction-queue-retains-js-wrapper-expected.txt: Added.
        * fast/custom-elements/custom-elements-reaction-queue-retains-js-wrapper.html: Added.

2018-09-21  Chris Dumez  <cdumez@apple.com>

        Unreviewed, speed up storage/websql/transaction-database-expand-quota.html

        This test was so slow that is sometimes timed out on the debug bots.

        * storage/websql/transaction-database-expand-quota-expected.txt:
        * storage/websql/transaction-database-expand-quota.html:

2018-09-21  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed test gardening, consolidate expectation file for EventTarget-dispatchEvent.html.

        * platform/ios-11/imported/w3c/web-platform-tests/dom/events/EventTarget-dispatchEvent-expected.txt: Removed.
        * platform/ios/imported/w3c/web-platform-tests/dom/events/EventTarget-dispatchEvent-expected.txt:

2018-09-21  Ryan Haddad  <ryanhaddad@apple.com>

        REGRESSION (r235948?): Layout Test media/media-controls-accessibility.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=189674

        Unreviewed test gardening.

        * platform/mac/TestExpectations: Mark test as flaky.

2018-09-21  Per Arne Vollan  <pvollan@apple.com>

        [Win10] Update test expectations for failing tests.
        https://bugs.webkit.org/show_bug.cgi?id=189858

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2018-09-21  Chris Dumez  <cdumez@apple.com>

        WebSQL: User cannot grant quota increase if the JS provides an expected usage value that is too low
        https://bugs.webkit.org/show_bug.cgi?id=189801
        <rdar://problem/43592498>

        Reviewed by Youenn Fablet.

        Add layout test coverage.

        * storage/websql/transaction-database-expand-quota-expected.txt: Added.
        * storage/websql/transaction-database-expand-quota.html: Added.

2018-09-21  Youenn Fablet  <youenn@apple.com>

        Add RTCCodecStats support
        https://bugs.webkit.org/show_bug.cgi?id=189792
        <rdar://problem/32370668>

        Reviewed by Eric Carlson.

        * webrtc/video-stats.html:

2018-09-21  Megan Gardner  <megan_gardner@apple.com>

        [iOS] Layout test fast/gradients/conic-gradient-alpha.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=189802

        Unreviewed test gardening

        It is more difficult to squish the alpha channel than the other channels using an SVG filters.
        Thus the cropping bars need to be slightly wider to cover the imperfections in the filter.
        Made the bars even more slightly wider, since apparenlty they weren't quite wide enough for iOS.

        * fast/gradients/conic-gradient-alpha-expected.html:
        * fast/gradients/conic-gradient-alpha.html:
        * platform/ios-12/TestExpectations:

2018-09-20  Simon Fraser  <simon.fraser@apple.com>

        Make "overflow: overlay" a synonym for "overflow: auto"
        https://bugs.webkit.org/show_bug.cgi?id=189811

        Reviewed by Zalan Bujtas.
        
        Add a modern CSS parsing/computed style test for overflow, superseding
        fast/css/overflow-property.html.

        * fast/css/getComputedStyle/getComputedStyle-overflow-expected.txt: Added.
        * fast/css/getComputedStyle/getComputedStyle-overflow.html: Added.
        * fast/css/overflow-property-expected.txt: Removed.
        * fast/css/overflow-property.html: Removed.

2018-09-21  Ryan Haddad  <ryanhaddad@apple.com>

        Tests checking document GC in case of ActiveDOMObjects are flaky
        https://bugs.webkit.org/show_bug.cgi?id=189413

        Unreviewed test gardening.

        * platform/mac/TestExpectations: Mark http/tests/media/clearkey/collect-webkit-media-session.html as flaky.

2018-09-21  Devin Rousso  <drousso@apple.com>

        Web Inspector: remove Legacy Style Editor
        https://bugs.webkit.org/show_bug.cgi?id=189808

        Reviewed by Joseph Pecoraro.

        * platform/gtk/TestExpectations:
        * platform/mac/TestExpectations:

        * inspector/css/css-property-expected.txt:
        * inspector/css/css-property.html:
        * inspector/css/modify-css-property.html:
        * inspector/css/shadow-scoped-style.html:
        Update tests for functionality that has been deleted.

        * inspector/unit-tests/test-harness-expect-functions-expected.txt:
        * inspector/unit-tests/test-harness-expect-functions.html:
        The changes to `WI.CSSRule` now make it small enough that `InspectorTest` will print it as
        JSON instead of an object instance. Change the test to use different objects so this doesn't
        happen.

        * inspector/unit-tests/text-utilities-expected.txt: Removed.
        * inspector/unit-tests/text-utilities.html: Removed.
        * inspector/css/generate-css-rule-string-expected.txt: Removed.
        * inspector/css/generate-css-rule-string.html: Removed.
        Remove tests for functionality that has been deleted.

        * inspector/codemirror/prettyprinting-css-rules.html: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/add-whitespace-after-colon-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/add-whitespace-after-colon.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/add-whitespace-after-comma-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/add-whitespace-after-comma.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/add-whitespace-between-rules-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/add-whitespace-between-rules.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/add-whitespace-between-values-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/add-whitespace-between-values.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/css-variables-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/css-variables.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/do-not-add-whitespace-before-prefixed-property-value-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/do-not-add-whitespace-before-prefixed-property-value.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/do-not-append-semicolon-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/do-not-append-semicolon.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/invalid-property-is-not-removed-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/invalid-property-is-not-removed.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/keep-prefixed-value-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/keep-prefixed-value.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-newline-between-values-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-newline-between-values.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-whitespace-before-colon-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-whitespace-before-colon.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-whitespace-before-comment-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-whitespace-before-comment.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-whitespace-before-invalid-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-whitespace-before-invalid-property.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-whitespace-before-prefixed-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-whitespace-before-prefixed-property.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-whitespace-before-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-whitespace-before-property.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-whitespace-before-semicolon-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/remove-whitespace-before-semicolon.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-comment-followed-by-comment-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-comment-followed-by-comment.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-comment-followed-by-invalid-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-comment-followed-by-invalid-property.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-comment-followed-by-prefixed-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-comment-followed-by-prefixed-property.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-comment-followed-by-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-comment-followed-by-property.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-invalid-property-followed-by-comment-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-invalid-property-followed-by-comment.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-invalid-property-followed-by-invalid-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-invalid-property-followed-by-invalid-property.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-invalid-property-followed-by-prefixed-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-invalid-property-followed-by-prefixed-property.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-invalid-property-followed-by-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-invalid-property-followed-by-property.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-property-followed-by-comment-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-property-followed-by-comment.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-property-followed-by-invalid-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-property-followed-by-invalid-property.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-property-followed-by-prefixed-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-property-followed-by-prefixed-property.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-property-followed-by-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-property-followed-by-property.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-property-without-semicolon-followed-by-comment-and-property-expected.css: Removed.
        * inspector/codemirror/resources/prettyprinting/css-rule-tests/split-property-without-semicolon-followed-by-comment-and-property.css: Removed.
        Remove all tests for the "css-rule" CodeMirror mode since it's been removed.

2018-09-21  Antoine Quint  <graouts@apple.com>

        REGRESSION (r235962-r235963): Layout Test animations/suspend-resume-animation-events.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=189607
        <rdar://problem/44652315>

        Reviewed by Dean Jackson.

        * animations/suspend-resume-animation-events.html: Ensure the test always opts into Web Animations backing CSS Animations and Transitions.
        * platform/mac-wk2/TestExpectations: Mark the test as no longer flaky.

2018-09-21  Per Arne Vollan  <pvollan@apple.com>

        Layout Test webanimations/accelerated-animation-suspension.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=189836

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2018-09-21  Per Arne Vollan  <pvollan@apple.com>

        Layout Test css-custom-properties-api/registerProperty.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=189834

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2018-09-21  Antoine Quint  <graouts@apple.com>

        [Web Animations] Accelerated animations don't get suspended
        https://bugs.webkit.org/show_bug.cgi?id=189783
        <rdar://problem/44652315>

        Unreviewed, correct a merge error in the previous commit.

        * animations/suspend-resume-animation-events.html:

2018-09-21  Antoine Quint  <graouts@apple.com>

        [Web Animations] Accelerated animations don't get suspended
        https://bugs.webkit.org/show_bug.cgi?id=189783
        <rdar://problem/43033568>

        Reviewed by Dean Jackson.

        Add a new test that checks whether an accelerated animation is correctly paused after suspending animations.

        * webanimations/accelerated-animation-suspension-expected.txt: Added.
        * webanimations/accelerated-animation-suspension.html: Added.
        * platform/win/TestExpectations:

2018-09-21  Antoine Quint  <graouts@apple.com>

        [Web Animations] DocumentTimeline::updateAnimations() is called endlessly
        https://bugs.webkit.org/show_bug.cgi?id=189784
        <rdar://problem/41705679>

        Reviewed by Dean Jackson.

        Add a new test that checks that setting "display: none" on an element with an accelerated CSS animation on it
        will no longer update the animation timeline.

        * webanimations/accelerated-animation-interruption-display-none-expected.txt: Added.
        * webanimations/accelerated-animation-interruption-display-none.html: Added.
        * platform/win/TestExpectations:

2018-09-20  Dean Jackson  <dino@apple.com>

        Restrict the total combined size of backdrop filters
        https://bugs.webkit.org/show_bug.cgi?id=189812
        <rdar://problem/44532782>

        Reviewed by Simon Fraser.

        Tests that have an acceptable number of backdrops, an excessive
        number of backdrops, and then some that add and remove backdrops
        at various points in the tree to confirm we do recursive checks
        correctly.

        * css3/filters/backdrop/layer-tree-as-text.js: Added.
        * css3/filters/backdrop/resource-use-add-more-layers-expected.txt: Added.
        * css3/filters/backdrop/resource-use-add-more-layers.html: Added.
        * css3/filters/backdrop/resource-use-excessive-expected.txt: Added.
        * css3/filters/backdrop/resource-use-excessive.html: Added.
        * css3/filters/backdrop/resource-use-ok-expected.txt: Added.
        * css3/filters/backdrop/resource-use-ok.html: Added.
        * css3/filters/backdrop/resource-use-remove-some-layers-expected.txt: Added.
        * css3/filters/backdrop/resource-use-remove-some-layers.html: Added.
        * css3/filters/backdrop/resource-use.css: Added.

2018-09-20  Truitt Savell  <tsavell@apple.com>

        Continued test gardening after r236236
        https://bugs.webkit.org/show_bug.cgi?id=189641

        Unreviewed test gardening 

        * TestExpectations:

2018-09-20  Zalan Bujtas  <zalan@apple.com>

        Release assert under RenderView::pageOrViewLogicalHeight
        https://bugs.webkit.org/show_bug.cgi?id=189798
        <rdar://problem/43659749>

        Reviewed by Simon Fraser.

        * printing/crash-while-formatting-subframe-for-printing-expected.txt: Added.
        * printing/crash-while-formatting-subframe-for-printing.html: Added.

2018-09-20  Sihui Liu  <sihui_liu@apple.com>

        REGRESSION(r196265): WKWebView fires mouseover, mouseenter, and mouseleave events even when it's in a background window
        https://bugs.webkit.org/show_bug.cgi?id=187545
        <rdar://problem/42401575>

        Reviewed by Ryosuke Niwa.

        * TestExpectations:
        * fast/events/inactive-window-no-mouse-event-expected.txt: Added.
        * fast/events/inactive-window-no-mouse-event.html: Added.
        * platform/mac-wk2/TestExpectations:

2018-09-20  Basuke Suzuki  <Basuke.Suzuki@sony.com>

        [Win] TestRunner::queueLoad() fails to generate correct url for some urls.
        https://bugs.webkit.org/show_bug.cgi?id=189679

        Reviewed by Fujii Hironori.

        * platform/wincairo/TestExpectations:

2018-09-20  Ryan Haddad  <ryanhaddad@apple.com>

        [iOS] Layout test fast/gradients/conic-gradient-alpha.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=189802

        Unreviewed test gardening.

        * platform/ios-12/TestExpectations: Mark test as failing.

2018-09-20  Ryan Haddad  <ryanhaddad@apple.com>

        REGRESSION (r235962-r235963): Layout Test animations/suspend-resume-animation-events.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=189607

        Unreivewed test gardening.

        * platform/mac-wk2/TestExpectations: Mark test as flaky.

2018-09-20  Dawei Fenton  <realdawei@apple.com>

        WebGL 2 updated test expectations.
        https://bugs.webkit.org/show_bug.cgi?id=189686

        Unreviewed, skip tests that are timing out.

        * platform/ios-wk2/TestExpectations:

2018-09-20  Oriol Brufau  <obrufau@igalia.com>

        Fix 'border' serialization with both common and uncommon values
        https://bugs.webkit.org/show_bug.cgi?id=189597

        Reviewed by Simon Fraser.

        Fix existing tests to check that 'border' serializes to empty string if there
        are uncommon values.

        * fast/css/getPropertyValue-border-expected.txt:
        * fast/css/getPropertyValue-border.html:
        * fast/dom/css-shorthand-common-value-expected.txt:
        * fast/dom/css-shorthand-common-value.html:

2018-09-20  Dawei Fenton  <realdawei@apple.com>

        WebGL conformance: Failures and Timeouts in suite 2.0.0/conformance
        https://bugs.webkit.org/show_bug.cgi?id=189641

        Unreviewed test gardening.

        * TestExpectations: Mark tests as Failure Slow.
        * platform/mac/TestExpectations:

2018-09-20  Frederic Wang  <fwang@igalia.com>

        Synchronize CSSOM View test suite against upstream WPT
        https://bugs.webkit.org/show_bug.cgi?id=189787

        Reviewed by Antonio Gomes.

        * tests-options.json: Mark smooth scrolling tests as slow.
        * ios/TestExpectations: Mark as failing since frames are not scrollable on iOS.

2018-09-20  Justin Michaud  <justin_michaud@apple.com>

        Implement CSS Custom Properties and Values Skeleton
        https://bugs.webkit.org/show_bug.cgi?id=189694

        Reviewed by Simon Fraser.

        Add test to check that the CSS.registerProperty method exists.

        * css-custom-properties-api/registerProperty-expected.txt: Added.
        * css-custom-properties-api/registerProperty.html: Added.
        * platform/ios-wk1/TestExpectations:
        * platform/mac-wk1/TestExpectations:

2018-09-20  Dawei Fenton  <realdawei@apple.com>

        WebGL conformance: Failures and Timeouts in suite 2.0.0/conformance
        https://bugs.webkit.org/show_bug.cgi?id=189641

        Unreviewed, marked tests as failing.

        * TestExpectations:

2018-09-20  Daniel Bates  <dabates@apple.com>

        [iOS] Support testing more hardware special keys
        https://bugs.webkit.org/show_bug.cgi?id=189793

        Reviewed by Simon Fraser.

        For now, many of the DOM keydown and keyup events for special hardware keys are wrong.
        We will fix this up in a subsequent commit(s).

        * fast/events/ios/keydown-keyup-special-keys-in-non-editable-element-expected.txt: Added.
        * fast/events/ios/keydown-keyup-special-keys-in-non-editable-element.html: Added.

2018-09-20  Per Arne Vollan  <pvollan@apple.com>

        [WebVTT] Update the parser according to the new region syntax.
        https://bugs.webkit.org/show_bug.cgi?id=189767

        Reviewed by Eric Carlson.

        * media/track/captions-webvtt/captions-regions.vtt:
        * media/track/captions-webvtt/header-regions.vtt:
        * media/track/regions-webvtt/vtt-region-parser-expected.txt:
        * media/track/regions-webvtt/vtt-region-parser.html:

2018-09-19  Ryan Haddad  <ryanhaddad@apple.com>

        [macOS Sierra] Layout Test http/wpt/cache-storage/cache-put-keys.https.any.worker.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=184204

        Unreviewed test gardening.

        * platform/mac-wk2/TestExpectations: Mark test as flaky and remove an entry for a test that doesn't exist in the repository anymore.

2018-09-19  Yacine Bandou  <yacine.bandou@softathome.com>

        [EME][WPE] Add WebM initData in the expected result of clearkey-generate-request-disallowed-input test
        https://bugs.webkit.org/show_bug.cgi?id=189747

        Reviewed by Xabier Rodriguez-Calvar.

        Since r235610 the WebM initData is supported.

        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-generate-request-disallowed-input.https-expected.txt:
        Add an expcted result for WebM initData.

2018-09-19  Justin Fan  <justin_fan@apple.com>

        WebGL 2 partial passes and failing test expectations for conformance/conformance2 layout tests
        https://bugs.webkit.org/show_bug.cgi?id=189686

        Reviewed by Dean Jackson.

        * TestExpectations: Still skipping all of deqp, but now enabling all non-crashing/timing out tests.
        * platform/ios-simulator/TestExpectations:
        * platform/mac/TestExpectations:
        * webgl/2.0.0/conformance/.../*expected.txt: Failures now report results of individual sub-tests for more granular implementation testing.
        * webgl/2.0.0/conformance2/.../*expected.txt:
        * platform/ios-simulator/webgl/2.0.0/.../*expected.txt: ios-simulator-specific expectations added.

2018-09-19  Dawei Fenton  <realdawei@apple.com>

        storage/indexeddb/modern/transactions-stop-on-navigation.html is flaky.
        https://bugs.webkit.org/show_bug.cgi?id=186339

        Unreviewed, mark test as flaky.

        * platform/mac-wk2/TestExpectations:

2018-09-19  Dawei Fenton  <realdawei@apple.com>

        Marked imported/w3c/web-platform-tests/webrtc/RTCPeerConnection-onnegotiationneeded.html as flak on iOS.
        https://bugs.webkit.org/show_bug.cgi?id=176078

        Unreviewed test gardening.

        * platform/ios/TestExpectations:

2018-09-19  John Wilander  <wilander@apple.com>

        Resource Load Statistics: Add optional cap on partitioned cache max age
        https://bugs.webkit.org/show_bug.cgi?id=189711
        <rdar://problem/39246837>

        Reviewed by Antti Koivisto and Chris Dumez.

        * http/tests/resourceLoadStatistics/cap-cache-max-age-for-prevalent-resource-expected.txt: Added.
        * http/tests/resourceLoadStatistics/cap-cache-max-age-for-prevalent-resource.html: Added.
        * http/tests/resourceLoadStatistics/resources/cached-permanent-redirect.php: Added.
        * http/tests/resourceLoadStatistics/resources/echo-query.php: Added.
        * platform/ios/TestExpectations:
            New test marked as [ Pass ].
        * platform/mac-wk2/TestExpectations:
            New test marked as [ Pass ].
        * platform/wk2/TestExpectations:
            New test marked as [ Skip ] because it's not supported on non-Cocoa platforms.

2018-09-19  Youenn Fablet  <youenn@apple.com>

        Layout Test webrtc/video-mute.html is flaky.
        https://bugs.webkit.org/show_bug.cgi?id=177501

        Reviewed by Eric Carlson.

        * platform/ios-wk2/TestExpectations:
        * platform/mac-wk2/TestExpectations:
        * webrtc/routines.js: Increase counter to make test more robust.

2018-09-19  Chris Dumez  <cdumez@apple.com>

        [iOS] Layout Test imported/w3c/web-platform-tests/beacon/beacon-basic-blob.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=189728

        Unreviewed, send console logging to stderr to adress flakiness.

        * TestExpectations:

2018-09-19  Ms2ger  <Ms2ger@igalia.com>

        [WPE] Unreviewed test gardening
        https://bugs.webkit.org/show_bug.cgi?id=189749

        Unreviewed test gardening.

        * platform/wpe/TestExpectations: Add some expectations to match GTK.
        * platform/wpe/imported/w3c/web-platform-tests/dom/events/EventTarget-dispatchEvent-expected.txt: Update after r236002.
        * platform/wpe/imported/w3c/web-platform-tests/xhr/access-control-basic-cors-safelisted-request-headers-expected.txt: Removed (defer to generic expectation).
        * platform/wpe/imported/w3c/web-platform-tests/xhr/access-control-basic-get-fail-non-simple-expected.txt: Removed (defer to generic expectation).
        * platform/wpe/imported/w3c/web-platform-tests/xhr/access-control-basic-post-with-non-cors-safelisted-content-type-expected.txt: Removed (defer to generic expectation).
        * platform/wpe/imported/w3c/web-platform-tests/xhr/send-redirect-infinite-expected.txt: Update after r235354.
        * platform/wpe/imported/w3c/web-platform-tests/xhr/send-redirect-infinite-sync-expected.txt: Update after r235354.
        * platform/wpe/imported/w3c/web-platform-tests/xhr/xmlhttprequest-network-error-expected.txt: Update after r235354.
        * platform/wpe/imported/w3c/web-platform-tests/xhr/xmlhttprequest-network-error-sync-expected.txt: Update after r235354.
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/array-as-return-value-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/array-assign-constructor-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/array-assign-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/array-complex-indexing-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/array-element-increment-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/array-equality-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/array-in-complex-expression-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/bool-type-cast-bug-uint-ivec-uvec-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/compare-structs-containing-arrays-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/compound-assignment-type-combination-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/const-array-init-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/forbidden-operators-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/frag-depth-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/invalid-default-precision-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/invalid-invariant-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/loops-with-side-effects-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/misplaced-version-directive-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/sampler-no-precision-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/sequence-operator-returns-non-constant-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/shader-linking-expected.txt: Update after r236001.
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/shader-with-mis-matching-uniform-block-expected.txt: Update after r236001.
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/short-circuiting-in-loop-condition-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/texture-offset-out-of-range-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/texture-offset-uniform-texture-coordinate-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/tricky-loop-conditions-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/uniform-block-layout-match-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/uniform-block-layouts-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/valid-invariant-expected.txt: Update after r236001.
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/vector-dynamic-indexing-expected.txt: Removed (defer to generic expectation after r236001).
        * platform/wpe/webgl/2.0.0/conformance2/glsl3/vector-dynamic-indexing-nv-driver-bug-expected.txt: Removed (defer to generic expectation after r236001).

2018-09-19  Youenn Fablet  <youenn@apple.com>

        Implement sender/receiver getStats
        https://bugs.webkit.org/show_bug.cgi?id=189707

        Reviewed by Eric Carlson.

        * webrtc/video-stats-expected.txt:
        * webrtc/video-stats.html:

2018-09-19  Ms2ger  <Ms2ger@igalia.com>

        [GTK] Unreviewed test gardening
        https://bugs.webkit.org/show_bug.cgi?id=189744

        Unreviewed test gardening.

        * platform/gtk/TestExpectations: Add some expectations.

2018-09-19  Philippe Normand <pnormand@igalia.com>

        [GStreamer] Add support for AV1 decoding
        https://bugs.webkit.org/show_bug.cgi?id=189647

        Reviewed by Žan Doberšek.

        Layout test for AV1 canPlay() compatiblity checking. Right now
        GStreamer-based ports are the only ones expecting to support AV1.

        * media/media-can-play-av1-expected.txt: Added.
        * media/media-can-play-av1.html: Added.
        * platform/ios/media/media-can-play-av1-expected.txt: Added.
        * platform/mac/media/media-can-play-av1-expected.txt: Added.

2018-09-19  Chris Dumez  <cdumez@apple.com>

        http/tests/navigation/window-open-cross-origin-then-navigated-back-same-origin.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=189710

        Reviewed by Ryosuke Niwa.

        Update the test to stop relying on the test page posting a message to the auxiliary window
        to trigger a navigation. Instead, the auxiliary window now takes care of navigating itself
        after it is loaded. This is more robust, especially considering that the test page is cross
        origin and thus is not getting a load event for the auxiliary window.

        * http/tests/navigation/resources/navigate-back-same-origin-helper.html: Added.
        * http/tests/navigation/resources/navigate-helper.html: Removed.
        * http/tests/navigation/window-open-cross-origin-then-navigated-back-same-origin.html:

2018-09-19  Claudio Saavedra  <csaavedra@igalia.com>

        [WPE][GTK] Assorted gardening

        Unreviewed test gardening
        * platform/gtk/TestExpectations: Add new mediastream failures.
        * platform/wpe/TestExpectations: Ditto.
        * platform/wpe/js/dom/dom-static-property-for-in-iteration-expected.txt: rebaseline

2018-09-18  Ali Juma  <ajuma@chromium.org>

        [macOS WK1] Mark intersection-observer/no-document-leak.html as a flaky timeout
        https://bugs.webkit.org/show_bug.cgi?id=189731

        Unreviewed test gardening.

        * platform/mac-wk1/TestExpectations:

2018-09-18  Ryan Haddad  <ryanhaddad@apple.com>

        [iOS] Layout Test imported/w3c/web-platform-tests/service-workers/service-worker/fetch-cors-xhr.https.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=189727

        Unreviewed test gardening.

        * platform/ios/TestExpectations:

2018-09-18  Ryan Haddad  <ryanhaddad@apple.com>

        [iOS] Layout test imported/w3c/web-platform-tests/service-workers/service-worker/fetch-mixed-content-to-inscope.https.html and fetch-mixed-content-to-outscope.https.html are flaky failures
        https://bugs.webkit.org/show_bug.cgi?id=189726

        Unreviewed test gardening.

        * platform/ios/TestExpectations:

2018-09-18  Megan Gardner  <megan_gardner@apple.com>

        Support Images Module Level 4's double-position gradient color stop syntax
        https://bugs.webkit.org/show_bug.cgi?id=186154
        <rdar://problem/44158152>

        Reviewed by Simon Fraser.

        Test that uses two angles or positions per color stop.

        * TestExpectations:
        * fast/gradients/conic-two-hints-expected.html: Added.
        * fast/gradients/conic-two-hints.html: Added.
        * fast/gradients/linear-two-hints-angle-expected.html: Added.
        * fast/gradients/linear-two-hints-angle.html: Added.
        * fast/gradients/linear-two-hints-expected.html: Added.
        * fast/gradients/linear-two-hints.html: Added.
        * fast/gradients/radial-two-hints-expected.html: Added.
        * fast/gradients/radial-two-hints.html: Added.
        * platform/ios-12/TestExpectations:
        * platform/mac/TestExpectations:

2018-09-18  Youenn Fablet  <youenn@apple.com>

        Enable Unified Plan by default
        https://bugs.webkit.org/show_bug.cgi?id=189675

        Reviewed by Eric Carlson.

        * webrtc/video-addLegacyTransceiver-expected.txt:
        * webrtc/video-addLegacyTransceiver.html:

2018-09-18  Per Arne Vollan  <pvollan@apple.com>

        [WebVTT] change "middle" to "center" for consistency with CSS
        https://bugs.webkit.org/show_bug.cgi?id=158478

        Reviewed by Eric Carlson.

        * media/track/track-add-remove-cue-expected.txt:
        * media/track/track-add-remove-cue.html:
        * media/track/track-cue-mutable-expected.txt:
        * media/track/track-cue-mutable.html:
        * media/track/track-cue-rendering-snap-to-lines-not-set-expected.txt:
        * media/track/track-vttcue-expected.txt:
        * media/track/track-vttcue.html:
        * media/track/track-webvtt-tc013-settings-expected.txt:
        * media/track/track-webvtt-tc013-settings.html:
        * media/track/track-webvtt-tc014-alignment-expected.txt:
        * media/track/track-webvtt-tc014-alignment.html:
        * media/track/track-webvtt-tc016-align-positioning-expected.txt:
        * media/track/track-webvtt-tc016-align-positioning.html:
        * media/track/track-webvtt-tc018-align-text-line-position-expected.txt:
        * media/track/track-webvtt-tc018-align-text-line-position.html:
        * media/track/track-webvtt-tc020-cue-size-align-expected.txt:
        * media/track/track-webvtt-tc020-cue-size-align.html:
        * media/track/track-webvtt-tc021-valign-expected.txt:
        * media/track/track-webvtt-tc021-valign.html:

2018-09-18  Claudio Saavedra  <csaavedra@igalia.com>

        [WPE] Gardening after r236124

        Quick gardening. There might be more tests that are now passing or
        need updated results but this was the most obvious for now.
        Unreviewed gardening.
        * platform/wpe/TestExpectations:
        * platform/wpe/svg/custom/pan-direction-expected.txt:

2018-09-18  Xabier Rodriguez Calvar  <calvaris@igalia.com>

        [EME][GStreamer] The current EME implementation doesn't support the waitingforkey event
        https://bugs.webkit.org/show_bug.cgi?id=185590

        Reviewed by Philippe Normand.

        Updated status of
        imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-waitingforkey.https
        and expectations.

        * platform/wpe/TestExpectations:
        * platform/wpe/imported/w3c/web-platform-tests/encrypted-media/clearkey-mp4-playback-temporary-waitingforkey.https-expected.txt:

2018-09-17  Ryan Haddad  <ryanhaddad@apple.com>

        Layout Test legacy-animation-engine/animations/play-state-in-shorthand.html is a flaky failure
        https://bugs.webkit.org/show_bug.cgi?id=185651

        Unreviewed test gardening.

        * platform/mac/TestExpectations: Mark test as flaky.

2018-09-17  Justin Fan  <justin_fan@apple.com>

        Updated expected test [ PASS ] messages for new test-harness format for webgl tests
        https://bugs.webkit.org/show_bug.cgi?id=189677

        Reviewed by Dean Jackson.

        Update generate-webgl-tests.py's test expectation template
        for my new version of webgl-test-harness.js for the webgl 2 suite,
        and update all webgl/2.0.0 test expectations to match.

        * webgl/resources/webgl-expectation-template.txt: 
        * webgl/2.0.0/.../*expected.txt: Modified all *expected.txts to match.

2018-09-17  Jer Noble  <jer.noble@apple.com>

        Add support for HEVC codec types in Media Capabilities
        https://bugs.webkit.org/show_bug.cgi?id=189565

        Reviewed by Eric Carlson.

        * media/hevc-codec-parameters-expected.txt: Added.
        * media/hevc-codec-parameters.html: Added.

2018-09-17  Devin Rousso  <drousso@apple.com>

        Web Inspector: generate CSSKeywordCompletions from backend values
        https://bugs.webkit.org/show_bug.cgi?id=189041

        Reviewed by Joseph Pecoraro.

        * inspector/css/getSupportedCSSProperties-expected.txt:
        * inspector/css/getSupportedCSSProperties.html:

2018-09-17  Youenn Fablet  <youenn@apple.com>

        track.onmute isn't called for a remote MediaStreamTrack when its counter part track is removed from the peer connection
        https://bugs.webkit.org/show_bug.cgi?id=176281
        <rdar://problem/44525674>

        Reviewed by Eric Carlson.

        * webrtc/remove-track-expected.txt: Added.
        * webrtc/remove-track.html: Added.

2018-09-17  Dawei Fenton  <realdawei@apple.com>

        Fixed typo in TestExpectations file.
        https://bugs.webkit.org/show_bug.cgi?id=188020.

        Unreviewed test gardening.

        * platform/ios/TestExpectations:

2018-09-17  Basuke Suzuki  <Basuke.Suzuki@sony.com>

        [Curl] Respond with requested authentication scheme for authentication challenge.
        https://bugs.webkit.org/show_bug.cgi?id=189318

        Reviewed by Alex Christensen.

        * platform/wincairo/TestExpectations:

2018-09-17  Antoine Quint  <graouts@apple.com>

        [Web Animations] Positive delays of accelerated animations are not respected
        https://bugs.webkit.org/show_bug.cgi?id=189411
        <rdar://problem/44151416>

        Reviewed by Dean Jackson.

        Use a mask over the animated rectangle to allow for a 1px rounding error when seeking to fix flakiness.

        * webanimations/accelerated-animation-with-delay-and-seek-expected.html:
        * webanimations/accelerated-animation-with-delay-and-seek.html:

2018-09-17  Youenn Fablet  <youenn@apple.com>

        Enable VCP for iOS and reenable it for MacOS
        https://bugs.webkit.org/show_bug.cgi?id=189635
        <rdar://problem/43621029>

        Reviewed by Eric Carlson.

        * platform/mac/webrtc/captureCanvas-webrtc-software-encoder.html:
        For platforms suppporting VCP, arbitrary size should be supported.
        * webrtc/routines.js:

2018-09-17  Alexey Proskuryakov  <ap@apple.com>

        Revert https://trac.webkit.org/r235910, because the new test times out.
        Crash under PlatformPopupMenuData::encode when interacting with a select menu that has variable fonts
        https://bugs.webkit.org/show_bug.cgi?id=188008

        * fast/text/variations/ipc2-expected.txt: Removed.
        * fast/text/variations/ipc2.html: Removed.
        * platform/mac-wk1/TestExpectations:

2018-09-17  Dawei Fenton  <realdawei@apple.com>

        Layout Test imported/w3c/web-platform-tests/2dcontext/imagebitmap/createImageBitmap-drawImage.html is a flaky failure.
        https://bugs.webkit.org/show_bug.cgi?id=188020.

        Unreviewed test gardening.

        * platform/ios/TestExpectations:

2018-09-17  Claudio Saavedra  <csaavedra@igalia.com>

        [WPE] Add new failure

        Unreviewed gardening.
        * platform/wpe/TestExpectations:

2018-09-17  Claudio Saavedra  <csaavedra@igalia.com>

        [GTK][WPE] Update baseline for fast/dom/navigator-detached-no-crash

        In GTK it's just a matter of updating the baseline. In WPE
        there's some JS output that just needs to be ignored.
        * platform/gtk/TestExpectations:
        * platform/gtk/fast/dom/navigator-detached-no-crash-expected.txt:
        * platform/wpe/TestExpectations:

2018-09-17  Claudio Saavedra  <csaavedra@igalia.com>

        [WPE] Mark crashing animations test.

        animations/play-state-start-paused.html crashing.
        Unreviewed gardening.
        * platform/wpe/TestExpectations:

2018-09-17  Claudio Saavedra  <csaavedra@igalia.com>

        [WPE] Unmark now passing tests

        Unreviewed gardening.
        * platform/wpe/TestExpectations:

2018-09-17  Claudio Saavedra  <csaavedra@igalia.com>

        [GTK] Unmark now passing tests.

        Unreviewed gardening.
        * platform/gtk/TestExpectations:
s
2018-09-17  Sihui Liu  <sihui_liu@apple.com>

        Move IndexedDB to Network Process
        https://bugs.webkit.org/show_bug.cgi?id=189415
        <rdar://problem/44396973>

        Reviewed by Chris Dumez.

        * storage/indexeddb/modern/opendatabase-after-storage-crash.html:

2018-09-16  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed test gardening, mark fast/text/variations/ipc2.html as slow.

        * platform/mac-wk2/TestExpectations:

2018-09-15  Rob Buis  <rbuis@igalia.com>

        XMLHttpRequest::createResponseBlob() should create a Blob with type for empty response
        https://bugs.webkit.org/show_bug.cgi?id=189627

        Reviewed by Alexey Proskuryakov.

        * fast/files/xhr-response-blob-expected.txt:
        * fast/files/xhr-response-blob.html:

2018-09-14  Megan Gardner  <megan_gardner@apple.com>

        Additional tests for conic gradients
        https://bugs.webkit.org/show_bug.cgi?id=189566

        Reviewed by Simon Fraser.

        Adding tests that actually test the gradient nature of gradients.
        This is done by using an svg filter to consolidate the sections
        of the gradient to sections we can actuall test the color of. Also,
        the seams are clipped out, to reduce noise. Since gradients are 
        highly noise prone, this is the best way to check and make sure
        that gradients are functional without sevear noise issues.

        * TestExpectations:
        * fast/gradients/conic-gradient-alpha-expected.html: Added.
        * fast/gradients/conic-gradient-alpha.html: Added.
        * fast/gradients/conic-gradient-expected.html: Added.
        * fast/gradients/conic-gradient-extended-stops-expected.html: Added.
        * fast/gradients/conic-gradient-extended-stops.html: Added.
        * fast/gradients/conic-gradient.html: Added.
        * platform/ios-12/TestExpectations:
        * platform/mac/TestExpectations:

2018-09-14  Justin Fan  <justin_fan@apple.com>

        WebGL 2 conformance: rgb-format-support.html
        https://bugs.webkit.org/show_bug.cgi?id=189610
        <rdar://problem/44403343>

        Reviewed by Dean Jackson.

        Enabled rgb-format-support.html, and updated expectation for gl-teximage.html.

        * TestExpectations:
        * platform/mac/TestExpectations:
        * webgl/2.0.0/conformance2/rendering/rgb-format-support-expected.txt:

2018-09-14  Justin Michaud  <justin_michaud@apple.com>

        Add support for spreadMethod=reflect and repeat on SVG gradients (for CoreGraphics platforms)
        https://bugs.webkit.org/show_bug.cgi?id=5968

        Add new svg tests for linear gradients with spreadMethod, and alpha values specified in
        both stop-opacity and color.

        Reviewed by Simon Fraser.

        * platform/mac/svg/W3C-SVG-1.1/pservers-grad-10-b-expected.png:
        * svg/gradients/spreadMethod-expected.svg: Added.
        * svg/gradients/spreadMethod.svg: Added.
        * svg/gradients/spreadMethodAlpha-expected.svg: Added.
        * svg/gradients/spreadMethodAlpha.svg: Added.
        * svg/gradients/spreadMethodClose0-expected-mismatch.svg: Added.
        * svg/gradients/spreadMethodClose0.svg: Added.
        * svg/gradients/spreadMethodClose1-expected-mismatch.svg: Added.
        * svg/gradients/spreadMethodClose1.svg: Added.
        * svg/gradients/spreadMethodClose2-expected.svg: Added.
        * svg/gradients/spreadMethodClose2.svg: Added.
        * svg/gradients/spreadMethodDiagonal-expected.svg: Added.
        * svg/gradients/spreadMethodDiagonal.svg: Added.
        * svg/gradients/spreadMethodDiagonal2-expected.svg: Added.
        * svg/gradients/spreadMethodDiagonal2.svg: Added.
        * svg/gradients/spreadMethodDuplicateStop-expected.svg: Added.
        * svg/gradients/spreadMethodDuplicateStop.svg: Added.
        * svg/gradients/spreadMethodReversed-expected.svg: Added.
        * svg/gradients/spreadMethodReversed.svg: Added.
        * svg/gradients/stopAlpha-expected.svg: Added.
        * svg/gradients/stopAlpha.svg: Added.

2018-09-14  Ross Kirsling  <ross.kirsling@sony.com>

        [WinCairo] Unreviewed test gardening.

        * TestExpectations: Remove duplicative line introduced in r235959.
        * platform/wincairo/TestExpectations:

2018-09-14  Woodrow Wang  <woodrow_wang@apple.com>

        Add stability to tests for web API statistics
        https://bugs.webkit.org/show_bug.cgi?id=189560
        <rdar://problem/44396413>

        Reviewed by Chris Dumez.

        Using js-test added some data to the font loading collection, which made the tests dependent on
        js-test.js. Thus, if any changes were made to js-test.js the tests for web API statistics would
        fail. This patch removes the dependency on js-test. Also, this patch speeds up each test 
        significantly by bypassing the timer in ResourceLoadObserver for recording the statistics.  

        * http/tests/webAPIStatistics/canvas-read-and-write-data-collection-expected.txt:
        * http/tests/webAPIStatistics/canvas-read-and-write-data-collection.html:
        * http/tests/webAPIStatistics/font-load-data-collection-expected.txt:
        * http/tests/webAPIStatistics/font-load-data-collection.html:
        * http/tests/webAPIStatistics/navigator-functions-accessed-data-collection-expected.txt:
        * http/tests/webAPIStatistics/navigator-functions-accessed-data-collection.html:
        * http/tests/webAPIStatistics/screen-functions-accessed-data-collection-expected.txt:
        * http/tests/webAPIStatistics/screen-functions-accessed-data-collection.html:

2018-09-14  Eric Carlson  <eric.carlson@apple.com>

        Support arbitrary video resolution in getUserMedia API
        https://bugs.webkit.org/show_bug.cgi?id=178109
        <rdar://problem/35083128>

        Reviewed by Youenn Fablet.

        * fast/mediastream/MediaStreamTrack-getCapabilities-expected.txt:
        * fast/mediastream/apply-constraints-advanced-expected.txt:
        * fast/mediastream/apply-constraints-advanced.html:
        * fast/mediastream/apply-constraints-video.html:

2018-09-14  Devin Rousso  <webkit@devinrousso.com>

        Web Inspector: Record actions performed on ImageBitmapRenderingContext
        https://bugs.webkit.org/show_bug.cgi?id=181341

        Reviewed by Joseph Pecoraro.

        * inspector/canvas/recording-2d-expected.txt:
        * inspector/canvas/recording-bitmaprenderer-expected.txt: Added.
        * inspector/canvas/recording-bitmaprenderer.html: Added.
        * inspector/canvas/recording-webgl-expected.txt:
        * inspector/canvas/recording-webgl-snapshots-expected.txt:
        * inspector/canvas/resources/recording-utilities.js:
        Simplify the test output to avoid unrelated failures, such as if line numbers change.
        Also remove non-human-readable text, as it makes it more difficult for those unfamiliar with
        the test to determine if any differences are acceptable.

2018-09-14  Ms2ger  <Ms2ger@igalia.com>

        Remove some obsolete XHR tests
        https://bugs.webkit.org/show_bug.cgi?id=189581

        Reviewed by Youenn Fablet.

        * TestExpectations: Drop reference to removed test.

2018-09-13  Ryosuke Niwa  <rniwa@webkit.org>

        Capturing event listeners are called during bubbling phase for shadow hosts
        https://bugs.webkit.org/show_bug.cgi?id=174288

        Reviewed by Darin Adler.

        Added a W3C style testharness.js test and rebaselined two tests. See below for rationals of rebaselines.

        * fast/shadow-dom/capturing-and-bubbling-event-listeners-across-shadow-trees-expected.txt: Added.
        * fast/shadow-dom/capturing-and-bubbling-event-listeners-across-shadow-trees.html: Added.

        * media/media-load-event-expected.txt: Rebaselined. The logging of oncanplaythrough event is now happening
        before canplaythrough() is called because the logging is done by waitForEvent which uses a capturing event
        listener whereas canplaythrough is called by a event handler, which is non-capturing.

        * platform/ios-11/imported/w3c/web-platform-tests/dom/events/EventTarget-dispatchEvent-expected.txt:
        * platform/ios/imported/w3c/web-platform-tests/dom/events/EventTarget-dispatchEvent-expected.txt:

2018-09-13  Justin Fan  <justin_fan@apple.com>

        Update webkit-webgl-test-harness.js for more details on WebGL 2 conformance tests part 4
        https://bugs.webkit.org/show_bug.cgi?id=189609

        Unreviewed small change for only the few webgl 2 tests' harness; completely passing 
        tests now only report the PASS line, to avoid discrepancies between e.g. feature ability 
        of different graphics cards causing diffs to fail.

        * webgl/2.0.0/conformance2/glsl3/array-as-return-value-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/array-assign-constructor-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/array-assign-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/array-complex-indexing-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/array-element-increment-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/array-equality-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/array-in-complex-expression-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/bool-type-cast-bug-uint-ivec-uvec-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/compare-structs-containing-arrays-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/compound-assignment-type-combination-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/const-array-init-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/forbidden-operators-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/frag-depth-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/invalid-default-precision-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/invalid-invariant-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/loops-with-side-effects-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/misplaced-version-directive-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/no-attribute-vertex-shader-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/sampler-no-precision-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/sequence-operator-returns-non-constant-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/shader-with-1025-character-define-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/shader-with-1025-character-identifier.frag-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/short-circuiting-in-loop-condition-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/texture-offset-out-of-range-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/texture-offset-uniform-texture-coordinate-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/tricky-loop-conditions-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/uniform-block-layout-match-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/uniform-block-layouts-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/vector-dynamic-indexing-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/vector-dynamic-indexing-nv-driver-bug-expected.txt:
        * webgl/2.0.0/conformance2/renderbuffers/framebuffer-test-expected.txt:
        * webgl/2.0.0/conformance2/vertex_arrays/vertex-array-object-expected.txt:
        * webgl/2.0.0/resources/webkit-webgl-test-harness.js:
        (window.webglTestHarness.notifyFinished):

2018-09-13  Ryan Haddad  <ryanhaddad@apple.com>

        Layout Test imported/w3c/web-platform-tests/streams/piping/error-propagation-backward.html is flaky
        https://bugs.webkit.org/show_bug.cgi?id=188070

        Unreviewed test gardening.

        * platform/ios/TestExpectations: Mark test as flaky.
        * platform/mac-wk1/TestExpectations: Ditto.

2018-09-13  Megan Gardner  <megan_gardner@apple.com>

        Fix color stop blending in conic gradients for stops past 1
        https://bugs.webkit.org/show_bug.cgi?id=189532
        <rdar://problem/44158221>

        Reviewed by Simon Fraser.

        Tests that last stop in the gradient is correct.

        * fast/gradients/conic-repeating-last-stop-expected.html: Added.
        * fast/gradients/conic-repeating-last-stop.html: Added.
        * platform/ios-12/TestExpectations:
        * platform/mac/TestExpectations:

2018-09-13  Ryan Haddad  <ryanhaddad@apple.com>

        Unreviewed, rolling out r235954.

        Breaks the watchOS build.

        Reverted changeset:

        "Move IndexedDB to Network Process"
        https://bugs.webkit.org/show_bug.cgi?id=189415
        https://trac.webkit.org/changeset/235954

2018-09-13  Chris Dumez  <cdumez@apple.com>

        Regression(PSON): setting window.opener to null allows process swapping in cases that are not web-compatible
        https://bugs.webkit.org/show_bug.cgi?id=189590
        <rdar://problem/44422725>

        Reviewed by Geoffrey Garen.

        Add layout test coverage.

        * http/tests/navigation/resources/navigate-helper.html: Added.
        * http/tests/navigation/window-open-cross-origin-then-navigated-back-same-origin-expected.txt: Added.
        * http/tests/navigation/window-open-cross-origin-then-navigated-back-same-origin.html: Added.

2018-09-13  Dean Jackson  <dino@grorg.org>

        https://bugs.webkit.org/show_bug.cgi?id=189594

        Mark this test as failing on WK1.

        * platform/ios-wk1/TestExpectations:
        * platform/mac-wk1/TestExpectations:

2018-09-13  Dean Jackson  <dino@grorg.org>

        Header parsing for experimental and internal debug features
        https://bugs.webkit.org/show_bug.cgi?id=189486
        <rdar://problem/44320618>

        Add feature headers to more tests.

        * fast/animation/css-animation-resuming-when-visible-with-style-change2.html:
        * legacy-animation-engine/animations/duplicate-keys-expected.html:

2018-09-13  Ryan Haddad  <ryanhaddad@apple.com>

        Rebaseline imported/w3c/web-platform-tests/web-share/idlharness.https.html after r235925.

        Unreviewed test gardening.

        * platform/mac-wk2/imported/w3c/web-platform-tests/web-share/idlharness.https-expected.txt:

2018-09-13  Ms2ger  <Ms2ger@igalia.com>

        [GTK] Enable media-source/interfaces.html.
        https://bugs.webkit.org/show_bug.cgi?id=183613

        Unreviewed test gardening.

        The platform-neutral expectation applies to the GTK port as well.

        * platform/gtk/TestExpectations: Remove expectation.
        * platform/gtk/imported/w3c/web-platform-tests/media-source/interfaces-expected.txt: Removed.

2018-09-13  Youenn Fablet  <youenn@apple.com>

        Introduce RTCRtpSendParameters
        https://bugs.webkit.org/show_bug.cgi?id=189563

        Reviewed by Eric Carlson.

        * webrtc/video-getParameters-expected.txt:
        * webrtc/video-getParameters.html:

2018-09-12  Dean Jackson  <dino@grorg.org>

        Header parsing for experimental and internal debug features
        https://bugs.webkit.org/show_bug.cgi?id=189486
        <rdar://problem/44320618>

        Another test fix.

        * legacy-animation-engine/animations/duplicate-keys.html:

2018-09-12  Dean Jackson  <dino@grorg.org>

        Header parsing for experimental and internal debug features
        https://bugs.webkit.org/show_bug.cgi?id=189486
        <rdar://problem/44320618>

        And even more test fixes!

        * animations/stop-animation-on-suspend.html:
        * compositing/scrolling/touch-scroll-to-clip.html:

2018-09-12  Dean Jackson  <dino@grorg.org>

        Header parsing for experimental and internal debug features
        https://bugs.webkit.org/show_bug.cgi?id=189486
        <rdar://problem/44320618>

        More test fixes.

        * legacy-animation-engine/animations/animation-border-overflow.html:
        * legacy-animation-engine/animations/cross-fade-border-image-source.html:
        * legacy-animation-engine/animations/cross-fade-list-style-image.html:
        * legacy-animation-engine/animations/cross-fade-webkit-mask-box-image.html:
        * legacy-animation-engine/fast/shapes/shape-outside-floats/shape-outside-shape-image-threshold-animation.html:
        * legacy-animation-engine/transitions/extra-transition.html:
        * legacy-animation-engine/transitions/svg-transitions.html:
        * legacy-animation-engine/transitions/transition-in-delay-phase.html:
        * legacy-animation-engine/transitions/visited-link-color.html:

2018-09-12  Dean Jackson  <dino@apple.com>

        Header parsing for experimental and internal debug features
        https://bugs.webkit.org/show_bug.cgi?id=189486
        <rdar://problem/44320618>

        Fix failing tests by explicitly turning off Web Animations for CSS animations.
        Previously the test system was doing this, even though the feature was
        supposed to be enabled.

        * legacy-animation-engine/*.html:

2018-09-12  Alicia Boya García  <aboya@igalia.com>

        Unreviewed GTK test gardening.

        * TestExpectations:
        * platform/gtk/TestExpectations:

2018-09-11  Ryosuke Niwa  <rniwa@webkit.org>

        imported/w3c/web-platform-tests/shadow-dom/form-control-form-attribute.html hits assertion
        https://bugs.webkit.org/show_bug.cgi?id=189493

        Reviewed by Alex Christensen.

        Unskip the test now that it doesn't hit a debug assertion.

        * TestExpectations:

2018-09-12  Dan Bernstein  <mitz@apple.com>

        [Cocoa] Complete support for Paste as Quotation
        https://bugs.webkit.org/show_bug.cgi?id=189504

        Reviewed by Wenson Hsieh.

        Took a few existing tests of the Paste as Quotation behavior and modified them to use the
        new PasteAsQuotation command. The only difference in the results is that the blockquote has
        the "type" attribute set to "cite".

        * editing/pasteboard/4930986-1-paste-as-quotation-expected.txt: Added.
        * editing/pasteboard/4930986-1-paste-as-quotation.html: Added.
        * editing/pasteboard/4930986-2-paste-as-quotation-expected.txt: Added.
        * editing/pasteboard/4930986-2-paste-as-quotation.html: Added.
        * editing/pasteboard/4930986-3-paste-as-quotation-expected.txt: Added.
        * editing/pasteboard/4930986-3-paste-as-quotation.html: Added.

2018-09-12  Sihui Liu  <sihui_liu@apple.com>

        Move IndexedDB to Network Process
        https://bugs.webkit.org/show_bug.cgi?id=189415

        Reviewed by Geoffrey Garen.

        * storage/indexeddb/modern/opendatabase-after-storage-crash.html:

2018-09-11  Dean Jackson  <dino@apple.com>

        Header parsing for experimental and internal debug features
        https://bugs.webkit.org/show_bug.cgi?id=189486
        <rdar://problem/44320618>

        Reviewed by Tim Horton.

        New webkit-test-runner headers.

        * animations/3d/matrix-transform-type-animation.html:
        * animations/3d/replace-filling-transform.html:
        * animations/3d/transform-origin-vs-functions.html:
        * animations/3d/transform-perspective.html:
        * animations/additive-transform-animations.html:
        * animations/animation-border-overflow.html:
        * animations/animation-callback-timestamp.html:
        * animations/animation-controller-drt-api.html:
        * animations/animation-direction-alternate-reverse.html:
        * animations/animation-direction-reverse-fill-mode-hardware.html:
        * animations/animation-direction-reverse-hardware-opacity.html:
        * animations/animation-direction-reverse-hardware.html:
        * animations/animation-direction-reverse-non-hardware.html:
        * animations/animation-direction-reverse-timing-functions-hardware.html:
        * animations/animation-direction-reverse-timing-functions.html:
        * animations/animation-direction.html:
        * animations/animation-followed-by-transition.html:
        * animations/animation-hit-test-transform.html:
        * animations/animation-hit-test.html:
        * animations/animation-internals-api-multiple-keyframes.html:
        * animations/animation-internals-api.html:
        * animations/animation-offscreen-to-onscreen.html:
        * animations/animation-playstate-paused-style-resolution.html:
        * animations/big-rotation.html:
        * animations/change-completed-animation-transform.html:
        * animations/change-keyframes.html:
        * animations/combo-transform-rotate+scale.html:
        * animations/cross-fade-background-image.html:
        * animations/cross-fade-border-image-source.html:
        * animations/cross-fade-list-style-image.html:
        * animations/cross-fade-webkit-mask-box-image.html:
        * animations/duplicate-keys-expected.html:
        * animations/duplicate-keys.html:
        * animations/duplicated-keyframes-name.html:
        * animations/fill-forwards-end-state.html:
        * animations/fill-mode-forwards-zero-duration.html:
        * animations/fill-mode-removed.html:
        * animations/font-variations/font-stretch.html:
        * animations/font-variations/font-style.html:
        * animations/font-variations/font-variation-settings-order.html:
        * animations/font-variations/font-variation-settings-unlike.html:
        * animations/font-variations/font-variation-settings.html:
        * animations/font-variations/font-weight.html:
        * animations/generic-from-to.html:
        * animations/import.html:
        * animations/keyframe-multiple-timing-functions-transform.html:
        * animations/keyframe-timing-functions-transform.html:
        * animations/keyframe-timing-functions.html:
        * animations/keyframe-timing-functions2.html:
        * animations/keyframes-comma-separated.html:
        * animations/keyframes-dynamic.html:
        * animations/keyframes-infinite-iterations.html:
        * animations/keyframes-invalid-keys.html:
        * animations/keyframes-out-of-order.html:
        * animations/keyframes.html:
        * animations/leak-document-with-css-animation.html:
        * animations/lineheight-animation.html:
        * animations/longhand-timing-function.html:
        * animations/matrix-anim.html:
        * animations/missing-from-to-transforms.html:
        * animations/missing-from-to.html:
        * animations/missing-keyframe-properties-repeating.html:
        * animations/missing-keyframe-properties-timing-function.html:
        * animations/missing-keyframe-properties.html:
        * animations/missing-values-first-keyframe.html:
        * animations/missing-values-last-keyframe.html:
        * animations/multiple-animations-timing-function.html:
        * animations/multiple-animations.html:
        * animations/multiple-keyframes.html:
        * animations/negative-delay.html:
        * animations/pause-crash.html:
        * animations/play-state-start-paused.html:
        * animations/resources/animation-leak-iframe.html:
        * animations/simultaneous-start-left.html:
        * animations/simultaneous-start-transform.html:
        * animations/spring-function.html:
        * animations/stacking-context-unchanged-while-running.html:
        * animations/timing-functions.html:
        * animations/transition-and-animation-1.html:
        * animations/transition-and-animation-2.html:
        * animations/transition-and-animation-3.html:
        * animations/trigger-container-scroll-boundaries.html:
        * animations/trigger-container-scroll-empty.html:
        * animations/trigger-container-scroll-simple.html:
        * animations/unanimated-style.html:
        * animations/unprefixed-keyframes.html:
        * animations/width-using-ems.html:
        * compositing/animation/animated-composited-inside-hidden.html:
        * compositing/animation/computed-style-during-delay.html:
        * compositing/animation/layer-for-filling-animation.html:
        * compositing/backing/backface-visibility-flip.html:
        * compositing/backing/transform-transition-from-outside-view.html:
        * compositing/contents-scale/animating.html:
        * compositing/layer-creation/animation-overlap-with-children.html:
        * compositing/layer-creation/mismatched-rotated-transform-animation-overlap.html:
        * compositing/layer-creation/mismatched-rotated-transform-transition-overlap.html:
        * compositing/layer-creation/mismatched-transform-transition-overlap.html:
        * compositing/layer-creation/multiple-keyframes-animation-overlap.html:
        * compositing/layer-creation/overlap-animation-clipping.html:
        * compositing/layer-creation/overlap-animation-container.html:
        * compositing/layer-creation/overlap-animation.html:
        * compositing/layer-creation/scale-rotation-animation-overlap.html:
        * compositing/layer-creation/scale-rotation-transition-overlap.html:
        * compositing/layer-creation/translate-animation-overlap.html:
        * compositing/layer-creation/translate-scale-animation-overlap.html:
        * compositing/layer-creation/translate-scale-transition-overlap.html:
        * compositing/layer-creation/translate-transition-overlap.html:
        * compositing/overflow/overflow-positioning.html:
        * compositing/reflections/animation-inside-reflection.html:
        * compositing/reflections/nested-reflection-animated.html:
        * compositing/reflections/nested-reflection-transition.html:
        * compositing/transitions/scale-transition-no-start.html:
        * compositing/transitions/singular-scale-transition.html:
        * compositing/visible-rect/animated-from-none.html:
        * compositing/visible-rect/animated.html:
        * css3/calc/transitions-dependent.html:
        * css3/calc/transitions.html:
        * css3/filters/backdrop/animation.html:
        * css3/filters/composited-during-animation.html:
        * css3/filters/filter-animation-from-none-hw.html:
        * css3/filters/filter-animation-from-none-multi-hw.html:
        * css3/filters/filter-animation-from-none-multi.html:
        * css3/filters/filter-animation-from-none.html:
        * css3/filters/filter-animation-hw.html:
        * css3/filters/filter-animation-multi-hw.html:
        * css3/filters/filter-animation-multi.html:
        * css3/filters/filter-animation.html:
        * css3/masking/clip-path-animation.html:
        * fast/animation/css-animation-resuming-when-visible-with-style-change.html:
        * fast/animation/css-animation-resuming-when-visible.html:
        * fast/animation/css-animation-throttling-lowPowerMode.html:
        * fast/animation/height-auto-transition-computed-value.html:
        * fast/css-generated-content/pseudo-animation.html:
        * fast/css-generated-content/pseudo-transition.html:
        * fast/filter-image/filter-image-animation.html:
        * fast/shapes/shape-outside-floats/shape-outside-animation.html:
        * fast/shapes/shape-outside-floats/shape-outside-shape-image-threshold-animation.html:
        * fast/shapes/shape-outside-floats/shape-outside-shape-margin-animation.html:
        * http/wpt/css/css-animations/start-animation-001.html:
        * imported/blink/transitions/transition-not-interpolable.html:
        * imported/blink/transitions/unprefixed-transform.html:
        * platform/mac/TestExpectations:
        * transitions/background-position-transitions.html:
        * transitions/background-transitions.html:
        * transitions/blendmode-transitions.html:
        * transitions/border-radius-transition.html:
        * transitions/clip-path-path-transitions.html:
        * transitions/clip-path-transitions.html:
        * transitions/clip-transition.html:
        * transitions/color-transition-all.html:
        * transitions/color-transition-premultiplied.html:
        * transitions/color-transition-rounding.html:
        * transitions/cross-fade-background-image.html:
        * transitions/cross-fade-border-image.html:
        * transitions/cubic-bezier-overflow-color.html:
        * transitions/cubic-bezier-overflow-length.html:
        * transitions/cubic-bezier-overflow-shadow.html:
        * transitions/cubic-bezier-overflow-svg-length.html:
        * transitions/cubic-bezier-overflow-transform.html:
        * transitions/default-timing-function.html:
        * transitions/delay.html:
        * transitions/extra-transition.html:
        * transitions/flex-transitions.html:
        * transitions/font-family-during-transition.html:
        * transitions/frames-timing-function.html:
        * transitions/interrupted-all-transition.html:
        * transitions/longhand-vs-shorthand-initial.html:
        * transitions/mask-transitions.html:
        * transitions/min-max-width-height-transitions.html:
        * transitions/mismatched-shadow-styles.html:
        * transitions/mismatched-shadow-transitions.html:
        * transitions/mixed-type.html:
        * transitions/move-after-transition.html:
        * transitions/multiple-background-size-transitions.html:
        * transitions/multiple-background-transitions.html:
        * transitions/multiple-mask-transitions.html:
        * transitions/multiple-shadow-transitions.html:
        * transitions/negative-delay.html:
        * transitions/opacity-transition-zindex.html:
        * transitions/remove-transition-style.html:
        * transitions/shape-outside-transitions.html:
        * transitions/shorthand-border-transitions.html:
        * transitions/shorthand-transitions.html:
        * transitions/steps-timing-function.html:
        * transitions/svg-layout-transition.html:
        * transitions/svg-text-shadow-transition.html:
        * transitions/svg-transitions.html:
        * transitions/text-indent-transition.html:
        * transitions/transform-op-list-match.html:
        * transitions/transform-op-list-no-match.html:
        * transitions/transition-drt-api-delay.html:
        * transitions/transition-drt-api.html:
        * transitions/transition-end-event-rendering.html:
        * transitions/transition-hit-test-transform.html:
        * transitions/transition-hit-test.html:
        * transitions/transition-in-delay-phase.html:
        * transitions/transition-on-element-with-content.html:
        * transitions/transition-shorthand-delay.html:
        * transitions/transition-timing-function.html:
        * transitions/transition-to-from-auto.html:
        * transitions/transition-to-from-undefined.html:
        * transitions/visited-link-color.html:
        * transitions/zero-duration-in-list.html:
        * transitions/zero-duration-with-non-zero-delay-end.html:
        * transitions/zero-duration-with-non-zero-delay-start.html:
        * webanimations/accelerated-transition-by-removing-property.html:
        * webanimations/accessing-current-time-after-clearing-css-animation-effect.html:
        * webanimations/accessing-current-time-after-finished-css-animation-target-removal.html:
        * webanimations/css-animation-effect-target-change-and-animation-removal-crash.html:
        * webanimations/css-animations.html:
        * webanimations/empty-keyframes-crash.html:
        * webanimations/partly-accelerated-transition-by-removing-property.html:
        * webanimations/setting-css-animation-none-after-clearing-effect.html:
        * webanimations/setting-css-animation-timing-property-via-style-after-clearing-effect.html:

2018-09-12  Joseph Pecoraro  <pecoraro@apple.com>

        Web Inspector: fix test case failures in js-isLikelyStackTrace.html
        https://bugs.webkit.org/show_bug.cgi?id=180664

        Reviewed by Devin Rousso.

        * inspector/console/js-isLikelyStackTrace-expected.txt:
        * inspector/console/js-isLikelyStackTrace.html:
        Avoid Inspector Internal InjectedScript code in backtraces by producing
        the exception stacks in the page itself without going through inspector
        test evaluation code. This produces exception stacks more like a page.
        Also add some explicit tests for strings that we'd expect to be classified
        as exception stacks.

2018-09-12  Per Arne Vollan  <pvollan@apple.com>

        Layout Test fast/text/variations/ipc2.html is failing
        https://bugs.webkit.org/show_bug.cgi?id=189550

        Unreviewed test gardening.

        * platform/win/TestExpectations:

2018-09-11  Olivia Barnett  <obarnett@apple.com>

        Implement the Web Share API for mac
        https://bugs.webkit.org/show_bug.cgi?id=189443

        Reviewed by Tim Horton.

        * platform/mac-wk2/fast/dom/navigator-detached-no-crash-expected.txt: Added.
        * platform/mac-wk2/imported/w3c/web-platform-tests/web-share/idlharness.https-expected.txt: Added.
        * platform/mac-wk2/imported/w3c/web-platform-tests/web-share/share-empty.https-expected.txt: Added.
        * platform/mac-wk2/imported/w3c/web-platform-tests/web-share/share-securecontext.http-expected.txt: Added.
        * platform/mac-wk2/imported/w3c/web-platform-tests/web-share/share-url-invalid.https-expected.txt: Added.
        * platform/mac-wk2/imported/w3c/web-platform-tests/web-share/share-without-user-gesture.https-expected.txt: Added.
        Updated test expectations.

2018-09-11  Myles C. Maxfield  <mmaxfield@apple.com>

        Unreviewed test fix after r235910
        https://bugs.webkit.org/show_bug.cgi?id=188008

        * platform/mac-wk1/TestExpectations:

2018-09-11  James Savage  <james.savage@apple.com>

        Follow up to:
        Expose -apple-system-container-border color to internal web views.
        https://bugs.webkit.org/show_bug.cgi?id=189178.

        Reviewed by Timothy Hatcher.

        * platform/mac-highsierra/fast/css/apple-system-control-colors-expected.txt:
        Reset test expectations to go along with fix.

2018-09-07  Dean Jackson  <dino@apple.com>

        Add and expose Internal features from WebKit
        https://bugs.webkit.org/show_bug.cgi?id=189442
        <rdar://problem/44243404>

        Reviewed by Simon Fraser.

        Skip some tests that rely on an experimental feature that has
        moved to internal. A follow-up patch will allow WKTR to enable
        them on demand.

        * platform/mac/TestExpectations:

2018-09-11  Jer Noble  <jer.noble@apple.com>

        [MediaCapabilities] Implement MediaEngineConfigurationFactory registration
        https://bugs.webkit.org/show_bug.cgi?id=189438

        Reviewed by Eric Carlson.

        * media/mediacapabilities/mediacapabilities-types-expected.txt:

2018-09-08  Ryosuke Niwa  <rniwa@webkit.org>

        :first-child, :last-child, :nth-child, and :nth-of-type don't work on shadow root's children
        https://bugs.webkit.org/show_bug.cgi?id=166748
        <rdar://problem/29649177>

        Reviewed by Yusuke Suzuki.

        Added ref tests for matching positional pseudo classes on direct child of shadow roots
        during style resolutions and DOM API matching with C++ selector checker and selector compilers.

        Also added a test for invalidating these selectors.

        * fast/shadow-dom/nth-node-on-shadow-child-expected.html: Added.
        * fast/shadow-dom/nth-node-on-shadow-child-invalidation-expected.html: Added.
        * fast/shadow-dom/nth-node-on-shadow-child-invalidation.html: Added.
        * fast/shadow-dom/nth-node-on-shadow-child-no-jit-expected.html: Added.
        * fast/shadow-dom/nth-node-on-shadow-child-no-jit.html: Added.
        * fast/shadow-dom/nth-node-on-shadow-child.html: Added.

2018-09-11  Ryosuke Niwa  <rniwa@webkit.org>

        Updated the test expectation as this test also causes a crash in release builds.

        * TestExpectations:

2018-09-11  Wenson Hsieh  <wenson_hsieh@apple.com>

        [macOS] [WK2] Support changing foreground colors via color panel
        https://bugs.webkit.org/show_bug.cgi?id=189382
        <rdar://problem/44227311>

        Reviewed by Ryosuke Niwa.

        Adjust an existing layout test that applies a text color with alpha. Currently, this results in a font element
        being emitted with the `color` attribute, but this is incorrect, since the `color` attribute of a font element
        does not support "rgba(…)" values.

        Instead, split this into two cases: verify that setting the color to an opaque color (with alpha = 1) emits a
        font element with the correct `color` attribute, and fall back to using an inline style when the color is
        partially transparent.

        * editing/style/inline-style-container-expected.txt:
        * editing/style/inline-style-container.html:

2018-09-11  Justin Fan  <justin_fan@apple.com>

        Update webkit-webgl-test-harness.js for more details on WebGL 2 conformance tests part 3
        https://bugs.webkit.org/show_bug.cgi?id=189491

        Reviewed by Dean Jackson.

        Small update to the test-harness file used for the new 2.0.0 suite tests, as well as 
        expectation updates for the unskipped tests. 

        * webgl/2.0.0/conformance2/glsl3/array-as-return-value-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/array-assign-constructor-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/array-assign-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/array-complex-indexing-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/array-element-increment-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/array-equality-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/array-in-complex-expression-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/attrib-location-length-limits-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/bool-type-cast-bug-uint-ivec-uvec-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/compare-structs-containing-arrays-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/compound-assignment-type-combination-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/const-array-init-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/forbidden-operators-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/frag-depth-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/invalid-default-precision-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/invalid-invariant-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/loops-with-side-effects-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/misplaced-version-directive-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/no-attribute-vertex-shader-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/sampler-no-precision-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/sequence-operator-returns-non-constant-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/shader-linking-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/shader-with-1024-character-define-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/shader-with-1024-character-identifier.frag-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/shader-with-1025-character-define-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/shader-with-1025-character-identifier.frag-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/shader-with-invalid-characters-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/shader-with-mis-matching-uniform-block-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/short-circuiting-in-loop-condition-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/texture-offset-out-of-range-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/texture-offset-uniform-texture-coordinate-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/tricky-loop-conditions-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/unary-minus-operator-in-dynamic-loop-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/uniform-block-layout-match-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/uniform-block-layouts-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/uniform-location-length-limits-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/valid-invariant-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/vector-dynamic-indexing-expected.txt:
        * webgl/2.0.0/conformance2/glsl3/vector-dynamic-indexing-nv-driver-bug-expected.txt:
        * webgl/2.0.0/conformance2/renderbuffers/framebuffer-test-expected.txt:
        * webgl/2.0.0/conformance2/vertex_arrays/vertex-array-object-expected.txt:
        * webgl/2.0.0/resources/webkit-webgl-test-harness.js:
        (list):
        (window.webglTestHarness.reportResults):
        (window.webglTestHarness.notifyFinished):

2018-09-11  Myles C. Maxfield  <mmaxfield@apple.com>

        Crash under PlatformPopupMenuData::encode when interacting with a select menu that has variable fonts
        https://bugs.webkit.org/show_bug.cgi?id=188008

        Reviewed by Alex Christensen.

        * fast/text/variations/ipc2-expected.txt: Added.
        * fast/text/variations/ipc2.html: Added.

2018-09-11  Woodrow Wang  <woodrow_wang@apple.com>

        Add Web API Statistics Collection
        https://bugs.webkit.org/show_bug.cgi?id=187773
        <rdar://problem/44155162>

        Reviewed by Brent Fulgham.

        Added new tests and expectations for the web API statistics data collection.

        * TestExpectations:
        * http/tests/webAPIStatistics/canvas-read-and-write-data-collection-expected.txt: Added.
        * http/tests/webAPIStatistics/canvas-read-and-write-data-collection.html: Added.
        * http/tests/webAPIStatistics/font-load-data-collection-expected.txt: Added.
        * http/tests/webAPIStatistics/font-load-data-collection.html: Added.
        * http/tests/webAPIStatistics/navigator-functions-accessed-data-collection-expected.txt: Added.
        * http/tests/webAPIStatistics/navigator-functions-accessed-data-collection.html: Added.
        * http/tests/webAPIStatistics/screen-functions-accessed-data-collection-expected.txt: Added.
        * http/tests/webAPIStatistics/screen-functions-accessed-data-collection.html: Added.
        * platform/ios-wk2/TestExpectations:
        * platform/mac-wk2/TestExpectations:

2018-09-11  Frederic Wang  <fwang@igalia.com>

        Modify more tests to use document.scrollingElement to access viewport scroll properties
        https://bugs.webkit.org/show_bug.cgi?id=189495

        After r235806, it is wrong to use document.body to access scroll properties of the viewport
        in standard mode. New tests added since r227781 are modified to use
        document.scrollingElement instead and avoid flaky behavior. For consistency, we do the same
        for old tests in quirks mode. Note that WPT tests as well as the following tests using
        document.body on purpose are not modified:
        - fast/dom/Element/*
        - events/scroll-in-scaled-page-with-overflow-hidden.html
        - compositing/ios/overflow-scroll-update-overlap.html
        - body-stuck-with-dirty-bit-with-columns.html

        Reviewed by Antonio Gomes.

        * compositing/rtl/rtl-absolute-overflow-scrolled.html:
        * compositing/rtl/rtl-fixed-overflow-scrolled.html:
        * editing/caret/ios/absolute-caret-position-after-scroll.html:
        * editing/caret/ios/fixed-caret-position-after-scroll.html:
        * editing/execCommand/delete-no-scroll.html:
        * editing/input/resources/reveal-utilities.js:
        (performJumpAtTheEdgeTest):
        * editing/pasteboard/copy-crash.html:
        * editing/selection/ios/absolute-selection-after-scroll.html:
        * editing/selection/ios/fixed-selection-after-scroll.html:
        * fast/autoresize/autoresize-with-iframe-expected.txt:
        * fast/autoresize/autoresize-with-iframe.html:
        * fast/autoresize/basic-expected.txt:
        * fast/autoresize/basic.html:
        * fast/autoresize/turn-off-autoresize-expected.txt:
        * fast/autoresize/turn-off-autoresize.html:
        * fast/css/element-scrollByLines-scrollByPages-obsolete.html:
        * fast/dom/non-numeric-values-numeric-parameters-expected.txt:
        * fast/dom/non-numeric-values-numeric-parameters.html:
        * fast/dom/resources/check-scroll-position-onload.html:
        * fast/dom/scroll-position-for-new-loads.html:
        * fast/events/attempt-scroll-with-no-scrollbars.html:
        * fast/events/fire-scroll-event.html:
        * fast/events/frame-scroll-fake-mouse-move.html:
        * fast/events/ios/no-touch-events-when-stopping-momentum-scroll-in-mainframe-expected.txt:
        * fast/events/ios/no-touch-events-when-stopping-momentum-scroll-in-mainframe.html:
        * fast/events/ios/touch-events-during-scroll-deceleration-in-overflow.html:
        * fast/events/mouse-cursor-image-set.html:
        * fast/events/mouse-cursor-multiframecur.html:
        * fast/events/mouse-cursor.html:
        * fast/events/no-scroll-on-input-text-selection-expected.txt:
        * fast/events/no-scroll-on-input-text-selection.html:
        * fast/events/platform-wheelevent-paging-x-in-non-scrolling-page-expected.txt:
        * fast/events/platform-wheelevent-paging-x-in-non-scrolling-page.html:
        * fast/events/platform-wheelevent-paging-x-in-scrolling-page-expected.txt:
        * fast/events/platform-wheelevent-paging-x-in-scrolling-page.html:
        * fast/events/platform-wheelevent-paging-xy-in-scrolling-page-expected.txt:
        * fast/events/platform-wheelevent-paging-xy-in-scrolling-page.html:
        * fast/events/platform-wheelevent-paging-y-in-non-scrolling-page-expected.txt:
        * fast/events/platform-wheelevent-paging-y-in-non-scrolling-page.html:
        * fast/events/platform-wheelevent-paging-y-in-scrolling-page-expected.txt:
        * fast/events/platform-wheelevent-paging-y-in-scrolling-page.html:
        * fast/events/scale-and-scroll-body-expected.txt:
        * fast/events/scale-and-scroll-body.html:
        * fast/events/scale-and-scroll-window-expected.txt:
        * fast/events/scale-and-scroll-window.html:
        * fast/events/scroll-after-click-on-tab-index.html:
        * fast/events/scroll-to-anchor-in-overflow-hidden.html:
        * fast/events/touch/ios/touchmove-cancelable-after-touchstart-expected.txt:
        * fast/events/touch/ios/touchmove-cancelable-after-touchstart.html:
        * fast/forms/autofocus-opera-003.html:
        * fast/forms/input-readonly-autoscroll.html:
        * fast/forms/resources/common.js:
        (getAbsoluteRect):
        * fast/frames/iframe-scroll-page-up-down.html:
        * fast/frames/transparent-scrollbar.html:
        * fast/harness/results.html:
        * fast/html/empty-fragment-id-goto-top-expected.txt:
        * fast/html/empty-fragment-id-goto-top.html:
        * fast/images/imagemap-scroll.html:
        * fast/loader/scroll-position-restored-on-back-non-cached.html:
        * fast/loader/scroll-position-restored-on-back.html:
        * fast/multicol/body-stuck-with-dirty-bit-with-columns.html:
        * fast/repaint/resources/iframe-scroll-repaint-iframe.html:
        * fast/scrolling/ios/iframe-scroll-into-view.html:
        * fast/scrolling/latching/scroll-div-latched-div.html:
        * fast/scrolling/latching/scroll-div-latched-mainframe.html:
        * fast/scrolling/latching/scroll-div-with-nested-nonscrollable-iframe.html:
        * fast/scrolling/latching/scroll-iframe-fragment.html:
        * fast/scrolling/latching/scroll-iframe-latched-iframe.html:
        * fast/scrolling/latching/scroll-iframe-latched-mainframe.html:
        * fast/scrolling/latching/scroll-iframe-webkit1-latching-bug.html:
        * fast/scrolling/latching/scroll-select-bottom-test.html:
        * fast/scrolling/latching/scroll-select-latched-mainframe.html:
        * fast/scrolling/latching/scroll-select-latched-select.html:
        * fast/scrolling/rtl-point-in-iframe.html:
        * fast/spatial-navigation/snav-unit-overflow-and-scroll-in-direction.html:
        * fast/table/assert-when-visual-overflow-is-cleared.html:
        * fast/transforms/selection-bounds-in-transformed-view.html:
        * http/tests/navigation/anchor-frames-cross-origin-expected.txt:
        * http/tests/navigation/resources/frame-with-anchor-cross-origin.html:
        * jquery/resources/test/unit/offset.js:
        * legacy-animation-engine/fast/harness/results.html:
        * media/video-controls-to-not-scroll-page-on-load.html:
        * media/video-main-content-allow-then-scroll-expected.txt:
        * media/video-main-content-allow-then-scroll.html:
        * scrollbars/scrollbar-large-overflow-rectangle.html:
        * tiled-drawing/scrolling/fast-scroll-div-latched-div-with-handler.html:
        * tiled-drawing/scrolling/fast-scroll-div-latched-div.html:
        * tiled-drawing/scrolling/fast-scroll-div-latched-mainframe-with-handler.html:
        * tiled-drawing/scrolling/fast-scroll-iframe-latched-iframe-with-handler.html:
        * tiled-drawing/scrolling/fast-scroll-iframe-latched-iframe.html:
        * tiled-drawing/scrolling/fast-scroll-iframe-latched-mainframe-with-handler.html:
        * tiled-drawing/scrolling/fast-scroll-iframe-latched-select.html:
        * tiled-drawing/scrolling/fast-scroll-select-latched-mainframe-with-handler.html:
        * tiled-drawing/scrolling/fast-scroll-select-latched-mainframe.html:
        * tiled-drawing/scrolling/fast-scroll-select-latched-select-with-handler.html:
        * tiled-drawing/scrolling/fast-scroll-select-latched-select.html:
        * tiled-drawing/scrolling/latched-to-deleted-node.html:
        * tiled-drawing/scrolling/non-fast-region/top-content-inset-header.html:
        * tiled-drawing/scrolling/non-fast-region/top-content-inset.html:
        * tiled-drawing/scrolling/non-fast-region/wheel-event-plugin.html:
        * tiled-drawing/scrolling/root-overflow-with-mousewheel.html:
        * tiled-drawing/scrolling/scroll-snap/scroll-snap-mandatory-mainframe-horizontal.html:
        * tiled-drawing/scrolling/scroll-snap/scroll-snap-mandatory-mainframe-slow-horizontal.html:
        * tiled-drawing/scrolling/scroll-snap/scroll-snap-mandatory-mainframe-slow-vertical.html:
        * tiled-drawing/scrolling/scroll-snap/scroll-snap-mandatory-mainframe-vertical-then-horizontal.html:
        * tiled-drawing/scrolling/scroll-snap/scroll-snap-mandatory-mainframe-vertical.html:
        * tiled-drawing/scrolling/scroll-snap/scroll-snap-proximity-mainframe.html:

== Rolled over to ChangeLog-2018-09-11 ==
